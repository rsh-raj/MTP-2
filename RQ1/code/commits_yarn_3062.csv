Hash,Date,Author,Message,IsMerge
7cafa512a777048ce0b666080a24e80aae3d66a9,2024-05-25 03:05:50,Ma√´l Nison,Update signing.yml,False
2e769695b06d5a7068f88b18a1f805a52a5113d5,2024-05-25 03:03:18,Ma√´l Nison,Update signing.yml,False
4969908f33a0d2f60219a13ea401716b87c51764,2024-05-25 02:48:35,Ma√´l Nison,Update signing.yml,False
63a9e2277859bfc5aa74aab08db188f7d14008c1,2024-05-25 02:43:24,Ma√´l Nison,Attempt to fix build signing,False
158d96dce95313d9a00218302631cd263877d164,2022-09-06 00:24:11,Ma√´l Nison,Update PULL_REQUEST_TEMPLATE.md,False
fbcdb79a9878ef2d6e10e70c97adece2d94fa754,2022-09-06 00:17:12,Ma√´l Nison,Update README.md,False
6db39cf0ff684ce4e7de29669046afb8103fce3d,2022-01-30 21:59:10,Ma√´l Nison,Update README.md,False
728feb1414cec2d5cb8ecf8c061bc10f03b99def,2022-01-18 05:30:01,Ma√´l Nison,Create SECURITY.md,False
0a121f66ffcb4fc48ed6ea9e5ad928bd7cdc9b5f,2022-01-18 02:51:24,Ma√´l Nison,Updates the contribution guidelines,False
300c47c336be0e8dbc722ef451148a79d9a35486,2021-12-21 00:33:42,Ma√´l Nison,Update README.md,False
e3248e74cb5aac0a2d19d540c135c1549338422c,2021-12-17 18:04:03,Ma√´l Nison,Update README.md,False
ba0a33b7dc513d262bce505d9446d18a173a839c,2021-07-26 23:03:48,Ma√´l Nison,Update CHANGELOG.md,False
3119382885ea373d3c13d6a846de743eca8c914b,2021-01-03 19:55:06,Ma√´l Nison,Update set-dev-version.js,False
14bcd15a401e063c2130ab31568c80aeb914165f,2021-01-02 05:28:27,Ma√´l Nison,Update bug_report.md,False
977943ee814c9dbec9db45c15eb4831a3d7c8d83,2021-01-02 05:25:53,Ma√´l Nison,Update bug_report.md,False
a4708b29ac74df97bac45365cba4f1d62537ceb7,2020-09-28 19:11:27,Ma√´l Nison,Update CHANGELOG.md,False
f9ad995968850cd6771b068601d6a05146deb9c4,2020-09-28 18:38:53,Ma√´l Nison,Update CHANGELOG.md,False
d1227fb48b1dbf8b1944a1156029b3741dfdc5f1,2020-09-28 14:09:00,Ma√´l Nison,Update CHANGELOG.md,False
cbeead63564f1e1a9bdebbfec7f1fafde04f8c91,2020-08-27 22:24:54,Ma√´l Nison,Update CHANGELOG.md,False
ac21dbf16a5d2d5f4cb032f5da5313949db3fb71,2020-06-16 00:41:42,Ma√´l Nison,Bumps the OSX image,False
4df89bc4923a1d24e271d67843cfc19d7fed204a,2020-05-25 18:06:42,Bram Gotink,Spawn yarn .cjs files also using process.execPath (#8144),False
fc8489a52e27276787699ca7d69dd63be713ad4c,2020-05-25 18:06:25,Bram Gotink,"Store local yarn versions as .cjs files (#8145)

This improves the experience of working with yarn
in workspaces that are marked as ""type"": ""module""
in the package.json file.

This change has also been applied in yarn 2, see yarnpkg/berry#1354",False
17992a7da3e2371af3a264b585f8f9fbf6c511f9,2020-05-21 22:57:39,Kristoffer K,"fix(pack): sort files to produce identical output on Windows and Unix (#8142)

* fix(pack): always ignore yarnrc.yml file

* fix(pack): sort files before packing

* docs: changelog

* chore: ping ci

* Update CHANGELOG.md

Co-authored-by: Ma√´l Nison <nison.mael@gmail.com>",False
a75dbe36ca7f6d881d291a7231676d00d523bb39,2020-03-07 18:11:48,Ma√´l Nison,Fixes empty yarnrc files,False
62aec83ed84cc20cc6edbf17e4c518ee1dfd16af,2020-03-06 22:40:59,Ma√´l Nison,Update CHANGELOG.md,False
4bb38a1557d225632c7960d0037d551c43f8a327,2020-03-06 21:44:48,Ma√´l Nison,Prevents exiting the process on sigint through yarn-path (#7957),False
2cb2fc4805060986c6d5cdf6b7636d91b441c38f,2020-02-25 00:07:01,Ma√´l Nison,"Makes the CLI 2 forwarding stricter (#7931)

* Makes the CLI 2 forwarding stricter

* Fixes a test",False
989a74067420f370fa575a59624ed258334f90d1,2020-02-05 18:00:38,Ma√´l Nison,1.23.0-0,False
eee67d02ed09172d5360df0fa0b9c73e23449818,2020-02-05 18:00:34,Ma√´l Nison,v1.22.0,False
69716228e9ee3592eda9c8fa142d59fec511e97c,2020-01-31 22:21:24,Ma√´l Nison,Update CHANGELOG.md,False
0e7133ca28618513503b4e1d9063f1c18ea318e5,2020-01-31 22:17:02,Ma√´l Nison,Fixes arbitrary file write on fetch (#7831),False
fa613f3a71756a06a24d6c93c6b1fa7231eccd9a,2020-01-31 22:16:21,Nick Olinger,"handle failed policy set-version (#7848)

* handle failed policy set-version

* linting

* handle instances where caseless is not defined on response",False
f381c5f0ce85a96dc1cba8e4883819ee878c949f,2020-01-31 22:15:12,Ma√´l Nison,Implements set version (#7862),False
d2c3a485e0c52a0bf855611e7065ca533ecf4f2d,2020-01-27 14:46:16,Nick Olinger,"Configure bug report issue template (#7844)

* configure bug report issue template

* Update bug_report.yml

Co-authored-by: Christoph Nakazawa <cpojer@fb.com>",False
af4c2056a341b7d14ff14b43840f7cbc8a8d2d90,2020-01-22 15:11:15,Valery Bugakov,"Allow dots in bin names (#7811)

* Fixed bin regex

* Removed unsupported by Windows colon from bin regex

* Updated normalize-manifest tests

* Update fix.js

* Update actual.json

* Update normalize-manifest.js.snap

Co-authored-by: Ma√´l Nison <nison.mael@gmail.com>",False
1b334e687baa75c84440def211cca0636879d14d,2020-01-22 14:08:36,Jeff Valore,"fix(workspaces): Pass args following ""--"" when running workspace scripts (#7786)

* fix(workspaces): Passes arguments follwing ""--"" when running a workspace script

Passes arguments follwing `--` when running a workspace script (`yarn workspace pkg run command --
arg`). Previously these parameters were being trimmed off and ignored.

fixes #7776

* fix spelling in changelog

* fix(workspaces): fix(workspaces): Passes arguments follwing ""--"" when running a workspace script

Passes arguments follwing `--` when running a workspace script (`yarn workspace pkg run command --
arg`). Previously these parameters were being trimmed off and ignored.

fixes #7776

* don't ignore a parameter when running 'node' command",False
2c8e97eaf3047be92c99114b7f08aee044329a05,2020-01-22 14:04:54,Kevin Deisz,"Fix suggestions for CLI (#7808)

At some point the `scripts` object changes to be a map instead of an array, at which point the suggestions functionality broke. This commit includes the fix and a test to make sure it doesn't break again.",False
039bafd74b7b1a88a53a54f8fa6fa872615e90e7,2019-12-11 14:09:33,Ma√´l Nison,"Fixes bin overwrites (#7755)

* Fixes potential file overwrite at install time

* Fixes the regexp

* Adds warnings

* Fixes overzealous removals

* Fixes test

* Adds tests",False
ac04da8d94a431d6e37257598a4dacd9490f8b56,2019-12-01 21:40:32,Mael Nison,1.22.0-0,False
604b4c89515830271910c0981cb5a7c008d35b70,2019-12-01 21:40:27,Mael Nison,v1.21.0,False
e90518daf90b4935567ecee1902515ea3084d4f1,2019-12-01 21:40:13,Mael Nison,v1.20.0,False
d23f5d260b33883286437558e2f7e3c8bc96b5b1,2019-12-01 21:00:38,Orta,"Adds a note of the workspace name when running commands in all workspaces (#7722)

* Adds a note of the workspace name when running commands in all workspaces

* Update CHANGELOG.md",False
11872ca387b144f379afe21005be709d474f1113,2019-12-01 20:39:39,Ma√´l Nison,"Adds support for --install in yarn init (#7723)

* Adds support for --install in yarn init

* Updates the CHANGELOG",False
98d51d88310eede3d6394a20d5a11dbb258cb54b,2019-11-22 17:15:25,Ma√´l Nison,"Prevents cache removal when running an install (#7699)

* Prevents cache removal when running an install

* Removes .bin as usual

* Update CHANGELOG.md",False
c43f66d14b1baedc7f50055dd7c997b32be0f8b1,2019-11-22 16:56:47,Daniel Tschinder,"Correctly install workspace child deps when workspace child not symlinked to root  (#7289)

* Test for conflict between pkg versions in root and workspace child

This test creates the scenario where the child is not symlinked into the root node_modules folder, because
the root installs a different version of the workspace child from the registry.

* fix(hoister): Correctly change path for ws child dependencies when child not hoisted

* Update CHANGELOG.md

* Better comment",False
1ec3190a4c1077f14fa7e9689ca06ad394be131f,2019-11-07 16:09:42,Sander Verweij,"make running with Plug'n Play possible on node 13 (#7650)

* ci(circleci): prevent timeout on circle-ci macos node10 build

The circle ci job for macOS on node 10 currently fails because it takes too long
(both PR's #7649 and #7650 don't green because of that). A big chunk of the time
is taken by updating homebrew - which in this macOS (the one connected to xcode 9
=> macOS 10.12) does not contain node 10 by default.

This change:
- sets the required xcode version to 11.0 -> this gets us a more up to date macOS
  version (except for node 6, which isn't available in the homebrew associated
  with xcode 11)
- removes the brew update from the macOS node 10 job

* fix(generate-pnp-map-api.tpl.js): make running with Plug'n Play possible on node 13

On node 13 Module._findPath (which the setup() of this module redefines) also gets
called with null for the path parameter (by lib/internal/bootstrap/pre_execution.js
in the (new) function resolveMainPath).

This fix ensures the patched _findPath also handles that situation.

* ci(azure-pipelines): add node 13 (and 12) to the azure-pipeline matrix

#7642

* ci(circleci): add node 13 (and 12) to the build matrix (linux)

* docs(CHANGELOG.md): adds PR #7650 to the change log",False
730d3906f2d3a3f30b4e93fbf8fa2c1d3a44882c,2019-11-07 16:09:18,Sander Verweij,"ci(circleci): prevent timeout on circle-ci macos node10 build (#7651)

The circle ci job for macOS on node 10 currently fails because it takes too long
(both PR's #7649 and #7650 don't green because of that). A big chunk of the time
is taken by updating homebrew - which in this macOS (the one connected to xcode 9
=> macOS 10.12) does not contain node 10 by default.

This change:
- sets the required xcode version to 11.0 -> this gets us a more up to date macOS
  version (except for node 6, which isn't available in the homebrew associated
  with xcode 11)
- removes the brew update from the macOS node 10 job",False
79a96e31321e58e650e5e879bef52d57dda746af,2019-10-31 04:13:24,Jeff Valore,"fix(run): add cwd/node_modules/.bin to run command search path (#7151)

* fix(run): change run command to check cwd/node_modules/.bin for commands. Fixes run in workspaces.

This fixes a bug that was introduced in #6850 where the bin path was being built only from
`config.lockfileFolder`. However in workspaces, bins may not be hoisted to the workspace root,
causing bins to not be found. This change adds `config.cwd` to the bin search path, so the `yarn
run` command will look in a workspace package's node_modules, as well as the workspace root.

fixes #7126

* modify chagelog",False
6e5b0ea0dc15bef7d2abd67a46adbe7efe533404,2019-10-08 17:07:10,Ma√´l Nison,Update CHANGELOG.md,False
8a8ce2df284264e00425e3cf32ecca22942a88d6,2019-10-07 20:49:11,mbpreble,"Resolves folder options (i.e. --modules-folder) relative to cwd (#7074) (#7607)

* Prevents potentially surprising behavior and data loss

* Includes integration test verifying that user-reported data loss scenario does not occur",False
c040e7918dca811e0d4b54a949fd6f3be403a777,2019-10-03 23:34:05,Michael,"Fix cache integrity check false-positives across multiple registries (#7595)

* Add tests for cache integrity check

* Always store sha1 hash as part of cacheIntegrity

This prevents broken installs as a result of a package being resolved
from a registry that does not return an sha512 integrity field, such as
an internal npm registry, where the package was previously cached from
a registry that did return a sha512 integrity hash.

* Improve cache integrity check error messages",False
e7cc86bf1c11e44b4336278269d5d8fc7b4f824f,2019-10-02 20:26:59,Ma√´l Nison,"Enforces sha512 in the cache (#7591)

* Always store sha512 in the cache

* Bumps the cache

* Fixes error reporting",False
511982802ce162fc74f4f15d1463ba6cb85fd594,2019-10-02 20:24:30,Ma√´l Nison,"Fixes Node forwarding w/ yarn-path (#7592)

* Fixes Node forwarding w/ yarn-path

* Fixes spawning",False
25d5526c8995443b03c113c44f9c8e9a79c2c074,2019-09-30 17:01:01,Ma√´l Nison,"Use different folders with integrity or without (#7586)

* Uses a different folder for pkgs with integrity or without

* Fixes for when integrity is an object instance

* Stores whether integrity exists or not

* Updates a lockfile to reference the integrity

* Fixes resolver check

* Fixes cache pattern",False
809fb48927a8bcb89fd4853acf1846a51afa642d,2019-09-28 22:15:18,Ma√´l Nison,Update CHANGELOG.md,False
a890340a9c7ce4c56990be1cb98de7145a1227db,2019-09-28 22:14:11,Ma√´l Nison,Update CHANGELOG.md,False
7580943cee327f5a1eec56786d2759e96fa763b5,2019-09-28 21:03:29,Ma√´l Nison,1.20.0-0,False
c3d256fcf641de4fe8d4d6034a2b046fafae30c0,2019-09-28 21:03:25,Ma√´l Nison,v1.19.0,False
34efd23305b9da701aae96f29302b71a5a0ea2e6,2019-09-28 20:45:00,Ma√´l Nison,Adds a check for the hash too,False
fa746451eeae79ec35e87bbec14576d6831984fe,2019-09-28 19:36:25,Ma√´l Nison,"Validation fix (#7582)

* Validates both checksum and integrity

* Adds a test

* Revert ""Fixes the problem another way""

This reverts commit 29a8c583179ec77b5fdcdd3ce348bbe08ecd2abf.

* Revert ""Fixes tests""

This reverts commit 9322e76fba6a83696ec7104c1af3111ab58a0fff.

* Revert ""Fixes flow linting""

This reverts commit 431a9e96405f43a60b3ffa3034921ec8d321a403.

* Fixes flow

* Back to v5 we are",False
29a8c583179ec77b5fdcdd3ce348bbe08ecd2abf,2019-09-28 05:31:18,Ma√´l Nison,Fixes the problem another way,False
9322e76fba6a83696ec7104c1af3111ab58a0fff,2019-09-28 03:40:07,Ma√´l Nison,Fixes tests,False
431a9e96405f43a60b3ffa3034921ec8d321a403,2019-09-28 03:08:59,Ma√´l Nison,Fixes flow linting,False
b29af010c6be5a6a981c5feb6cfca7d31254d529,2019-09-23 17:44:30,Ma√´l Nison,Update CHANGELOG.md,False
061a3d81d410a6803220df3dcef20effee7852bb,2019-09-23 17:44:18,Ma√´l Nison,Update CHANGELOG.md,False
a14fc439ec02445aa59fa2e4a7e382061a424be5,2019-09-23 17:43:35,Ma√´l Nison,1.19.0-0,False
c08d0e31d769bf18680f86f0ffd8efcc56fb4c61,2019-09-23 17:43:32,Ma√´l Nison,v1.18.0,False
fea852b48db739d846a8f8414db576e4685b8af3,2019-09-18 17:43:16,Ma√´l Nison,Disables Azure / Node8+Windows for now,False
1d90e07fc97d615468f2c82d35fcdba5b59998f6,2019-09-18 17:12:14,Ma√´l Nison,Fixes link self (#7558),False
53783b50efb7b070eb5b2ab8777c30cb8f8a9a9f,2019-09-18 17:07:02,Ma√´l Nison,"Adds an undocumented run hook (#7557)

* Adds an undocumented run hook

* Fixes lint",False
7496345f5436b08033f003ec0b847de7e27a326c,2019-09-18 17:06:50,Ma√´l Nison,"Adds a message when people use PnP (#7556)

* Adds a message when people use PnP

* Update en.js",False
1bdb15afe6dc2a727e8f81096306ecd3770feff4,2019-09-18 16:08:55,Nick McCurdy,"Preserve linked packages in create command (#7543)

* Preserve linked packages in create command

* Update changelog

* Warn when using linked package

* Update CHANGELOG.md

* Update link-resolver.js",False
53d8004229f543f342833310d5af63a4b6e59c8a,2019-09-01 20:08:51,Ma√´l Nison,"Fixes link:. (#7512)

* Fixes link:.

* Update CHANGELOG.md",False
b8af7e05acf965e612f2f8fafa240aa9bd069a41,2019-09-01 20:07:12,xv2,"Fixes offline mirror filename calculation for scoped packages URLs in Verdaccio (private npm repository) (#7499)

* Fixes offline mirror filename calculation for scoped packages URLs in Verdaccio (private npm repository)

* Fixed test

* Update CHANGELOG.md",False
1a57117853afa2901feb541f6db7f064d9c0f8b9,2019-08-16 19:32:06,thomas,"Update fixture certificates to prevent false negatives during testing (#7457)

* Update fixture certificates to prevent false negatives during testing

* Adding #7457 to CHANGELOG.md",False
7575b1f144450d7c6685482d011ea04ab547e07f,2019-08-16 19:31:10,herr kaste,"Do not log `err.message` of `ProcessTermError`s if silent (#7472)

* Do not log `err.message` of `ProcessTermError`s if silent

Fixes #5359

* Ensure `YARN_SILENT=0` by default in the integration tests",False
8deceab891bb2c7f082e81084643bec6bca77bfa,2019-08-16 19:27:26,Jasper De Moor,"Add Parcel to the engines ignore list (#7473)

* add parcel to ignore

* add trailing comma",False
ee29a5fd6a9763b4befa3d3f28671e40f6579b2f,2019-07-24 18:16:11,John Firebaugh,"Run the prepare script of git dependencies even if NODE_ENV=production (#7398)

* Run the prepare script of git dependencies even if NODE_ENV=production

When installing a git dependency with the `NODE_ENV` environment variable set to `production`, yarn did not run the `prepare` lifecycle script, because `config.production` would default to true, and then `wrapLifecycle` would skip `prepare`:

https://github.com/yarnpkg/yarn/blob/b6569538de69e0ccd201f0a33f1f5b52f2656f5b/src/cli/commands/install.js#L1202-L1207

This is contrary to npm's behavior and the intent of `GitFetcher#fetchFromInstallAndPack`, which is to install the dependency with its devDependencies and run all the relevant lifecycle scripts (excluding `prepublish`), regardless of the configuration or environment settings of the parent install command.

* Update CHANGELOG.md

* Update CHANGELOG.md",False
84e01a97781f903f326e6ca5d7f48935cea74142,2019-07-24 18:14:04,Hampus T√•gerud,"Always run postversion lifecycle method (#7154)

* Always run postversion lifecycle method

Runs postversion even if no git commit is made.

* Update CHANGELOG.md

* Improve logic, add tests, update CHANGELOG.md

* Update CHANGELOG.md

* Update CHANGELOG.md",False
a3b1294c22043cd8868b6a1decb77b673e764efd,2019-07-23 23:04:36,Eric Amodio,Adds vscode keys - since they can be large (#5420) (#7419),False
2f08a7405cc3f6fe47c30293050bb0ac94850932,2019-07-12 19:49:53,Ma√´l Nison,"Forces using https for the regular registries (#7393)

* Forces using https for the regular registries

* Fixes linting

* Updates the changelog

* Adds npmjs.com to the list",False
49332faf9d22f5c4ae33d4d3343895e189b3fac3,2019-07-03 20:14:17,Mikhail Bodrov,Optimize slice last sharp tail (#7353),False
c31e4a95369efba02965297568028859134c1688,2019-07-02 16:14:06,Zixuan Liu,Add registry paramter to revokedToken request (#7358),False
01713684fa5cc6b6d6143ac0bbea2c4f889d5fd8,2019-06-21 14:47:49,Ma√´l Nison,Gives a higher precedence to yarnrc.yml than yarnrc,False
11ec1bc57a5cc81f9b9ba755041d0110e3771b9d,2019-06-20 22:24:30,Ma√´l Nison,"Adds basic support for .yamlrc.yml (yarnPath only, v2) (#7350)",False
3a1fc9c0f719cd9c7aac7a4f7530252f4a1d76e7,2019-06-15 00:08:47,Ma√´l Nison,1.18.0-0,False
ddceddc5a3437fb5eece710293162986ce5cc4d7,2019-06-15 00:08:42,Ma√´l Nison,v1.17.0,False
f9aaff00c1662b8b95603a1cd1628540e8eed20c,2019-06-15 00:07:43,Ma√´l Nison,Update CHANGELOG.md,False
8a60e21258de4fa870740f71315b7aef27dbb153,2019-06-14 02:09:28,Daniel Seijo,"feat(version): Allow for prereleases flags and prerelease identifiers (#7336)

* Complete semver versioning flags with prereleases and preid

* Update CHANGELOG",False
2f5c937d12fd8ea64356c205939c4c5ccd4f0845,2019-06-13 20:43:29,Ma√´l Nison,"Prevents the link: protocol from crashing when no package.json is used (#7337)

* Stops reading the manifest for link: dependencies

* Prevents crashing when the package.json doesnt exist",False
40546bf112b4e6b631fb52378c86ab4827e9849a,2019-06-13 20:37:13,David Sanders,"fix(add, upgrade): fix audit flag (#7326)

* fix(add, upgrade): fix audit flag

* Update CHANGELOG.md",False
c88c64f0d72ee410534746db40a500a2f65bef51,2019-06-13 20:36:31,Zixuan Liu,Fix login for `yarn publish` (#7312),False
6b7ee8c7ad42c4eaf2cd741fbdcd80cd32b2b57d,2019-06-13 20:01:58,Francis Crick,"fix(config): Adds support for --offline flag to global add command (#7330)

* fix(config): Adds support for --offline flag to global add command

* Update CHANGELOG.md

* lower line lengths below 120",False
b6569538de69e0ccd201f0a33f1f5b52f2656f5b,2019-06-06 22:08:02,kaylie-alexa,"fix(install): Inherit optional property for resolutions (#7273)

6040",False
1089b39c17cd7054a549cf640deb9155f7d964d6,2019-05-24 12:28:47,Ma√´l Nison,"Adds support for parsing Yaml files (#7300)

* Adds support for parsing Yaml files

* Adds a test

* Removes debug

* Fixes test

* Update CHANGELOG.md",False
ee7b6c6a5b552f4d6ef66dfe95db33bef71511cf,2019-04-29 23:36:52,Ma√´l Nison,Update CHANGELOG.md,False
550fb223e0204a7ce494075aa9c36ad69036c0d0,2019-04-29 23:33:47,Ma√´l Nison,1.17.0-0,False
60150ffeb00dcb4cb0d3f9ef775fc2c2d543b10c,2019-04-29 23:33:40,Ma√´l Nison,v1.16.0,False
5c18247c12e096d04e75aadddf4b483050c8cbb7,2019-04-29 19:17:16,Benjie Gillam,Fix minor typo in dependencies test (#7214),False
5531858d23e1a3b9966f6f2665246389bcbcba83,2019-04-20 22:55:46,Jon Janzen,Add installationMethod for portage (Gentoo Linux) (#7123),False
d4805c302d9a02fd2a52cb4e02f9092b4689fbb1,2019-04-19 22:19:28,Abhishek Reddy,"Handle EPIPE on stdout gracefully (#7194)

* Handle EPIPE on stdout gracefully

* Update CHANGELOG.md",False
d6677533d47189e4ed3033ba93237d8be745d20f,2019-04-19 22:12:07,Ma√´l Nison,"Tweaks the yarnrc syntax parser (#7210)

* Tweaks the yarnrc syntax parser

* Fixes the test",False
4ad88165fdf607a70c75db556a3af95864b2189a,2019-04-16 22:10:50,jmillikin-stripe,"Support NPM Enterprise URLs in offline mirror filename calculation. (#7200)

* Support NPM Enterprise URLs in offline mirror filename calculation.

* Update CHANGELOG.md

* Update CHANGELOG.md",False
8a671f10c86b66baa74ef6f4cd24d4ca8ee5067a,2019-04-08 16:00:33,VincentBailly,"Retry on connection timeout (#7163)

* publish lib and retry on timeout

* update changlog file

* update changelog with PR link",False
b409261b76f3a6506d7dc9e627a49eb02ef170c5,2019-03-24 17:13:15,Eli Perelman,"Add environment variables to spawned create process (#7127)

* Add environment variables to spawned create process

* Add changelog for PR #7127

* Update CHANGELOG.md",False
697a254ee794085c77f82f14f4a515d05e81e294,2019-03-19 16:28:27,Eloy Dur√°n,"feat(run): Add engines check before executing scripts. (#7021)

Closes #7013

**Summary**

A more elaborate description is available in #7013. In short, ensuring scripts are ran in the expected environment can deter hard to diagnose bugs.

**Test plan**

Given a `node` engine requirement that doesn‚Äôt match the current environment:

```
$ cat package.json | grep -i1 '""node""'
  ""engines"": {
    ""node"": ""^10.13.0""
  },

$ nvm use 8
Now using node v8.12.0 (npm v6.4.1)
```

A script invocation will fail as follows:

```
$ node ~/Code/JavaScript/yarn/lib/cli/index.js run relay
yarn run v1.15.0-0
error @artsy/reaction@12.1.10: The engine ""node"" is incompatible with this module. Expected version ""^10.13.0"". Got ""8.12.0""
error Commands cannot run with an incompatible environment.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
```

If need be, this can be overridden with the `--ignore-engines` flag:

```
$ node ~/Code/JavaScript/yarn/lib/cli/index.js run --ignore-engines relay
yarn run v1.15.0-0
$ relay-compiler --src ./src --schema data/schema.graphql --language typescript --artifactDirectory ./src/__generated__ --exclude '**/node_modules/**,**/__mocks__/**,**/__generated__/**'
‚ú®  Done in 2.22s.
```

Or, of course, making the environment match the requirements:

```
$ nvm use 10.13
Now using node v10.13.0 (npm v6.4.1)

$ node ~/Code/JavaScript/yarn/lib/cli/index.js run relay
yarn run v1.15.0-0
$ relay-compiler --src ./src --schema data/schema.graphql --language typescript --artifactDirectory ./src/__generated__ --exclude '**/node_modules/**,**/__mocks__/**,**/__generated__/**'
‚ú®  Done in 1.91s.
```",False
bba4dce9018e4fa4ee38b78a5270e72187740d8b,2019-03-18 17:09:29,David Refoua,"feat(cli) Allow Terminus terminal to display emojis (#7093)

### Summary
add Terminus to the list of supported terminal emulators for emoji

### Motivation
Since [Terminus](https://eugeny.github.io/terminus/) is also a xterm.js terminal emulator (same as [Hyper](https://hyper.is/)), and recently [it sets](https://github.com/Eugeny/terminus/commit/e246e22bfd51b1ee5e9e97a391ba6f51230070bb) `TERM_PROGRAM` to `Terminus` (like how Hyper sets it to `Hyper`), it is proper for Yarn to display Emojis also on Terminus.",False
298e0ea6cea3ab8a610cabf28de3fdf8e7fa8d1f,2019-03-18 03:26:42,Rog√©rio Vicente,"feat(audit): add filtering by severity level (#6716)

**Summary**

Adds a `--level` flag to the `audit` command allowing to filter the audit output by severity greater than or equal to the provided value which can be (info, low, moderate, high or critical).

fixes #6668",False
6dbedcc40052cee6143408062bec0a5104f4744c,2019-03-16 06:19:11,Tom Milligan,"feat(audit): select which dependency groups to audit (#6724)

**Summary**

Closes #6632.

Currently `yarn audit` shows vulnerabilities for production, development and optional dependencies. It would be useful to only audit production dependencies, or select which groups of dependencies to audit.",False
5a53ec86fbdf277ed2e9035f1c98895226835888,2019-03-15 17:45:51,Ma√´l Nison,Update CHANGELOG.md,False
675ec42c5ea99a3cd6514da661c5a6d81976594e,2019-03-15 16:45:26,Ma√´l Nison,Fixes the Windows tests (#7116),False
aff9d63f508bb9e791ee056bfa190fc8b33107cd,2019-03-14 19:12:55,briman0094,"Disable creation of cmdShim PowerShell shims because they don't work and cause problems (#6954)

* Disable creation of cmdShim PowerShell shims because they don't work and cause problems

* Fix PowerShell test on non-Windows platforms

* Fix lint error

* Update CHANGELOG.md",False
bb69888ff21cbff94e9d8583df025ea21e32a3f4,2019-03-14 17:42:30,Zhigang Fang,"fix(run): Preserve none zero exit code (#6926)

* fix: preserve EXIT_CODE on close

* test: - add test fixture

* test: Move test to index folder

* fix: Check for ProcessTermError

* fix: Passing EXIT_CODE along when converting ProcessTermError

* test: Use integration to to custom exit code

* fix: flow type check

* doc: Add Changelog

* refactor: Throw new ProcessTermError instead of using code differently

* Update CHANGELOG.md",False
d4a46a5a7fe85084f7ce9dd71249ffc9837dbe9f,2019-03-14 07:37:55,Adam Richardson,"Correctly label packages as dev-only in yarn audit (#6970)

* Test dev vs. prod dependencies in yarn audit

* Implement getTransitiveDevDependencies utility function

* Use getTransitiveDevDependencies in yarn audit

* Fix up yarn audit tests

* Update CHANGELOG.md",False
9437e5155cb7992650949b6a81652534245e8ac3,2019-03-08 23:19:51,Ma√´l Nison,Merge branch 'master' of github.com:yarnpkg/yarn,True
2ea02c3f45244c57821b706a6b615b0ff28dcd54,2019-03-08 20:57:06,Ma√´l Nison,Update CHANGELOG.md,False
2366e05c7d89d3516e423ea7653703b16ca62f19,2019-03-08 20:56:34,Ma√´l Nison,1.16.0-0,False
15292e4de250897ebfd19c31c170fba271bd23e4,2019-03-08 20:56:28,Ma√´l Nison,v1.15.0,False
bb9741af4d1fe00adb15e4a7596c7a3472d0bda3,2019-03-08 20:54:29,Jason Grout,"Clean up node path prepending (#7057)

* Delete unused scriptsPrependNodePath config option.

#6382 (e905f7479ef8ea5ecbc5ca115f0287be709c7d58) made this option obsolete.

* Do not prepend the node exec path.

#6382 (e905f7479ef8ea5ecbc5ca115f0287be709c7d58) made this unnecessary.

* Update CHANGELOG.md

* Clarify in changelog the --scripts-prepend-node-path is removed because it is obsolete

The current behavior after this PR is not to make `--scripts-prepend-node-path` always on, but to have a better default behavior than the option provided.",False
379ed0aad74392fb56e53f01af47dcbc37427af5,2019-03-08 20:52:49,Jakob Krigovsky,"Fix link to security advisory (#7091)

The Node Security Platform (nodesecurity.io) was acquired by npm in April 2018. https://nodesecurity.io/advisories is no longer available nowadays, however, all security advisories are available on https://www.npmjs.com/advisories.",False
b66549dfe3c501243523eadd23e14170fda0d91b,2019-03-05 22:54:52,Nicholas Boll,"fix: handle npm prefix config environment variables (#7070)

* fix: handle npm prefix config environment variables
Fixes #4682

* Updated changelog

* Implemented PR feedback

* Fixed logic error",False
82d5891f3726abf275c9753b97bdcc54e85637f3,2019-03-05 20:02:15,shilcare,"fix(upgrade) Fix basicSemverOperatorRegex (#7080)

**Summary**

Fix bug #7079 of `basicSemverOperatorRegex`. It doesn't match the range operator correctly if the dependency range is specified with `>=`. For example, when running `yarn upgrade --latest`, if a dependency is specified with `>=`, the matched result will be `>`, which is not correct. 

This is because the regular expression engine looks for alternations one-by-one. We can fix it by putting `>=` before `>`.

fixes #7079",False
aebe9e9601a077d13401bf161f756f0a767a2adc,2019-02-28 22:29:22,Jeff Valore,"fix(modules-folder): Fix --modules-folder handling in several places. (#6850)

* fix(modules-folder): Fix --modules-folder handling in several places.

Fixes a few issues with the `--modules-folder` parameter.

The extraneous file check would always
also clean files from `node_modules`. This no longer happens, only the `--modules-folder` location
is checked.

The `yarn check` command used to always only check `node_modules`. Now it will check the
`--modules-folder` location instead.

When running a command or executing a lifecycle script, yarn
would build a `PATH` that included `node_modules/.bin` first, then add the `--modules-folder`'s
`/.bin` after, which would have led to the wrong binaries being executed.

fixes #5419 and fixes #6847

* update changelog

* fix --moduls-folder handling in bin and run commands",False
9eedb6510fce4218203138303f843b37f1b1a1d2,2019-02-28 22:28:09,Jeff Valore,"refactor(config): Remove rootModuleFolders variable which was not used (#6846)

* refactor(config): Remove rootModuleFolders variable which was not used anywhere.

* update changelog for PR #6846",False
9fae32c89a000a098f5bc61afad55b445995cf64,2019-02-28 22:25:46,Hsiao-nan Cheung,"fix(config): allow global-folder to be set in .yarnrc (#7056)

* fix(config): allow global-folder to be set in .yarnrc

* Update CHANGELOG.md",False
595006a8bb5a8eee92f3c4d021fd7ebf9d5d1991,2019-02-28 22:19:54,Olle Lauri Bostr√∂m,"feat: allow cancelling yarn version with ctrl-c or empty version number (#7064)

* feat: allow cancelling yarn version v1.12.3
info Current version: 1.15.0-0
Done in 0.06s. with ctrl-c or empty version number

* update changelog

* Update CHANGELOG.md",False
ea81393292003e447b981b2fba36cb6804703b9a,2019-02-23 01:43:58,Ma√´l Nison,"Implements support for switching to berry in the cli (#7041)

* Implements support for switching to berry in the cli

* Update CHANGELOG.md

* Update policies.js",False
c837fef2eb4cf8276ba914bd39f84470f1f640fe,2019-02-18 19:37:26,Jeff Valore,"fix(upgrade): Fix yarn upgrade when using --scope with exotic deps (#7017)

* fix(upgrade): Fix yarn upgrade when using --scope with exotic dependencies.

Exotic dependencies (github urls for example) were not being unlocked from the lockfile when running
`yarn upgrade --scope @whatever/` which was resulting in dependencies not being upgraded. This was
due to trying to find the dep in the lockfile just by it's url instead of in `name@url` format.

fixes #7016

* updated changelog",False
0e380a19cbee8aea15f025b09794e29a124c6631,2019-02-07 18:34:16,John Watson,"Include key info for ""expected hoisted"" invariant (#7009)",False
dac22ddfea657946f5c2943cab69bff7dae63ebc,2019-02-06 00:43:02,Daniel Ruf,"refactor: remove unnecessary checks (#6955)

* refactor: remove unnecessary checks

* codestyle: remove unnecessary braces

* refactor: revert change in Git resolver",False
7170bbf5e9a09ebe0ca6bd105768dfae5f503b0c,2019-02-06 00:39:54,Christoph Werner,"fix: drive letter casing for win32 pnp (#7007)

* fix: drive letter casing for win32 pnp

* docs: changelog",False
19ec98c5dd3f6edca0ae848893d19edd74e9cae8,2019-02-03 00:16:19,Eelco Lempsink,"Don‚Äôt call `release` with an exit code (#6981)

* Don‚Äôt call `release` with an exit code

The `release` signature is incorrect, because its first argument is a callback function that will be called when the release is done. By attaching it to the `run()` promise however, release will be called with the exit code as argument. When the exit code is `1`, the code will crash. 

This is very rare, but we‚Äôre seeing this when calling yarn from another node process (and possibly killing it too soon):
```
<redacted>/node_modules/yarn/lib/cli.js:78119
         callback();
         ^
 TypeError: callback is not a function
     at options.fs.rmdir (<redacted>/node_modules/yarn/lib/cli.js:78119:9)
     at FSReqWrap.oncomplete (fs.js:141:20)
```

* Only resolve after releasing is done, improve type of `release`.

Note that this slightly violates the type of runEventuallyWithFile, as
the Promised resolved by the release callback might return an Error
object. But since this error was also not handled before, it‚Äôs out of
scope for the fix of this patch.",False
65e198d4a548bf1d2b0e0546a6d879b4b41105f9,2019-02-01 16:27:56,Micha Reiser,"Check os and platform even when engines is not present in package.json (#6976)

* Check os and platform even when engines is not present in package.json

* Use %checks to remove unnecessary null check

* Update CHANGELOG.md",False
af91e7cd684ca1ce6b7f6b24a1e2d4b92a942eeb,2019-01-31 00:01:32,Chih-Hsuan Yen,"Fix handling of non-offline errors (#6968)

* Fix handling of non-offline errors

* Update CHANGELOG.md",False
a640f490011d3a78e1349bdf49ed938af095693a,2019-01-30 23:55:35,Micha Reiser,"Treat the ignore-scripts in yarnrc as a synonym to the cli arg (#6983)

* Treat the ignore-scripts in yarnrc as a synonym to the cli arg

Allow users to specify `ignore-scripts true` in the `.yarnrc` as
specified by the `npm-config`. It is treated the same
as if the user specifies `--ignore-scripts true` in the `.yarnrc` or
passes `--ignore-scripts` as cli arg.

* Update Changelog

* Update CHANGELOG.md",False
c149410ad1d90d741301bb0e93a07bd6c9eb8482,2019-01-29 20:33:49,John-David Dalton,"fix(pnp): make sure pnp module is again the first preloaded module. (#6951)

* fix(pnp): make sure pnp module is again the first preloaded module.

* Update CHANGELOG.md",False
dc5945d0dfc0945ebbbf903b21f0d46daf7b4502,2019-01-29 20:31:20,Daniel Ruf,refactor: remove unused imports (#6956),False
32b7bb9478427ece8954b9443d6cb8c871680122,2019-01-26 22:02:21,Steven Yeh,Add 1.14.0 to changelog (#6967),False
7a092376bbc88eb45e6fb45d7db37f6c652fdfab,2019-01-26 15:32:52,Ma√´l Nison,1.15.0-0,False
dfa44117f0aec1585edac2e05b922ed3592a718a,2019-01-26 15:32:47,Ma√´l Nison,v1.14.0,False
48b0beecd22847d47165b6388879684950386477,2019-01-23 17:49:14,Justin Sacbibit,"Fix suggested command after unlinking a package (#6931)

* Fix suggested command after unlinking a package

Fixes #937, #1957

* Update en.js

* Update CHANGELOG.md

* Update CHANGELOG.md",False
9a8dd6e7d9daba9dace44223ef48228b31e117d3,2019-01-21 05:43:52,Ma√´l Nison,Update CHANGELOG.md,False
f2575006a2fee7f9f3cb4f6619188ec657b822e0,2019-01-21 05:43:30,John-David Dalton,"fix(pnp): make sure pnp module is the first preloaded module. (#6942)

* fix(pnp): make sure pnp module is the first preloaded module.

* Update CHANGELOG.md",False
fb03788279278084e81aac9cde40151a3134761b,2019-01-14 20:39:57,Zoran Regvart,"fix(pnp): make sure that the package locator is fetched with a trailing slash (#6882)

* fix(pnp): make sure that the package locator is...

... fetched with a trailing slash

I could not get P'n'P working on a project using `critical`[1] and
traced it down to a lookup of a package locator without a trailing
slash.

A `require('resolve').sync('fg-loadcss')` from `inline-critical`[2]
would fail to resolve as the `locatorsByLocations` lookup in `.pnp.js`
would be using a key without a trailing slash, i.e.:

```
""../../.cache/yarn/v4/npm-inline-critical-4.0.7-3ffba6a869f39215c8bb00ed2dd6b872e7f98adc/node_modules/inline-critical""
```

`findPackageLocator` is invoked with `location` parameter (notice no
trailing slash):

```
location = ""/home/zregvart/.cache/yarn/v4/npm-inline-critical-4.0.7-3ffba6a869f39215c8bb00ed2dd6b872e7f98adc/node_modules/inline-critical""
```

from `resolveToUnqualified` with parameters:

```
request = ""fg-loadcss/package.json""
issuer = ""/home/zregvart/.cache/yarn/v4/npm-inline-critical-4.0.7-3ffba6a869f39215c8bb00ed2dd6b872e7f98adc/node_modules/inline-critical""
```

All starting from `loadNodeModulesSync` in `resolve`'s `sync.js`[3]
that ends up having `absoluteStart` without the trailing slash.

Not sure if this is the most correct way of fixing this issue, by just
ensuring that the trailing slash needed for the lookup is added if
missing.

All tests from `yarn test` and from `packages/pkg-tests`
`yarn jest yarn.test.js` pass, so it seems like a start.

This is how to reproduce:

package.json:
```json
{
  ""name"": ""require-failure"",
  ""version"": ""1.0.0"",
  ""main"": ""index.js"",
  ""license"": ""MIT"",
  ""scripts"": {
    ""install"": ""node --require ./.pnp.js index.js""
  },
  ""devDependencies"": {
    ""critical"": ""^1.3.4""
  },
  ""installConfig"": {
    ""pnp"": true
  }
}
```

index.js:
```javascript
require('critical').generate({
  inline: true,
  html: '<!DOCTYPE html><html><head><link rel=""stylesheet"" href=""site.css""></head><body><h1>Hello</h1></body></html>'
});
```

site.css:
```css
h1 { font-weight: bold; }
```

Not sure how to create a package test from that example (sorry).

[1] https://github.com/addyosmani/critical
[2] https://github.com/bezoerb/inline-critical/blob/340db21f6a2454ed74ede7a0b317d4c4e177770d/index.js#L32
[3] https://github.com/browserify/resolve/blob/254bb4029df2f8d20a33043dfabd8e5cabfa37df/lib/sync.js#L52

* Update CHANGELOG.md",False
c2283af55e5e2df1ba2ca19c4c2651f816aa5f1b,2019-01-14 20:33:02,Pascal Berger,"Improve rendering of Chocolatey package description (#6899)

* Improve rendering of Chocolatey package description

* Update yarn.nuspec",False
1aee5202b03873ffa2b068c5d422bb0bd0d63565,2019-01-14 20:29:14,Travis Hoover,"Fixing dynamic require missing from webpack (#6908)

* Fixing dynamic require missing from webpack

When running `yarn pack` with a bundledDependency yarn was throwing
an error: An unexpected error occurred: ""Cannot find module \"".\"""".

This was due to yarn's cli.js being transpiled to on line 110321:

```
var thePackage = !(function webpackMissingModule() { var e = new Error(""Cannot find module \"".\""""); e.code = 'MODULE_NOT_FOUND'; throw e; }());
```

This line comes from https://github.com/stefanpenner/hash-for-dep/blob/e849d3e2f0350810716a0e504c84603362229570/lib/pkg.js#L20
and is a dynamic require. This commit impements a fix for this based on the guidence from https://github.com/webpack/webpack/issues/4175#issuecomment-450746682

This code was originally added with #5966

* Update CHANGELOG.md",False
94f83d661f6d57a8a0796f7450e4715175e3ca5d,2019-01-14 20:23:22,Billy Vong,"feat(policies): Use github access token when requesting releases (#6912)

* feat(policies): Use github access token when requesting releases

If the environment variable `GITHUB_TOKEN` is defined, append `?access_token=<GITHUB_TOKEN>` when requesting yarn releases from GitHub.

Closes https://github.com/yarnpkg/yarn/issues/6905

* fix lint

* Update CHANGELOG.md",False
6c41eb140164aa4a3bc35a73b08f6d758fa24e62,2019-01-07 16:40:15,Ma√´l Nison,"Fixes PnP detection across workspaces (#6878)

* Fixes PnP detection across workspaces

* Update CHANGELOG.md",False
b1f21a80275294afd4c8a2cb244676345868ff52,2019-01-04 18:16:46,Ryan Patterson,"Show problem path in invariant message (#6868)

Sometimes, `yarn add` will fail unexpectedly, and it leaves the cache in an invalid state. To cause your yarn cache to become corrupted:

```
$ yarn add antd@3.11.6
yarn add v1.12.3
[1/4] üîç  Resolving packages...
[2/4] üöö  Fetching packages...
error https://registry.yarnpkg.com/event-stream/-/event-stream-3.3.6.tgz: Extracting tar content of undefined failed, the file appears to be corrupt: ""Unexpected end of data""
info Visit https://yarnpkg.com/en/docs/cli/add for documentation about this command.

$ yarn cache list
yarn cache v1.12.3
error An unexpected error occurred: ""There should only be one folder in a package cache (got  )"".
info If you think this is a bug, please open a bug report with the information provided in ""/Users/rpatterson/Projects/chess2/www2/client/yarn-error.log"".
info Visit https://yarnpkg.com/en/docs/cli/cache for documentation about this command.
```

Note that the error message provides no information about how to resolve the error. This commit adds the problem path to the invariant message. Deleting this problem path will allow `yarn cache list` to work properly again.

The root cause of this issue is yarn#6805 which has been closed. This commit does not resolve the issue, so that issue should likely be reopened.",False
960141d62dd1361f1cfe74782e7d8a8e32f7480c,2019-01-04 18:01:57,Ma√´l Nison,Update CHANGELOG.md,False
c1261c9ff88ebc4325d617e1c072e00b12f1cd67,2019-01-04 18:00:54,Robert Jackson,"Fix generated .pnp.js compatibility with Node 6. (#6871)

* Fix generated .pnp.js compatibility with Node 6.

Prior to these changes the generated `.pnp.js` file would use trailing
commas for function invocations which is not allowed (and generates a
parse error) under Node 6.

This removes the offending trailing commas...

* Update lint config for src/util/generate-pnp-map-api.tpl.js.

This file does not get transpiled down for Node 4 compat like other
files, so we cannot use `""trailingComma"": ""all""` configuration (the
default prettier config for this repo).",False
d7811e41fa3ffec33535b3c00994ed85827cd5d8,2018-12-21 11:15:37,Jon Wolfe,"Fix Chocolatey log spam & bad nodejs-lts requirement (#6475)

**Summary**

Fixes #6439 

The chocolately install has always been full of log spam due to an incorrectly written `/l*v` flag, but those logs are also unneeded since the output has no useful info so I just removed them (this can be reversed to just fix the flag if y'all really want it back).

This also removes the bad `nodejs-lts` nuget dependency added in #5925. It now has no dependency, and instead logs out to inform the user to install node if it's missing.

**Test plan**

* `choco uninstall yarn`
* Replace the `{VERSION}` and `{CHECKSUM}` placeholders manually or do a full build (I manually replaced)
* `.\chocolateyinstall.ps1`",False
526d9bfcdb0f0ce41cd83eb853ab064e3e5e2cd7,2018-12-18 21:57:12,Ma√´l Nison,Update CHANGELOG.md,False
8c44bf35f58c4a6bb411d15218a820708b3607cd,2018-12-18 21:29:29,Ma√´l Nison,1.14.0-0,False
dd167f1ed6d01bc64acd922db9db616c512fa87d,2018-12-18 21:29:24,Ma√´l Nison,v1.13.0,False
0f0520380a60be3ba347774cc6e07fcea443d6d5,2018-12-18 21:27:55,Andrey Vetlugin,Return semantic exit code for audit (#6819),False
f3fb1102ff83fbdef53855767ee3902c53d17639,2018-12-15 00:30:38,Ma√´l Nison,"Stops unplugging packages when the install scripts are disabled (#6820)

* Stops unplugging packages when the install scripts are disabled

* Update CHANGELOG.md",False
1cf049030499c27471cd891643a2288576f361ac,2018-12-14 21:49:51,Ma√´l Nison,"Implements the pnp hook for the `resolve` package (#6816)

* Implements the pnp hook for the `resolve` package

* Updates the changelog",False
024e9febe853f3ff61d5ab9de7a7f83ea4bfdc95,2018-12-14 21:49:11,Ma√´l Nison,"Properly reports network errors (#6817)

* Properly reports network errors

* Updates the changelog

* Fixes flow",False
e987790821d1536b765ba2575f436dc9c531bd0d,2018-12-11 20:55:18,Glavin Wiechert,"Add custom headers to tarball fetcher (#6756)

* Add custom headers to tarball fetcher

* Remove requestUrl argument from requestHeaders method

* Load custom headers for tarball request from yarn config",False
5419606c526c24bbdba38a6bcf9f832746f9d58e,2018-12-10 04:52:47,ExE Boss,chore(pacakge): Update @zkochan/cmd-shim to version 3.1.0 (#6804),False
c45fc994432b12b30cf3a73c9f7a335e1294e5e2,2018-12-07 09:10:06,Daniel Lo Nigro,"Check for Chocolatey version using ""choco list"" instead of OneGet (#6754)",False
723fc3ef7fb36e01bf0c9ccd713979fac87796cc,2018-12-05 06:10:11,Greg Hurrell,"Add missing apostrophe in error message (#6732)

* Add missing apostrophe in error message

* Update npm-registry.js",False
fcf6298d8feb10d6d92d17bf4f5d416c33716faf,2018-12-05 06:08:06,Noah Pendleton,"Use hammer emoji for install/reinstall stage (#6749)

Switch from page_with_curl (üìÉ) to hammer (üî®) emoji for this stage.",False
011a634d787611e9c1f2f1b888212525f1fc096d,2018-12-03 18:27:35,Ma√´l Nison,"Implements optional peer dependencies (#6671)

* Implements optional peer dependencies

* Implements the new peerDependenciesMeta field

* Runs prettier

* Updates the changelog

* Fixes flow",False
066f0c8106911009a073cdbbd699a8834a041cae,2018-12-03 17:17:16,Ma√´l Nison,Fixes how signals are forwarded (#6747),False
d8171345b5d8d68cd82fec0899166ee9cda3b03c,2018-11-26 18:33:29,Pablo N√∫√±ez,Add Azure Pipelines badge to README.md (#6720),False
77f04c34974be96d4acaff81e09034dd1c439fdc,2018-11-21 20:02:50,Ma√´l Nison,Fixes dependencies using bins from their own dependencies (#6712),False
0d4861052fbdc4a7bbda286b1f46ba0414b11253,2018-11-21 19:42:00,Rowan Lonsdale,"Check for existence of `.bin` dir in pnp dependencies before adding to `PATH`. (#6711)

* Check PnP dep has `.bin` dir before adding to `PATH`

* Update CHANGELOG

* Update CHANGELOG.md",False
158da6c6287cbc4fee900e3704f140c3391dc28d,2018-11-21 01:43:04,Ma√´l Nison,"Implements ""yarn self set"" (#6673)

* Implements ""yarn self set""

* Adds support for nightlies

* Updates changelog

* Renames ""yarn self set"" into ""yarn policies set-version""",False
7f419103307da7856627c4ca078460234701eb75,2018-11-15 03:40:44,Ma√´l Nison,"Set up CI with Azure Pipelines (#6495)

* Set up CI with Azure Pipelines

* Update azure-pipelines.yml

* Update azure-pipelines.yml

* Update package.json

* Adds debug

* Tries using bash

* Tweaks timeouts

* Fixes various things related to the win32 compat

* I get the same 22 failed tests with/without the delay.

* Fix makeFakeBinary for win32.

It needs the "".cmd"" extension, otherwise it's ignored.
Remove #!/bin/sh and instead add @echo off to clean output
Use errorCode 0 so we get output and not a Command failed

* Check custom output instead of versions.

Running fake binaries there was no way to get local versions of node or yarn. Am I missing something?

* Remove quotes from echo (not removed in Windows).
Replace ; by /n as the former doesn't actually break statements in Windows batch files.

* Some tweaks

* Fixes syntax

* Fixes tests on Windows

* Adds test reporting

* Fixes things (?)

* Fixes indent

* Always run the test result publishing

* Fixes yml

* Use node scripts to avoid Windows interoperability issues.

* Fixes the ""must use the same Node as Yarn itself"" test

* Fixes escaping from within the tests

* Removes the accidental .only flag

* Fixes a test on Windows

* Add support for different drives in Windows.

So if code is in D: but temporary folder is in C:, don't try to find a relative path but stay on the absolute one.

* No need to getPackageLocation

* Add support for environment and arguments by using a custom solution instead of cmd-shim.

* Missing escape on path in pnpapi test.

* Some cleaning

* Runs tests on all three platforms

* Fixes write paths

* Fixes normalizePath

* Disables pkg-tests from CircleCI (moved to Azure)

* Increase Windows timeouts and better name Test results (#6680)

* Increase timeout in Windows, we're seeing tests failing randomly and others close to default 5 sec.

* Distinguish tests published from each job.

* Pass name as vmImage is not available

* Remove unnecessary detect unfinished tests.

* Using strategy var instead of parameter

* Use variables instead of strategy

* Revert ""Disables pkg-tests from CircleCI (moved to Azure)""

This reverts commit 8f724620b672910ad738a72dae029f39dd228d21.",False
e7ffb5282572907576e32e74d99e6dacf2b68b42,2018-11-15 03:36:00,Ma√´l Nison,"Fixes the resolution when a package has an invalid ""main"" but a valid‚Ä¶ (#6682)

* Fixes the resolution when a package has an invalid ""main"" but a valid ""index.js""

* Update CHANGELOG.md

* Fixes the resolution when a package has an invalid ""main"" but a valid ""index.js""",False
8317ddf840033ef29195260995744b0c1e1e9e39,2018-11-14 04:30:16,renovate[bot],chore(deps): update dependency eslint-plugin-relay to ^0.0.28 (#6133),False
9049e6e48f0490960912935499946650349394e7,2018-11-12 21:11:27,Linus Heckemann,"chore: Remove stats.json (#6653)

**Summary**

Seems to be some sort of IDE metadata erroneously introduced in
7ff626c7266a895e3db99a0a56d615587a83ab68 (#5934)

**Test plan**

Existing tests.",False
09ceb0e594b694bb773faeb23fd69174f6ac9623,2018-11-07 21:36:25,Ma√´l Nison,Update CHANGELOG.md,False
f8e42c563f7c10adb5f53afc59104f541e145176,2018-11-07 18:04:49,Jeff Valore,"fix(audit) Report vulnerabilities in workspace package dependencies (#6639)

* added failing test for #6625

* fix(audit): Add workspaceAggregator dependencies to root manifest to be audited.

This change takes the packages that are included as part of the workspace and adds them to what is
sent to the npm audit api.

fixes #6625

* update changelog for PR 6639",False
124a2ef64381d2551aa8b1fa8d871862c12fa822,2018-11-07 18:02:36,Ma√´l Nison,"Exposes pnpapi through resolveToUnqualified (#6643)

* Exposes pnpapi through resolveToUnqualified

* Update CHANGELOG.md",False
1ceabe85b1d740004941e4bdac838d4ad2b2ff01,2018-11-06 21:29:52,Ma√´l Nison,Tries a fix for Windows,False
85660f79bfad96af843dcd3d87ed75e81c527c67,2018-11-06 20:46:50,Ma√´l Nison,Precompiles inquirer for Node 4 compat (#6640),False
a40f3fc981355878f855de6b4110647ecf6d0c91,2018-11-05 22:32:07,Ma√´l Nison,Update CHANGELOG.md,False
5539fa23d1495b9aaa2409376dae2275aa0e725e,2018-11-05 22:14:47,Philipp Feigl,"Fixes potential freeze on win+node10 interactive upgrades (#5949) (#6635)

* Fixes potential freeze on win+node10 interactive upgrades (#5949)

There is a potential freeze when running interactive upgrades after selecting the options.
This boiles down to a problem in the `inquirer` library which is used internally to provide the possible options.
Updating `inquirer`to the latest version fixes the problem.

* Update CHANGELOG.md",False
7977c422ed2007ab9902b496cf85038860bbdb02,2018-11-05 22:10:46,Ma√´l Nison,"Uses NODE_OPTIONS with PnP instead of CLI args (#6629)

* Uses NODE_OPTIONS when spawning a process

* Adds an additional test

* Update CHANGELOG.md",False
4e3b2f6112edd4171768e0a94659acdb60d4af62,2018-11-05 17:47:13,Yoad Snapir,"fix: Use cmdshim instead of symlink on win32 in base-fetcher (#6621)

* fix: Use cmdshim instead of symlink on win32 in base-fetcher

* Update CHANGELOG

* Bumps the cache key

* Use cmdShim.ifExists to handle missing src like symlink (ignores)

* Update CHANGELOG.md",False
4177b081dcee74cd7385e1ce2922159513f5bee1,2018-11-04 01:12:08,Ma√´l Nison,"Stop copying `.bin` folders (#6628)

* Stops copying the .bin folder from the cache

* Adds a test",False
b62e9e4701bf8bc6e0fd4893513ba80ecedcf5b2,2018-11-02 08:48:58,Ma√´l Nison,"Fixes the resolve shim for liftoff (#6623)

* Fixes the resolve shim for liftoff

* Update CHANGELOG.md",False
4b8e49e7af42705d217a2c113ce65ffabe163b93,2018-11-01 22:00:08,Jack Zhao,"fix audit for packages without name (#6611)

* fix audit for packages without name

* add test

* fix bad dependency version

* fix bad dependency version

* Update audit.js

* Update CHANGELOG.md",False
97834002c7fc1d487b68297ea05247a9ba8bbdf9,2018-10-25 17:54:33,Ma√´l Nison,"Fixes Node 10 CI on OSX (#6580)

* Update config.yml

* Update config.yml

* Update config.yml",False
daac3a0d2b86f059eaa4b3f1d3eef57dae30eaed,2018-10-24 22:18:24,Ma√´l Nison,Bumps the changelog,False
af72e6a1f721d94f89e1b8b11b8dad6795b81119,2018-10-23 19:41:15,Hidde Boomsma,"Support Darwin bash in bin/yarn (#6568)

* Support Darwin bash in bin/yarn

If the yarn binary is a symlink the `basepath` is not correctly resolved on OSX/Darwin.

For example take the following structure:
```
vendor/yarnpkg/yarn
vendor/bin/yarn -> ../yarnpkg/yarn/bin/yarn
```

And run yarn:
```
$ yarn
internal/modules/cjs/loader.js:582
    throw err;
    ^

Error: Cannot find module '/Users/yarnpkg/yarn/bin/yarn.js'
    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:580:15)
    at Function.Module._load (internal/modules/cjs/loader.js:506:25)
    at Function.Module.runMain (internal/modules/cjs/loader.js:741:12)
    at startup (internal/bootstrap/node.js:285:19)
    at bootstrapNodeJSCore (internal/bootstrap/node.js:739:3)
```
Since the symlink is not resolved the relative path in the symlink leads to the wrong path.

This PR, fixes that issue.

* Update CHANGELOG.md",False
f6d0a5b85aa465280a87bd8b04f74fee980bc77c,2018-10-23 19:36:30,Ma√´l Nison,"Implements require.resolve's `paths` options (#6565)

* Update generate-pnp-map-api.tpl.js

* Updates the changelog

* Adds tests

* Scopes the option tests to >=8.9.0",False
b8a565e562810f9bf86f3ac0531ad348ed7e9d0a,2018-10-22 19:33:29,Krzysztof Zbudniewek,"feat(auth): Support two factor authentication for NPM accounts (#6555)

* feat(auth): Support two factor authentication for npm accounts

Fix #4904

* Add basic tests

* Rename OneTimePasswordRequiredError to OneTimePasswordError

Cause it's also thrown when one-time password is invalid.

* Remove misleading config parameter from getOneTimePassword

* Don't reimplement setOtp in npm-registry.js tests

* Update CHANGELOG.md",False
5876b301ae20bc9b088543fdea1faebee704f542,2018-10-22 17:56:15,Bertrand Marron,"Anchor package.json `files` to the package‚Äôs root (#6562)

* Anchor files to the package‚Äôs root

npm pack bases paths from the `files` array from the package‚Äôs
root. This updates yarn pack to behave in the same way.

* Update CHANGELOG.md",False
04b23e4f02eac74ba643af455713820e147fc874,2018-10-22 16:42:52,Mark Stacey,"test: Default `nonInteractive` to true in cli tests to prevent timeouts (#6559)

The last three tests in `__tests__/commands/publish.js` were regularly timing
out locally, yet they were doing fine on CI. They were apparently running in
interactive mode, and were waiting for user input after `publish` was called
(to set the next version number).

Setting `nonInteractive` to false by default in `__tests__/commands/_helpers`
ensures that all command tests run in non-interactive mode unless otherwise
specified. This prevents this problem from occuring again, at least among the
tests that use this helper.

Note that this change won't improve tests on CI, as this problem never
affected CI. The tests were running in non-interactive mode on CI
already due to an `isCi` check in `config.js`.",False
aa4e713c30c40ac35934e45aca5b4683d61e1829,2018-10-13 12:07:53,Orta,Checks the engines before running upgrade-interactive (#6536),False
e30cf1e96a7a11fcb1a04452220cee89692440d3,2018-10-12 20:11:39,Mark Stacey,"fix: restore Node.js v4 support by downgrading cli-table3 (#6535)

`cli-table3` no longer supports Node.js v4 as of v0.5.0. Downgrading to
`cli-table3@0.4.0` restores Node v4 support, and should fix the nightly
`test-e2e-ubuntu1604` CircleCI test that has been failing.",False
b3d136f2f4299709777882efac95db5adfd68360,2018-10-12 04:35:28,Ryan Hendrickson,"fix(lockfile): prevent infinite loop when parsing a corrupted lockfile (#4965)

* refactor(lockfile): remove string concatenation from parsing code

Replace all instances of building strings incrementally using += with more efficient methods.

* fix(lockfile): prevent infinite loop when parsing a 

Fix bug where yarn could get into an infinite loop when parsing a corrupted lockfile with an
unterminated string.",False
f2206d2288462d3dfc35a8fa5a8dcf68cdf55d4a,2018-10-10 17:32:04,grembo,"Fix parsing of environment variables when merging env into config (#6518)

* Environment variable prefixes should start at the beginning, not in the middle of an environment variable. This fixes this example:

  SOME_YARN_CONFIG=123 yarn config list | grep some
    'some-yarn-config':
  { 'some-yarn-config':

* Update CHANGELOG.md",False
86888e17dcadac603a6d069e6f1b0145ec171a41,2018-10-10 07:25:06,Ambroos Vaes,test: add integration test for renaming scoped packages (#4921),False
276720b78231234072d55595d058cd8444794e47,2018-10-09 23:16:00,Ma√´l Nison,"Fixes invalid option forwarding (#6479)

* Fixes typo

* Update CHANGELOG.md

* Adds tests

* Also forwards considerBuiltins to the symlinked path detection

* Uncomments the tests",False
743c145d881e52afaf7bc086762feb16fa2dd2f7,2018-10-09 19:03:31,Ryan Burrows,"Fix: handle empty bin strings (#6515)

* Fix: handle empty bin strings

When the package.json of a dependency sets `bin` to an empty string,
do not normalize it. This prevents creating a symlink to the
dependency's root directory within the `.bin` directory if bin-links
are enabled

* Add an entry to the changelog

* Add a test to make sure empty binlinks aren't created

Test was suggested/provided by @rally25rs

* Fix empty bin string test on Windows",False
9bb2cfbb35fc8623713ba15744ae9f283cfc81d4,2018-10-06 07:29:32,Karolis Narkevicius,feat(auth): Add basic auth support for pathed registries (#5322),False
1b78b1aa7387499f44878da61291d6052e5ac5be,2018-10-04 20:52:37,Rhys Arkins,Enable Renovate master issue approval (#6490),False
0e8ca923769f64245499eec2a43c824856d7e241,2018-10-03 01:51:32,Ma√´l Nison,Update CHANGELOG.md,False
9d25e4500d997630e7136d9496ecb2374203542d,2018-10-03 01:50:40,Ma√´l Nison,1.13.0-0,False
46bebd7e4f3020e4dd3207738d2fdfac4762773c,2018-10-03 01:50:35,Ma√´l Nison,v1.12.0,False
6ea3ff54db27b0faf52fdaa9cefcbb97aeae05a4,2018-10-02 20:51:16,Ma√´l Nison,"Disables by default the migrations (#6465)

* Disables by default the migrations

* Uses boolifyWithDefaults

* Makes flow happy(ier)

* Fixes tests",False
837704ce4592c08ca2750deb4fc686569fdd1129,2018-10-02 20:50:31,Ma√´l Nison,"Injects a ""process.versions.pnp"" variable (#6464)

* Injects a ""process.versions.pnp"" variable

* Adds a test",False
dfe046c0e230af3a905441d618bc563f004d52ce,2018-10-02 17:50:24,Rhys Arkins,"Disable semantic commit prefixes for Renovate (#6467)

As suggested by @edmorley here: https://github.com/yarnpkg/yarn/pull/6463#issuecomment-426240070

This will prevent Renovate from autodetecting semantic commits have been added to master and switching them on automatically, and instead just keep them permanently off.",False
f72063a21a163398246852780aeb96ae641801bd,2018-10-02 17:47:33,Ma√´l Nison,Fixes a boggus conflict resolution (#6469),False
142bfcc9fb6cd8f7b214d929aba7401c85e504a9,2018-10-02 15:55:07,Drew Benson,"Fix: undefined@undefined requires a flat dependency graph (#4245) (#6369)

When `install`ing in a repo with a dependency that specifies `""flat:: true`, but without the `--flat` flag or `""flat"": true` in your own package.json, you get an error: `The package undefined@undefined requires a flat dependency graph. Add \`""flat"": true\` to your package.json and try again.`

This was occuring because the relevant error message, `flatGlobalError` was expecting two variables for interpolation: the package name and the package version.

This fix changes that to one variable (to be consistent with other uses) and passes the appropriate values in to the message.",False
4b4fb60aaf8bdbb6251a1878a859c5ab5feee1ee,2018-10-02 15:52:41,Ma√´l Nison,Updates the changelog,False
c62854c52fba73a878b8df417b35595bc16dd73d,2018-10-02 15:52:05,mad-mike,Default latest version in case it is not sent by the npm registry (#6454),False
b07a19b961dc9521fd15d18f62e30990d4945f28,2018-10-02 15:43:13,Grey Baker,Ensure malformedRegistryResponse errors always have a dependency name (#6455),False
49a157c2797463aa7daf90c4cf9b67e7d92be73b,2018-10-02 15:37:42,Jeff Valore,"feat(audit) Initial addition of yarn audit command. (#6409)

* WIP: audit command added. sends data to registry.

* code cleanup

* WIP: Added Audit command. No tests. Existing test fail.

* Print audit summary when no problems found

* Don't send package version to audit API if it is not in the manifest.

* Add audit functions to json-reporter

* WIP: First successful audit command test

* added more audit tests

* feat(audit): Initial addition of yarn audit command and --audit flag

Added ""yarn audit"" command which copies the behavior of ""npm audit"". Unline npm, yarn does not
automatically run ""audit"" during ""add/install/upgrade"" commands. Since this would cause an
additional network call, it broke all existing unit tests to add this feature and have it run
automatically. In the interest of getting an initial release in the hands of our users the
""add/install/upgrade"" commands accept a ""--audit"" flag that will enable the audit. If you want audit
to always execute, you can add ""--*.audit true"" to .yarnrc

fix #5808

* gzip the JSON sent to npm audit API to reduce payload

* fix audit test for gzip data

* Update install.js

* removed audit correction suggestions due to them being unreliable

* Updates the changelog",False
9028f9a3677da1cd14babec82e194c906dfe5de0,2018-10-02 15:34:33,John-David Dalton,"Support Windows paths for pnp. (#6447)

* Support Windows paths for pnp.

* Update config.js

* Update en.js

* Fixes lint

* Updates the changelog",False
0c8c30234cc9523e4691cd78ed1d788c3c526e08,2018-10-02 15:30:03,Ma√´l Nison,"Changelog workflow  (#6460)

* Adds a changelog.md file

* Update CHANGELOG.md

* Update CHANGELOG.md",False
ed2c8a50c02505bdd6bd67d5e8c4461abc2b8dae,2018-09-28 18:33:55,Ma√´l Nison,ESLint compatibility workaround (#6449),False
22139ca4d4eaa12535914e5aa4da6aa97da09cfe,2018-09-28 18:33:34,Ma√´l Nison,Fixes yarn run when used on workspaces + pnp (#6444),False
83b5fbc017b1016b16f349e76e73c79f5847b658,2018-09-28 18:33:04,Ma√´l Nison,Fixes how peer dependencies are resolved multiple levels deep (#6443),False
a7ee6dac007f3c7814c0725c6102264f4e19d1aa,2018-09-28 14:57:34,Rhys Arkins,Add integrity hashes to project yarn.lock (#6442),False
3fc13c15a89f93661e0957ed15081131924c8a47,2018-09-26 17:25:56,Ma√´l Nison,Fixes constants (#6432),False
bf3af9c4cad98e41e38fa2b397ff43e1e4a57e28,2018-09-26 03:59:32,Ma√´l Nison,1.12.0-0,False
f880587c5b898313d10c7fd3e71f288016b35266,2018-09-26 03:59:26,Ma√´l Nison,v1.11.0,False
af9e15ad565b30ef66ab6ae7f512654afc119f76,2018-09-26 00:50:36,renovate[bot],chore(deps): update dependency execa to ^0.11.0 (#6280),False
6795a7b3dc357382d19a80ecc8f63140ba750e08,2018-09-26 00:48:10,renovate[bot],chore(deps): update dependency babel-plugin-inline-import to v3 (#6424),False
454986b8e6a13eea9ae924e71bea28f56298aee2,2018-09-26 00:44:32,Ma√´l Nison,"Adds retry-on-error for errors 408/500 (#6413)

* Adds retry-on-error for errors 408/500

* Update request-manager.js

* Update request-manager.js

* Update request-manager.js

* Update request-manager.js

* Update request-manager.js",False
10c8236b3f5c3cc915482b6605737d12b1df4e4b,2018-09-25 21:44:04,Rakesh,sort options using flags (#6426),False
e905f7479ef8ea5ecbc5ca115f0287be709c7d58,2018-09-24 22:55:29,Ma√´l Nison,"Yarn Plug'n'Play: Implementation (#6382)

* Initial pnp implementation

* Adds the pnp-env directory for quick checks

* Improves the ""yarn node"" command so that it works with pnp

Branch: yarn-node-pnp

* Adds the pnp tests to the pkg-tests testsuite

Branch: pkg-tests

* Fixes various issues with the pnp map generation

Branch: pnp-map-improvements

* Remove the scriptsPrependNodePath option

Branch: lifecycle-wrappers-remove-option

* Adds tests to ensure that the lifecycle scripts are called with the right binaries

Branch: lifecycle-wrappers-tests

* Fixes linting

Branch: lifecycle-wrappers-flowlint

* Improve the error message when an optional required dependency hasn't been installed

Branch: lifecycle-wrappers-improve-pnp-error

* Implements lifecycle wrappers

Branch: lifecycle-wrappers-main

* Adds .pnp.js files to the gitignore

* Fallbacks to the toplevel dependencies when a transitive dependency cannot be resolved

* Fixes an issue inside the pkg-tests helper

Branch: pkg-tests-helper-definition

* Improves the fixtures so that they also return info about their dev and peer dependencies

Branch: dev-peer-fixtures

* Finishes to hide plugnplay behind a yarnrc option (`plugnplay-experimental`)

Branch: option-plugnplay-experimental

* Adds failing tests for pnp peer dependencies

Branch: pnp-peer-dependencies-failing

* Prettifies the generated pnp files

* Adds the plugnplay flag to the integrity check

* Removes the pnp file at link-time if installing with pnp disabled

* Improves pnp maps compatibility

* Prevents ""yarn check"" from checking the node_modules existence when under pnp

* Adds a missing package to the request cache

* Fixes tests

Branch: pnp-fix-tests

* Reimplements the resolution to correctly account for peer dependencies

Branch: better-faster-stronger

* Externalizes the creation of proxy scripts

Branch: portable-proxy-scripts

* Implements support for `yarn run` within pnp-enabled installations

Branch: pnp-yarn-run

* Makes it possible for dependency binaries to require their own dependencies

Branch: pnp-yarn-run-dependencies

* Moves the pnp embed api into its own file

* Adds the test folder to Jest error messages

Branch: jest-better-message

* Improves peer dependency tests

Branch: peer-deps-tests

* Adds tests for require.resolve

Branch: require-resolve-tests

* Refactors the pnp file

Branch: pnp-file-refactoring

* Updates the build-webpack script to include a custom resolver

Branch: webpack-resolver

* Fixes tests

Branch: fix-tests

* Generates virtual when using peer dependencies

Branch: virtual-packages

* Refactors the generated pnp files to use the newly generated maps

Branch: pnp-refactor-find

* Implements Module._findPath

Branch: module-findpath

* Adds tests for workspaces

Branch: workspace-tests

* Fixes top level detection

Branch: fix-top-level-detection

* Implements workspaces support in pnp

Branch: pnp-workspaces

* Automatically adds workspaces as dependencies of the top-level

Branch: auto-workspace-dependencies

* Updates the cache path to include the 'node_modules' string

Branch: node-modules-cache

* Prevents pnp from bootstrapping when running non-pnp-installed scripts

Branch: fix-npm-run

* Installs peer dependencies symlinks inside a project folder

Branch: per-project-virtual-deps

* Adds a sample application that showcases webpack, babel, react, jest

Branch: sample-app

* Ignores the .pnp directory

Branch: ignore-pnp

* Implements a blacklist that throws nicer errors when a package is required through a realpath'd path.

Branch: location-blacklist

* Changes the order the locations are matched to package locators

Branch: location-to-locator-match-order

* Automatically adds packages as dependencies of themselves if possible

Branch: implicit-self

* Updates the node resolution

Branch: node-resolution-improvements

* Ensures that binaries are set as executable in the cache

Branch: chmod-bins

* Disables integrity checks when running under pnp

Branch: pnp-no-integrity

* Makes the .pnp.js file an actual executable that can be used as a resolution server

Branch: pnp-executable

* Removes pnp-env

* Fixes a few tests

* Fixes snapshots

* Fixes the lockfile not being written when using pnp

Branch: fix-lockfile

* Fixes the `yarn node` command being incorrectly forwarded arguments

Branch: fix-yarn-node

* Uses symlinks instead of a script for bin indirection to allow calling them directly through Node

Branch: bin-symlinks

* Adds a `yarn bin <name>` command that returns the path of the specified bin on the disk

Branch: yarn-bin-name

* Implements an --into option to yarn node/yarn run

Branch: opt-into

* Implements the `--pnp` option

Branch: pnp-option

* Adds new tests for checking that packages are correctly locked

Branch: lock-tests

* Bugfixes

This diff ships with two fixes:

- Fixes calling a pnp script from a non-pnp scripts
- Fixes relative requires from binaries

It also adds tests for all those cases

Branch: bugfixes

* Fixes workspace registration

Branch: workspace-registration-fix

* Uses --enable-pnp (alias --pnp) and --disable-pnp

Branch: instalconfig-pnp

* Adds the issuer into the error messages when requesting a package one shouldn't have access to.

Branch: via-issuer

* Implements extendedQualifiedPathResolution

Branch: extended-qualified-path-resolution

* Changes the return of the pnp daemon to return json data

* Implements custom shebangs for the pnp file

* Changes the return of the pnp-exposed functions to return null with builtins

* Various fixes & improvements

* Adds a test, prettier, fixes a test

* Don't iterate on the registries

* Renames YARN_PLUGNPLAY_EXPERIMENTAL into YARN_PLUGNPLAY_OVERRIDE

* Avoids touching the .pnp.js file when it doesn't need to change

* Reworks the cache path to contain the ""node_modules/<pkg-name>"" string

* Shims resolve#isCore

* Improves error messages

* Fixes the environment cast to allow passing false/0

* Implements a pnp blacklist settings

* Fixes the fallback resolution to use _resolveFilename instead of _finePath

* Fixes fallback relative path resolution

* Implements require.cache

* Prevents pnp from being enabled on Windows

* Removes absolute paths from the pnp files

* Implements a super basic offline cache integration

* feat(pnp): eject package command (#92)

* test(pnp): support ejecting packages

* feat(pnp): eject package command

* test(pnp): use fs.readdir instead of fs.readdirSync

* test(pnp): do not expect specific error message

* refactor(pnp): move eject logic to package linker

* fix(pnp): change ejected folder to .pnp/ejected/pkgName-pkgVersion/node_modules/pkgName

* fix(pnp): do not re-eject package

* test(pnp): do not rely on installConfig

* Fixes yarn bin

* Preserves the node_modules components in zip paths

* Fixes the offline cache

* Adds a VERSIONS field into the generated resolver

* Exposes the ""extensions"" option to ""resolveRequest""

* Renames yarn eject into yarn unplug

* Tweaks yarn unplug

* Removes packageMainEntry from the package information

* Makes ""unplug"" print the list of unplugged packages

* Unplugs postinstall packages automatically

* Renames things

* Adds a warning on Windows to notify that PnP settings are ignored at the moment

* Fixes the default shebang

* Exports pnpapi

* Reworks the resolve shim to only affect liftoff

* Guards the pnp file against fs extensions

* Fixes the resolve shim

* Fixes a broken test

* Re-enables the focus tests

* Stops relying on bash for test scripts

* Fixes nohoist

* Revert ""Fixes a broken test""

This reverts commit 84358aa507c7f1a8f59d49912dfa16ac757b78eb.

* Ensures that the getPackageInformation function returns an absolute path",False
5682d5531b11d472bb390c028f18d20a4fa6e217,2018-09-24 11:45:01,wesley luyten,Fetch tags for cached git repo (#6393),False
90c130e56e2b924df05cbd5f59b8c82bee2a33bf,2018-09-24 11:38:09,Johan Henriksson,Fix missing intregity field for validate-npm-package-license in yarn.lock (#6419),False
79d193789fb0f2be4957e8dcd0bd2f47d0b1964c,2018-09-21 17:14:16,Viktor Havrylin,"Fix login for `yarn publish` when using publishConfig.registry (#6411)

* Copy publishConfig.registry to flags.registry

* Use right credentials when use publish with publishConfig.registry

* fix typings

* add tests for publish with publishConfig.registry

* fix flow errors",False
cd89bddf341373195e7fc348bc6544e7d8598f50,2018-09-19 19:49:40,Viktor Havrylin,fix(cli/publish): allow to publish directory without `--new-version` flag (#6399),False
c58bd58e029ab5a69d75742c6ae82aa96cef0140,2018-09-05 21:51:47,Ma√´l Nison,1.11.0-0,False
3405cdebd0425faa4d5ca38be63acb369c6d5721,2018-09-05 21:51:42,Ma√´l Nison,v1.10.0,False
3c34587538ba0c3b97b47229d1f7c29a103d04cb,2018-09-05 16:11:32,Andrew Sun,"Use UV_FS_COPYFILE_FICLONE flag in fs.copyFile when available (#6302)

* Use UV_FS_COPYFILE_FICLONE flag in fs.copyFile when available

* Satisfy Flow

* Update fs-normalized.js",False
a72ecda9dc09395de18b91a0b9b09d7076caf99a,2018-09-05 16:10:45,Ma√´l Nison,"Reverts #2454 (#6321)

* Reverts #2454

* Update fs.js",False
83bd87e4a4da1e2fe68b11e249f98faa34744812,2018-09-05 14:50:24,John Ruble,"ConsoleReporter: do not color if !isTTY (#6336)

* strip colors if !isTTY

* update snapshots

* trying again

* address feedback",False
602c895a29077988abdc3851ae14d78ca96098bd,2018-09-04 04:03:13,Ed Morley,"test: Fail early if the local yarn build is missing (#6351)

Previously if the tests were run without first having run `yarn build`,
these three test suites would fail with over 1000 lines of unclear
console output.

Now, later tests are stopped from running to reduce verbosity, and a
more contributor-friendly error message displayed instead.

We unfortunately can't handle this case in `beforeAll()`, since even
if it throws, later tests in the same file are still run:
https://github.com/facebook/jest/issues/2713",False
196fa94081bdf2cab58fae733864aae41bb52366,2018-09-04 03:56:54,Ed Morley,"fix(resolution): Normalise non-HTTPS NPM registry URLs too (#6353)

For some packages the NPM registry is incorrectly returning tarball
URLs that are not using HTTPS. For example:
`http://registry.npmjs.org/onetime/-/onetime-1.1.0.tgz`

Previously the `registry.npmjs.org` -> `registry.yarnpkg.com` tarball
URL normalisation was not occurring for these non-HTTPS URLs, causing
unwanted `http://registry.npmjs.org` references in `yarn.lock`.

Whilst the real fix needs to be made upstream:
https://npm.community/t/some-packages-have-dist-tarball-as-http-and-not-https/285

...this change prevents lockfile churn and insecure package downloads
over HTTP in the meantime.

The request-cache entry for `onetime` has been updated to the current
NPM registry response, which contains the bogus `tarball` URLs.

Fixes #6259.",False
047b10a49ce9d277d35f140aebde333f36e14b6c,2018-09-02 14:57:41,Sam Lanning,fix incomplete sanitization (#6328),False
2f89339ee2668f04ed1acab9caa3cc2d4aa3c34e,2018-08-28 23:18:38,Mark Stacey,"fix(build): Apply bundle fix to legacy build (#6303)

The Webpack config for the modern build was adjusted recently to add a loader,
which is used as a workaround for a bug introduced by a recent dependency
update. The legacy config needed the same update.

The Webpack config was also updated in superficial ways to follow
recommendations made for migrating from Webpack v1 to v2 (e.g. using
`module.rules` instead of `module.loaders`). These changes should have no
functional impact, and should make migrating to future versions of Webpack
easier.

fix #6269",False
a67d02f2e3d2996fda439f1ba0f0d25e4fa33d9d,2018-08-23 12:15:34,Simen Bekkhus,"Update update-homebrew.sh (#6297)

<!-- Thanks for submitting a pull request! Please provide enough information so that others can review your pull request. The two fields below are mandatory. -->

**Summary**
Went down a rabbit hole with the formula, and noticed that the script wasn't updated.

<!-- Is the feature a substantial feature request? Please use https://github.com/yarnpkg/rfcs -->

<!-- Explain the **motivation** for making this change. What existing problem does the pull request solve? -->

**Test plan**
Not sure. @Daniel15 maybe has some thoughts?

<!-- Demonstrate the code is solid. Example: The exact commands you ran and their output, screenshots / videos if the pull request changes UI. -->",False
b32c4d81080acd87920aa9eac356ebc8e2e8d7cc,2018-08-23 01:06:33,Avraham Ostreicher,"Bugfix #3724 (#6275)

* Link binaries under custom modules-folder if set

* Add custom modules-folder to PATH if set

* Uninstall from custom modules-folder if set

  * config.js - Add modulesFolder to registryFolders to be scanned fo extraneous
  * package-linker.js - use path.resolve for case consistency when modulesFolder
  is taken from .yarnrc and has been resolved earlier",False
d63856d773a8f558ab1a9a01efa0533b636eeb1b,2018-08-23 01:03:46,Matt Q,"Changed isValidLicense Check (#6134)

* changed isValid check

* updated validate-npm-package-license

* removed try catch

* updated version number

* changed to ^",False
38387391786ba2f6862c7adcf3a05e3207f618c2,2018-08-23 01:02:02,Antoine du Hamel,"Upgrade gulp v4 (#6143)

* deps: update dependency gulp to ^4.0.0

*  deps: drop deprecated gulp-util dependency

* deps: drop gulp-watch dependency

Gulp v4 integrates a watch mecanism, there is no need
for gulp-watch anymore.",False
01f9adc7d16f7f3651a05ffb84ce000b266933e1,2018-08-21 15:17:59,Mike MacCana,"Add Windows command executable that use powershell. (#6093)

Fixes #6902. Leave in yarn.cmd in case anyone is still using cmd on Windows in 2018.",False
a49644b1bdf488d7da0f70507a6167b25d628162,2018-08-17 15:24:07,Ma√´l Nison,Fixes the bundle build (#6274),False
9a62ef51b948323fdf9f1741e84da9e3d997ac3c,2018-08-16 15:05:46,fenduru,"fix(create): invoke correct path when using scoped package (#6271)

* fix(create): invoke correct path when using scoped package

When running yarn create, first the package is installed globally,
however after installing create was attempting to invoke the binary from
within a scope folder that did not exists. The corrects the path
resolution to invoke the binary from the actual place it was installed
to.

fixes #6266

* Update create.js",False
53a648390717eb56b23599079496b166ceb1eda8,2018-08-14 03:34:00,Kyle Welch,"Added ability to run script on all workspaces (#6244)

* Added ability to run script on all workspaces

* Makes the execution synchronous",False
acf82e26b9d517083df1835a3bf8b35a6e5627c4,2018-08-13 17:27:08,Vladimir Starkov,"fix(cli-create): fix scoped creation (#6239)

* fix(cli-create): fix scoped creation

This one works as it should:
yarn create @scope/name => @scope/create-name

There were problems when name was omitted:

Before:
yarn create @scope => create-
yarn create @scope/ => @scope/create-

After:
yarn create @scope => @scope/create
yarn create @scope/ => @scope/create

Fixes #6233

* refactor(cli-create): make parsePackageName more robust and add tests

* refactor(cli-create): add missing typyings",False
77b84445a4c87aa410169e816bc07716dab8930c,2018-08-12 11:15:46,Andres Suarez,"Fix: Correctly load v8-compile-cache (#6261)

`v8-compile-cache` is not loading because `fs.existsSync` is checking for a file that doesn't exist. `fs.existsSync` resolves relative to the cwd, not the current module (like `require`), and `v8CompileCachePath`'s filename is missing `.js`.

Instead of checking for the existence of `v8-compile-cache.js`, just try to `require` it in a `try`/`catch`, using a full path. Also switched the `require` of `cli.js` to use the same pattern for consistency (plus it's a module resolution micro-optimization).

```
# before
$ time ./dist/bin/yarn -v
1.10.0-0
./dist/bin/yarn -v  0.28s user 0.06s system 98% cpu 0.344 total

# after
$ time ./dist/bin/yarn -v
1.10.0-0
./dist/bin/yarn -v  0.16s user 0.05s system 97% cpu 0.213 total
```",False
36f0bf6a58e1952b8b179bad8d95ff111df9e003,2018-08-10 19:37:38,Ma√´l Nison,"Adds an auto-add-integrity option (#6255)

* Adds an auto-add-integrity option

* Adds a test

* Renames the yarnrc field

* Typo",False
dcb959dd60f7d1f17526b228c12f95329e92874c,2018-08-10 17:51:32,Antoine du Hamel,deps: upgrade deps to get rid of Buffer constructor (#6208),False
b813ebe058f906cab7534f2efac2a363bb998362,2018-08-10 17:21:37,Ma√´l Nison,"Don't compute integrity when network restricted (#6248)

* Fixes git repositories w/ --offline

* test(integrity): do not update in offline mode",False
753bcacab671aafeddcc28d7f1df35ddf048b682,2018-08-09 22:35:58,Rafa≈Ç Lindemann,"Fix performance of PackageHoister.seed (#6251)

For big repositories with thousands of packages splicing
queue array can take upwards of 60s to complete.

Changing the algorithm to filter the queue only once solves this.",False
0155739c717f89f913e8d4f92b93dc1756ee757c,2018-08-09 20:12:14,Mark Stacey,"ci(perf): Set maxWorkers to match the number of cores available (#6249)

AppVeyor VMs have 2 cores, yet we were telling Jest to use 3 workers. Changing it to 2 should reduce
overhead and speed up the test suite.",False
d051cc7225ddf8b768dbc89d8e79dd3c0044cd69,2018-08-09 20:10:55,Mark Stacey,"test(warning): Jest: Ignore build directory modules to avoid module name collision (#6252)

The test suite displays the following warning message when run:
```
jest-haste-map: @providesModule naming collision:
  Duplicate module name: yarn
  Paths: <repo directory>\dist\package.json collides with
    <repo directory>\package.json
```

This is because the Jest module system finds two copies of Yarn; the
primary package and the build output. This causes ambiguity when loading
`yarn` from a test, or a module that depends upon yarn.

Adding the build directory to `modulePathIgnorePatterns` prevents this
message. This means that if `yarn` is imported from within a test (which
it is not currently), the version found will be the primary package, not
the built version.

This seems acceptable. Currently, components of `yarn` are referenced by
filename rather than by package name, and they are all from the `src`
directory. The many cases where the built `yarn` is run in tests are all
done through a child process, where this change would not be applicable
anyway.",False
7eba4959449413b72d47e2e0c202d8858861640f,2018-08-07 15:42:58,Ma√´l Nison,Disables tarball fetching on windows (#6211),False
49446bbdd95d4109c2fd266cfef84b4029985409,2018-08-06 23:28:10,Mark Stacey,"test(request-cache): Update request-cache `hawk` version (#6227)

The version of `hawk` used in the `upgrade` test was updated recently in #6194 . The new version of
`hawk` and any dependencies should be in the request cache, so that the test suite is faster, more
reliable, and uses less bandwidth.",False
3fda53734f357bd25c2ce619f86c02d0138574db,2018-08-06 23:23:07,Mark Stacey,"test: Fix `yarn run <failing script>` test on Windows (#6222)

This test was failing on Windows with the following error:
```
'false' is not recognized as an internal or external command,
operable program or batch file.
```

The script used for this test is `false`. This is valid in Bash, but is
not valid in cmd.exe. It has been replaced with `exit 1`, which will
exit with a status of `1` in both Bash and cmd.exe

The reason this test was passing on AppVeyor is that they have Cygwin
installed by default. This includes a binary called `false`.",False
003b6b7d5d41afc94dbc1d9ae9755cb44bdf2848,2018-08-03 16:00:54,x-yuri,"Make yarn not to add /usr/bin to PATH if already there (#6178)

rebuild",False
1af4c5f50c4c146a833c0c2b20d10be1f5a61803,2018-08-03 15:58:01,Clinton Wood,"Fixes to PR 6007 (#6207)

* fix: ensure enableDefaultRc defaults to true unless exlicitly set to false via --no-default-rc

* fix: ensure enableDefaultRc and extraneousYarnrcFiles are passed to config.init(...)

* add: added test for yarn global add for module using a scoped registry",False
15a438de996aac8b9eb08719a3f27ec03f650b21,2018-08-03 14:51:34,Ma√´l Nison,"Fix perf regression (#6204)

* Revert ""fix(util/fs): use file content instead of mtime to determine equality (#6010)""

This reverts commit c53d0399ade825adc148842b8cdac57c6b1fd624.

* Bumps the cache version

* Forces the mtime to be based on the time the archives got fetched

* Fixes subseconds time assignment (nodejs/node#22070)

* Adds regression tests for #5723

* Fixes tests

* Fixes test on architectures that don't support subsecond precision",False
308b9f067c9a929cce29671466f341b2af0aa697,2018-08-02 15:14:10,Masato Ohba,fix(cli): reword manifest (#6154),False
a7334da31bf783af7a3efab451589fe7ac34c748,2018-08-01 20:56:34,Aram Drevekenin,"feat(checksums): add integrity field with sha512 authentication to yarn.lock (#5042)

* test(fixtures): adjust yarn.lock and snapshots with integrity field as needed

* test(integrity): adjust existing cases to integrity field authentication

* test(fixtures): integrity field authentication cases

* test(integrity): integration and unit tests for the lockfile integrity field

* chore(deps): add ssri module

* feat(checksums): add integrity field with sha512 authentication to yarn.lock

* test(integrity): additional sri string options

* fix(checksums): better error when algorithms are not supported

* fix(checksums): proper error message for bad hash in node <= 6

* chore(integrity): fixed new flow issues

* test(integrity): adjust additional test case

* test(fixtures): additional integrity field authentication cases

* fix(integrity): update integrity for offline-mirror cases

* style(integrity): clarify conditional for flow

* fix(integrity): throw sync error rather than rejecting it

* Update yarn.lock with new integrity field

* Upgrade ssri

* Use the latest version of the SSRI package

* Optimize integrity matching from lockfile a bit

* Refactor digest support determination

* test(error): fixed expected error wording

* fix(checksum): fail validation on malformed hash or integrity

* fix(test): verify integrity failure on malformed integrity string

* test(fixtures): add install auth malformed integrity fixture

* chore(deps): update dependency eslint-config-fb-strict to ^22.0.0 (#5570)

**Summary**

This Pull Request updates dependency eslint-config-fb-strict from ^20.1.0-delta.3 to ^22.0.0

**Test plan**

`yarn lint` should pass.

* chore(jest): Upgrade Jest flow types (#5573)

**Summary**

Follow up to #5569.

**Test plan**

`yarn lint` should pass without errors.

* ci(appveyor): Fix AppVeyor tests (#5574)

* ci(appveyor): Fix AppVeyor tests

**Summary**

Jest 22.4.x mocks the process object without a proper stub for `process.mainModule`. In our
lifecycle code, we try to set `env.npm_execpath` when it is not defined by using
`process.mainModule.filename`. When running tests on AppVeyor, we run Jest directly, thus we don't
have `env.npm_execpath` set, triggering the `process.mainModule` code path which is also not set,
causing tests to fail.

**Test plan**

AppVeyor builds should pass.

* Fix tests

* Add missing package cache

* Bring --update-checksums back

* Fix tests

* Bring --update-checksums back

* Fix Flow error

* Fix error w/ updateChecksums

* Update ssri semver in package.json

* Stabilize TarballFetcher.fetch tests

* Moar test fixes

* test(update-checksums): make sure the flag works when integrity is malformed

* fix(updateChecksums): minor issues and edge cases

* Revert unrelated change

 ahead of 'imsnif/master' by 1 commit.

* Slight refactor in lockfile parser

* test(fixtures): update integrity and dep versions

* fix(checksums): create integrity when importing from node_modules

* test(fixtures): add integrity field to expected yarn.lock

* Fixes error reporting

* Fixes error reporting

* Fixes tests",False
94933a8b4de4df8af55529818dd98dafce52b978,2018-08-01 19:47:17,Ma√´l Nison,Bumps hawk (#6194),False
18b103c81828c1c862e9e095212ea4467f154e51,2018-07-30 01:28:02,Robert (Jamie) Munro,"fix: Show essential output for list commands when using --silent option (#6158)

* Add force option to console tree reporter

* Ensure the useful output is displayed in silent mode

For `list` and `licenses list` commands. They make no sense as commands
without the tree output, but it does make sense to use --silent to
suppress informational output about yarn version and how long the
commands took if you are redirecting to a file, for example to compare
with other projects or other versions of the same project.",False
81114940301c63d9b21ae658b70c8ee2a6058e8f,2018-07-30 01:26:46,Shubham Kanodia,Added a got field to incompatible engine message (#6161),False
8cbbc6df34d5ff050bed507224f42abd1b104904,2018-07-25 20:38:51,Ma√´l Nison,Fixes windows filtering (#6149),False
dda0217be6cdc7c2b79934fe7747c5284aaf437d,2018-07-25 13:39:29,Travis Hoover,"Allow bundleDependencies to be respected during `pack` (#5966)

* Rename bundledDependencies to bundleDependencies

* bundleDependencies respected during pack

Walk the bundleDependency tree and include the related files.

* Unskip test for bundledDependencies

* Fixing test case as os.tempdir would return a symlink

* Make tests pass on windows",False
76fbce16f1f58f3b7755c043998b462f997ff592,2018-07-23 20:47:58,Ma√´l Nison,Fixes request mock on Node 10.7 (#6132),False
5fe24016aa36ebacef973a77a18dd217646f2fd2,2018-07-19 21:08:10,Ma√´l Nison,1.10.0-0,False
9e6153e9c1a9189ff288007e2d281612458b4773,2018-07-19 21:08:02,Ma√´l Nison,v1.9.0,False
2f4bba13897286847fd005d415fc7b197f61f225,2018-07-19 21:02:27,Burak Yiƒüit Kaya,"fix(sshpk): Upgrade requests and sshpk to latest versions (#5934)

Upgrades `request` ve `sshpk` modules to latest versions to avoid deprecated `Buffer` usages.

#5477",False
8a404612a6efb60e60e5ac33702aa1bb4206a9a5,2018-07-19 21:01:15,Michal Piechowiak,fix(pack): higher priority to .npmignore over .gitignore on windows (#5979),False
59377f6ffb7e53a5f94844c68cffb6a5a2690894,2018-07-19 20:49:17,Chris Krycho,"Correctly resolve scoped packages in `yarn create`. (#5983)

Fixes #5981.",False
20c0174d0664252041cb275d62baae65b51b3fed,2018-07-19 19:27:39,renovate[bot],fix(deps): update dependency fs-extra to v7 (#6114),False
0d726824bac9135b3276ff62ea36f82f2238a754,2018-07-19 19:23:25,Kishan,update npm link (#6120),False
a9e61f7bd5a95a358f774cc8000bf4cda54b574a,2018-07-19 19:19:29,Matt Q,"Clarified yarn link Warning (#6106)

* clarified yarn link warning

* Update en.js",False
3cce1bbc7e830f58ab7c37bd1d386ea14135f000,2018-07-19 19:19:11,Stephen John Sorensen,"[WIP] dedupe hoister levelQueue items for performance gains (#6083)

* dedupe hoister levelQueue items for perf gains

* Use set instead of {}

* Fix variable name",False
1711e72d7d86af26a4ea4cfbb9608c47989fb913,2018-07-06 15:25:27,renovate[bot],chore(deps): update dependency eslint-plugin-relay to ^0.0.24 (#6020),False
ea5f237938c234869ab6f3f58eaa98bab756bca5,2018-07-06 15:24:20,Ramiro Silveyra d'Avila,"fix(resolutions): Warn instead of erroring if unmatched dependency matches resolutions with glob support (#6033)

Summary

PR #4835 fixed `yarn check` while using simple resolutions keys.

This PR fixes `yarn check` while using resolutions keys with globs or dep trees.

Test plan

New test case added.",False
e946807ceec2d7cdd5c42ef4fcd7f50f41a5d760,2018-06-27 15:15:55,Ma√´l Nison,Implements --no-default-rc and --use-rc (#6007),False
d492daa3af03c41e6e673e5cae4a1b5707154c22,2018-06-26 22:38:05,Grey Baker,Handle invalid versions in satisfiesWithPrereleases (#6019),False
eb2b565bb9b948e87b11119482ebc184a9d66141,2018-06-26 22:35:49,sth,"Simplify readFirstAvailableStream() (#6022)

* The calling function already knows which paths we tried

* This generic function isn't specific to tarballs

* Return only non-null paths, and return them as an array

This makes the function more convenient to use

* Only use real paths in readFirstAvailableStream()

* Return stream directly",False
c53d0399ade825adc148842b8cdac57c6b1fd624,2018-06-21 20:39:03,Stephane Rufer,"fix(util/fs): use file content instead of mtime to determine equality (#6010)

npm 6 locks mtime of all files in the published tarball to be October
26th 1985, which means mtime is no longer changed when a package
is published with an npm version above 6.

See: https://npm.community/t/tarball-content-timestamps-locked-to-1985/149

Fixes: #5723",False
7f1a3f4c61caf95ac2972124adeffa6302d8e13f,2018-06-14 16:59:07,Steven Hargrove,"fix(cli): force registryFolders to be unique (#5985)

fix(cli): force registryFolders to be unique",False
ed76c6a8979983049dce409b735a051091fe61b7,2018-06-12 18:21:25,Burak Yiƒüit Kaya,"fix(install): Fix bin-links and related hung installs on Windows (#5975)

* fix(install): Fix bin-links and related hung installs on Windows

**Summary**

This is a fix for #5927 which broke all installs with bin links on
Windows. Fixes #5927, fixes #5971. Also #5968 was probably about this.

**Test plan**

AppVeyor tests should start passing (instead of timing out).",False
0d2cc583116f8d334d10cb41413929ec6c60da4f,2018-06-12 02:14:54,Ma√´l Nison,Fixes relative cache paths (#5973),False
9d678b9f996dbc3234295f8b0220f0f04fa23421,2018-06-11 15:50:07,Ma√´l Nison,Manually bumps the lockfile version,False
cd4065107ba1c539585de5457f43abb0eb3479b9,2018-06-11 15:16:20,Ma√´l Nison,1.9.0-0,False
eb9d32c680bede68b88d185b91a0ec6781b2c218,2018-06-11 15:16:15,Ma√´l Nison,v1.8.0,False
bbef3ee90c3fc78dfa721bd15c674632f76ac8cc,2018-06-11 15:12:47,Pig Fang,feat(cli): enable emoji on Hyper terminal (#5875),False
fc94a16b7ca90a188d084aef8cea406b60e8c38f,2018-06-11 15:07:48,sth,"Make sure TarballFetcher error messages contain names of problematic files (#5964)

* Make sure name of broken file is mentioned in error message

* Pass when creating stream

This isn't required to open the file (`fd` is used), but it allows the
stream to have a useful `path` attribute.",False
bdf4acccf6acc0bdf35cd602d57131735101dfa4,2018-06-09 04:17:07,Wolfgang Beyer,"Remove logic to skip updating of existing symlinks (#5751)

* Remove logic to skip updating of existing symlinks

* fix testing of symlink updating

* fix test of symlink updating failing on Windows os

* Update global.js

* Update global.js

* Prettier",False
be705c3daaeb5a8b6b845af1c32e79bb11099743,2018-06-08 21:11:14,Eelco Lempsink,"Check for ENOENT, add tests (#5938)",False
e815a5e9e8ccf30e5b0c65c3a8a7f713ee38f6db,2018-06-08 21:08:47,Ma√´l Nison,"fix(autoclean): Fixes autoclean when used with workspaces

**Summary**

The current autoclean implementation doesn't take workspaces into account. It causes an error when running `yarn install` from a different directory, and some files not to be cleaned because only the top-level directory will.

**Test plan**

Added a test.",False
ef4926d373cb26a377c4ed2ea80fa6e41d015cf0,2018-06-08 20:41:34,Aram Drevekenin,fix(import): warn and normally resolve dep missing from package-lock.json (#5947),False
1be9f75b70d651da01ae89c916da9e47836a2485,2018-06-08 16:09:50,sth,"chore: Better error handling and tests in TarballFetcher (#5845)

**Summary**

Currently `TarballFetcher.fetch()` doesn't notice when a truncated tar is extracted, the extracted directory will simply be incomplete. This pull request updates tar-stream to the newest version to detect these errors and shows a useful message to the user.

**Test plan**

New tests are added.",False
dc39ebddd309eb83aaeb496cdb5ed58ae779b057,2018-06-06 22:54:22,Pei Jie,add ability to publish non-interactively without version bumping (#5748),False
ae2de7bcd9e9322551478c7a6da31af72cda3bf4,2018-06-05 19:58:40,Bryan Wain,fix: don't use folder name to determine focused package name (fix #5881) (#5893),False
d5551e8c59b2e9785139fc059d2aaa8d21c94bb7,2018-06-05 19:55:08,Ilkka Halila,"Replace nodejs dependency with nodejs-lts. (#5925)

The LTS releases of nodejs are less likely to break other parts of a project.",False
7a6b9750cdb4bbd194437cb7b1be682fbef23a5d,2018-06-05 19:53:18,Doma,fix(deps): change cmd-shim to @zkochan/cmd-shim (#5927),False
726bda5b2579be9aa729e886cda6c964b2ea044c,2018-06-01 21:39:37,Jeremy Morrell,feat(install): warn if a package-lock.json file exists,False
b8b51eb2d81107f32b35cdd010a8bbc839652f41,2018-05-31 21:53:09,sth,"fix(info): report empty npm response with `infoFail` again (#5915)

* Report empty response with `infoFail`

It was this way before #5903 and it looks like such a response can
still happen.

* Removed unused import",False
41040f1d21bb792d4cbb344a9d2e9f4801e1af7a,2018-05-30 18:26:25,Aram Drevekenin,"fix(lockfile): remove yet-unreleased integrity field (#5911)

**Summary**
These are not supposed to be here yet. Only once this is merged: https://github.com/yarnpkg/yarn/pull/5042

**Test plan**
CI should be green.",False
4b6a5dd58d87246c109fdf4eaf2a74451af97d7a,2018-05-30 02:42:05,Aram Drevekenin,"fix(info): handle 404 with non-empty body (#5903)

* fix(info): handle 404 with non-empty body

* fix(info): throw on empty response from registry",False
643deaa9673bcfe3afb41413572c0df2aa308e03,2018-05-29 14:53:01,Daniel Lenksj√∂,fix(github-resolver): support for semver hash (#5858),False
c640c45cfdab927afcc5adb61359ff78c0aafc6c,2018-05-29 03:52:45,Daniel Lo Nigro,"Update Debian package to ""conflict"" with cmdtest (#5898)

The `cmdtest` package also installs a `yarn` command, and people often get confused by this (see #2821). If we specify that the Yarn package conflicts with the cmdtest package, installing Yarn will automatically uninstall cmdtest.",False
ec7e671f2b13944579aec000ae55b0cbd510ebee,2018-05-25 12:56:17,Bryan Wain,fix bin links for link: protocol (fixes #5876) (#5879),False
7f5947ffcee69bac4abbddaf718bce4acb559dd6,2018-05-24 22:22:31,akrieger,"Support MSYS{2} bash in bin/yarn (#5859)

**Summary**
Add a case in `bin/yarn` to run `cygpath` on the yarn base dir if the environment is MSYS.

Automatic path translation happens differently, or perhaps conditionally, depending on whether msys detects the target binary is a native Win32 application or not. While bash from Git for Windows seems to treat `winpty` as a Win32 binary, the version of `winpty` which is compatible with MSYS2 does not trigger the path conversion.

**Test plan**
`yarn` executed from within bash within MSYS2 correct executes, instead of failing with a path
related error. `yarn` continues to execute correctly from within Git Bash.

```
// Changes were made to system install to test more easily.
$ which yarn
/c/Program Files (x86)/Yarn/bin/yarn
akrieger@AKRIEGER-701 /c/Users/akrieger
$ yarn
yarn install v1.6.0
info No lockfile found.
[1/4] Resolving packages...
[2/4] Fetching packages...
[3/4] Linking dependencies...
```",False
afc778f28249692d6381fd61e5c8e9bc659c0f3e,2018-05-24 17:29:31,Daniel Lo Nigro,"ci(brew): Pass access token to Homebrew job (#5862)

**Summary**

Homebrew changed how their `brew bump-formula-pr` script works, and it now requires a GitHub access token to be set as an environment variable instead of reusing the access token configured for ""Hub"" (https://hub.github.com/)

This updates the Jenkins job to pass a credential (the access token) to the script as an environment variable.

Closes #5861

**Test plan**

Make sure we can update formulas on Homebrew after the change.",False
05c1b66ceff96821953359c99ab2b8ad3e3f3e79,2018-05-24 02:26:06,,1.8.0-0,False
11eb9bb72d804a5860049ce8d01f0c189659e2f7,2018-05-24 02:25:56,,v1.7.0,False
b3bce08b90e68d8c5cade70146a5f8c6c2cbc441,2018-05-23 20:29:05,Masato Ohba,"chore: Remove unused constants (#5830)

**Summary**

I just found that those constants are not used anywhere, then just removed them.

- `SELF_UPDATE_TARBALL_URL` : it may be remain when removing `self-update`
- `SELF_UPDATE_DOWNLOAD_FOLDER` : it may be remain when removing `self-update`
- `ACCESS_FILENAME` : this seems to have never been used

Please feel free to close this if you won't need this kind of nitpicking pull request. :P

**Test plan**

Let me put search results.

```shell
~/.g/g/o/yarn ‚ùØ‚ùØ‚ùØ ag (SELF_UPDATE_TARBALL_URL|SELF_UPDATE_DOWNLOAD_FOLDER|ACCESS_FILENAME) .                                                        ‚èé remove-unused-constants ‚ú±
src/constants.js
26:export const SELF_UPDATE_TARBALL_URL = 'https://yarnpkg.com/latest.tar.gz';
27:export const SELF_UPDATE_DOWNLOAD_FOLDER = 'updates';
89:export const ACCESS_FILENAME = '.yarn-access';
~/.g/g/o/yarn ‚ùØ‚ùØ‚ùØ
```",False
a2defdbece5698f6c969b76d15c4b4351223ee54,2018-05-23 19:24:20,Jimmy Chan,"feat(cli): Generate an empty lockfile when there are no dependencies (#5843)

**Summary**

this reverts most of #3395 992b5c9086406b57416e1b0c3c77bea894fc97f0 which appears only necessary to work around #3329 (requesting the yarn version with -v triggered install). As noted in #5839, `yarn -v` and `yarn check` no longer have `install` as a side effect and IMO, the original behavior where an empty lock file is generated as part of install is the correct behavior.

Many tools currently sniff for a yarn.lock file to determine if yarn is being used. It seems more consistent with `yarn import` which generates a lockfile even if the existing node_modules is empty.

fixes #5839 

**Test plan**

`yarn run test` passes
`yarn run lint` passes
`yarn-local install`  saves an empty lockfile
`yarn-local import`  continues to save an empty lockfile
`yarn-local -v` will not trigger install and will not generate a lock file. correctly displays a version.
`yarn-local check` will not trigger install and will not generate a lock file",False
eee5bee556670ea2e99b038643f96694965af804,2018-05-23 15:46:38,Aram Drevekenin,"fix: Add Node 10 support (#5769)

**Summary**

1. Added node 10 to CircleCI
2. Fixed a test that was using the `net.createServer` method. This was having issues, likely because of this: https://github.com/nodejs/node/issues/20334 - it now uses a ""normal"" `http` server instead, serving the same purpose.
3. Changed the `readFirstAvailableStream` method in `util/fs.js`. I'm guessing this is related to the same issue as 2, but there have been quite some changes in `10` that might be causing this - so it's just a guess. Since this piece of code could be clearer and more conceise anyway, I opted to just change it. Now instead of relying on the stream `error` event to check if a file exists, it just explicitly checks it before starting the stream.
4. Upgraded `upath` from `1.0.2` to `1.0.5` which supports node 10 (found through its `engines` field when installing).
5. Upgraded Jest
6. Fixed a bug regarding replacing symlinks to non-existent targets on Windows
7. Removed a redundant test
8. Fixed two test cases that were failing frequently on macOS builds

fixes #5761
fixes #5477

**Test plan**

CI should be green (including and especially the new node10 job!)",False
c5067645e905b4d4ce31150eb28c060b8f31ec2b,2018-05-23 01:05:25,Jeff Valore,"fix(run): Fix custom shell execution (#5851)

**Summary**

A previous change removed the -c option that was passed to the shell, causing script like ""echo foo""
to fail if script-shell was set to bash. This change cleans up the way custom shell is specified,
passing the shell to node's child process spawner instead of trying to make it part of our command
string. Doing it this way seems to account for the previously required -c flag.

fixes #5699 

**Test plan**

No test was added because our tests for the `yarn run` command use a mocked `execute-lifecycle-script`. Plus these tests would get run on windows too, so making a test that specified a config of `script-shell bash` would fail if it was unmocked.

Can be tested manually by creating a `.yarnrc` that contains:

```
script-shell bash
```

and adding a script like:

```
  ""scripts"": {
    ""foo"": ""echo foo; echo bar; echo $SHELL""
  }
```

which should produce the output

```
$ yarn run foo
yarn run v1.6.0
$ echo foo; echo bar; echo $SHELL
foo
bar
/bin/bash
‚ú®  Done in 0.15s.
```",False
cde75661fcc6eef152f5884565ddb16924c98430,2018-05-17 23:12:50,Bryan Wain,focused workspaces (#5663),False
661065be5a2f6bf4fd41665e6282d273459c5d17,2018-05-17 16:17:55,Aram Drevekenin,"feat(import): convert package-lock.json to yarn.lock (#5745)

Adds the ability to yarn import using package-lock.json as the dependency-tree state. When one enters the yarn import command, if a package-lock.json file exists, yarn will attempt to import from it. If not, it will import from node_modules normally.",False
d28f8e59ef94a5bdca0e4c9f4a126db14e56db2c,2018-05-13 23:19:42,An Thien Tran,"Fix #5517: Backlashes in output fail for escape sequences in Windows (#5792)

**Summary**
This is the fix for [#5517](https://github.com/yarnpkg/yarn/issues/5517) where backlashes in the output in Windows are broken if the directory path contains ""\n"". The **stringifyLangArgs** method has been modified so that ""\n"" will only be replaced by EOL if it is not preceded by a ""\\"". 

**Test plan**
The test project path is C:\\Users\\An\\Documents\\Projects\\oss\\name\
Before
```
error An unexpected error occurred: ""C:\\Users\\An\\Documents\\Projects\\oss\ 
ame\\package.json: Unexpected token U in JSON at position 139"". 
```

After 
```
error An unexpected error occurred: ""C:\\Users\\An\\Documents\\Projects\\oss\\name\\package.json: Unexpected token U in JSON at position 139"". 
```

Also added automated tests.",False
05080da817ec33359615ac5f35ab9d51793e5d50,2018-05-09 07:28:23,Konstantin Raev,"fixes ignored folders in prebuilt packages feature of offline mirror (#5793)

* fixes #5755

* lint and duplication fixes

* fix test",False
08870c8fcd109730a8d47c41a024acfbba23a65a,2018-05-06 17:06:24,brainfish,"Fix #5776: CLI switch ""--scripts-prepend-node-path"" doesn't work (#5787)",False
7ab9eda095045d5bb95c53dea442f718b4c02c36,2018-05-06 17:04:07,Anton Alexandrenok,Excluded shebang for lockfile package (#5788),False
a35a4f97dd7e5f6f029b5e0f855bfd73ef338ca4,2018-05-02 19:33:20,sth,Show error message to user when publishing fails (#5771),False
2c88558aff1f26aca4a73f1e4180b5b6ffdb04de,2018-05-02 19:32:43,renovate[bot],fix(deps): update dependency fs-extra to v6 (#5767),False
546a1576edbf701021ce65e3dd8daff267083f52,2018-05-01 03:46:29,Aram Drevekenin,"chore(deps): update deprecated deps for node 10 (#5763)

**Summary**
These are a few upgrades of dependencies in order to address issues on node 10 (in relation to: https://github.com/yarnpkg/yarn/issues/5477)

*duplexify* *3.5.0* => *3.5.4* (https://github.com/mafintosh/duplexify/commit/00d08fa3f223e1c7d1c05e0350c236d1c4e32d09)
*v8-compile-cache* *^1.1.0* => *^2.0.0* (https://github.com/zertosh/v8-compile-cache/pull/7)
*natives* *1.1.0* => *1.1.3* (https://github.com/gulpjs/gulp/issues/2162)

The last did not have to do with `new Buffer` but was something I personally encountered when using `gulp` for building in `node 10`. I don't know how common this is, but the fix is easy and within scope, so decided to include it.


**Test plan**

CI should be green.",False
31b6543a9c73ca79c786b23c4c260ea491d60708,2018-04-29 01:20:21,Burak Yiƒüit Kaya,"fix(tar): Upgrade tar-fs and tar-stream to fix warnings on Node 10 (#5752)

**Summary**

Another step towards fixing #5477.

**Test plan**

All existing tests should pass.",False
63c56c713175d1db384d76b81dabe7d53e93119a,2018-04-26 23:41:48,peijiesim,"fix(run): yarn run should never prompt when non-interactive (#5694)

**Summary**

This pr fixes a bug ([#5655](https://github.com/yarnpkg/yarn/issues/5655)) in which `yarn run --non-interactive` prints a `Error: No command specified` message and also suppresses the message `question Which command would you like to run?:` when running non-interactively. 

**Test plan**

```
> yarn-local run --non-interactive
yarn run v1.6.0
info Commands available from binary scripts: acorn, atob, babylon, browserslist, commitizen, detect-libc, errno, escodegen, esgenerate, eslint, esparse, esvalidate, flow, git-cz, git-release-notes, gulp, gunzip-maybe, handlebars, import-local-fixture, jest, jest-runtime, js-yaml, jsesc, jsinspect, json5, loose-envify, miller-rabin, mkdirp, node-pre-gyp, nopt, prettier, rc, regjsparser, rimraf, sane, semver, sha.js, shjs, sshpk-conv, sshpk-sign, sshpk-verify, strip-indent, strip-json-comments, uglifyjs, user-home, uuid, watch, webpack, which
info Project commands
   - build
      gulp build
   - build-bundle
      node ./scripts/build-webpack.js
   - build-chocolatey
      powershell ./scripts/build-chocolatey.ps1
   - build-deb
      ./scripts/build-deb.sh
   - build-dist
      bash ./scripts/build-dist.sh
   - build-win-installer
      scripts\build-windows-installer.bat
   - changelog
      git-release-notes $(git describe --tags --abbrev=0 $(git describe --tags --abbrev=0)^)..$(git describe --tags --abbrev=0) scripts/changelog.md
   - commit
      git-cz
   - dupe-check
      yarn jsinspect ./src
   - lint
      eslint . && flow check
   - pkg-tests
      yarn --cwd packages/pkg-tests jest yarn.test.js
   - prettier
      eslint src __tests__ --fix
   - release-branch
      ./scripts/release-branch.sh
   - test
      yarn lint && yarn test-only
   - test-coverage
      node --max_old_space_size=4096 node_modules/jest/bin/jest.js --coverage --verbose
   - test-only
      node --max_old_space_size=4096 node_modules/jest/bin/jest.js --verbose
   - watch
      gulp watch
‚ú®  Done in 0.28s.
```",False
12d8f7fab0875af1e05a91dd5945e05c5350a6d1,2018-04-26 23:15:12,Ma√´l Nison,"feat(bin): Implement an optional parameter support to `yarn bin` (#5739)

* feat(bin): Implement an optional parameter support to `yarn bin`

This allows to get the path to a binary without making assumptions regarding the layout of the
`node_modules` folder.

BREAKING CHANGE: n/a

n/a

* Adds `yarn bin` tests

* Update en.js

* Update bin.js

* Update bin.js

* Fixes the tests",False
f1aba796aeb74df372e8eb4e2fb69e519619a62e,2018-04-26 23:09:58,Jake Moxey,Add error when attempting to remove dependency from workspace root and add -W flag (#5737),False
7312d9d066e070d5a857befd9e1ee528d53999a2,2018-04-26 23:08:29,Ma√´l Nison,"Adds the directory that contains Node to the PATH (#5743)

* Update execute-lifecycle-script.js

* Adds a test

* Fixes prettier",False
fbf5046df6b1dce3b5ba0430b477933a1bf910e3,2018-04-26 20:33:53,simevo,"fix #5729: replace dependency on deepequal with deep-equal (#5742)

* fix #5729: replace dependency on deepequal with deep-equal

* fix bogus lockfile (yarn.lock)

it should only remove deepequal (and its two dependencies
fast-apply and is-args) and add deep-equal

the first lockfile was produced with:
```
rm -f node_modules yarn.lock
yarn
```
this has been produced by restoring the original yarn.lock from
the master branch and:
```
rm -f node_modules
yarn
```",False
99bd44bb430e634c5b898fe6ef993860ac6e42f0,2018-04-26 16:57:17,Jeff Valore,"fix(publish): Run pre and postpack lifecycle scripts on publish (#5712)

**Summary**

npm runs the pre and post pack scripts on publish, but yarn was not. Added these scripts.

fixes #5707

**Test plan**

Added a test that regex's the output to look for scripts being run.
If you look at the test, the regex is kinda weird, but I did it that way to make sure the log statements were in the correct order in the output.",False
8bf8eb0ea8450b1c667ebd493efaf319ca6764ae,2018-04-26 16:31:52,Jake Moxey,"fix(console-reporter): Fix issue where tree logger was ignoring --silent/-s flag (#5722)

**Summary**

This PR fixes #5721 where `upgrade` was not being silent when the `--silent`/`-s` flags were provided. It still printed the tree.  üñ®üå≥  

**Test plan**

Added two new test cases.

Manual CLI tests:

Before:
```
> yarn-local upgrade --silent
‚îî‚îÄ left-pad@1.3.0
‚îî‚îÄ left-pad@1.3.0
```

After:
```
> yarn-local upgrade --silent

```",False
523198451affdf182af3fd58df516710582c03f3,2018-04-26 16:21:36,aduh95,"fix: Remove usage of deprecated Buffer constructor. (#5477) (#5731)

**Summary**

Fixes #5477 and #5704.

Remove usager of deprecated `Buffer`constructor to avoid ugly warnings on Node 10.

**Test plan**

Existing test should pass.",False
cbc6c8857cd74b658068c8ebec38d142dc3e6a7c,2018-04-23 21:42:56,Jeff Valore,"fix(publish): Fixes the path parameter when specifying a dir to publish. (#5711)

When specifying a directory as the first parameter to `publish` yarn was ignoring it and just using
`config.cwd`. This fix checks to see if the passed parameter is to a directory and if it is it sets
`config.cwd` to that directory, so that manifest loading and lifecycle script execution occur
correctly in that specified directory.

fixes #5678",False
9e97f50aea60f58042403ff503d757a732756d6a,2018-04-19 14:34:58,Burak Yiƒüit Kaya,"test(init): Fix flaky init test which used snapshots w/ concurrent (#5700)

**Summary**

Snapshots should not be used with `test.concurrent`. This PR fixes a
flaky test which was doing exactly this.

**Test plan**

CI should pass.",False
2f0eb8eace4c19c5e4606176371782c60bc7e0e7,2018-04-19 03:35:10,Rebecca Turner,"fix(build): Stop scripts from trying to read user input during install (#5632)

**Summary**

Fixes #976.

This is a bug fix to the problem where lifecycle scripts that try to go interactive hang yarn installs with no indication as to why.

This sets stdin to /dev/null and, on unix-like systems, detaches the process from the terminal making it unable to read /dev/tty.

Previously with the spinner enabled was impossible to give input to an interactive script on stdin, because a pipe was kept open from the main yarn process to the child process but it was never written to.  Interactive scripts could previously use /dev/tty on unix-likes to bypass this, however the fact that scripts are run in parallel means that if two scripts go interactive in this manner that they'll step on each other.

This does not change the behavior if the spinner is disabled. Also added a simple integration test with a blocking install script that times out without the patch.

**Test plan**

Try running `yarn add semantic-ui`. Hangs without the patch, fails with the patch.",False
f1b63efbc14262ef3a1feafb34ca2dc0d2cacb30,2018-04-18 22:06:19,Max Burmagin,"adding resolutions should cause lockfile regeneration (#5603)

* adding resolutions should cause lockfile regeneration

* fix test

* fix flow lint error

* codereview fixes",False
101d48f164ab032c232442bdfd1b707a034ca494,2018-04-18 22:03:50,sth,"Make secureGitUrl() warn for insecure Urls (#5424)

* Allow insecure URLs with warnings (#4307)

* Added test cases for secureGitUrl()",False
f69ecf1678dd046493ce79c29de50264765efc5c,2018-04-18 21:59:44,Jeff Valore,"fix(resolution): Prevent duplicate patterns in PackageResolver patternsByPackage array (#5681)

* fix(resolution): Prevent duplicate patterns in PackageResolver patternsByPackage array

Previously duplicate patterns would be inserted into this array, causing unneccecary looping and
manifest reading of the same patterns. It also caused a bug when duplicate patterns were marked as
peerDeps (#5676). We now prevent these duplicate entries.

#5676

* fix linting

* refactor Object.assign to expansion",False
cb81cde932fea05bc2d94bf8984c7aea99d75bcd,2018-04-18 14:30:12,Ian Sutherland,"fix(config): allow binLinks to be set in .yarnrc (#5113)

**Summary**

Fixes #4925. Allow setting `bin-links false` in `.yarnrc`. Currently setting this option doesn't have any effect.

**Test plan**

* Create a package with a `.yarnrc` file containing the line `bin-links false`
* Run `yarn add gulp-cli` (or any package with binaries)
* Verify that no bin links were created in `node_modules/.bin`",False
bf05ad36cfc00073cc424e046b71d75eabd863cb,2018-04-17 22:22:20,Burak Yiƒüit Kaya,"test: Fix failing tests on master (#5687)

* test: Fix failing test on master after a release of a new package

**Summary**

We had an integration test relying on a specific version of a package without coding that version
into the test. This PR fixes that and fixes tests failing on master as of now.

**Test plan**

CI should pass.

* Lockdown more package versions

* Don't use test.conccurent with snapshots

* Fix broken snapshots",False
2f1ad7f4277c147834a1e3c7160ca9d16ac00fae,2018-04-16 21:34:59,Ma√´l Nison,"chore(release): Add changelog script (#5677)

**Summary**

This diff simply adds a script to easily generate the changelog between the current tag and the previous one.

**Test plan**

Manually ran `yarn changelog`.",False
25742bb52278ce257f79aa356d23dbd093baa863,2018-04-16 02:32:18,Jeff Valore,"fix(resolution): Allow github dependency refs of type ""#pull/1/head"" (#5673)

**Summary**

Fixes #1610. Previously yarn would allow a dependency on a GitHub pull request with ""#1/head"" where 1 is the PR number. npm allows the format ""#pull/1/head"" as well. For compatibility, allowing Yarn to fall back to this format.

**Test plan**

Added a test to `git-ref-resolver` to test the case `""pull/10/head""`",False
1522cdeee64f7eebfc4a0e4c3596158654f21692,2018-04-16 02:25:28,Brendan Warkentin,"feat(version): Added semver versioning flags to version command (#5670)

fixes #5670 

**Summary**

Currently, it's possible (although undocumented) to automatically bump the version by running something like `yarn version --loose-semver --new-version minor`. To me, this seems less convenient and less intuitive than something like `yarn version --minor` (closely comparable to `npm version minor`). I've added the ability to automatically increment the version with one of the flags: `--major`, `--minor`, or `--patch`. This will also satisfy feature request #5367.

**Test plan**

I've included Jest test cases for each of the new versioning flags.",False
059ce448e471ae9fcebea25c4700641599e77308,2018-04-16 02:25:03,Burak Yiƒüit Kaya,"chore(request): Add an `unfiltered` option to getting full responses from npm (#5667)

**Summary**

Follow up to #5593. Looks like we use an npm-specific request header to reduce the bandwidth. That said, for some commands, we need the full responses, which was achieved by setting the `Accept: application/json` header manually. This patch introduces a more descriptive request option, `unfiltered` to standardize this usage.

See https://github.com/npm/npm-registry-client#requests for more info.

**Test plan**

Existing tests should pass.",False
8a7ee772c1b2bec108597567dd8e754abb34778e,2018-04-13 21:46:57,Rubycut,"fix(owner): Fix the currently broken `yarn owner` command (#5593)

**Summary**

* fixing currently broken owner command
* doesn't ask for npm username and password for list command
* adding basic test #3893 

**Test plan**

Yarn now correctly displays the list of package owners. Also added automated tests.",False
a23cc8e535afa5502e1cb9eb3269ed9fb392f7cd,2018-04-13 20:51:34,Burak Yiƒüit Kaya,"fix(run): Remove notice and licenseText fields from npm_package_* (#5666)

**Summary**

Fixes #5420. NOTICE and licenseText for packages can be quite long which
can cause E2BIG errors when trying to put it into environment variables
when running scripts. Since these fields are not useful for scripts
anyway, add them to the current blacklist which already has a similar
field in it, `readme`.

**Test plan**

Added an automated test to ensure the env doesn't have these fields but
keeps any other keys.",False
3a04db792a0ba7cdef928e8ff52ecf0d4430829a,2018-04-13 16:22:28,Dimitar Nestorov,"feat(run): Set `INIT_CWD` in environment (#5656)

**Summary**
`INIT_CWD` environment variable holds the full path you were in when you ran `yarn run`

Motivation: https://twitter.com/housecor/status/983773854530260992

**Test plan**

1. Create a script called `testscript.js`
2. In the file type `console.log(process.env.INIT_CWD);`
3. In `package.json` add a script with a key `testscript` and value `node testscript.js`
4. Build yarn
5. Call `../bin/yarn testscript` from the command line in a subfolder
6. The script should log the folder you're running the script from

Video: https://www.youtube.com/watch?v=XY_w8GVtuCY

**Test plan**

Added a new test.",False
75723f2e714b06818a1fa90e179a527e0919858b,2018-04-13 14:29:08,Brendan Warkentin,"feat(version): Ability to disable commit hooks on versioning (#5640)

**Summary**

Last year I contributed the ability to disable commit hooks when versioning with npm (See [this commit](https://github.com/npm/npm/commit/2dec601c6d5a576751d50efbcf76eaef4deff31e#diff-2992be03e25e9f38300b7ce175e4f4e1)). It makes sense to add the same functionality to yarn.

The original motivation for this feature is based on a pre-commit hook that included linting and testing a large code base, taking ~20 seconds to run. When that hook is run on the preceding commits, it's unnecessary and time-taking to do so on versioning. Because of that, it's nice to have the option to disable that git hook.

**Test plan**

Added lower level integration tests.",False
036a246bcb354017cb013555832513a122a26872,2018-04-13 03:47:33,Phil Quinn,"fix(upgrade): Fix for pattern not working with upgrade (#5662)

fixes #5660

**Summary**

Before it needed to have package argument to enter the block to filter the deps. Now it will do it if either a package is given or a --pattern is given.

**Test plan**

Corrected my incorrectly created tests.
Also `is-negative-zero` would not update as there is no new version which would be found in a caret. So changed that to `array-union` which has a version `1.0.2`",False
40d5ae9755945c854a228cb3229e1c037ab1f3de,2018-04-12 15:47:25,renovate[bot],chore(deps): update dependency eslint-plugin-babel to ^5.0.0 (#5647),False
95223b696d44d36de8dff9bee4c9a93d1138247f,2018-04-12 15:20:21,Quentin Dreyer,"chore(deps): update dependency validate-npm-package-license to ^3.0.3 (#5626)

**Summary**

Updating validate-npm-package-license in order to update its dependencies:
- spdx-correct
- spdx-license-ids

This is allowing us to use newer licenses such as EUPL-1.2.

https://github.com/kemitchell/validate-npm-package-license.js/compare/v3.0.1...v3.0.3
https://github.com/jslicense/spdx-correct.js/compare/v1.0.2...v3.0.0
https://github.com/shinnn/spdx-license-ids/compare/v1.2.2...v3.0.0

**Test plan**

N/A",False
6a4ef66ac5875226e3bd2448bd86ff01bee2a253,2018-04-12 10:36:33,Daniel Lo Nigro,"Remove yarn-e2e from Jenkins (#5651)

These tests are now being ran directly in CircleCI.",False
a9e33d86a73f2463151ee565430569c3fd11b4c1,2018-04-11 20:29:38,Burak Yiƒüit Kaya,"ci(renovate): Disable Renovate Docker support (#5646)

Renovate constantly nags us about pinning Docker image versions which we intentionally don't want to
(see #5622). This PR disables the whole Docker integration since we want our config to stay in this
very specific way for CI.",False
4acfe3902a010d1673c777757dc31355f2b4fd8b,2018-04-11 06:42:57,Ma√´l Nison,1.6.0,False
077313467855c5a913f96c36cd2070878917c0ad,2018-04-10 21:45:34,Burak Yiƒüit Kaya,"test(pkg-tests): Fix duplicate module errors from pkg-tests (#5636)

**Summary**

Adds pkg-tests-fixtures to module ignore path for Jest to avoid duplicate module errors during test
runs.

**Test plan**

Run `yarn test-only --clearCache; yarn test-only` and make sure you
don't see any `duplicate @providesModule` errors from pkg-tests folder.",False
ca0316b54ed57945384c368f813e49f4f789dec0,2018-04-10 21:44:39,Burak Yiƒüit Kaya,"test(resolver): Replace ocaml repo with left-pad for package-resolver (#5638)

**Summary**

Using ocaml repo for package-resolver tests were taking too long and very frequently timing out on
Windows. This patch replaces that with the much smaller left-pad repo.

**Test plan**

AppVeyor tests should not timeout for resolver tests from now on.",False
0cb76ff71912d8ca99ea1bc4faed9b3532f6b44f,2018-04-10 19:29:33,Burak Yiƒüit Kaya,"test(integration): left-pad released a new version which broke tests (#5635)

**Summary**

Pins the left-pad version used in tests to 1.2.0 to avoid future breakage when a new version is
released.

**Test plan**

Duh :D",False
ffe9a6427b740c322d86cb6a7a95a8625eb7e01e,2018-04-05 15:21:32,sth,"Fix yarn behaviour when scripts are failing (#5497)

* Add test case to check behaviour for failing scripts

See #5451

* Fixed babel compilation of Error classes for nodejs 4

Added babel-plugin-transform-builtin-extend

* We don't actually need YARN_SILENT here",False
d4299be2e0c23e7f358b44cd635f4b658d995c42,2018-04-05 15:19:00,Jeff Valore,"fix(linking): Dont integrity check build artifacts (#5470)

* fix(linking): Dont integrity check build artifacts

If an install script modified a file that existed in the package, then yarn would view the file as
stale on every command, mark the package as ""fresh"", and re-run the install scripts.  With this
change, known build artifacts from the integrity file are checked, and if this package file is a
build atrifact, it's size and timestamp are not checked.

#932

* WIP log message for debugging on CI

* WIP adding logging for debugging CI

* WIP adding logging for debugging CI

* remove debugging console statements.

* fix file timestamps for node 8 copyFile. fixes issue on linux.

* change file mode to what works on windows

* add file timestamp comparison and skip if correction not needed

* fix lint errors

* add error handling to fixTimes for some edge cases

* pass undefined instead of 0 as a file id

* refactor fs code, move OS specific edge cases to fs-normalized.js

* empty commit to rerun CI

* fix logic error when closing file, and fix Flow error",False
1b1cf48f29d83e44c6cd2fe242641c5abcd5755d,2018-04-05 15:17:52,xsbchen,"fixed link and unlink cmd on windows (#4772) (#5524)

* fixed link and unlink cmd on windows (#4772)

* add test case

* fix test case",False
28c89216e63ca267e2b5fdcf3662860ca8b81282,2018-04-05 15:17:05,Jeff Valore,"fix(config): Don't pass .yarnrc generated flags to workspace child command (#5534)

* fix(config): Don't pass .yarnrc generated flags to workspace child command

Previously, if flags were defined in .yarnrc then they would be insterted into the rawArgs array of
commander.js. The yarn workspace command would then attempt to pass these flags to the child process
that it spawns. They were being passed out-of-order and causing the child command to fail to
properly parse it's command line args. This change prevents those flags from being passed at all.
The yarn child process will read .yarnrc and inject the flags into it's own argument array anyway,
so passing them was just duplicating the flags.

#5496

* add test for 5534",False
f80cbb580c733b76b2e3b273ab1930e121be07c2,2018-04-05 15:12:45,Jeff Valore,"fix(upgrade): No longer warn when upgrading a devDependency (#5606)

* fix(upgrade): No longer warn when upgrading a devDependency

fixes #4840

**Summary**

Previously the upgrade command would call add with the list of packages
to upgrade to. No ""--dev""
flag would be carried over and this list would contain all dependencies.
As a result, Add would
report a warning `{package} is already in ""devDependencies"". Please
remove existing entry first
before adding it to ""dependencies"".`

I am using the existing `config.commandName` to decide whether or not to
display the warning.

I also updated the jest snapshots, because I was tired of the warning
about 40-some obsolete snapshots, so the snapshot changes here aren't
relevant to the functionality, just cleaning up.

**Test plan**

Added regression test in `__tests__/commands/upgrade.js`.

Upgrade tests now set `config.commandName` which is an existing
property, but is not normally set by tests. I wanted to set it for all
tests in `_helpers.js` but we don't actually specify the command we are
going to test when we build a test runner.

* refactor code based on PR feedback",False
9afb76f6b1b5e298e5957aad476caf4ea27f7a46,2018-04-05 02:40:37,Rongjian Zhang,"Remove leading spaces of `yarn run`'s answer (#5581)

* Remove leading spaces of `yarn run`'s answer

* Fix ESLint error",False
c8448968574743e7dbceb6feaa531d067509d1ac,2018-04-05 02:07:44,Andrew Lane,"Bugfix #5614: When offline pruning, don't unlink prebuilt packages. (#5616)",False
4cbecf1f76d896d10825765fc9001466b7ae1998,2018-04-03 22:07:05,ConnectDotz,"fix workspace packages ignore-pattern (#5607)

address #5579 related to #3986/#3996",False
1f18a3d3d8724bb09c4df8d84724f5eef75e52cd,2018-04-03 21:49:13,ConnectDotz,"remove .vscode settings from repository (#5608)

looks like accidently checked in a few days ago, we should not keep this file in the repo since every vscode dev will most likely have their custom settings for their own dev env.",False
66a0143a753cd4ade1a0fffee2174890d564c129,2018-03-27 20:36:27,Max Burmagin,"do not remove pattern from lockfile if it is overridden by resolution (#5572)

* do not remove pattern from lockfile if it is overridden by resolution

* test the bailout after integrity check instead of changes to the lockfile",False
25bd1a7dd7a7a51ab0e903c0317ff80aa0d3c6ae,2018-03-26 18:35:32,Burak Yiƒüit Kaya,"ci(appveyor): Fix AppVeyor tests (#5574)

* ci(appveyor): Fix AppVeyor tests

**Summary**

Jest 22.4.x mocks the process object without a proper stub for `process.mainModule`. In our
lifecycle code, we try to set `env.npm_execpath` when it is not defined by using
`process.mainModule.filename`. When running tests on AppVeyor, we run Jest directly, thus we don't
have `env.npm_execpath` set, triggering the `process.mainModule` code path which is also not set,
causing tests to fail.

**Test plan**

AppVeyor builds should pass.",False
f7e8d2d376edfe3b13789e065adffd49b78a1fd2,2018-03-26 15:33:06,Burak Yiƒüit Kaya,"chore(jest): Upgrade Jest flow types (#5573)

**Summary**

Follow up to #5569.

**Test plan**

`yarn lint` should pass without errors.",False
c36be75bc436f05497c91737e2cadae75520500b,2018-03-26 15:14:07,renovate[bot],"chore(deps): update dependency eslint-config-fb-strict to ^22.0.0 (#5570)

**Summary**

This Pull Request updates dependency eslint-config-fb-strict from ^20.1.0-delta.3 to ^22.0.0

**Test plan**

`yarn lint` should pass.",False
aada10ebeee743e2747ce6a2182230800351475f,2018-03-25 17:22:43,Peter Dave Hello,Enable curl `--compressed` option to speed up request (#5369),False
dcaf03a891a1c60d265c88b34b2948713ee03311,2018-03-25 00:51:18,Rubycut,move e2e test to circle-ci (#5459),False
f4ae8a64f0d91faa89c631e50d1f539e8bec457e,2018-03-25 00:43:31,Simon Kjellberg,"fix(cli): adjust colors for unstable version updates (#5498)

This change special-cases the color indicator for updates to
*unstable* package versions, to more accurately indicate
backwards compatibility.

For 0.x.y versions, increments to the *minor* version number will
be considered a *major* version change, and increments to the
*patch* number, will be considered a *minor* version change.

For 0.0.x versions, increments to *any* version number will be
considered a *major* version change.

This matches the behavior of how yarn & npm treats updates to
packages defined with a caret-range.",False
b7956d84100e3296ae77c0fd219077d6cd2dc5f0,2018-03-25 00:39:32,Pavel Djundik,Write stacktrace in yarn-error.log sooner (#5564),False
5862c72357ee5853016babaffb1116c5f7997122,2018-03-25 00:38:00,Burak Yiƒüit Kaya,"build(jest): Upgrade Jest to latest version, 22.4.3 (#5569)

* build(jest): Upgrade Jest to latest version, 22.4.3

This latest version of Jest comes with some fixes around async `expect` support and snapshots and we
want to use them in future diffs. Also this makes us keep with the latest and greatest.

* Fix ignore paths in Jest",False
98ad5664a928d2a16bcdcd322c57f7d03e01ba23,2018-03-25 00:36:51,Steven Hargrove,"Removed unnecessary nested if statement (#5563)

* Removed unnecessary nested if statement

* Update index.js",False
fa3a55f786b05e6694344b79dae0b321fabf1600,2018-03-25 00:36:01,Andrew Goldis,"Prevent readdir of files by using getPackagesPaths (#5032)

* Prevent readdir of files by using getPackagesPaths

* Add regression test for corrupted packages

* Prevent clean and listing corrupted packages",False
885d95188b650acdc9f0c972028083915df0f783,2018-03-15 17:44:25,renovate[bot],chore(deps): update dependency execa to ^0.10.0 (#5522),False
7b395264e07d0f055ab49afc6301a9f26d14f76a,2018-03-15 17:42:22,Ma√´l Nison,"feat: allows yarn config set to override package.json config keys (#5518)

* feat: allows yarn config set to override package.json config keys
feature in npm: https://docs.npmjs.com/files/package.json#config

* test: makeEnv
unit tests for setting environment variables for npm_*

* Update execute-lifecycle-script.js",False
6601f4b2ec87ecba4fdd7bd0bdc28acef2fe1702,2018-03-12 22:41:02,ConnectDotz,"fix nohoist binLink (#5492)

* fix nohoist binLink

address #5442

* fix test path

* fix test for symlink verification on windows platform

* add test to verify top-level package binLink",False
e123a58d4ded0c2d0ddd6fa82080207ddb1551e8,2018-03-09 15:20:03,Burak Yiƒüit Kaya,"fix(run): Fix script running in paths with special chars (#5484)

**Summary**

Fixes #5481.

With #5133, we have stopped passing the command/script name to the shell properly. This patch makes
sure the proper escaping is done when not using the `script-shell` option.

**Test plan**

Added a new integration test.",False
f0acf6043f09a8005d8f1029f169a16e6aa58e74,2018-03-08 23:59:07,Burak Yiƒüit Kaya,"ci(appveyor): Don't output coverage on AppVeyor (#5485)

**Summary**

The coverage information in AppVeyor tests is completely useless and distracting so don't generate
it.

**Test plan**

Go look into AppVeyor build and make sure there's no coverage information there.",False
4b10613c7b17c2cea0beb8d7afa0060f509f790e,2018-03-08 20:58:45,Burak Yiƒüit Kaya,"fix(mutex): Exit with a descriptive error when mutex port is in use (#5478)

**Summary**

Currently, if the network mutex port is used by another server that responds with something that
Yarn doesn't expect, it crashes with a non-descript error like a ""JSON parse error"". This patch
exits gracefully with a descriptive error message when Yarn cannot communicate properly with the
assumed Yarn mutex lead.

**Test plan**

Added new integration test.",False
5ef113f7db1201f48e22498374023ebe1e61b069,2018-03-08 08:10:45,ConnectDotz,fixed linkDuplicates for symlinks (#5442),False
95b3dfed6e08a51777de41311ec21531f4c2f3ed,2018-03-07 23:03:25,Kim Joar Bekkelund,"fix(linking): Handle missing package when using --ignore-optional (#5059)

**Summary**

Closes #5054, closes #4876, closes #5152.

Currently when running `yarn --ignore-optional` required dependencies can be marked as optional because they exist in the tree of `optionalDependencies` of one of the dependencies (but it's required by some other non-optional dependency).

For example: `once` depends on `wrappy`, but `wrappy` is also in the chain from `fsevents` (`glob` -> `inflight` -> `wrappy`) which is an optional dependency of `chokidar`. So if the first `wrappy` comes from an ""optional chain"" when yarn processes it, it ends up being marked as `_reference.optional = true`, and the package hoister therefore doesn't mark it as required.

When running the released version of yarn with https://github.com/spalger/reproduce-issues/blob/master/yarn-ignores-non-optional-dependencies you'll see

```
~/dev/reproduce-issues/yarn-ignores-non-optional-dependencies
$ yarn --ignore-optional
yarn install v1.3.2-20171204.1856
[1/4] üîç  Resolving packages...
[2/4] üöö  Fetching packages...
[3/4] üîó  Linking dependencies...
[4/4] üìÉ  Building fresh packages...
‚ú®  Done in 0.17s.

~/dev/reproduce-issues/yarn-ignores-non-optional-dependencies
$ yarn check --verify-tree
yarn check v1.3.2-20171204.1856
error ""once#wrappy"" not installed
error An unexpected error occurred: ""Found 1 errors."".
```

This fix checks whether or not the parent is marked as required, and if so, marking the dependency as required _unless_ it's listed in the parent's `optionalDependencies`.

**Test plan**

I tested this implementation with both https://github.com/spalger/reproduce-issues/blob/master/yarn-ignores-non-optional-dependencies and https://github.com/yarnpkg/yarn/issues/4876, and in both cases `yarn check --verify-tree` succeeded after running `yarn --ignore-optional`.

Also added automated tests.",False
af935787157a9f170f35afd9be5332721a012bb8,2018-03-07 17:32:20,Burak Yiƒüit Kaya,"ci(appveyor): Remove old Node builds from AppVeyor (#5472)

**Summary**

AppVeyor only has one container and runs all different tests sequentially, taking up to 50 minutes
for a full build. Node 4 will become obsolete next month and we don't really want to provide too
much support for Node 6 so this patch removes leaves only Node 8 on AppVeyor builds.

**Test Plan**

CI should pass.",False
6673bc66f8944f7c3093ba6ae2dde3128068c2d8,2018-03-06 10:08:23,Daniel Lo Nigro,"Update version number for development

This is supposed to be bumped as part of `release-branch.sh`, but it doesn't seem to have happened for some reason.",False
615ee94b0d88dfbd728d03114aa031cd11e838e1,2018-03-01 23:33:48,Ma√´l Nison,Disables jest-haste-map for the fixtures (#5437),False
df1fe6df19843963efc09ce47dde95e08cf0aa44,2018-03-01 23:33:21,renovate[bot],chore(deps): update dependency eslint-plugin-relay to ^0.0.21 (#5180),False
329767273932b400c97ea2b2aa8c594a088c0395,2018-03-01 21:08:15,Ma√´l Nison,Makes CircleCI run the pkg-tests testsuite (#5436),False
72dcc80ebb2c63f3ff5fcc5a4f1b823823c201a8,2018-03-01 19:57:29,Rafael Damasceno,"feat(resolution) Local .git repositories are now locally cloned (#5026)

* First step in fixing local repositories ended with .git

* Corrected comment and removed unnecessary hostname.

* Readd hostname.

* Add unit test for local .git repositories.

* Use FILE_PROTOCOL const.

* feat(resolution): When using a local git repo, use `git show-ref` instead of `ls-remote`

When using a local git repo, use `git show-ref` instead of `ls-remote` so that un-pushed refs can be
found.

fixes #5017

* Restore full path for local repositories.

* Update test to match logic.

* feat(resolution): Allow ""git+file:"" dependency url protocol.

Allow ""git_file:"" dependency protocol to use a local un-pushed git repo as a dependency. Fix bug
where local directories named ""*.git"" were treated as git dependencies

fixes #3670 #5017

* fix a failing test

* fix(test): Remove invalid test",False
d7cf6c5e8533cbddc98748f2bcdc9c10c41bf5e3,2018-03-01 18:30:34,Miguel Sozinho Ramalho,"default option for report in non-interactive terminals (#5068)

* default option for report in non-interactive terminals

* CI detection fixed

* fixed non-interactive

* lint

* lint options missing",False
19dec15c7d9f4e4209f7faea60da22d4a12494b0,2018-03-01 18:12:24,renovate[bot],fix(deps): update dependency normalize-url to ^2.0.0 (#5183),False
314eac0fc2b8bfde99e2c291c8c407584629541f,2018-03-01 17:10:09,sth,"test(util): Add tests for boolify() and boolifyWithDefault() (#4866)

* Move boolify functions to own file, adding tests

* Stricter types

* Fixed boolify(0)

It should return `false`.

* Syntax prettification

* Test against a set of falsy values for boolification

* Better test label

* Shortened to a ternary expression",False
ef2b4394ae78d1d73b58292abbb90b0233dd90ea,2018-03-01 00:36:11,Sean Sabour,"bug: yarn tag list prompted user for credentials removed (#5373)

* bug: yarn tag list prompted user for credentials removed

* fix lint error",False
d52ce66aea15c2f30a1124c6f47d6edfba7579e0,2018-03-01 00:34:07,sth,"Fix test for `yarn licenses generate-disclaimer` output (#5385)

* Test console output of `license generate-disclaimer`

The command writes it's output with console.log(), intentionally.
The tests should capture that output and verify that it's correct.

* Added types

* Renamed test cases",False
d2302073e9e9554a2977f3cac2bf5a156859b50f,2018-03-01 00:31:07,Olivier Ligot,"yarn publish: respect publishConfig.registry (#5376)

As reported in https://github.com/yarnpkg/yarn/issues/5310, yarn doesn't
respect publishConfig in package.json when publishing.

This is a first step to use publishConfig.registry when publishing.",False
0978543c07a8d477c6698a491e4802051d0c1c3b,2018-03-01 00:29:13,mkosieradzki,"Do not check for content in publish response (#5398)

* Do not check for content in publish response

Do not check for content in publish response - 201 and 202 are successful as well

* Update publish.js",False
76f9598a89aba0e35ea0c92dd64275921c654577,2018-03-01 00:25:52,William Bain,Add message for integritySystemParamsDontMatch (#5400),False
02cc6940100c9c936aee6ecdc7cdb688620d438d,2018-03-01 00:24:00,Josh Soref,"Spelling (#5405)

* spelling: alphabetical

* spelling: character

* spelling: command

* spelling: comment

* spelling: dedupe

* spelling: dependencies

* spelling: dependency

* spelling: dotfiles

* spelling: eligible

* spelling: existence

* spelling: explicitly

* spelling: extraneous

* spelling: flatten

* spelling: fulfilled

* spelling: metadata

* spelling: modules

* spelling: occurrence

* spelling: occurring

* spelling: potentially

* spelling: prereleases

* spelling: quoting

* spelling: running

* spelling: scoped

* spelling: subdependencies

* spelling: whether",False
efbe809caafed9c4c6be97ea849dbbb980bdde25,2018-03-01 00:15:15,Per Lundberg,"yarn link: Use ""package"" consistently (#5411)",False
eb5e4919c68172706aeb27dfeb8573706c7a1930,2018-03-01 00:14:37,Christopher M√ºhl,"Restrict .gitignore to their own subdirectories (#5414)

* test: Test .gitignore files restricting to their own subdirectories (#2603)

Currently, .gitignore statements extend to the parent directory. As such, even files in different
directories, not targetted by that specific .gitignore file are ignored when packaging.

* fix: Don't filter files by basename

Files are filtered by basename, even when being in a subdirectory

Closes #2603, #5407

* style: Make eslint pass

* Only filter by basename if base is not set",False
03f942ce0e9d36cec8781bb59a7a47964caf84b4,2018-02-28 03:25:02,Daniel Lo Nigro,Enforce usage of TLS 1.2 when building Chocolatey package (#5422),False
e1c74676325ee4ba34125d1a297359a207c13f9a,2018-02-27 23:11:27,Pig Fang,feat(remove): add emoji for steps (#5361),False
fc881a50ff0b69e50711275f5bac16867d5dc176,2018-02-27 23:04:56,renovate[bot],fix(deps): update dependency bytes to ^3.0.0 (#5188),False
9bb4b461d61994a9a59265653ec6868405bc1ff2,2018-02-27 23:04:04,renovate[bot],fix(deps): update dependency debug to ^3.0.0 (#5191),False
7d4ec52a4c7b7990e06c2e5e8c10f9cd7863ed05,2018-02-27 23:02:41,renovate[bot],chore(deps): update dependency eslint-plugin-jest to ^21.0.0 (#5192),False
63f3f2a37830c07fb05657477c6df4d8ec087f0c,2018-02-27 23:02:12,renovate[bot],chore(deps): update dependency gulp-watch to ^5.0.0 (#5193),False
5fc6f7fc2eeafa631d663f0f6a6bd59c154e25db,2018-02-27 23:00:17,Ma√´l Nison,"Pkg-tests testsuite (#5392)

* Adds the pkg-tests testsuite to the repository

* Fixes flow

* Adds babel to strip flowtypes

* Moves pkg-tests into the packages directory

* Fixes server timeouts

* Feedback",False
dd1bf7ceda0be33f98492ede0bfc9c2b08b2abfd,2018-02-26 19:38:46,Burak Yiƒüit Kaya,"test(info): Fix failing `yarn info` and `yarn info <package> readme` tests (#5410)

**Summary**

`yarn info` tests were broken due to some registry changes. This patch updates the tests to use an
older package, left-pad to get master green.

**Test plan**

Fixes tests. All builds should pass.",False
124875e28fcbfca40cbe8158e58fe3bd4210e65a,2018-02-23 20:10:09,Ma√´l Nison,1.5.0,False
7bf5c16722b30ae978fab674a36f1e7ec53a5412,2018-02-23 20:08:49,Ma√´l Nison,"Improves ""yarn workspaces info"" (#5389)

* Improves ""yarn workspaces info"" to include data about how workspaces depend on each other

* Update workspaces.js

* Update workspaces.js

* Update workspaces.js",False
46763895ff4cc05d95f786d715539ceacb4b8ca9,2018-02-23 18:59:06,derekellison,"adjusted windows path so that bin folder has a backslash on the end of the path value, as per windows path requirements (#5387)",False
559b5f22b93d1dcf667d4308fd1272803bbb6056,2018-02-23 18:34:39,sth,"Remove unnecessary console output when running test cases (#5384)

* Don't show yarn output on console during tests

* Fixed typo in test case names

* Disable console output for some more test cases",False
eab88b8268f15851b817fafe554b653a301a6747,2018-02-22 23:37:21,Konstantin Raev,"Ability to store a built package in offline mirror (#5314)

* WIP: ability to store a built package in offline mirror

* added tests

* more tests

* flow fixes and tests

* lockfile updates

* fixed more tests

* feedback

* fixed test

* feedback",False
0fb0fc00ac09bea1bc23eccf055104f234592b0b,2018-02-21 19:41:26,Ma√´l Nison,"Implements ""yarn node"" (#5388)",False
1a4e9ff4128b3aefe6b57e77a3456813dea6f28a,2018-02-20 22:04:34,Steven Hargrove,added logic to correctly print stringified linebreak chars (#5360),False
204f2f6541bda1d69d2a55fa1eb2bfac371af328,2018-02-20 21:58:29,ed eustace,fix(build): add sourceRoot to sourcemaps. Fixes #5319. (#5323),False
a98ea3ff44902493748c3c78d2002ce54f7761d1,2018-02-20 21:41:33,Ian Sutherland,"feat(cli): sort by version when asking user to select a package version (#5220) (#5226)

* feat(cli): sort by version when asking user to select a package version (#5220)

* Fixed flow errors",False
46ae276adc6817127aad87b119f1cd9e522f2965,2018-02-19 00:36:32,Bryan Wain,break semver for engine check by allowing prereleases (#5352),False
0f713c1e4c561fbcfdedba3e6c83afdd3166d301,2018-02-18 00:29:26,Ian Sutherland,"chore(cli): don't ask questions during publish when --non-interactive is specified (#5002) (#5108)

* chore(cli): don't ask questions during publish when --non-interactive is specified (#5002)

* Fix failing tests",False
5ee898ba8f02a8a90f69d40aa6882ecb5e41743f,2018-02-17 05:00:10,SilverFox,"fix(upgrade): respects --scope flag with caret range (#5350) (#5351)

fixes #5350 

**Summary**

When yarn `upgrade --scope @angular`, only `@angular` dependencies should be upgraded.",False
ce47045bcf4621d2f016bc365480d5b2a53c3340,2018-02-12 04:04:52,Jeff Valore,"fix(cli): Use full path to script when executing with run command (#4991)

fixes #4984
fixes #5327

Summary

Previously the relative path to the script to run was being passed to the child_process function, plus the cwd was being set. This caused relative paths to be doubled.

For example if the current process.cwd() is /projects/sampleProject/subdir and you execute yarn --cwd .. run test then it would attempt to run the command

../node_modules/.bin/test

from

/projects/sampleProject

which is incorrect.

The fix here was to use path.resolve instead of .join to convert the script's location to an absolute path.

Test plan

Tested manually.

I tried to write a unit test for this, but under the current test framework an absolute dir was always passed to the script execution because config.cwd is always set to the absolute path for the test fixture.

Trying to set the config.cwd to a relative path causes tests to fail because they become relative to where yarn run test was executed (the root of the Yarn project).

I gave up üò¢",False
9cd66df76bcfff560e05a41903bcaa79feb84c61,2018-02-11 05:03:58,Karolis Narkevicius,Minor refactor of isRequestToRegistry logic for readability (#5321),False
6dc0d23310f8da12ae8d8398424ab1d212564453,2018-02-11 05:01:44,renovate[bot],chore(deps): update dependency execa to ^0.9.0 (#5181),False
62c3be8d9d6b728987eea8f2bc466b2a763f01f4,2018-02-11 05:00:06,Mike Chen,fix(cli): report no valid versions for unpublished packages (#5311) (#5335),False
2d454b552d447a0f79a04e4e451e926e1c0a29e7,2018-02-09 05:24:12,Will Binns-Smith,"RFC: feat(config): Use more conventional paths for config and data (#5336)

* feat(config): Use more conventional paths for config and data

This implements:

* Supporting user-defined environment variables adhering to the [XDG
Specification](https://specifications.freedesktop.org/basedir-spec/basedir-spec-0.6.html)
to override yarn's defaults
* Supporting equivalent environment variables on Windows such as
%LOCALAPPDATA%
* More conventional defaults for these locations according to the
operating system.
* Support for the user defined config dir in the `.yarnrc` lookup path
* Storing global modules in a data-oriented location rather than a
config location (seeing this is actually what motivated this PR)

Concerns:

* Existing Windows config locations will break. This probably need to be
addressed with a migration path and/or a breaking change
* A few notes included in comments (will highlight these with inline GH
comments)
* Unclear test status as master builds appears to fail on my laptop as
well.

Really interested in your feedback. I know [this has been attempted
before](https://github.com/yarnpkg/yarn/pull/3674/files) -- cc @kelseasy
-- and I'd really like to get this in!

* Prettier

* it -> test

* Fall back to ~/.config/yarn instead of XDG/Windows paths",False
18bed13c654a8ca39d68a9cb808df05acadbbacd,2018-02-07 22:01:27,Liam Ross,"Horizontal rule fixed in README (#5320)

The horizontal rule had no empty space between it and the previous paragraph, and as such was rendered as '---' in the markdown.",False
0fce70af46ad5acb28cbc41ebf1dfecc6b6f48ed,2018-02-07 22:01:00,Jeff Valore,"fix(workspace) Workspace pass args 5301 (#5329)

* fix(workspaces): Workspace command will now forward all cmd line args to child process.

Previously only plain args were passed, but not flags or any args with a ""-"". Now all args will be
passed.

#5301

* Add unit test for workspace command to pass arguments",False
1b4b318355115cff5e58f128c53709b37b6ed28e,2018-02-06 13:47:50,Mike Chen,"fix(cli): fail when `yarn add`ing Github package with no version (#5292) (#5318)

* fix(cli): fail when `yarn add`ing Github package with no version (#5292)

* Attempt to re-trigger AppVeyor build",False
7fcf4dd4d95cdfa8856cea8a5daa29d48eb2d70b,2018-02-05 00:11:21,Priyantha Lankapura,"'Cache clean' with multiple packages at once (#5297)

* clean multiple modules from cache. fixes https://github.com/yarnpkg/yarn/issues/5273

* add a test for 'cache clean' with multiple package names",False
aee005aa16a929a69730235e4f178f5a7bc5f81b,2018-02-03 00:09:25,Ma√´l Nison,"feat(install): Implement a very basic hook system (#5293)

* feat(install): Implement a very basic hook system

This PR adds a very basic and undocumented hook system. I plan to use it internally to get better
stats on how Yarn performs, and how much time is spent on the linking step.

* Adds tests

* Improves the typing of callThroughHook

* Lints",False
d68b6c96d161ad58833f7751668bfee25a3d4252,2018-01-30 17:39:01,kaylieEB,"feat(upgrade, add): Separately log added/upgraded dependencies (#5227)

* feat(upgrade, add): Separate added/upgraded dependencies into direct/transitive

When adding or upgrading dependencies, group the dependencies into directly required ones vs.
transitive ones so that version shown is clearer to the end user.

https://github.com/yarnpkg/rfcs/blob/master/accepted/0000-show-updated-packages-only.md

* fix tests

* flow

* review feedback

* add snapshots

* update snapshots",False
aa200e4d63f8720738ca4c07bd5a38c2f89a402f,2018-01-30 17:38:31,Jeff Valore,"feat(publish): Publish command uses publishConfig.access in package.json (#5290)

* feat(publish): Publish command uses publishConfig.access in package.json

For npm compatability, `yarn publish` should check `publishConfig.access` in package.json and use it
as if the `--access` option was passed.

#5279

* WIP: CI test failure debugging

* WIP: CI test failure debugging

* WIP: CI test failure debugging

* fix CI errors by mocking npm password prompt

* use jest expect().toBeCalledWith() for publish command tests",False
aa855c5c59334762be559956b042b053fdd1ace2,2018-01-30 17:37:39,kaylieEB,"fix(CLI): Use process exit instead of exitCode for node < 4 (#5291)

* fix(CLI): Use process exit instead of exitCode

Since node 0.10 doesn't support process.exitCode, use process.exit

* lint",False
06103bda963071eb6476a662cfdb159b407987e3,2018-01-29 22:28:01,Maciej Kasprzyk,feat(cli): error on missing workspace directory (#5206) (#5222),False
18ea344707694a02987f111e3d32085893437d9f,2018-01-29 22:25:54,Gabriel Aumala,"feat: better error when package is not found (#5213)

When a package is not found during installation, show which package is
requiring it (if any) in the error message. If there is no parent request,
throw the same error as before.
Add new localized string 'requiredPackageNotFoundRegistry' which is the
same 'packageNotFoundRegistry', but includes the parent package pattern.",False
328fd596de935acc6c3e134741748fcc62ec3739,2018-01-29 22:09:26,Gord P,"Allow scoped package as alias source (#5229)

**Summary**
Yarn already supports aliasing a scoped package with an unscoped package:
```bash
yarn add @goodforonefare/left-pad@npm:left-pad@1.2.0
```

This PR adds support for aliasing any package with a scoped package:
```bash
yarn add left-pad@npm:@goodforonefare/left-pad@1.2.0
```

Note: the only documentation I can find for this feature [is a tweet from Sebastian McKenzie](https://twitter.com/sebmck/status/873958247304232961?lang=en).

**Test plan**
* `cd` to a yarn-managed repo
* Add a scoped alias for `left-pad`:
  * `yarn add left-pad@npm:@goodforonefare/left-pad`
* Verify that `left-pad` calls append my username to inputs:
```
$ node -e ""console.log(require('left-pad')('test', 20))""`
GoodForOneFare                test
```",False
6dbc9d7b4af6db4d2460f5abb18fdd207a3417a5,2018-01-29 22:03:46,Michael Jungo,fix(cli): Use correct directory for upgrade-interactive (#5272),False
4bddb3ac8179199ece9aa237d0f92a79a30827d3,2018-01-28 22:05:59,ConnectDotz,"nohoist baseline implementation (#4979)

* nohoist impl check point

- nohoist implementation
- 'why' command fixes
- 'add' command fixes
- tests and test fixtures

see [RFC #86](https://github.com/yarnpkg/rfcs/pull/86) for detail

* fix not adding devDependencies

* add nohoist flag and eligibility check

1. added a new flags 'workspaces-nohoist-experimental' to disable nohoist.
2. added eligibility validation in Config.getWorkspaces, violation will be reported and config be ignored.
3. update test fixtures to add private flag for nohoist tests

* revert path separator to '#' for display

* pass through private flag in root manifest

* fix lint error

* addressing @bestander review comments on 1/8

* fix merge conflict

* fix merge lint issues

* address @arcanis comments

* update snapshot after merge

* one more snapshot update",False
00c4b0f3199c8eb2b6cc23e20d33faddb993f1a5,2018-01-19 21:34:19,Ma√´l Nison,1.4.1,False
543f649d355bb5b3b0b56e1c73c6e3ca93a299c8,2018-01-15 22:42:39,Ma√´l Nison,1.4.0,False
139c302fbd2a918cfc52d9caa8bc8e10570465c6,2018-01-15 22:19:34,Danny Soares,"Show current version, when new version is not supplied on ""yarn publish"" (#4947)

* Resolved issue?

* Merge latest master and update snapshots

* Revert ""Merge latest master and update snapshots""

This reverts commit 47c14d8bdc13a5636e259e467e091f79e6ac8303.

* Update snapshots

* Update snapshot",False
953c501b994062fa22b9813a9b20de186fc744bf,2018-01-15 22:11:26,Christian Moritz,"fix(install): use node-gyp from homebrew npm (#4994)

* fix(install): use node-gyp from homebrew npm

**Summary**

With this yarn will be able to discover and use the node-gyp from the
homebrew installed npm on macOS instead of falling back to globally
installing node-gyp every time a native addon needs to be compiled from
source.

Homebrew installs a clean copy of npm inside a libexec folder together
with node.
Previously yarn didn't look there when trying to locate node-gyp and the
globally install node-gyp fallback would be used every time when
building native addons with a yarn version from homebrew.
This PR adds the libexec path of node-gyp from homebrew to the node-gyp
search paths of yarn, making it possible to compile native addons using
the homebrew npm provided node-gyp with yarn without relying on this
fallback.

**Test plan**

This can't be tested outside a homebrew environment.

A way to manually test this on macOS, by installing a test build of this
PR with homebrew and trying to install a native addon with it, is
provided in the PR description.

* test fix on CI by removing global node-gyp",False
7ed01cfb2b29b59d9b97601ff5e342bd58f53224,2018-01-15 22:09:23,Jeff Valore,"Fix transient symlinks overriding direct ones v2 (#5016)

* Add test for bug with conflicting bin link names

If a transient dependency has a bin link with the same name as a direct
dependency, sometimes the top level bin link with lead to the transient
dependency rather than the direct one after install.

This test asserts that bin links from direct dependencies are installed.

* Do not overwrite existing bin links

The bin links are created in two passes during install. In the first
pass all direct dependencies for the installing module and transient
dependencies are created in their respective bin directories. In the
second pass top level bin links are created for all modules, including
transient dependencies.

This patch makes sure the second pass doesn't overwrite links from the
first pass which fixes a problem where links from transient dependencies
could overwrite links from direct dependencies.

* rename a test package to cause a test to fail. implement different fix for bin link ordering.

* change determineTopLevelBinLinkOrder method return type to be more obvious

* address PR comments",False
dc7057688fd0e8a60653b99bf7a78939a35d7fb4,2018-01-15 21:30:21,Karolis Narkevicius,"fix(auth): Fixes authentication conditions and logic with registries (#5216)

* Add more thorough tests for registries.npm.request authorisation

* Fix the bug where npm private packages where not authed correctly

* Remove the old tests that have now been compacted into test gen

* Clarify the naming of the request url check

* Alternative approach for supporting registries with multiple paths

* Improve the naming and order of the test suites

* Clarify the registry request test suite names further",False
4924d7030de387e03bffeb9d475ac07711601865,2018-01-15 19:17:14,Bartosz Kaszubowski,chore(package): move devDeps to appropriate place (#5166),False
6adbd472129b5410436ddefbd92093868bd98e49,2018-01-15 19:15:08,Jeff Valore,"fix(resolution) Eliminate ""missing peerDep"" warning when dep exists at root level. (#5088)

* test(resolution): Added a (failing) unit test to reproduce issue #4743

Added a failing unit test to reproduce issue #4743. It seems that if a peerDep exists deeper in the
dep tree than where it is included, yarn will output a earning, even if that peerDep is satisfied by
the same library included shallower in the tree, or at the root level.

* fix(resolution): No longer warn for mising peerDep when it exists at multiple levels.

A missing peerDep warning was being issued if the exact same pattern was a deep transitive dep and a
direct dep. This was due to only the first request for a pattern being added to the list of requests
that peerDep was checking. Now all references are tracked. Also fixed a logic error in Warn where a
dep would be reported multiple times.

#4743

* fix(tests): Remove snapshot test of ""yarn why"" due to different output local vs ci. Now assert with

Remove snapshot test of ""yarn why"" due to different output local vs ci. Now assert with actual
object value comparison.",False
1c3a2de8e245617bb50f4c4fcd1b63a807e2c29c,2018-01-15 19:10:00,Ian Sutherland,fix(cli): improve guessing of package names that contain a dot (#5102) (#5135),False
05b4e011a793d488df982c7cae6aed603ea057c0,2018-01-15 19:07:22,Ian Sutherland,feat(cli): include notice with license when generating disclaimer (#5072) (#5111),False
b2ce74e4697bbe84c6d40396cfbb828044b03435,2018-01-15 19:05:31,Ian Sutherland,feat(cli): group by license in licenses list (#5074) (#5110),False
eaa9be87e0a086603dc598bf9fa86480a9d1690a,2018-01-15 19:01:14,Ian Sutherland,"feat(cli): improve error message when file resolver can't find file (#5134) (#5145)

* feat(cli): improve error message when file resolver can't find file (#5134)

* Update en.js

* Update en.js",False
3ac83340b8863c9988a3c37afc79cf3a37fcc4ed,2018-01-15 18:57:56,Georg Vienna,"fix(cli): Run version script hook AFTER bumping the package version, but BEFORE commit. (#5151)",False
e0dfd420b17a0d7ee69dad9a5e5ea87b743db47d,2018-01-15 18:57:08,Konstantin Raev,"Speed up global list command (#5148)

* Speed up global list command

* extracted only necessary code for list comand

* lint fixes

* Update install.js

* Update global.js",False
2153794abdb5d8bd75185b5d6f4044d0c6d9b85d,2018-01-15 16:58:36,Robert Martin,"Update en.js (#5153)

A few minor edits for style/grammar",False
c13ce58c4efbef391a97274c295a1e1ab68a317e,2018-01-15 16:57:41,Alf Eaton,"Add comma to yesWarning text (#5177)

Remove ambiguity in the warning message, to clarify that answering ""yes"" to all questions may have security implications, not that all questions which may have security implications will be answered with ""yes"".",False
edb45a0919e6fa72b203462fc494ee279e8e6198,2018-01-15 16:56:51,renovate[bot],fix(deps): update dependency is-builtin-module to ^2.0.0 (#5186),False
fb6511c96057d999420a0c4b4e5e6efbe3f99932,2018-01-09 03:45:56,renovate[bot],"Configure Renovate (#5178)

* Add renovate.json

* :preserveSemverRanges",False
bf23687088f1053bb55c6b0587edfb0cdd73f6ae,2018-01-09 02:25:39,Ian Sutherland,"fix(cli): check if workspaces setting in package.json is an array (#5089) (#5114)

Summary

Display a helpful error message if workspaces in package.json is not an array. Currently just displays: error An unexpected error occurred: ""patterns.map is not a function"".

Fixes #5089

Test plan

Create a package.json file with workspaces: ""packages/*""
Run yarn and observe that this error message is shown: The workspaces setting in package.json must be an array.",False
8be4eef75414db89875f5c64b71cf06783b4507a,2018-01-09 00:14:24,Bartosz Kaszubowski,"test(package-resolver): fix hash and no "".git"" extension tests (#5165)

Summary
OCaml repos has been moved so URLs had to be updated.

I have also extended timeout from 60 s to 90 s because 2 out of 9 test runs failed with default value on my machine while fetching OCaml. By tweaking this value I have achieved 100% success rate.",False
35a186e4f36a9344823a1041f6745c93b36c1fb5,2018-01-08 23:17:45,Rhys Arkins,chore(deps): restore semver ranges (#5175),False
3e1c3a7ed27e017dcbe7c2a189de37fd705ff97f,2018-01-02 19:44:07,Ian Sutherland,"fix(resolution): support semver: in git URLs (#5126) (#5140)

fixes #5126 

**Summary**

* Add support for github URLs that include `semver:^x.x.x` in the tag/branch name. This is supported by NPM so improves compatibility.",False
a2a054438fe91f9860dd06cc4ee7b8004ad7efa0,2018-01-02 04:00:42,Yunyu Lin,"feat(cli): add script-shell config setting for NPM compatibility (#5133)

fixes 4248

**Summary**

* feat(cli): allow running scripts with custom shell (#4248)
* Limit custom shell to yarn run

**Test plan**

* Add expected args test for execCommand with custom script-shell",False
63598f401923209c38f9654a93169b0bccb43f24,2017-12-27 07:24:37,Ian Sutherland,"fix(cli): allow GitHub project names that contain the string .git (#5117) (#5119)

fixes #5117 

* fix(cli): allow GitHub project names that contain the string .git (#5117)

* Fixed regex for matching .git",False
51513f0b5c054edc354614d8fbd7855ce5b36e09,2017-12-20 02:56:07,Soo Jae Hwang,"fix(output): ""yarn licenses list"" hide progress bar before displaying tree (#5103)

fixes #5098 

**Summary**

The progress bar is now removed before displaying a tree through the `ConsoleReporter`.",False
2a050b0297a6fd25ca11eb193c79d0c914b821a0,2017-12-20 02:36:00,Ian Sutherland,"fix(cli): handle no devDependencies when listing production dependencies (#5100) (#5109)

**Summary**

Fixes a bug when running `yarn list --production` and no devDependencies exist.

Fixes #5100 

**Test plan**

* Create a package with no devDependencies and run `yarn list --production`. No error should be thrown.",False
06910374874035a3388c42a6f6403b2b785e9993,2017-12-15 19:53:14,Hiro Asari,"fix(cli): Write Node4+ error message to stderr (#5094)

**Summary**

_To be a good citizen of UNIX ecosystem._

One may write a script to add `$(yarn global bin)` to `$PATH`, but one must consider different cases depending on what this command returns in STDOUT. This is not ideal. 

And, of course, error messages such as this naturally belongs to STDERR.
 
**Test plan**

```sh-session
$ yarn global bin 2>/dev/null
$
```",False
f9650296fb9e589616807eafb9663a560e96c42a,2017-12-13 22:20:30,Burak Yiƒüit Kaya,"test(jest): Upgrade jest to latest available version (#5018)

**Summary**

Upgrades Jest to latest available version. It also fixes the following issues with tests:
 - Update snapshots for the new Jest
 - Fix a few issues regarding cache tests
 - Speed up a fixture used in cache tests
 - Fix mocking of `process.platform` in tests

**Test plan**

All tests should pass on all platfroms and CI.",False
f92b1783e54046bd27b43a1a71cca71f89718059,2017-12-13 01:52:24,Daniel Guettler,"fix(git): Ignores irrelevant output from ls-remote (#5081)

** Summary **

Fixes #5077
Added a regex to filter output lines from git ls-remote.

** Test Plan **

Modified mock git ls-remote output to include an additional line of output
Ran yarn run test
Tested install on local application",False
5a24a4df7b4de25088bae7acda1350e6520d5dd0,2017-12-12 03:27:42,Burak Yiƒüit Kaya,"test(integration): Fix failing react-scripts test due to unexpected warning (#5076)

**Summary**

We don't expect any warnings when installing high-profile and well-tested packages like
react-scripts so we have an integration test that enforces 0 warnings. Unfortunately a package got renamed and started producing a warning about this so the tests started failing. This PR relaxes the test to only fail on peer dependency warnings.

**Test plan**

All builds and tests should pass.",False
19c8cd5b85b837278e74b42a94c4b5bb1b28fc35,2017-12-10 01:17:01,Fernando Andr√© Fernandes,"feat(help) Add command descriptions to commander output (#5033)

Resolves #1119

**Summary**

#1119 states when typing help for any command, the output is usage and options, but there is no description about what the command actually does.

This pull request makes use of the `setFlags` function and the `commander.description` method to add and print the description of every documented command.

**Test plan**

`yarn run test` run tests for listing cached packages, removing all packages, removing a specific package by name",False
fbdce22412307f594d6e841ebd1a07a10576e870,2017-12-08 22:41:24,Burak Yiƒüit Kaya,"ci(circle): Fix cache key setup for proper node_modules sharing (#5060)

**Summary**

We had a tiered cache key setup for some reason (probably remnant of the pre-macOS builds config) which was breaking macOS builds when a new dependency was introduced due to common install was done on a Docker machine and cached with a key including the architecture. This patch changes that and ties everything to a single cache key.

**Test plan**

CircleCI builds should pass without issues.",False
7bb4997d9b975d02e38b4e4be7aa8ca2cd8c26a1,2017-12-07 23:25:21,excelsior97,"fixed (#5034)

* fixed

* Cyan",False
ec8cea0e1fb92de6b9978b267aebbc7ca9d68623,2017-12-07 19:31:30,Elijah Newren,"fix(fetcher): offline mirror name collision w/ private registries and scopes (#4822)

**Summary**

When using artifactory as an internal npm registry in conjunction with scoped packages, yarn install was failing (about 50% of the time) with messages of the form
    
      Hashes don't match when extracting file
      ""https://artifactory.internal.site:443/artifactory/api/npm/external-mirror/@types/react/-/react-15.6.4.tgz"".
      Expected ""3bb57bd43183a05919ceb025a264287348f47e9d"" but got
      ""da39a3ee5e6b4b0d3255bfef95601890afd80709""
    
The problem was that yarn was writing both `@types/react-15.6.4.tgz` and `react-15.6.4.tgz` to the same location within the offline mirror due to making an assumption about no additional leading paths before the scope name in the URL -- an assumption which was true for registry.npmjs.org, but not for artifactory npm repositories.

**Test plan**

Added a new unit test.",False
08bcbe8b3f48e3162d911eba17c60ba447a19621,2017-12-07 17:02:43,kaylieEB,"fix(add): Make semver flags compatible with versioned requests (#4999)

**Summary**

Fixes #4978

Previously, there was logic in add command that [uses user-specified range out of the box](https://github.com/yarnpkg/yarn/blob/master/src/cli/commands/add.js#L71-L72), resulting in the issue above. For example, if the user ran `yarn add left-pad@1.0.0` the pattern parser skipped `--exact` or `--tilde flags`, as well as saved prefix config options.

This change updates it so that if the user specifies a valid numeric version, then these flags still have an effect. These cases don't cover `yarn add left-pad@~1.0.0` or `yarn add left-pad@^1.0.0` since I think the confusion only arises from when the user enters `exact` pattern (just the number).

**Test plan**

Added a test case that fails on master",False
b2d3e1a8fe45ef376b716d597cc79b38702a9320,2017-12-06 02:56:03,Jeff Valore,[#5021] Add help comment to --json flag (#5045),False
2065988f9667df2d349756ae040879e2bce6cf7a,2017-12-05 00:19:48,David Reis,"fix(git): match git dependencies by name instead of whole url

Summary

This is a fix for issue #2840 .

It fixes the issue by comparing the name of the git repo with the entries on the lockfile, instead of comparing the whole git url (which wouldn't match with the version already on the lockfile, since the url would be different).

Test plan

We tested with multiple git repositories, including the ones that were given as an example on the issue page.",False
b827eae221220ea84ab31a010f2f4301a644e6e6,2017-12-05 00:13:27,Justin,"fix(install): connectionOptions passes in localhost as its host to prevent popup on MacOsx. (#5006)

Summary
This is to fix #4983 to prevent the firewall popup on Mac OSX.

Test plan
Ran the following tasks

yarn run test
yarn run lint
Also validated that the popup no longer occurs by setting the alias
alias yarn=""node /path/to/my/yarn/lib/cli/index.js""
and running yarn install --mutex network",False
ddf2f9ade211195372236c2f39a75b00fa18d4de,2017-11-28 00:01:27,Ryan Hendrickson,"chore(eslint): ignore packages dir (#4963)

Summary

build-dist generates a packages/lockfile/index.js file that eslint should ignore.

Test plan

Run yarn build-dist, then yarn lint, and expect not to see a ton of errors.",False
f69cdda63ab6f36bdd21c6f4ab838e7b6200b1d6,2017-11-20 22:12:22,Roman Usherenko,"fix(resolutions): Warn instead of erroring if unmatched dependency matches resolutions (#4835)

Summary

Fixes #4825.

When running yarn check do not error if the unmatched dependency matches the override in resolutions field of package.json. Just warn about the mismatch

Test plan

New test case added.",False
02f7de62bd1deedc5c4899a3f631d602e1344f56,2017-11-20 19:48:36,Max Chehab,"feat(run): Show a ""no bin scripts"" or ""no scripts available"" message (#4891)

**Summary**

This adds the additional warning if there are no bin scripts or if there are no scripts available. If no scripts are available, scripts will not be listed.

I created this pull request when running `yarn run` without any scripts specified, yarn would try to ask the user to specify which script.

To view this feature in the CLI, run `yarn run` inside a project without any bin or scripts available.
For example:
```bash
$ yarn run
yarn run v1.3.2
error No command specified.
error There are no binary scripts available.
error There are no scripts specified inside package.json.
Done in 0.13s.
```

**Test plan**

This new functionality is tested with the `returns noScriptsAvailable and noBinAvailable with no bins and scripts` test.

This test checks if the implemented error messages are thrown.",False
9ccac487a5224fb6c077bd59e9747044972b34d4,2017-11-20 19:43:22,Ryan Hendrickson,"fix(pack): make globs match dotfiles (#4956)

This makes globs in the files array in package.json and in .*ignore files match dotfiles, consistent
with npm's behavior and how git processes .gitignore lines.",False
91253c8881fb49abeded4feda92c602ba629f64a,2017-11-20 16:29:16,Jeff Valore,"fix(request): Fix https_proxy env var (#4903)

**Summary**

Fixes #4885. In #4761 I started always passing the proxy to the `request` library to prevent it from falling back to env vars HTTPS_PROXY and HTTP_PROXY. At the time I thought that Yarn would pick up these env vars through its config system and pass them down itself.

It turns out this was not true and caused #4885. Now handling an explicit `false` in the request-manager to allow it to override the `https_proxy` if set. Otherwise, resume allowing request library to pick up the env vars.

**Test plan**

Manually tested. Since the actual requests are proxies under unit test, this is difficult to unit test.",False
1ea7ef84f588421faa290a55278c14810ac9fb7b,2017-11-20 16:25:51,Jeff Valore,"feat(run): Include the workspace root .bin in env path (#4848)

**Summary**

Partial resolution for #4543.

Previously, when running `yarn run` the env PATH would be set to look in node_modules/.bin, however, in workspaces the root workspace .bin path was not being included.

This PR adds the workspace root
node_modules/.bin path after the individual package's path.

This is generally needed because #4730 ensures bin links in a workspace will be at the workspace root. With this PR, you can now `yarn run` commands in an individual package again.

**Test plan**

Manually tested by adding a script that runs `echo $PATH`",False
80d6e058654efebe77c7f6c79ad44460df6801ab,2017-11-17 22:28:29,Burak Yiƒüit Kaya,"ci(lint): Fix the lint command so it doesn't run dupe-check yet (#4949)

**Summary**

This is a follow up to #3929. The way we run `dupe-check` was not compatible with Windows builds and it also didn't ignore any duplications in lint check. This PR removes it from the lint stage until we don't have any duplication warnings. It also fixes the way js-inspect is called so it is Windows-compatible.

**Test plan**

Builds should pass both on AppVeyor and CircleCI. `yarn lint` should also finish without errors and `yarn dupe-check` should exit with an error and a list of code duplications in the repo.",False
be97d7922381b5a8a713180b54e7184fd3167962,2017-11-17 19:40:15,Kevin Ji,"chore(lint): Rename file to .eslintrc.json (#4931)

**Summary**

.eslintrc is deprecated:
https://eslint.org/docs/user-guide/configuring#configuration-file-formats

**Test plan**

ESLint should work the same as before.",False
1b61437442d5af6a80c73555d52ea63c10a7a077,2017-11-17 19:35:55,Burak Yiƒüit Kaya,"test(integration): Fix left-pad version used in a test with snapshots (#4948)

**Summary**

We had a test using left-pad without pinning its version and since now there's a new version of
left-pad, the snapshots are failing. This PR fixes the issue by pinning the version of left-pad in
the test.

**Test plan**

Tests should pass.",False
18eed7bd09ffe3fcb0f0e3a65199e485251d8af8,2017-11-14 17:28:47,Onur Temizkan,"chore(lint): Integrate `js-inspect` into lint stage (#3929)

**Summary**

Fixes #3903.

1. `dupe-check` step is added to `lint` stage, but it only warns about possible duplicates, doesn't fail CI.
2. The threshold to detect duplication is set to 30, which is the default value. Currently, it reports 9 possible duplicates for yarn codebase. This would be set according to the accuracy of detections.
3. The reporter shows all the code that are possibly duplicates of each other as _diffs_. Thus, the reports can be very verbose. There is an option for suppressing diffs longer than `n` lines in reports. That can be considered.

**Test plan**

Run `yarn lint` and observe the duplicated code output.",False
ea5d8b8b2c6d3f9a09c37d4bc3ba660e6c1504f0,2017-11-14 16:55:01,kaylieEB,add latest command (#4915),False
aa1e54db6c797c0ba3d67a0369db6aa008fca060,2017-11-09 18:11:49,Burak Yiƒüit Kaya,"docs(access): Fix the help output for the skeleton `access` command (#4892)

**Summary**

The help and error output for `yarn access` command was confusing and not clear about it not being implemented yet. This PR makes it clearer.

Before:
```
yarn access v1.3.2
error Usage:
error yarn access access public [<package>]
error yarn access access restricted [<package>]
error yarn access access grant <read-only|read-write> <scope:team> [<package>]
error yarn access access revoke <scope:team> [<package>]
error yarn access access ls-packages [<user>|<scope>|<scope:team>]
error yarn access access ls-collaborators [<package> [<user>]]
error yarn access access edit [<package>]
error Invalid subcommand. Try ""public, restricted, grant, revoke, ls-packages, ls-collaborators, edit""
info Visit https://yarnpkg.com/en/docs/cli/access for documentation about this command.
```

After:
```
error yarn access WARNING: This command yet to be implemented.
error yarn access public [<package>]
error yarn access restricted [<package>]
error yarn access grant <read-only|read-write> <scope:team> [<package>]
error yarn access revoke <scope:team> [<package>]
error yarn access ls-packages [<user>|<scope>|<scope:team>]
error yarn access ls-collaborators [<package> [<user>]]
error yarn access edit [<package>]
error Invalid subcommand. Try ""public, restricted, grant, revoke, ls-packages, ls-collaborators, edit""
info Visit https://yarnpkg.com/en/docs/cli/access for documentation about this command.
```

**Test plan**

Run `yarn access` and onbserve the new and better error/help text.",False
d32325847c1076b3463e82fe3c81a84aca9f27e7,2017-11-09 15:59:47,Ma√´l Nison,"feat(workspaces): Adds a `workspaces` command (#4883)

* Adds a ""workspaces"" command that print info about the workspaces layout

* Fixes the command name

* Update workspaces.js",False
06b9510966d0308053e4a21ddffc1d5cd6ca0493,2017-11-07 21:45:52,Burak Yiƒüit Kaya,"docs(readme): Remove Travis badge (#4871)

**Summary**

We have stopped building on TravisCI so remove the badge from README.

**Test plan**

Make sure the README is still in a good shape.",False
9262cbcc21cdc1b9a561aeca18d86445c9085976,2017-11-07 21:45:39,Burak Yiƒüit Kaya,"docs(contributing): Direct contribution guides to the website (#4872)

**Summary**

We want to have a single source of truth for the contributing guide and the website seems to be the
place for it so direct people there instead of having a separate copy in the repo.

**Test plan**

Check both links and make sure they are not broken.",False
8918b6cff99e037f3ab56523ebfde96e0c19cdae,2017-11-07 20:59:31,Aram Drevekenin,"feat(install): Add --update-checksums to cli install (#4860)

**Summary**

Fixes #4817.
When the `--update-checksums` flag is set, yarn would know to ignore a checksum mismatch between `yarn.lock` and the repository, and instead update the yarn.lock file with the proper checksum(s).

**Test plan**

Added new tests.

To manually check this:
1. Change one or more of the package checksums in `yarn.lock`
2. Delete node_modules (optionally also run `yarn cache clean`)
3. Run `yarn` => checksum mismatch error will be received.
4. Run `yarn --update-checksums` => will install successfully and fix the damaged checksums in `yarn.lock`",False
cb6bf44a96936c5d57c10cfb472f2474346b8594,2017-11-07 17:43:32,Burak Yiƒüit Kaya,"ci(circle): Move macOS builds to CircleCI (#4868)

**Summary**

Move macOS builds to CircleCI and remove TravisCI.

**Test plan**

macOS builds should show up and pass on CircleCI and there should be no TravisCI builds.",False
e0bf5873a6017acdcb5c73ca9910c558d6d81b03,2017-11-07 16:09:16,Raido Kuli,"fix: Use wanted package repository URL and homepage from npm (#4792)

**Summary**

Fixes #4650.

Problem is that Verdaccio (and probably Sinopia2) both are affected as they do not return ""repository"" nor ""homepage"" in top level data structure.

**Test plan**

Added new test cases. Also, manually tested with and without https://github.com/verdaccio/verdaccio as registry.",False
80f5606f88a64ab895c122ead12f48cee871a474,2017-11-06 18:52:41,Burak Yiƒüit Kaya,"ci(travis): Reduce the build matrix on TravisCI (#4864)

**Summary**

We now build and lint on CircleCI so reduce the number of tests on TravisCI and simplify the config.

**Test plan**

TravisCI tests should still pass and be less.",False
c5e2dc59fe0d7eb328c49c3f98d741cace40e6b9,2017-11-06 17:03:53,Burak Yiƒüit Kaya,"test: Fix flaky tests after #4811 due to bad assumptions (#4852)

**Summary**

Tests started failing on Travis after #4811, somewhat randomly, due to them expecting the unwrapped
output. This PR fixes those expectations and moves normalize-manifest tests to snapshots since
that's easier than updating 40+ JSON files by hand.

**Test plan**

Tests should pass on all platforms and CI and locally.",False
5c4b6f382ac341994a44a3b8fe45afd79765a1cf,2017-11-06 15:28:56,Burak Yiƒüit Kaya,"ci(circle): Test all node versions on CircleCI (#4857)

**Summary**

This PR removes the custom Docker image we have and adds all node versions to CircleCI tests. The
aim is to levearge increased granularity and parallelism that the new CircleCI workflows provide.

**Test plan**

All new steps on CircleCI should pass.",False
002ce4ad707622e28d2287d5d6ac92a3934ab22c,2017-11-02 22:53:25,kaylieEB,"chore(build): Replace preset-node-5 and babel-preset-es2015-node4 w/ babel-preset-env (#4374)

**Summary**
Replace [babel-preset-node 5](https://github.com/leebenson/babel-preset-node5) and [babel-preset-es2015-node4](https://github.com/jbach/babel-preset-es2015-node4) with babel-preset-env since the first two packages are deprecated and no longer maintained.

The downside is that `preset-env` is has the comprehensive list of plugins for each environment type, whereas previously packages only selected a few that we were using, so our build size increased. I'm curious to see why @yarnpkg/core 's thoughts are on this, and happy to close the PR if we'd rather stick with the old packages.

**Test plan**
Builds should build and tests should pass since there weren't any code changes üòÉ",False
18dbad6e04ef50d3851bc1ffb01df58f2fafdeb0,2017-11-02 22:03:26,Burak Yigit Kaya,v1.3.2,False
3914c48abab386a1627d7b9698204fdd2beae447,2017-11-02 21:59:30,Burak Yiƒüit Kaya,"ci(circle): Fix deploy job so it only runs on version tags (#4839)

**Summary**

This PR fixes the deploy job to only run for version tags. It also renames it to ""Publish"" to convey
the actual task being performed since this job only publishes to NPM. Everything else is handled by
our webhooks.

Source: https://circleci.com/docs/2.0/workflows/#git-tag-job-execution

**Test plan**

Builds on master should be fixed and when something is tagged, it should be deployed to NPM.",False
c2630b51a0224fb08f7980182f3732d685929ac4,2017-11-02 20:28:39,Burak Yiƒüit Kaya,"ci(circle): Remove unnecessary `--` from test-ci invocations (#4832)

**Summary**

After Yarn 1.0, the `--` separator to pass arguments to run scripts is no longer necessary. We still
have it in our CircleCI config and this patch removes it since Circle CI now uses Yarn 1.1.0+

**Test plan**

CircleCI builds should pass without any warnings or errors.",False
2a7b19067dcfa818fee026e5f1fbe1871767a203,2017-11-02 20:10:31,Ma√´l Nison,1.3.1,False
a8aaafc4913b0db23ce64dd886a81ef3658b379d,2017-11-02 20:09:47,Ma√´l Nison,Update config.yml (#4834),False
03e534e0711634cc211fe9c7d9c612cb63797a86,2017-11-02 19:12:43,Burak Yiƒüit Kaya,"ci(travis): Increase RAMDISK size for macOS builds (#4831)

**Summary**

We have some flakiness on our macOS Node 6 builds with ENOSPC errors so increase the RAMDISK size to
avoid these.

**Test plan**

TravisCI macOS builds should pass.",False
e70c067dff8138a4ce865f5bcea091005cb1d83a,2017-11-02 16:26:37,sth,"chore(config): Use config.production instead of isProduction() (#4824)

**Summary**

[config.js](https://github.com/yarnpkg/yarn/blob/389e02979a1ffe803ab95cbea1ad7b6bcdfa42a7/src/config.js#L336) determines if yarn runs in a production environment and sets a `production` config variable accordingly. The list command wants to know if it runs in a production environment and uses `isProduction()` to do so, which does look at environment variables, slightly different than the code in `config.js`, leading to inconsistencies in some corner cases. It should just use `config.production` instead.

`isProduction()` isn't used anywhere else and `config.production` should always be preferred, so I removed the whole function. I planned to adapt the tests of `isProduction()` for `config.production`, but the [existing tests](https://github.com/yarnpkg/yarn/blob/389e02979a1ffe803ab95cbea1ad7b6bcdfa42a7/__tests__/integration.js#L82) for `config.production` already cover all those cases.

**Test plan**
The existing tests for the `list` command still pass when they use `config.production`.",False
c2b43b67ee027b74c44392fe8ed17b351a663db8,2017-11-02 16:08:22,sth,"fix(config): Use boolifyWithDefault() for bools from environment (#4823)

**Summary**

Use `boolifyWithDefault()` to determine if environment variable values are `true` or `false`. This ensures that all environment variables interpret the same values the same way.

This changes the behavior of `YARN_SILENT` and `YARN_IGNORE_PATH` if they have ""unexpected"" values, all nonempty stings beside `""0""` and `""false""` are now interpreted as `true`. For example `YARN_SILENT=hello` was interpreted as `false` before, now it is `true`. This makes some sense since those values are truthy in Javascript, but generally makes things more predictable if it works like that for all yarn environment variables.

`YARN_SILENT=true` was also interpreted as `false`. This now definitely makes more sense since it will be interpreted as `true`.

See also [#4811](https://github.com/yarnpkg/yarn/pull/4811#issuecomment-340830589).

**Test plan**

There should be no change to the existing intended functionality and the existing tests still pass.",False
389e02979a1ffe803ab95cbea1ad7b6bcdfa42a7,2017-11-01 22:02:48,Ma√´l Nison,1.3.0,False
b1f0e49a41ca78f8f0cf19d94a885067eea76e39,2017-11-01 21:55:40,Calvin,"fix(cli): Display warning when adding a package already in project (#4810)

* Display warning when trying to add a package already in ""dependency"" to ""devDependencies"" or vice versa.

* Add positive and negative tests for moduleAlreadyInManifest warning

* tidy up code",False
979dee88eb99427d72c5e074b023e3f1d105bf53,2017-11-01 21:39:33,Thomas Grainger,"fix(cli): Don't warn when running on node 9 (#4816)

**Summary**

Update the accepted semver range to not warn on unknown future versions of node.

**Test plan**

N/A since we don't want to add Node 9 into our build matrix just yet.",False
6cb226f757927408e4273c670682eb8e4c427fc7,2017-11-01 16:40:24,sth,"feat(cli): Disable only header/footer in nested commands, not all output (#4811)

**Summary**

Fixes #4615. Disabling all Yarn output in nested commands with `YARN_SILENT` is a bit much, we usually want to see the output. This pull request introduces a new environment variable `YARN_WRAP_OUTPUT` that can be set to `0` to disable the header and footer Yarn normally displays.

Disabling the header/footer might also be useful in other situations, like other tools calling Yarn, so the `YARN_WRAP_OUTPUT` variable has general use.

**Test plan**

Existing integration tests.",False
7d40146357f56ec5037a3c9169718be0a4b05bf8,2017-11-01 16:36:10,Pierre Neter,"feat(config): Add custom config for init private flag (#4377)

**Summary**

Here is a small custom; I add this because it relates to https://yarnpkg.com/en/docs/cli/init#toc-setting-defaults-for-yarn-init. I discovered this was necessary while writing introduces for this flag.

**Test plan**

New init and config tests.",False
262d7d875d78ee8b9f897baa483bc0077a05439a,2017-11-01 02:36:21,Krzysztof Zbudniewek,"fix(info): Use version from `latest` dist-tag instead of the highest one (#4797)

* fix(info): Use version from `latest` dist-tag instead of the highest one

Fixes #3947. By default, package `version` was set by sorting all the versions and getting the highest
one. Now it's provided via package `latest` dist-tag.

* Fix linter issues by shortening the test description

* Manually mock request

* Add scenario comment from #4804",False
1c845bd2dc64fc4937d82ac7b88d014e9fd6b3bb,2017-10-31 21:19:34,Jeff Valore,"fix(resolution): use registry latest if it satisfies requested semver range (#4804)

* fix(resolution): use registry latest if it satisfies requested semver range

Fixes #3560

**Summary**

Mimic behavior in NPM; use the `latest` version in registry if it
satisfies the semver range requests.

Otherwise fallback to `semver.maxSatisfying()`

**Test Plan**

Added unit test to verify behavior.

* fix eslint line len, additional field check",False
4e57e585e44b077ebf6cffb095f2e7fc63a5f1f1,2017-10-31 16:35:19,Nick Holloway,"fix(reporters): Handle process.stdout.columns being zero (#4742)

**Summary**

My recent pull request was to improve the appearance of the progress bar for non-color terminals (PR #4697).

However, @skevy reported a RangeError when running with macOS 10.12, with Node 8.6.  This would have been caused by process.stdout.columns returning a negative number.

In this case, this just assumes a default width of 100 characters (as in spinner-progress.js).

**Test plan**

I have not been able to reproduce the condition where `process.tty.columns` returns a negative number, so have verified the logic by considering key cases, e.g., `undefined > 0`, `-1 > 0`.",False
394b18a433b42852444dd330d74709b16a601b15,2017-10-31 15:52:51,Ma√´l Nison,"fix(constants): Adds a per-user cache fallback (#4802)

**Summary**

When Yarn is being run with a different user than the one who created the cache folder, everything
might break (in particular if the cache folder has been created by the root user). This PR fixes this by using the user UID as part of the temporary folder name if possible. If not, it will fallback to the same directory than before.

**Test plan**

The change is small enough that it doesn't need an extra test. We already have a test that makes sure we correctly select a fallback, so adding a new one would only check that it has a specific name, which seems low-signal and prone to break.",False
4e75cb9c567c3d6358d2e78f65faad92871693e0,2017-10-31 15:52:30,kaylieEB,"fix(resolver): Fix --frozen-lockfile flag with duplicate top level resolution (#4793)

**Summary**

Fixes #4778.

In this particular issue, the same pattern `babel-runtime@^6.26.0` was [defined in both devDependencies](https://github.com/kompot/yarn-frozen-lockfile-bug/blob/master/package.json#L80) and [resolutions field](https://github.com/kompot/yarn-frozen-lockfile-bug/blob/master/package.json#L130). Since resolutions feature was only intended for nested dependencies, it previously didn't take into account when the same exact pattern existed as a top level dependency. And it happens so that after the package resolver phase, [integrity checker looks at top level patterns](https://github.com/yarnpkg/yarn/blob/master/src/integrity-checker.js#L364-L367), so install failed.

The solution was to add top level raw patterns to resolutions map, and only remove them if they're transitive patterns

**Test plan**

Added a new test case in resolutions

*BEFORE*
<img width=""618"" alt=""screen shot 2017-10-28 at 11 07 52 am"" src=""https://user-images.githubusercontent.com/18429494/32137218-621a19b8-bbd0-11e7-87a3-4acd43a44a69.png"">

*AFTER*
<img width=""538"" alt=""screen shot 2017-10-28 at 11 10 13 am"" src=""https://user-images.githubusercontent.com/18429494/32137229-9b828f1e-bbd0-11e7-90a2-1464c28fcab4.png"">",False
4f41887d36a518e699e7b261aa76e2b849a90c9a,2017-10-31 14:40:09,Krzysztof Zbudniewek,"fix(git-spawn): Set GIT_SSH_VARIANT (#4806)

**Summary**

Fixes #4729.
Previous version in #4805.

Manually specify `GIT_SSH_VARIANT` in order to get package download via `git+ssh` with a non-standard port when using `plink.exe` working.

Without `GIT_SSH_VARIANT` set properly, Git won't convert `-p` into `-P` and `plink.exe` will throw an error about unknown `-p` parameter.

**Test plan**

*Before:*
![virtualbox_msedge_-_win10_30_10_2017_16_35_24](https://user-images.githubusercontent.com/5042328/32179804-9a87c676-bd90-11e7-86d0-09380d61eadf.png)

*After:*
![virtualbox_msedge_-_win10_30_10_2017_19_07_15](https://user-images.githubusercontent.com/5042328/32187512-9bcb980e-bda5-11e7-96ea-27a513837d6e.png)

Also got `git-spawn.js` test suite updated for testing `GIT_SSH_VARIANT`.",False
3c136850663b3de1f1dc94d68b802be1978ae829,2017-10-30 22:09:18,Burak Yiƒüit Kaya,"docs(contributing): Add section about what to work on and triaging (#4803)

**Summary**

We have cleaned up our labels a bit and this PR adds some useful links for people to find what needs
attention from the community.

**Test plan**

Read and make sure the links and the text are accurate.",False
bddaec75dca29325ad7863912cb395c686d1293b,2017-10-30 20:50:45,Burak Yiƒüit Kaya,"style(reporters): Simplify Windows bold fix check condition (#4785)

**Summary**

Used a single negation instead of double negation. Follow up to #4767.

**Test plan**

Existing tests",False
ba8d0dbd9887bf50c976a47c40e04bf74c478c2a,2017-10-26 22:38:20,Ryo Shibayama,"ci: Migrate to CircleCI 2.0 with Workflows (#4271)

* Migrate to CircleCI 2.0 with Workflows

* Delete old config

* Keep some comments

* Fix Circle config

* Run test and build parallelly without getting a deploy error

* Fix parse error

* Use git tag execution

* Change yarn cache strategy

* attach_workspace without checkout

* Do not save cache multiple times

* Split yarn lint

* Change cache strategy of node_modules

* Fix forgetting to replace with alias",False
9b0e7bbd8ffcdb0b343ea092742265b28c221fcc,2017-10-26 20:05:35,Carlos Ravelo,"fix(linker): Fix yarn removing linked deps during link stage (#4757)

**Summary**

 Actual fix: changed fs.readlink to fs.realpath when checking if a symlink is a linked dependency in package-linker.js This fixes yarn removing linked deps when installing or updating.

Fixes #3288, fixes #4770, fixes #4635, fixes #4603.

Potential fix for #3202.

**Test plan**

See https://github.com/yarnpkg/yarn/issues/3288#issuecomment-335955366 for repro steps.
See https://github.com/yarnpkg/yarn/issues/3288#issuecomment-338503103 for my explanation of the problem.

With a real world test scenario this works, but I'm unable to have it break from a unit test. I added a test in the integration suite but with the bug added back in it still passes because both generated paths are identical. I would like some help with the unit test.",False
7beaad07b00cddc5cf7f8362d49b5560f2c9fe65,2017-10-26 17:08:09,Johannes Emerich,"fix(resolver): Add general support for git-over-protocol URLs (#4759)

**Summary**

Yarn can not handle the `git+https://` dependency format correctly, as described for various versions in #1625. The problem is present in Yarn 1.2.1.

A related problem for `git+ssh://` has been described in #573 and fixed in #3425.

This PR extends the solution from #3425 to use the Git fetcher for any [Git-over-protocol](https://git-scm.com/book/en/v2/Git-on-the-Server-The-Protocols) URLs.

**Test plan**

Extended the `package-request` unit tests to verify that the correct remote type (git) is used for `git+https://`, while the tarball remote type continues to be used for regular HTTP(S) URLs.",False
917713d556fcf4eb9baef175d4662f9a2b23b29a,2017-10-26 15:48:23,Roman Schejbal,"fix(install): Rebuild native modules when node version changes (#4750)

**Summary**

Fixes #756. We have multiple versions of our app and each one uses a different version of node. 
Therefore we need to rebuild our `node-sass` module every time we move from one to another. 

This PR addresses that by saving the NODE version those artifacts were built with within the `.yarn-integrity` file and triggers forced scripts install (only if the node version is different ofc).

**Test plan**

```
1. Install Node.js 7.x
2. Add the node-sass dependency to the project via Yarn
3. Update Node.js to 8.x (new NODE_VERSION)
4. Run ""yarn install"" (you should see yarn downloading fresh scripts/binaries)
```",False
359b161ae59f77862819000b4c75f66f115acfdc,2017-10-26 15:11:17,Jeff Valore,"feat(config): Allow JSON ""//"" comments in package.json resolutions (#4779)

Fixes #4774

**Summary**

Previously package.json comments were being ignored for ""dependencies"",
""devDependencies"", ""optionalDependencies"".

This change adds ""resolutions"" to the sections that will ignore
comments.

**Test Plan**

Added unit test to make sure warning is not printed for a comment in a
resolution.",False
1ccb7101698a8e5729da46c344efe43a64c1a962,2017-10-24 23:48:59,Josh Kelley,"Allow ${HOME} in .npmrc to work in Windows (#4693)

* Allow ${HOME} in .npmrc to work in Windows

Windows doesn't set the HOME environment variable by default, but NPM
has logic to set process.env.HOME based on the current OS home
directory.  See
https://github.com/npm/npm/blob/fb28e5868a9dbbe21a15f23fe8cf8b3703e8adf2/lib/config/defaults.js#L81

Yarn doesn't do this, so configs such as `prefix =
${HOME}/.npm-packages` that work for NPM will cause Yarn to refuse to
run.  This commit updates Yarn's behavior to be closer to NPM's.

Unlike NPM, this commit only sets HOME if it's not already set, to avoid
potentially incompatible changes with existing Yarn users.

* Revert ""Allow ${HOME} in .npmrc to work in Windows""

This reverts commit 436422d5b90ccd52e6bad67720b54d7f7c59a44f.

* Allow ${HOME} in .npmrc to work in Windows

Windows doesn't set the HOME environment variable by default, but NPM
has logic to set process.env.HOME based on the current OS home
directory.  See
https://github.com/npm/npm/blob/fb28e5868a9dbbe21a15f23fe8cf8b3703e8adf2/lib/config/defaults.js#L81

Yarn doesn't do this, so configs such as `prefix =
${HOME}/.npm-packages` that work for NPM will cause Yarn to refuse to
run.  This commit updates Yarn's behavior to be closer to NPM's, by
using a custom/modified environment when processing NPM configurations.

Add a Flow type `Env` to represent a set of environment variables.

* Ensure environment is restored after test

(A separate `describe` block seems like overkill.)",False
ae3cf9971d73350d6b52a0bfb3cc708e7a22d80b,2017-10-24 23:42:25,Jeff Valore,"fix(request): pass a proxy to request even if falsy (#4761)

**Summary**

Fixes #4546.

Pass a `proxy` value to `request` to prevent it from falling back to
checking envirnment variables.
Yarn already gets the env var values through it's configuration and may
have overriden them to it's own liking.
See use case in mentioned issue.

If a `proxy` value is not set, then [this logic](https://github.com/request/request/blob/b12a6245d9acdb1e13c6486d427801e123fdafae/request.js#L277) causes it to check the env vars instead, which will fallback to `http_proxy`. This was preventing the `https_proxy false` config setting from working if environment variables were set, because the request library would fallback to using that instead.

**Test plan**

Manually test with and without https_proxy set in config and in
environment variable.",False
f54b3654b90240d92cd72a100c8ce0e8578c9b3c,2017-10-24 21:55:03,Michael Kriese,Fix wrong condition (#4767),False
3d6a03935e17db88891bb9673b245edd99a23bc5,2017-10-24 04:46:30,Jeff Valore,"fix(upgrade): Let outdated filter correctly when called from upgrade. (#4763)

Fixes #4735

Upgrade was calling outdated in a way that would not filter packages that did not need
an upgrade. The led to potential backdate of package if a beta version was in use. Yarn would
backdate to the ""older"" latest.

Summary

Some older upgrade code I had written had a code path to have getOutdatedPackages() return all packages, not just ones that were actually outdated. My belief had been that it wouldn't cause an issue because upgrading to the same version would just do nothing... but it turns out if you are on a beta version of a package, this would cause upgrade --latest to backdate you to the actual latest.

So for example if you were currently at beta 1.0.3-0 and the registry had latest 1.0.1 then yarn upgrade --latest would backdate you to 1.0.1.

This PR reinstates the filter that only returns versions if the current is less-than the latest, which would in the above example leave the user at 1.0.3-0

Test plan

Added a unit test that would have failed previously, but passes with this PR change.",False
58ae45ee73426f04ec58dc3d3f483e278e43ffa9,2017-10-20 05:24:57,John Gozde,"fix(linker): use lockfileFolder when creating bin links (#4730)

**Summary**

Fixes #4706, fixes #4359, refs #4513. `this.config.cwd` was being used as the root for bin link paths, rather than `this.config.lockfileFolder`.

**Test plan**

- Added tests for `add` and `remove` commands (#4706)
- Added test for `install` command (#4359)",False
519b818b0ad0ec7f863feb8f7ec465b1d5eb3fc0,2017-10-20 02:09:43,Burak Yiƒüit Kaya,"docs(linker): Use breadcrumbs in peer dependency warnings (#4720)

**Summary**

@gaearon called Yarn out for better peer dependency error messages so this is the first step to make
them more useful and informative.

**Test plan**

Use a repo like `https://github.com/edmorley/yarn-unmet-peerdependency-testcase` to have peer dependency
warnings and observe they now show the path for the package missing the peer dependency. This should
allow people to investigate these errors in an easier fashion.

```
warning ""neutrino-preset-airbnb-base > eslint-config-airbnb-base@12.0.2"" has unmet peer dependency ""eslint@^4.8.0"".
warning ""neutrino-preset-airbnb-base > eslint-plugin-import@2.7.0"" has unmet peer dependency ""eslint@2.x - 4.x"".
```",False
b97c797983babd03c68bc36f1ee98a9a6dff9246,2017-10-17 16:19:04,Lewis Zhang,"fix(autoclean): Include only common CI configs in default .yarnclean (#4724)

**Summary**

Remove entries to clean `*.yml` and `.*.yml` from the default filter list in `.yarnclean`. Instead, include configuration files from common CI and build tools.

- Travis CI
- CircleCI
- AppVeyor
- Codeship
- Wercker

Fixes #4281, fixes #2276.

**Test plan**

```shell
$ yarn autoclean --init
yarn autoclean v1.2.1
[1/1] Creating "".yarnclean""...
info Created "".yarnclean"". Please review the contents of this file then run ""yarn autoclean --force"" to perform a clean.
‚ú®  Done in 0.15s.
$ grep yml .yarnclean 
appveyor.yml
circle.yml
codeship-services.yml
codeship-steps.yml
wercker.yml
.travis.yml
```",False
26266c4dd7c8ead4df3d936215ce22d709378286,2017-10-16 21:42:03,Pig Fang,"fix(create): Fix passing parameters for ""yarn create"" (#4713)

**Summary**
Fixes #4670 .

**Test plan**

Manual verification.
![image](https://user-images.githubusercontent.com/17216317/31580316-5c29f296-b17e-11e7-9a6f-ba87294ee200.png)",False
95a3aa9538ea6b7a67950b34a3782fbf64dfe4fe,2017-10-16 15:54:00,Jeff Valore,"Do not convert empty string to cwd path. (#4700)

* [#4695] Do not convert empty string to cwd path.

* added test file for config.js",False
a4b21f9b2e6b4357cba57af705405c95bef8f0c4,2017-10-16 15:50:06,Fumihiro Xue,Fix implicitFileDeprecated message (#4715),False
de26f05c1fdbf77e4f9c9d8dfd1fd89e91096f4c,2017-10-16 15:49:36,Lewis Zhang,chore(tests): Fix typo s/genereate/generate (#4716),False
4c38ca7771922d5d56dac91f4be6e69a4d8d7885,2017-10-12 20:24:08,Nick Holloway,"Fixes progress display on non-color tty (#4647) (#4697)

If the output does not support color, then each render of the progress
bar is added to a single line, which wraps over multiple lines.

As a fallback, a simple carriage return is used to move to the start of
the line, and space characters to clear the line.",False
f5e78ebb9dd9809c00a0bdff37d75f324fb42018,2017-10-12 15:48:54,Ma√´l Nison,1.2.1,False
86c4aff93887c39df47b6998d74c8d6cf07a74e1,2017-10-12 15:40:53,Ma√´l Nison,Adds an extra test for the yarn path feature (#4680),False
f60269f76232a72926c5579987a2ac30a4c248c3,2017-10-12 04:18:28,Burak Yiƒüit Kaya,"fix(resolver): Fix incorrect peer dependency res. from different trees (#4687)

**Summary**

Fixes #4539. Yarn was resolving peer dependencies from the closest level where the peer dependency was requested
but it was not checking if the peer dependency was in the same subtree. This was causing incorrect
peer dependency resolutions and package duplication when  an unrelated subtree has a depedency
satisfying the required peer dependency at the same tree level.

**Test plan**

Added new install integration test that fails without the fix.",False
5e564c6879fe707506a6d333dedb5d6ca0eba87c,2017-10-11 21:56:22,Jeff Valore,"Upgrade transient deps during upgrades. (#4636)

* [#4476] Upgrade transient deps during upgrades.

* Rename 'transient' to 'transitive'

* dont upgrade direct deps unless requested, add verbose upgrade logging

* upgrade-interactive reuse lockfile cleaning from upgrade.js",False
80e7c39f606038766ba5808e83e4b3607edad38e,2017-10-11 17:25:38,yerguden,"fix(init): prevent init command from traversing up (#4464)

**Summary**

Fixes #4441.

**Test plan**

Added new test case.",False
ec2b9766d293b8ad49a85de5175f496c8e1374cf,2017-10-11 01:48:14,Ma√´l Nison,Fixes how the exit code was forwarded when using the yarnrc path (#4679),False
77f5e40c6ac26a180393cdbc4e080d77f9343763,2017-10-11 00:25:58,Daniel Tschinder,"compare current version against latest and not wanted version in outdated command (#4519)

**Summary**
`current` and `wanted` version might be the same but `latest` is a new major version
and as current and wanted are compared against each other it results in most outdated entries being white instead of the proper color

Here a before/after screenshot:

![bildschirmfoto 2017-09-22 um 13 41 56](https://user-images.githubusercontent.com/231804/30743120-9efa6824-9f9c-11e7-9f17-7b511597e13b.png)",False
1ed8602805da1c387f87d89d5c924f47a6d07689,2017-10-10 21:23:03,Burak Yiƒüit Kaya,"chore(docs): State minimum Node version for development (#4673)

**Summary**

Add note about which version of Node is needed to develop Yarn.

**Test plan**

N/A",False
f1ac4b586e928ff8222816fff81ae237d24343ab,2017-10-10 01:44:10,Burak Yigit Kaya,v1.2.0,False
2718d7491c28c7f0b43d016c1b25fb2a1b2463b5,2017-10-10 01:42:02,Burak Yiƒüit Kaya,"fix(config): Relay exit code when using yarn-path from yarnrc (#4669)

**Summary**

Follow up to #4204. We forgot to relay the exit code of the
newly spawned yarn instance when using `yarn-path` which is
causing false negatives especially when using `yarn run`. This
patch relays the exit code of the spawned process.

**Test plan**

Added a new test that fails without the fix.",False
7323861f08f6c897babaac002b28b211e8fffda6,2017-10-09 23:34:43,John Gozde,"Fix: workspace support in several commands (#4654)

* Use lockfileFolder for CLI check

* Make ""upgrade"" work inside workspace packages

Executes ""fetchRequestFromCwd"" in actual cwd, which ensures
""outdated"" and ""upgrade"" commands in workspace packages
operate on the correct dependencies and preserve unrelated lockfile
entries.

* Support workspaces in outdated and upgrade-interactive",False
daa599d5fed8fe786d1f41031f271e2c703fced3,2017-10-08 22:11:44,Burak Yiƒüit Kaya,"chore(repo): Add `yarn commit` for structured commit messages (#4660)

**Summary**

Adds commitizen and adopts the cz-conventional-changelog adapter for commit logs. Will be followed
up by commit message linters and automatic version number bumping in CI builds.

**Test plan**

Run `yarn install` and then `yarn commit -a` after making some changes to test the new awesomeness. This commit message was also generated via that command.",False
850e71f49197d03caf5b501f59a9fe45b98bde8e,2017-10-08 22:09:10,Burak Yiƒüit Kaya,"fix(git): Refactor Git URL resolution code & remove hash from URL (#4657)

**Summary**

This PR is triggered by https://git.io/vdzI2. It refactors the
code to allow more hosted Git expansions (like GitLab) in a more
flexible way. It also prefers `url.parse` over regular expressions
and removes any hasehs in `GitUrl.repository` results.

**Test plan**

Existing tests should pass along with the hash removal correction.",False
88459f9b9b357cd27547196271508d6f507d5e85,2017-10-06 16:48:01,K√©vin Berthommier,"fix(git): Fix Bitbucket exotic shortcut resolvers with private repositories (#4633)

**Summary**

* fix hasHTTPCapability issue with bitbucket shortcut resolver and private repo (#4393)
  *bug with a private repo that used like `""module"": ""bitbucket:team/repo""`*
* fix setRefRemote issue with exotic shortcut resolvers and branch/tag/commit
  *bug with a repo that used like `""module"": ""bitbucket:team/repo#tag""`*

**Test plan**

If I have a private dependency like `""activities"": ""bitbucket:openagenda/activities""` in my package.json, and I run `yarn install --verbose` then I have this error:

```
[1/4] Resolving packages...
verbose 0.407 Performing ""HEAD"" request to ""https://bitbucket.org/openagenda/es-node"".
verbose 0.867 Request ""https://bitbucket.org/openagenda/es-node"" finished with status code 302.
verbose 0.873 Performing ""GET"" request to ""https://bitbucket.org/openagenda/es-node.git/info/refs?service=git-upload-pack"".
verbose 0.98 Request ""https://bitbucket.org/openagenda/es-node.git/info/refs?service=git-upload-pack"" finished with status code 401.
verbose 0.981 Error: Error connecting to repository. Please, check the url.
    at /home/bertho/.config/yarn/global/node_modules/yarn/lib/cli.js:33269:15
    at Generator.next (<anonymous>)
    at step (/home/bertho/.config/yarn/global/node_modules/yarn/lib/cli.js:92:30)
    at /home/bertho/.config/yarn/global/node_modules/yarn/lib/cli.js:103:13
    at process._tickCallback (internal/process/next_tick.js:109:7)
error An unexpected error occurred: ""Error connecting to repository. Please, check the url."".
info If you think this is a bug, please open a bug report with the information provided in ""/home/bertho/OpenAgenda/cibul-node/yarn-error.log"".
info Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.
```",False
69004e9a7172ce2c669eb276a82d320a8792bacf,2017-10-06 16:23:29,Burak Yiƒüit Kaya,"fix(config): Don't override registry with `undefined` by default (#4643)

**Summary**

Follow up to #4238. We were always passing the `registry` key in
registry overrides but its value was `undefined` when an override
was not in place. `Object.assign` doesn't care about that though
so we were overriding the registry all the time, mostly with
`undefined`.

**Test plan**

Added new test case.",False
9c2bbca92140b6e360dd566d31658d7af1fef8d5,2017-10-06 16:21:43,Burak Yiƒüit Kaya,"chore(resolver): Minor improvements in resolver code and tests (#4644)

* chore(resolver): Minor improvements in resolver code and tests

**Summary**

This is a follow up to #4484 and #4478 which improves the code
around those areas a bit and removes a now-unnecessary `while`
loop.

**Test plan**

Existing tests should pass.

* Fix logic",False
633b28168d7a89ca2f5440123fbf5cf2119a3906,2017-10-05 21:16:09,Nikhil Motiani,"fix(resolver): `parentNames` is missing in package warning breadcrumbs (#4484)

**Summary**

Bugfix for #4480. Change suggested by @BYK 

**Test plan**
Running yarn on local.

_**Before Changes**_
```bash
warning node-uuid@1.4.8: Use uuid module instead
```

_**After Changes**_
```bash
warning raven > node-uuid@1.4.8: Use uuid module instead
```",False
972166c166ad15e5eb55cc029345e1c679fdfc21,2017-10-05 21:11:31,Valerii Iatsko,"chore(tests): Make integration tests passing on Node 7 (#4606)

**Summary**

The change introduced in 96c215c1ce5944a6fe993ab0d9b13e6edfe65675 caused tests to fail on node 7 as react-scripts is not compatible with it. This patch adds `--ignore-engines` flag to suppress the warning.

**Test plan**

Tests should pass on Node 7.",False
5a9b2d0ab60cd63ba92d020b9425dfd192a9db8a,2017-10-05 20:30:34,Burak Yiƒüit Kaya,"chore(tests): Don't output coverage on regular test runs (#4629)

* chore(tests): Don't output coverage on regular test runs

**Summary**

We output a long coverage summary in both CI and local tests which
just adds noise to the output, especially when tests are failing
and one is trying to figure out what is wrong. Since this
information is not used by any automatic tooling, it is better to
disable it for now. This PR keeps the option with `test-coverage`
script for people who still want it.

**Test plan**

When running `yarn test` you should not see a long coverage table
at the end after the patch.

* some fixes

* Revert ""some fixes""

This reverts commit 75ca538995c606056e3358c794caa3c19a09ee10.",False
e28603481f25f3c97dd3aadab929cebfd0030e52,2017-10-05 20:28:44,Ma√´l Nison,Improves the workspaces (#4630),False
3178e076d4314849a50e0bf4d7619f3cd2904356,2017-10-05 01:21:27,Valerii Iatsko,"chore(utils): replace last `expandPath` with `resolveWithHome` (#4605)

**Summary**

Looking at two solutions introduced in #3393 and #3756, the first one doesn't support win32, while the second does, sticking with the second one more beneficial and supports a wider range of OS.

Removed the stuff introduced in #3393 keeping only #3756.

#3756 also introduced config file normalization, so probably second argument to getOption is obsolete, will discover that and submit another PR if that's the case.

**Test plan**

Modified tests appropriately.",False
4a0898e6830c52f5b16fb810429587a34a492370,2017-10-04 16:57:33,Phil Quinn,Add ability to upgrade based on pattern (#4610),False
03f1ecc6ee559fe4247096c9387bc252a740703d,2017-10-04 16:56:33,Phil Quinn,Add ability to filter yarn list with pattern (#4609),False
0115ece56b9516af5d0ef75db2ceeb2253c3b1b4,2017-10-04 16:00:44,Burak Yiƒüit Kaya,"fix(request-manager): Flaky network messsage should be info, not warning (#4621)

**Summary**

Sometimes Yarn saturates the network and sometimes the network itself
has issues, especially on CI and Yarn reports this as a warning. This
should be a simple info message unless it actually completely fails.

This also fixes a flaky integration test with react-scripts.

**Test plan**

`react-scripts` integration test should not be flaky anymore.",False
9e9d6aeb5d56305fd7e41c0b9b262176b6a31e6d,2017-10-04 15:53:15,Jeff Valore,"fix(network): Allow `https-proxy false` to not use a proxy for HTTPS (#4614)

**Summary**

Fixes #4546. Previous behavior was that if `.npmrc` or `.yarnrc` contained and `http-proxy` but not an `https-proxy`, HTTPS requests would ""fall back"" to the `http-proxy`.

This is not always the desired behavior; See #4546 sometimes one protocol needs a proxy and the other does not.

This PR adds the ability to set the `https-proxy` to `false` which will cause Yarn to not use an HTTPS proxy (and not fall-back to the HTTP proxy). This allows the code to treat `undefined` as the setting not being specified (which will fall back to http-proxy) and `false` as the setting being specified, but set to false (which will not use a proxy).

**Test plan**

Tested manually on Windows with Fiddler.

I have no idea how to test this since requests go through the mock http requester when running tests. Suggestions welcome!",False
38790e81ded725d0cc30e53f25999da815a6c5bc,2017-10-03 22:26:45,Ryan Hendrickson,"fix(run): improve escaping for script arguments (#4135)

**Summary**

Extra command-line arguments to scripts were not being escaped correctly. This patch adds robust shell quoting logic for both Windows and Linux/macOS.

**Test plan**

On *nix, create a `package.json` containing `""scripts"":{""echo"":""echo""}`. Run `yarn run -s echo -- '$X \""blah\""'`. Expect to observe ` \blah\` prior to this patch, and `$X \""blah\""` after it.

Testing on Windows should be similar, but may require fancier escaping to get the arguments into yarn in the first place. (I don't have access to a Windows box to verify the exact procedure to follow, sorry‚Äîbut I did confirm that my automated tests succeed in AppVeyor.)",False
6b5756374f633b1efe0e98068bbaeabbc1edad1c,2017-10-03 21:46:59,Liran Tal,"feat(configuration): add custom registry cli flag (#4238)

**Summary**
implements #792 - addresses a command line flag --registry to specify a registry that overides yarn/npm configuration for installing dependencies.

**Test plan**

Added new tests.",False
e3a1fe3c54290d7fd73d51600274853788fb9b2d,2017-10-03 18:21:19,Burak Yiƒüit Kaya,"fix(resolver): Only optimize patterns in flat mode (#4613)

**Summary**

Fixes #4550. The optimization introduced in #4488 should only
apply to flat installations since even if a single pattern can
satisfy all resolved versions, it is not guaranteed that it is
strict enough for resolving correctly for all patterns under all
circumstances.

**Test plan**

Manual verification.",False
e3004ab371b1d91e243187a3ea4df63ba9034b7a,2017-10-03 18:12:43,Cameron Hunter,"chore(tests): Add failing test-case for issue #2636 (#4598)

**Summary**
This is a failing test-case for issue #2636. It tests that bundled dependencies are not correctly being included in the archive created by `yarn pack`.

**Test plan**
Changing the behavior of `pack` to include the bundled dependencies should make this failing test-case pass.",False
d43340c05de806b006add2ace76f0f990a0b2300,2017-10-03 15:50:34,Valerii Iatsko,Updated node to 8.x in Dockerfile.dev (#4607),False
4638161a7f3d905e24b619f2e25886f9c05a7afd,2017-10-03 15:46:32,Phil Quinn,Fix: allow package without manifest to be removed (fixes #4310) (#4599),False
1276e3ff446a65708f05ce00959b3af6be8ed3c0,2017-10-03 15:35:16,Phil Quinn,Feature: Add ability to filter yarn cache (fixes #3200) (#4571),False
4fa9f71bab2398f75d009d38192cc676966d1cd4,2017-10-02 21:40:05,Veniamin Krol,"fix(install): Fix performance issue with multiple lifecycle package scripts (#4588)

**Summary**

Fixes #4551.

See https://github.com/yarnpkg/yarn/issues/4551#issuecomment-332510392

**Test plan**

* Existing tests pass
* Manually tested",False
a3af4774f3131c64c048d4fdbe6df72d4edc117d,2017-10-02 21:38:19,Nicolas Barray,"fix(autoclean): remove *.gz from the default .yarnclean file (#4601)

**Summary**

I removed the *.gz from the default .yarnclean generated by the `yarn autoclean --init` command. 

**Test plan**

I tested by hand and launch `yarn test` and didn't find a test case for the autoclean --init option. If needed I could write a test case to check the default .yarnclean file content against the constant DEFAULT_FILTER.

I hope it resolve half the issue #4450 :)",False
75bc4505df8396ab733672e47ede298885b95271,2017-09-29 19:20:03,Brian K. Christensen,"fix(windows): Detect when winpty is present and if the current terminal is a TTY (#4577)

**Summary**

This addresses some of the windows issues regarding running yarn in gitbash and friends envrionment.
with this fix I keep the behavior introduced 5 months ago in yarnpkg/yarn#3245, but try to do a better job detecting when to use winpty out of the box, in order make `piping` of output work with yarn.

Before this fix:
```shell
$ yarn --version
1.1.0
$ yarn --version | cat
1.1.0
$ yarn init
yarn init v1.1.0
error An unexpected error occurred: ""Can't answer a question unless a user TTY"".
info If you think this is a bug, please open a bug report with the information provided in ""D:\\workspace\\yarn\\yarn-error.log"".
info Visit https://yarnpkg.com/en/docs/cli/init for documentation about this command.
```

Piping works for simple commands, but interactive commands only work with an environment set to something. This prohibits scripts/tools around yarn that uses pipe, which is quite common to do in an unix like environment, but theses tools cannot work in windows' unix like environment.

WinPTY seems to be the savior here, but we need to only run yarn through winpty when a tty actually needs to be allocated. 

Previous attempts to solve this problem like: 
- yarnpkg/yarn#2230
- yarnpkg/yarn#2243

Did not address the use cases of piping, so they essentially broke that behavior.
Then yarnpkg/yarn#3245 fixed that, but now you have to use `YARN_FORCE_WINPTY=1` environment variable in order for `yarn init` and `yarn upgrade-interactive` to work and that's alright, but if you export that variable then piping is broken yet again because the variable will also be set in the piped command, and we haven't solved any problem.

I suggest we keep the environment variable behavior but open up for better detection when to use winpty out of the box.

This fix detects if the winpty binary is in path, and only use it if stdin is in fact a TTY: `test -t 1`. 

**Test plan**

The output of running:
- `yarn init`
- `yarn upgrade-interactive`
- `yarn --version | cat`

Without having the `YARN_FORCE_WINPTY=1` environment variable set.

```shell
$ ./bin/yarn init
yarn init v1.1.0
question name (yarn):

$ ./bin/yarn upgrade-interactive
yarn upgrade-interactive v1.1.0
info Color legend :
 ""<red>""    : Major Update backward-incompatible updates
 ""<yellow>"" : Minor Update backward-compatible features
 ""<green>""  : Patch Update backward-compatible bug fixes
? Choose which packages to update. (Press <space> to select, <a> to toggle all, <i> to inverse selection)
 devDependencies
   name                         range                      from               to             url
>( ) babel-core                   ^6.24.1                    6.24.1          ‚ùØ  6.26.0         https://babeljs.io/
 ( ) babylon                      ^6.5.0                     6.17.1          ‚ùØ  6.18.0         https://babeljs.io/
 ( ) eslint                       ^4.3.0                     4.3.0           ‚ùØ  4.7.2          http://eslint.org
 ( ) eslint-config-fb-strict      ^20.1.0-delta.3            20.1.0-delta.3  ‚ùØ  20.1.0-echo.1  https://github.com/facebook/jest#readme
 ( ) eslint-plugin-babel          ^4.0.0                     4.1.1           ‚ùØ  4.1.2          https://github.com/babel/eslint-plugin-babel#readme
 ( ) eslint-plugin-flowtype       ^2.35.0                    2.35.0          ‚ùØ  2.36.0         https://github.com/gajus/eslint-plugin-flowtype#readme
 ( ) eslint-plugin-jasmine        ^2.6.2                     2.6.2           ‚ùØ  2.8.4          https://github.com/tlvince/eslint-plugin-jasmine
 ( ) eslint-plugin-prettier       ^2.1.2                     2.1.2           ‚ùØ  2.3.1          https://github.com/prettier/eslint-plugin-prettier#readme
 ( ) eslint-plugin-react          ^7.1.0                     7.1.0           ‚ùØ  7.4.0          https://github.com/yannickcr/eslint-plugin-react
 ( ) eslint-plugin-yarn-internal  file:scripts/eslint-rules  0.0.0           ‚ùØ  exotic         file:scripts/eslint-rules
 ( ) gulp-sourcemaps              ^2.2.0                     2.6.0           ‚ùØ  2.6.1          http://github.com/gulp-sourcemaps/gulp-sourcemaps
 ( ) prettier                     ^1.5.2                     1.5.2           ‚ùØ  1.7.2          https://prettier.io
 ( ) webpack                      ^2.1.0-beta.25             2.6.0           ‚ùØ  2.7.0          https://github.com/webpack/webpack

 dependencies
   name                         range                      from               to             url
 ( ) babel-runtime                ^6.0.0                     6.23.0          ‚ùØ  6.26.0         https://github.com/babel/babel/tree/master/packages/babel-runtime
 ( ) commander                    ^2.9.0                     2.9.0           ‚ùØ  2.11.0         https://github.com/tj/commander.js#readme
 ( ) debug                        ^2.2.0                     2.6.8           ‚ùØ  2.6.9          https://github.com/visionmedia/debug#readme
 ( ) gunzip-maybe                 ^1.4.0                     1.4.0           ‚ùØ  1.4.1          https://github.com/mafintosh/gunzip-maybe
 ( ) inquirer                     ^3.0.1                     3.0.6           ‚ùØ  3.3.0          https://github.com/SBoudrias/Inquirer.js#readme
 ( ) node-emoji                   ^1.6.1                     1.6.1           ‚ùØ  1.8.1          https://github.com/omnidan/node-emoji#readme
 ( ) request                      ^2.81.0                    2.81.0          ‚ùØ  2.83.0         https://github.com/request/request#readme
 ( ) rimraf                       ^2.5.0                     2.6.1           ‚ùØ  2.6.2          https://github.com/isaacs/rimraf#readme
 ( ) semver                       ^5.1.0                     5.3.0           ‚ùØ  5.4.1          https://github.com/npm/node-semver#readme
 ( ) tar-fs                       ^1.15.1                    1.15.2          ‚ùØ  1.15.3         https://github.com/mafintosh/tar-fs
 ( ) uuid                         ^3.0.1                     3.0.1           ‚ùØ  3.1.0          https://github.com/kelektiv/node-uuid#readme

$ ./bin/yarn --version | cat
1.1.0
$
```

And importantly when running the interactive commands through a pipe, it will correctly fail by saying you not are running the interactive commands in a TTY:

```shell
 $ ./bin/yarn init | cat
yarn init v1.1.0
error An unexpected error occurred: ""Can't answer a question unless a user TTY"".
info If you think this is a bug, please open a bug report with the information provided in ""D:\\workspace\\yarn\\yarn-error.log"".
info Visit https://yarnpkg.com/en/docs/cli/init for documentation about this command.

 $ ./bin/yarn upgrade-interactive | cat
yarn upgrade-interactive v1.1.0
info Color legend :
 ""<red>""    : Major Update backward-incompatible updates
 ""<yellow>"" : Minor Update backward-compatible features
 ""<green>""  : Patch Update backward-compatible bug fixes
Done in 1.43s.
Error: Can't answer a question unless a user TTY
    at D:\workspace\yarn\lib\reporters\console\console-reporter.js:487:31
    at Generator.next (<anonymous>)
    at step (D:\workspace\yarn\node_modules\babel-runtime\helpers\asyncToGenerator.js:17:30)
    at D:\workspace\yarn\node_modules\babel-runtime\helpers\asyncToGenerator.js:35:14
    at Promise (<anonymous>)
    at F (D:\workspace\yarn\node_modules\core-js\library\modules\_export.js:35:28)
    at D:\workspace\yarn\node_modules\babel-runtime\helpers\asyncToGenerator.js:14:12
    at ConsoleReporter.prompt (D:\workspace\yarn\lib\reporters\console\console-reporter.js:518:7)
    at Object.<anonymous> (D:\workspace\yarn\lib\cli\commands\upgrade-interactive.js:116:38)
    at Generator.next (<anonymous>)
```",False
8580a5831e6239353d0ffba1c4df678eaa31161e,2017-09-29 00:46:58,Burak Yiƒüit Kaya,"Fix: always prefer CLI options over env for --prod (#4572)

**Summary**

Fixes #4557. Also adds `yarn config current` that lists the current
configuration as JSON for testing purposes.

**Test plan**

Added integration tests.",False
3b0bcc0e4f72881dec7016c20e2da8eb6ad19d70,2017-09-28 21:25:00,Burak Yiƒüit Kaya,"Fix: bring back the aggressive concurrency protection (#4573)

**Summary**

Follow up to #4486 which reverted the while loop that waits on
potential multiple copies of the same file. This seems to have
some random breakages and needs more investigation for optimizing.

**Test plan**

N/A",False
391eadeed3199ba9a4bd15237f522c04f68704d8,2017-09-28 04:43:13,Matt Mulder,"Fix: respect patterns with ""||"" in the range during optimizeResolutions (#4562)

**Summary**

Fixes #4547 by testing each version against all ranges individually, rather than munging the patterns together to get a single range.

**Test plan**

Existing tests, plus a regression test to repro #4547: ""manifest optimization respects versions with alternation""",False
8cf5f5d501d848605f1f25c726ae400a814123f4,2017-09-27 18:58:35,John Ferlito,"Ensure publish hooks are run at the same time. (#4553)

Move publish, prepublish and prepare hooks to run before tar ball is
created.

Also switch the order of prepare to be consistent with
https://docs.npmjs.com/misc/scripts",False
0415b07b3293ab125a77f3f66fe14034d6e5b376,2017-09-26 18:23:53,Clint Modien,"Fix: Suppress ""revealed multiple traversal of the same folder"" warnings (#4549)

**Summary**

Refs #3751. Changes `reporter.warn` to `reporter.verbose` for the message ""The case-insensitive file ${dest} shouldn't be copied twice in one bulk copy"".

**Test plan**

Manual verification.",False
19b09975e9900640a3b3070a1e05efc5184e9bef,2017-09-25 15:43:18,Burak Yigit Kaya,Chore: fix tests after the new release,False
ee5d4a153a3fe85145c45c0bb251ffffffcfe210,2017-09-24 23:33:41,Burak Yigit Kaya,"Chore: use npm@4 for publishing tarballs

**Summary**

Yarn 1.1.0 release failed due to a bug in npm@5:
https://github.com/npm/npm/issues/16723. This patch uses `npx` to
force using `np@4` when publishing in `update-npm.sh`.

**Test plan**

CircleCI",False
332b0dd7f6fe5c862074922897880cca8a7572ed,2017-09-23 00:38:03,Burak Yigit Kaya,v1.1.0,False
49041f22d7799e443a67f78e3cb2bc84fabcd6d7,2017-09-23 00:36:33,Burak Yiƒüit Kaya,"Update: add `yarn global dir` command (#4522)

**Summary**

Fixes #2652. Adds a `yarn global dir` command that prints the output
of the global installation folder that houses the global `node_modules`.

**Test plan**

Manual verification.",False
4020ccd0a3304239877562b776f2aff27ebf2ede,2017-09-22 18:42:42,Matt Mulder,"Fix: unbound transitive dependencies should not conflict with top level dependency (#4488)

**Summary**

Fixes #3780, and makes the failing test from #3779 passing.

As a final step of package resolution, for each dependency we check whether any version satisfies all resolved version ranges. 

**Test plan**

Fixes an existing (failing) test: ""unbound transitive dependencies should not conflict with top level dependency""",False
107ebf11f7e3d12563c8b4cac82037b67f9a5284,2017-09-22 17:42:26,Daniel Tschinder,"Fix: Make stripColor to be available again on reporter.format (#4518)

**Summary**
This is a bugfix for the following error which happens on master

```
‚ùØ yarn outdated
yarn outdated v1.0.2
error An unexpected error occurred: ""this.format.stripColor is not a function"".
info If you think this is a bug, please open a bug report with the information provided in ""/Users/danieltschinder/Documents/ResearchGate/PHP/community/yarn-error.log"".
info Visit https://yarnpkg.com/en/docs/cli/outdated for documentation about this command.
```


chalk 2.0 removed stripColor see https://github.com/chalk/chalk/releases/tag/v2.0.0 and this wasn't respected in #4482

**Test plan**

Manual verification.",False
2c2b23eb546cfbc899401d29556d5de192e9ee4f,2017-09-22 17:28:12,Burak Yiƒüit Kaya,"Update: warn when used with not supported Node versions (#4502)

**Summary**

Fixes #4501, refs #4490, refs #4284. Yarn now warns when it
detects it is running in a Node version that is not fully
supported and warns the user about this. This is different than
the hard Node 4+ check in the entry file since in that case,
Yarn wouldn't run at all due to syntax incompatibilities. This
warning is to signal that users may encounter unexpected errors
but are allowed to use Yarn if they wish. It also adds a new
flag to suppress this warning: `--no-node-version-check`.

**Test plan**

Since we cannot add unsupported Node versions to our CI and
spoof the Node version internally, this has to be tested
manually, which I did.",False
9f5160bf9f06d3abdbf54a1de1e28836a478a3cb,2017-09-22 17:27:49,Burak Yiƒüit Kaya,"Fix: don't suggest `npm upgrade` since it is broken (#4511)

**Summary**

Fixes #3042.

**Test plan**

Manual verification.",False
dcbbc1cdcc8ddf1e20cb74e3a1a7aee320b5098e,2017-09-21 17:13:13,Burak Yigit Kaya,Chore: update comment about sudo in .travis.yml,False
085064d66225e72f73c95c076b50000861bdfdca,2017-09-21 17:09:16,Kay.L,"Fix: Upgrade Chalk to take advantage of the latest (colour) fixes (#4482)

**Summary*

Fixes #4424. The latest Chalk has fixes to Windows 10 / MacOS and more would improve the color detection in different env.

https://github.com/chalk/supports-color/blob/master/index.js#L48
https://github.com/chalk/supports-color/blob/master/index.js#L78

**Test plan**

Existing and updated tests. Also manual verification.",False
002d39c9b18d9e6e62deb0fe8fc4dc0f3292ccb1,2017-09-20 06:21:12,Burak Yiƒüit Kaya,"Fix: fix argument parsing and .yarrc argument passing (#4498)

**Summary**
Fixes #4457, partially handles #4470. `.yarnrc` argument passing logic was not aligned with
how `commander` works. Even more, `commander`'s boolean logic was
also not used correctly. This patch fixes both, allowing use of
boolean type CLI options both ways (enable/disable) both from the
command line and `.yarnrc` file.

**Test plan**

Added new integration test for getting args from `.yarnrc`.",False
e52e8b18c93667c028720c457d3968f0bc6810e9,2017-09-19 14:48:29,Burak Yiƒüit Kaya,"Fix: make lockfile parser tolerant to CRLF (#4495)

**Summary**

Lockfile parser fails when the lockfile had Windows-style line
endings with an ""Invalid token"" error. This is default on Windows
and, say when editing the file using vim, it is not obvious or
trivial that the file endings are in Windows-style. This patch
makes the parser tolareate potential ""\r"" chars before ""\n"" while
keeping the existing parsing logic the same.

**Test plan**

Added three new unit tests.",False
01dceb3a5b56177841544fc3a8414d21e2f23967,2017-09-19 06:10:06,Burak Yiƒüit Kaya,"Fix: always use origin/master instead of master for homebrew (#4444)

* Fix: always use origin/master instead of master for homebrew

**Summary**

Fixes #3415. The old homebrew update script updated the repo
from remote but did not update the local `master` branch, thus
had the potential for conflicts and mismatches. This patch
forces it to use `origin/master` instead and uses the latest
up-to-date version from the source.

**Test plan**

N/A

* Stay on master",False
d64512c632e1ed12f5bffe8a1f50d235c18f0196,2017-09-19 02:37:28,Burak Yiƒüit Kaya,"Fix: Better npm_config_argv emulation (#4479)

**Summary**

Fixes #2226. Better emulates `npm_config_argv` by passing
`process.argv.slice(2)` as the `original` portion and both the
command name and the script name in `cooked` portion.

**Test case**

Added integration tests.",False
3124c91c99bb0ada6c242133d0da35ee7a2740fd,2017-09-18 21:25:27,Aleksei Gusev,"Chore: Free tests from FORCE_COLOR environment variable dependency (#4381)

**Summary**

FORCE_COLOR environment variable allows to force yarn to use
colors. This makes some of tests fail because of comparing
colorized output with plain strings.

For example, if you run a test in environment where
FORCE_COLOR is set you get this failure:

```
 FAIL  __tests__\index.js
  ‚óè should add package
    expect(received).toEqual(expected)
    Expected value to equal:
      ""success Saved lockfile.""
    Received:
success Saved lockfile.""
```

**Test plan**

Run tests in an environment where `FORCE_COLOR` is enabled. They should pass.",False
0ee1c55fd55f3863a7544e40a774162764d29536,2017-09-18 18:17:31,Burak Yiƒüit Kaya,"Update: use fs.copyFile when available (#4486)

**Summary**

Fixes #4331. Supersedes #3290. Uses the newly added `fs.copyFile` 
on Node 8.5 hen available and falls back to the old buffer based 
method otherwise. This patch also refactors the file copy code a 
bit making it more efficient. Here are the durations on my computer 
with [this package.json](https://github.com/sciolist/fcopy/blob/c0ded8b82bbaa3f4cdb0a67e951eb3f8b0f97fb7/perf/project/alottafiles/package.json):

| master | w/o copyFile | w/ copyFile |
| - | - | - |
| ~23s | ~19s | ~14s |

This is with `yarn.lock` in place and w/o `node_modules`.

**Test plan**

CI should pass.",False
0e16ee9a3edf0bf9381458eba6ac9f12047f51d2,2017-09-17 06:17:27,Ahmed El Gabri,"Feature: Support save-exact true (#4471)

**Summary**

Fixes #4343. Currently there is no way to remove the package prefix inside `.yarnrc` file, this PR add support for `save-exact` in `.yarnrc` as discussed in #4343. Full credit goes to @jambonrose

```
save-exact true
```

One small thing, should `yarn` be backwards compatible with the old behavior which is `save-prefix ''`? We can just add an extra check here for do this. What do you think @BYK?


```js
} else if (exact || Boolean(this.config.getOption('save-exact')) || Boolean(this.config.getOption('save-prefix'))) {

```

**Test plan**

New unit test.",False
96c215c1ce5944a6fe993ab0d9b13e6edfe65675,2017-09-16 15:46:17,Burak Yiƒüit Kaya,"Fix: Resolve peerDependencies from all higher levels, not just root (#4478)

**Summary**

Fixes #4446, fixes #4433, fixes #2688, fixes #2387. Follow up to #3803. The fix in #3893 was
too aggressive, allowing only top-level dependencies to be used in
peer dependency resolution which was incorrect. This patch allows
resolving peer dependencies from the same or higher levels in the
dependency tree.

**Test plan**

Additional unit and integration tests.",False
b22ac9b0c9908266fc328373983d93b588d7f8b9,2017-09-15 23:13:15,Burak Yiƒüit Kaya,Chore: use a Set for look ups in PATH_KEYS (#4472),False
8b665e32a3cce6f8c1ce9e355fefa317cf205081,2017-09-15 18:47:29,Burak Yiƒüit Kaya,Chore: ignore flow warnings from graphql (#4473),False
6fdbb39a43387fcbdafc364d698c752696795668,2017-09-15 03:15:09,Burak Yiƒüit Kaya,"Fix: Handle `null` versions in package.json (#4461)

**Summary**

Fixes #4429. Apparently there's an advice on the internet to use
`null` as the package version to install the latest version and
even worse, some people are using this. This patch makes sure
the version is at least a string (albeit an empty one) when
fixing the manifest.

**Test plan**

Added new integration test.",False
b346f2c435f126423a6e8e105ddec808492a16fc,2017-09-15 01:28:55,Adam Stankiewicz,"Chore: Add test to ensure manifest-less local packages are installable (#4456)

**Summary**

Refs #4257. Adds the missing regression test.

**Test plan**

The new test should pass.",False
ef8185b015c13f10c602fb695f91f391271d1f5c,2017-09-14 22:00:18,Burak Yiƒüit Kaya,"Fix: incorrect optional ignore in nested dependencies (#4448)

**Summary**

Fixes #4445. The bug was introduced in
https://github.com/yarnpkg/yarn/pull/3976/files#diff-7066979f95168f7bb59e4f9cfb3ba8fcR211
with an incomplete package optional check. This caused many transient
dependencies to be ignored at linking stage when `--ignore-optional`
flag is passed. This patch fixes the check to combine the flag with
the package's actual optional mark.

**Test plan**

Manually verified #4445 is resolved. Also added a unit test.",False
cf3a5f214648c84a839fe09065795904f2688997,2017-09-14 19:43:10,Chaitanya Kumar Kamatham,"Fix: inaccurate message when using `-g` with add (#4449)

**Summary**
Fixed incorrect documentation for global add deprecated message

**Test plan**

Run `yarn add -g left-pad` and follow the suggested command on the console. It should work.",False
738df577c8ab224e01cd6cf8b350b1b946e8775d,2017-09-14 07:29:44,Burak Yiƒüit Kaya,"Update: add DNS caching to request manager (#4447)

**Summary**

Fixes #746. Unfortunately, neither Node, nor many systems come with
built-in DNS caching so the many parallel requests that Yarn makes
sometimes overwhelm the DNS servers, and most of the time, for the
very same domain(s). Even worse, we pay the DNS look up cost for
each request, which is quite sad at best. This patch introduces
the `dnscache` module which intercepts all DNS look ups and answers
them from an in-memory cache when possible. This applies to the
built-in `http` and `https` modules, used by `request`.

**Test plan**

Existing tests should pass, and hopefully be faster. Total number of
DNS look ups should decrease dramatically.",False
72bdb8231754dfcaa747cf8549b4cf0f6f1ff0ad,2017-09-14 04:29:02,Kay.L,"Fix: use simpler charaters for progress bar to avoid overflows (#4317)

**Summary**
Fixes #2530. This patch replaces the 2-byte progress bar characters with `-` and `#` wrapped in a pair of `[` and `]` symbols to make it looks like a progress bar on the console with ""simple"", one-byte characters.

The reason for preferring one-byte characters is the inconsistent width calculation on certain terminal emulators causing the calculated progress bar width to overflow the available terminal width, causing the progress bar to split into multiple lines.

It now looks like this:
![new progress bar chars](https://i.imgur.com/d8XA4yS.gif)

**Test plan**

Manual verification and updating of existing test snapshots.",False
78a5f3379fd3f0e3eeae680166022846925cf660,2017-09-14 02:46:34,Martin,"Chore: Add test for isFakeRoot (#4435)

**Summary**

Follow up to #4431. `isFakeRoot` didn't have any tests and it was broken from the start. #4431 solved it and it was merged to be included in 1.0.2 without tests. This patch adds the missing tests for this function.

**Test plan**

Added new tests, duh :D",False
975d88002388e510fdd529d8f3c29d80f037f40c,2017-09-14 02:39:22,Orta,"Update: Bolds the titles in a list (#4406)

**Summary**

Not substantial. It makes it easier to differentiate the items in a list vs the hint. Here is the before:

![screen shot 2017-09-11 at 3 18 25 pm](https://user-images.githubusercontent.com/49038/30292973-0431c13c-9706-11e7-95da-f32452154004.png)

and the after:

![screen shot 2017-09-11 at 3 20 57 pm](https://user-images.githubusercontent.com/49038/30292985-1133c164-9706-11e7-813e-c26f422f068d.png)


**Test plan**

Existing unit tests.",False
5786d3a555164c3a839f355a0ee67bbca93ff408,2017-09-13 21:56:40,Burak Yigit Kaya,v1.0.2,False
27f6d09b81db7cc8b41e8f28f20867c9c49cc926,2017-09-13 21:53:56,Nick Olinger,"Fix: don't throw when user exits from upgrade-interactive (#4434)

**Summary**

A combination of changes have caused `yarn upgrade-interactive` to exit with a promise rejection. 

In short, I believe it has always been a problem, but #3995 exposed it to the prompt. 

The child rejection inside of [upgrade-interactive](https://github.com/yarnpkg/yarn/blob/master/src/cli/commands/upgrade-interactive.js#L152) is fine, as it was handled by the `Promise.race` condition; however, rejecting at the parent level inside of [console-reporter](https://github.com/yarnpkg/yarn/blob/master/src/reporters/console/console-reporter.js#L458) causes[ loud-rejection](https://github.com/sindresorhus/loud-rejection) to handle this.

I believe @arcanis 's PR #4283 is what would allow us not to hook into `SIGINT` inside of the console reporter and allow the reporter to cleanly close itself.

**Test Plan**

Will work on some scenarios! This PR needs some more verification on my end ... @BYK @torifat @arcanis please jump in and provide any feedback you think could be helpful! Opened early for visibility :)",False
61f64ff3b471e705420ddcf4616e5d30bf341f4f,2017-09-13 20:50:43,Martin,"Fix: fakeroot detection is broken (inversed) (#4431)

**Summary**

Fixes #4430.

`fakeroot` detection was added in #3924 (7a053e2ca07d19b2e2eebeeb0c27edaacfd67904); it actually tests the exact opposite though. 

**Test plan**

For testing this I added the line
```JavaScript
console.log(""isFakeRoot"", isFakeRoot());
```

I then tried the lines
```
./yarn global add
sudo ./yarn global add
fakeroot ./yarn global add
```

I also tried if `ROOT_USER` is now correct in [user-home-dir.js](https://github.com/yarnpkg/yarn/blob/0ef3bf1f03d128e4793eca3fe3b5f93542451f15/src/util/user-home-dir.js) for these 3 commands. 
```JavaScript
console.log(""ROOT_USER"", ROOT_USER);
```

Will also follow up with unit tests.",False
5386c41979c8ab420cc5d3599a8d6d79acefb6c7,2017-09-13 17:31:44,Peter Dotchev,"Fix: actual and expected hashes are swapped (#4416)

**Summary**

This PR fixes the error message for hash mismatches where the actual and expected hashes were swapped in the error message.

**Test plan**

Manual verification.",False
274a26a3d396bafa430749e9615c23d21a76c6a6,2017-09-13 15:38:36,Jeff Held,"Fix: Diffing identical versions should not include extra period at end (#4428)

**Summary**
Fixes #4395 

This PR fixes a bug that causes `colorizedDiff` to append a period at the end of the return value if the `from`/`to` versions are identical. If they do happen to be identical, then it will simply return the `from` value.

**Test plan**
I am currently testing that, given identical `from`/`to` versions, it returns the `from` (or `to`) version. I've not added unit tests to cover when the versions differ in any way, nor am I testing that the returned string is formatted correctly (e.g., if `from = '1.0.0'` and `to = '1.0.1'`, the result should be `1.0.1` with the trailing one being formatted to green)",False
52ef037c790d949d7e078dfcfaeb0d3f6f441d18,2017-09-12 23:17:49,Burak Yiƒüit Kaya,"Fix: always output reporter.inspect values and `config get` result (#4419)

**Summary**

Fixes #3922. Certain commands in yarn should always produce an
output, regardless of the silent status. This makes
`reporter.inspect` for console reporter to always produce an
output. It also forces the output of `yarn config get` to override
silent mode.

**Test plan**

Should add integration tests.",False
ccf5812b9bbcc4931b9d32966f48a09e4448a8f0,2017-09-12 21:49:33,Burak Yiƒüit Kaya,"Chore: fix flaky `add` tests by using separate cache (#4418)

* Chore: fix flaky add tests by using separate cache

**Summary**

This PR fixes some test flakiness, especially in the
""should add package with frozzen-lockfile option"" tests
where we get `ENOENT` errors from cache. This is most
likely because multiple `add` tests are run concurrently
causing cache corruption. This PR makes all `execCommand`
invocations use a separate cache.

**Test plan**

Tests should not be flaky anymore.

* lol, fix tests",False
939a130194387b07b5e9371475009d58d81ad937,2017-09-12 20:06:28,Karolis Narkevicius,"Fix: allow / in addition to %2f in the url for scope checks (#4367)

**Summary**

Fixes #4366. NPM registry encodes the `/` in scoped package names for meta look ups but not for tarball download URLs so Yarn was not sending authentication headers for the tarball downloads breaking scoped packages. This patch fixes it.

**Test plan**

Updated tests.",False
eafd2287ff38d1767abe801c37bd8a9d3bab1b11,2017-09-12 18:42:19,Burak Yiƒüit Kaya,Chore: add missing cache packages for tests (#4414),False
3f94e774bff0f85d1b0d54694609875cf2d157f5,2017-09-12 18:41:40,Burak Yiƒüit Kaya,"Chore: fix misues of -p in node infocations (#4415)

**Summary**

We've been using `node -p -e` where `-e` is redundant since
it is implied by `-p`: https://nodejs.org/api/cli.html#cli_p_print_script

This patch removes those extra `-e`s.

**Test plan**

All bundles should build on CI without errors.",False
cb3c7fe9a53a107703f8ff2b6c6ce90022f8fe41,2017-09-12 18:11:02,Burak Yiƒüit Kaya,"Fix: fix incorrect argument parsing (#4384)

**Summary**

Fixes #4383. This patch makes argument parsing a bit tidier, and
starts supporting `yarn --silent custom-script` style commands as
initiall intended by #4152.

**Test plan**

Existing unit tests. Should ideally add a few more.",False
4e3ecf8a38982e7b59b9a927595125187a7b294f,2017-09-12 15:24:57,kaylieEB,"Fix: Include pull requests in git ref search (#4411)

**Summary**

Fixes https://github.com/yarnpkg/yarn/issues/4369, a regression from previous refactor.
Include `pull` requests in ref search and test for it later when it's called by github resolver.

*BEFORE*
![before](https://user-images.githubusercontent.com/18429494/30309691-7aeabe2e-9741-11e7-8e34-c75413b83d99.png)


*AFTER*
![after](https://user-images.githubusercontent.com/18429494/30309693-7dcc3528-9741-11e7-8a74-bc7585fd6177.png)

**Test plan**

Added a unit test in `git/git-ref-resolver.js`",False
1fde50aeb587fce48c3f6d632dd479b02d04aa63,2017-09-12 12:19:04,Burak Yiƒüit Kaya,"Fix: yarn bin should produce output even when silent (#4408)

**Summary**

Fixes #4371.

**Test plan**

Manual verification: `yarn --silent bin` or `YARN_SILENT=1 yarn bin` should produce output.",False
c76a8bb2804d25bb60e181d62f17699618b10f6f,2017-09-12 01:25:58,kaylieEB,"Fix: Allow resolver to delay resolutions for nested dependencies (#4372)

**Summary**
Fix for https://github.com/yarnpkg/yarn/issues/4357.

The issue is that when a dependency (dep A) defined in resolutions (includes dep A, dep B) depends on another resolution (dep B), then it expects to match its own nested dep B to the top level resolution dep B. So the first part of this fix is ""don't run resolutions map check when it's in flat mode"", which is what threw the invariant warning. Second part of the fix is that we still want that nested dependency (dep B) of a resolution (dep A) to be resolved correctly. `--flat` mode solves this by [collapsing all versions](https://github.com/yarnpkg/yarn/blob/master/src/cli/commands/install.js#L558) after the resolver is done. For resolutions, I'm adding a delay queue for requests with resolutions but no manifests found yet so that they will be resolved later.

**Test plan**
Added tests in resolutions",False
5bc24775e3fb341abdde25ba04408e4ab2ff1176,2017-09-11 22:30:33,Burak Yiƒüit Kaya,"Fix: add back -L shortcut for yarn upgrade (#4401)

**Summary**

Fixes #4397.

**Test plan**

Manual verification.",False
23713e57d6ce1eacf0b93181733e49ec647a4dec,2017-09-11 08:55:13,Burak Yiƒüit Kaya,Chore: add instructions about using local builds (#4386),False
bcaf845e87868a0ee6b49a6be7b60670b27b657a,2017-09-11 02:52:19,Burak Yiƒüit Kaya,"Fix: don't generate a lockfile when --frozen-lockfile is used (#4385)

**Summary**

Fixes #4344.

**Test plan**

Added new test.",False
b33fe264db334f90a821e919c16c079cc5d52ce2,2017-09-09 02:58:19,Mark Yu,"Fix: argument -v is for version not verbose (#4362)

**Summary**

Currently running `yarn -v` displays the yarn version number but `yarn -h` says otherwise:

```
$ yarn -h

  Usage: yarn [command] [flags]

  Options:

    -h, --help                          output usage information
    --version                           output the version number
    -v, --verbose                       output verbose messages on internal operations

$ yarn -v
1.0.1

```

this PR fixes `yarn -h` to use `-v` as version number. Output of `yarn -h` with this PR:

```
$ ./bin/yarn -h

  Usage: yarn [command] [flags]

  Options:

    -h, --help                          output usage information
    -v, --version                       output the version number
    --verbose                           output verbose messages on internal operations

```",False
85281cb1342c1528cf8a68b5b3f093f5150d6cdc,2017-09-09 02:56:02,Burak Yiƒüit Kaya,"Fix: only switch to help mode for valid commands (#4355)

**Summary**

Fixes #4345. This patch triggers the `help` command with `-h` or
`--help` only when the command name is known to `yarn` and the flag
is set immediately after the command name itself.

**Test plan**

Should add unit tests.",False
b5e37906dd11b0d6fc353aed8be304d5e3e2891e,2017-09-09 02:55:38,Burak Yiƒüit Kaya,"Fix: remove the `accept` header from tar fetcher requests (#4351)

**Summary**

Fixes #3833. Removes `accept` header from tar requests as @arcanis suggested since `application/octet` wasn't ensuring any valid tar file and `npm` client does not send this header anyway.

**Test plan**

Run `yarn add http://prerelease.componentone.com/wijmo5/npm-images/C1Wijmo-Enterprise-Eval-System-5.20172.328.tgz`

It fails without the patch, installs correctly with the patch.",False
161f97e702d2210ec7186c92b0d566517ec58393,2017-09-09 02:55:04,Burak Yiƒüit Kaya,"Fix: support protocol-relative registry URLs (#4347)

**Summary**

Fixes matching protocol-relative registry URLs from config.
Reported here: https://github.com/yarnpkg/yarn/pull/3987#discussion_r137624001

**Test plan**

Added one new test.",False
d3f223c331e7dc05b1c43bf681ee73cbfd675018,2017-09-08 16:01:13,Burak Yiƒüit Kaya,"Fix: fix support for registry URLs without trailing slash (#4350)

**Summary**

Fixes #4339. Also fixes handling of upper-case registry names.

**Test plan**

Added unit tests for `NpmRegistry.prototype.getRequestUrl()`.",False
6295408a747775f040e101ca54970fa6743ea4dd,2017-09-08 10:24:29,Dylan Greene,"Fix: Fix regex so single-character @scopes can work again (#4338)

**Summary**

The exotic `file-resolver` checks for `.` and `..`, but the regex is missing the escape on the `.`, so *any* two characters count as a file. This includes single-character scope names, like `@s/packagename`.

This issue was introduced in https://github.com/yarnpkg/yarn/pull/4257.

**Test plan**

I wasn't sure how packages should be named in `__tests__/fixtures/install/resolutions/exotic-version`, so I have not added add a single-character scoped package reference to test.

I don't know of any single-character scopes in the public registry to use as reference, the way `left-pad-1.1.1.tgz` is mirrored in there. Could I just copy `leftpad-1.1.1.tgz` as `@s/leftpad-1.1.1.tgz` and use that?",False
5ea8ea7f9c398545dd7f235e76908b9fad823054,2017-09-07 18:49:44,Ma√´l Nison,1.0.1,False
aeb89c0684da3d79e5e16f8fabe6be24e015b2d2,2017-09-07 18:40:34,Aditya Vohra,"Add npm_lifecycle_script to env in makeEnv (#4330)

* Add npm_lifecycle_script to env in makeEnv

* Update execute-lifecycle-script.js",False
03a16d054901169dd40c6bf671112ffe013e5112,2017-09-07 16:17:25,Burak Yiƒüit Kaya,"Fix: More resillient global and cache folder determination (#4325)

* Fix: Make sure global prefix folder is writeable when selecting it

**Summary**

Fixes #4320 and fixes #4323. We were using `fs.access` when selecting
the global prefix folder automatically which only checks for permissions
but not actual writeability. This caused issues on Heroku where one of
our first tries had the correct permissions but was on a read-only
file system.

**Test plan**

Existing cache folder fallback tests should be enough for now. We should
move the core of those tests for the newly added `fs.getFirstWriteableFolder`
method.

* Fix wrong error message template used from getGlobalPrefix

* Better error message

* Add process.execPath as a last resort

* Add back $DESTDIR support removed from #3721

* Fix DESTDIR typo

* Fix skippedFolder error

* don't use rimraf to remove a file

* Don't use process.execPath

* Defer write checks for global prefix

* flow type

* Just warn when a proper global folder cannot be found, instead of failing

* Add TODO about inconsistent npm-registry code

* Keep the old behavior

* Update fs.js",False
739933e353e8242f9f4abe1134fab2689970eb1a,2017-09-06 18:49:34,kaylieEB,"Add inline comments to improve readability of PR #4278 (#4318)

* add comments

* rewording",False
cddb2bc3784a6db86aee9f12e30a9b2f393b4dfb,2017-09-06 13:50:50,Connor Chase,Chore: Better grammer on README (#4211),False
0b807b48b0c3f7982771984363c52e89e54aa277,2017-09-05 22:49:44,Burak Yiƒüit Kaya,"Chore: fix info tests (#4316)

**Summary**

Looks like bumping the version on npm invalidated a cache that
revealed the new API response from npm for yarn. Now the
`scripts` field always exists even if it is empty.

**Test plan**

CI should pass.",False
7fbd78f1c21e6a0d19b5b085a4f14873ea77932a,2017-09-05 19:41:12,Ma√´l Nison,1.0.0,False
73921a6eb568ac07ef5a76b1e80b9a224809295b,2017-09-05 15:59:53,Burak Yiƒüit Kaya,"Fix: respect GIT_SSH env variable when calling Git and support plink (#4302)

**Summary**

Fixes #4167. We use `$GIT_SSH_COMMAND` which overrides `$GIT_SSH`
and causes issues on some systems, where a different `ssh`
executable like `plink` is used. This patch makes our batch-mode
enforcement smarter and more respectful and adds support for `plink`.

**Test Plan**

Unit tests.",False
49de069009b0286c45d7e14a6a75e621b11acdba,2017-09-05 15:31:00,Ma√´l Nison,Fixes yarn why when using workspaces (#4304),False
b8f8b7c3b81544e616c97c9aefc2dd909f808a65,2017-09-05 14:54:41,Burak Yiƒüit Kaya,"Fix: show better error messages when Git is not found (#4312)

**Summary**

Fixes #4287. Throws a specific error when `child.spawn` cannot find
the executable and handles this error properly in all `git` invocations.

**Test plan**

Existing tests.",False
de7cefc3120a7246c507616a17517b45452d6ff3,2017-09-05 02:38:06,Burak Yiƒüit Kaya,"Fix: make sure all extracted tarballs are r/w enabled (#4301)

* Fix: make sure all extracted tarballs are r/w enabled

**Summary**

Fixes: #992. This issue was supposed to be fixed by #2826 but it
was not setting directory permissions wide enough. This patch uses
the `readable` and `writable` options provided by the `tar-fs`
package which essentially sets everything to `0o777`.

**Test plan**

N/A

* fewer perms",False
da2b9096057301273aa27336f70622dda09b6c33,2017-09-05 02:37:13,kaylieEB,"Fix 4263: Make upgrade and upgrade-interactive compatible with workspaces (#4278)

* make upgrade and upgrade-interactive compatible with workspaces

* lint

* flow

* feedback from @arcanis

* fix flow

* remove lockfile pattern for normal upgrade interactive",False
9ba68a4d2d1cc0dcc65e21a2a5fb164b47173bc8,2017-09-05 00:25:40,Burak Yiƒüit Kaya,"Chore: use the orphaned `getRandomPort` function in tests (#4303)

**Summary**

Follow up to #4286, which accidentally made `getRandomPort()` function obsolete and caused a lint warning.

**Test plan**

Existing integration tests.",False
a22287e083f585ecad5f020a56ea96d0160d83da,2017-09-04 23:05:10,Ma√´l Nison,Prevent linking binaries from workspaces (#4288),False
593e243364d28d4f106cd60b35a3d7de4ba37ae0,2017-09-04 22:37:47,Ma√´l Nison,"Fix: Always close the reporter before exiting (#4283)

* Prevents the memory controls from hanging the process

* Update base-reporter.js

* Adds a test",False
ce69264945fc1d42b3ef25beb0f6ce17277a80c9,2017-09-04 20:11:05,Ma√´l Nison,"Refactors the network mutex implementation (#4286)

* Refactors the network mutex implementation

* Improves the mutex to abort when they hang (better debug)

* Update index.js

* Update integration.js

* Feedbacks",False
4bb34e2c470ce9d18a262c3abfd132aa05b5b415,2017-08-29 23:20:42,Carl Rosell,"Fix #4214: Align column headers for upgrade-interactive command (#4268)

Summary
Fix for issue #4214 by using the first suggested solution from the issue itself. For more info see the issue üòÉ",False
d500ef2271b153a3155c2d254fce692c3cce2912,2017-08-29 18:17:38,Ma√´l Nison,"Disables linking transitive dependencies on global installs (#4265)

* Disables linking transitive dependencies on global installs

* Update package-linker.js

* Update global.js

* Update global.js",False
915e775c66f41cbe256583a1188f973d7727526d,2017-08-29 15:46:42,Jeff Valore,"rename clean to autoclean, add tests (#4252)

* rename clean to autoclean, add tests

* fix tests. expect statements were not being run.",False
b4c35168b4eb8172e8465025684748f8db520d41,2017-08-29 15:19:12,kaylieEB,"Fix #3697 Improve error handling when tarball fetcher receives bad hash (#4240)

* test

* alter commit message

* update snapshot

* review feedback

* move to unlink files in all failed blocks

* lint

* Update tarball-fetcher.js",False
b9e15c96262d7700237a0be7370fd3f89a50bc78,2017-08-26 02:52:08,Burak Yiƒüit Kaya,"Fix: Do not create globalFolder and linkedFolder unless necessary (#4264)

**Summary**

Fixes #4229. Config used to ensure these folders existed at init.
This causes unnecessary and sometimes unexpected file system changes.
This patch defers creation of these folders unless necessary and adds
necessary protections for places where they used to be expected to exist.

**Test plan**

Existing unit tests.",False
24cd6d8a7249c38a3e33c6e1cd3d3c16fb29f276,2017-08-26 02:46:24,Burak Yiƒüit Kaya,"Fix: Add `$NODE` when running scripts and make `yarn env` reflect these (#4260)

**Summary**

Fixes #2609. This patch adds a `$NODE` environment variable when running
scripts through `yarn run` which is set to `process.execPath` unless it
is formerly set to something else. `$npm_node_execpath` is now just an
alias to `$NODE`.

The patch also updates `yarn env` to show these extra environment
variables.

**Test plan**

Updates existing `yarn env` tests.",False
d39a2e85c13ff61f5785e071ac73aed1aa037640,2017-08-25 23:25:05,Burak Yiƒüit Kaya,"Update: Enable Workspaces by default but keep the option to turn off (#4262)

* Update: Enable Workspaces by default but keep the option to turn off

**Summary**

Closes #3294 by enabling workspaces by default.

**Test plan**

Existing tests, slightly modified.

* Fix bugz

* Update install.js",False
3dd35dbafc9034846fe653ce67cfaafc61a14bcb,2017-08-25 21:23:40,Stanislav Panferov,"Fix: Fix scoped packages' selective resolutions (#4243)

* fix: scoped packages' selective resolutions

* refactor: review feedback",False
f872cc7f15532eb6c55d60690463a525b23f17e4,2017-08-25 21:13:46,Jeff Valore,"upgrade-interactive exit success when no upgrades (#4261)

* [#4259] upgrade-interactive exit success when no upgrades
* added test for upgrade-interactive all up to date",False
d47a2bf2c9decad8ccd81e9d3537252e6aae46a3,2017-08-25 20:17:28,Burak Yiƒüit Kaya,"Fix: Deprecate implicit `file:` protocol and only allow package dirs (#4257)

**Summary**

Fixes #4251. Follow up to #4088. Instead of just checking whether the
target is a valid directory, we now check if it contains a
`package.json` file too. This is still different from `npm`'s behavior.
Apparently, `npm` fetches the package info upfront to favor dist-tags
over directories but this comes at a distinct performance penalty and
makes static, deterministic resolution impossible so we are now
deprecating the implicit `file:` protocol in patterns. After a certain
point, we'll remove this code and will require everyone to use `file:`
or at least one of the following path identifiers: `./`, `../`. `/`.

**Test plan**

Updated the existing test for warning check and added a new test for
invalid directories.",False
7860f6c187731af5b4e4a73948acc03391dfbe1b,2017-08-25 01:46:43,Burak Yiƒüit Kaya,"Fix: Ensure bin folder exists before trying to use it (#4241)

**Summary**

Fixes #4164. Ensures we have the bin folder before trying to link
binaries into it and throws a user-friendly error if it encounters
any permission issues.

**Test plan**
```
rm -rf $(yarn global bin);
yarn create react-app hello-world
```

Make sure it doesn't throw. Also added a smoke test for `yarn create`.",False
6c0b94af20775b384604f877185d40a25cb9d977,2017-08-25 01:45:55,James Kyle,"Fix: fixes yarn workspace command (#4080)

**Summary**

Resolves #4021

This fixes the workspace command so that it runs in the correct directory and adds a test to validate it.

Previously the command was also relying on `process.argv` to get the executable path for `node` and `yarn`. However, that ends up being unreliable if yarn was run as part of another process (aka `jest`).

**Test plan**

Added integration tests.",False
ba96dc4ca1bb6bfee7f5e49f574ed51abf6a4c67,2017-08-24 22:57:17,Ma√´l Nison,"Better active directory selection (#4246)

* Automatically backtrack to the closest package.json directory

* Add a test

* Prettier

* Fixes linting

* Executes a test in a temp directory to not get affected by the change

* Removes now useless await

* Feedbacks

* Update index.js

* Update index.js",False
6bab5cc40b68d048d18cb00b097380d69872f226,2017-08-24 22:07:02,Pierre Neter,"Update: Add private flag for yarn init command (#4165)

**Summary**

Closes #4113. This PR create the `private` flag for `yarn init` command. Can use both `yes` and `private` flags. Or can use `private` flag alone to set `private` is `true` when run command.

**Test plan**

Have added tests",False
840acbf7b0e4c1cce13f8aed54db873e6a7f802e,2017-08-23 19:42:36,Ma√´l Nison,Fix: Add the missing link-folder flag (#4235),False
e6211fef8914fa41a4737ce44b82886a22f4ad30,2017-08-23 15:41:01,Burak Yiƒüit Kaya,"Fix: make integrity-check resillient against old integirty files (#4218)

**Summary**

We've added new field to the integrity file, `modulesFolders`, which will
be missing from the old versions. Since the code assumes this field is
always an array, it causes failures with old integrity files. This patch
fixes the issue by always providing some defaults.

**Test Plan**

Added new unit test.",False
13dbb0db58dab17fd1b63aa81a9afc5ecbb16c04,2017-08-23 15:33:16,Ma√´l Nison,"Adds a yarn-path rc config parameter (#4204)

* Adds a yarn-path rc config parameter

* Fixes linting

* Adds tests

* Uses flow parser, since changing it didn't fix the issue

* Update integration.js",False
dd94174ad07f2b087dd2d16201374c86cc08e7bc,2017-08-23 15:29:10,jonathan schatz,"Update: Update the lockfile parser README.md (#4232)

* Update README.md

add es6 example to lockfile docs

* Update README.md",False
fa93e7fa53b7f0c74b82d3224f863dcea79422e8,2017-08-23 15:28:24,Kenneth Chau,"Update: Major optimization on hoisting (#4222)

* Major optimization on hoisting
Keep track of side-effects of each visit of package, and replay side-effects rather than re-crawling through the subtree given the same exact pattern

* Fixing linting issues

* Updated to accomodate ancestry of patterns

* fix lint - get rid of extra params that were added during development

* Switched Map type for visited to potentially gain more speed",False
52a35c90d8347636dcf8a3a32b601951b8bf5cc0,2017-08-22 23:54:22,Ma√´l Nison,"Fix: Prevents interpreting run options as yarn options (#4152)

* Prevents interpreting run options as yarn options

* Implements a deprecation warning

* Adds tests

* Feedback

* Wording

* Enables a test on Linux

* Disables the tests again on Windows",False
2cb6dd61f498b239923b2d1b1e1ea57d51255cd7,2017-08-22 20:25:32,Haroen Viaene,docs(lockfile): add metadata to package.json (#4224),False
dff32cb62cf97537f20611d56df7047cc33032c7,2017-08-22 08:43:22,Daniel Lo Nigro,Tweaks to lockfile package (#4215),False
dbe683b71a04348d466c9dc6fc0fc4b98be606f8,2017-08-21 02:24:26,Carl Rosell,"Fix: Use semver tag to colorize package name for outdated/upgrade-interactive commands (#4183)

**Summary**
This will fix #3815 by implementing a solution mentioned here https://github.com/yarnpkg/yarn/issues/3815#issuecomment-322496710.
As the `outdated`-command displayed pretty much the same data I changed the colors of that command as well.

New output: 
![screen shot 2017-08-16 at 10 22 05](https://user-images.githubusercontent.com/2036823/29357714-c91f457a-8278-11e7-99fc-ef1a3be65b3e.png)
![screen shot 2017-08-16 at 11 48 54](https://user-images.githubusercontent.com/2036823/29357746-e4c1c1ea-8278-11e7-8541-6f71213d686d.png)

**Test plan**

I did not create any new tests as this is only a visual change and was not tested before. But if we decide to move the new ""helper files"" to a utils folder I can write a few tests to test the output.",False
2b09caff06151d6055705068c7edbc306fee9f68,2017-08-20 05:23:54,William Hilton,"Update: Separate lockfile into its own npm package (#4114)

**Summary**

Fixes #3879. Separates the lockfile parser as a separate npm package.

**Test plan**

Existing unit tests.",False
2952f3c85e0aa5b9f5dbb5a930196ec13d5210fb,2017-08-18 21:03:05,Nick Olinger,"Fix: Remove devDependencies from list output when environment is production (#4092)

**Summary**

Fixes: #3788.

This PR loads `devDependencies` from the manifest, re-builds the patterns package structure, and filters packages if the `NODE_ENV` is production.

**Test plan**

Added new tests.",False
70ca32c0499562cdc1f5a999d3fb20c3c994592c,2017-08-18 20:40:15,Burak Yiƒüit Kaya,"Fix: Lockfile should be updated when merge conflcits are resolved (#4195)

**Summary**

Follow up to #3544. Currently, `yarn` happily keeps moving if it
detects merge conflicts and is able to resolve them in the lockfile.
That said it doesn't persist the resolution by saving the lockfile
to disk again. This patch ensures writing the lockfile if it is
""dirty"".

This patch also causes `yarn` to throw an error if there are merge
conflicts in the file and `--frozen-lockfile` option is true.

**Test plan**

Existing unit tests. Also try running `yarn install` with the following
files:
`package.json`

```
{
  ""name"": ""yarnlock-auto-merge"",
  ""version"": ""1.0.0"",
  ""main"": ""index.js"",
  ""author"": ""Burak Yigit Kaya <byk@fb.com>"",
  ""license"": ""MIT"",
  ""dependencies"": {
    ""left-pad"": ""^1.1.3"",
    ""right-pad"": ""^1.0.1""
  }
}
```

`yarn.lock`

```

<<<<<<< HEAD
left-pad@^1.1.3:
  version ""1.1.3""
  resolved ""https://registry.yarnpkg.com/left-pad/-/left-pad-1.1.3.tgz#612f61c033f3a9e08e939f1caebeea41b6f3199a""
=======
right-pad@^1.0.1:
  version ""1.0.1""
  resolved ""https://registry.yarnpkg.com/right-pad/-/right-pad-1.0.1.tgz#8ca08c2cbb5b55e74dafa96bf7fd1a27d568c8d0""
>>>>>>> right-pad
```

Without the patch, `yarn` won't update the lockfile. With the patch,
the lockfile is replaced with the merged version.",False
0cb6fa076df4f38f24278d3de8d278c8f027b414,2017-08-18 20:19:13,Ma√´l Nison,"Fix: Uses an actual error object in __tests__/index.js (#4196)

* Uses an actual error object

* Update index.js

* Update index.js

* Fixes flow",False
71df50741c1821c3d0f8599074a0232db8bdfdba,2017-08-18 18:24:07,Ma√´l Nison,Removes the unlink test when selecting the cache folder (#4203),False
4d7043d4101297acd3f9ce0524f5d3c70819013d,2017-08-18 15:40:58,Jo√£o Lucas Lucchetta,"Fix: Add missing pre/post hooks for `pack` (#4177) (#4193)

**Summary**
Yarn wouldn't run the `prepack` and `postpack` scripts, as it is expected when `pack` is ran (#4177).
This PR adds those missing calls and updates tests accordingly.

**Test plan**
Added tests.",False
a9e343c2843ad04f2a2b4ee5c48636e88abd8e45,2017-08-17 20:44:09,Ma√´l Nison,"Fallbacks to /tmp if the preferred cache folder isn't writable (#4143)

* Fallbacks to /tmp if the preferred cache folder isn't writable

* Adds a preferred-cache-folder option

* Adds an integration test

* Node 4 doesn't expose fs.constants

* Remove the /tmp fallback

* Lints

* Adds a test

* wip

* Lints",False
804fb82dd2c4cf868df07d8be0e8e2e1fd79cbf6,2017-08-17 18:53:34,Jes√∫s Espino,"Fix local mirror invalid file name (#4076) (#4159)

* Fix #4076: Allow git repositories to have only one level on the server

* Add test for ensure that the cache file name is generated correctly",False
64b17ae1044a6278d6bdfda2a1ca35eb3d94aed3,2017-08-17 18:47:34,Sebastian McKenzie,"Add cwd flag (#4174)

* Add cwd flag

* Handle --cwd flag in .yarnrc

* add test fixtures

* Update rc.js

* Update en.js",False
e92ac93ab3eb0aa3af570bff73754d83e1fba287,2017-08-17 17:31:53,Ma√´l Nison,Fixes the info test (scripts are no longer in the npm package) (#4192),False
f47b42034300199e74cfb88736a8cbbc93fa91e3,2017-08-17 15:47:31,kaylieEB,Add request pattern to resolver and add tests (#4189),False
6bfaac3f1cb0b26e06110eeacee0ccbd7f924327,2017-08-17 15:42:46,Jamie,"Bugfix 3752 - Artifacts disappearing when missing integrity file (#4185)

* Add method to update force property

* Update install to force script installs when integrity file missing

* Update add to force script installs when integrity file missing

* Add test case for retaining artifacts after add when missing integrity

* Add test case for retaining artifacts after install when missing integrity

* Add test fixture data for missing integrity tests

* Fix lint errors",False
034f46182596fa4cee013b6f5d870af8be7188ce,2017-08-16 18:32:13,kaylieEB,"Add more tests for resolutions feature (#4180)

* add tests with offline mirror

* add fixtures",False
e96c8961db598fb698b6e11da457443a242cf083,2017-08-16 17:56:19,Ma√´l Nison,Makes an error message clearer (#4175),False
916d9f2be19b0a98277cdd0a36feb543a1d72c3c,2017-08-15 19:22:59,Ma√´l Nison,"Update: Prevent `yarn add` from being run from the workspace root directory (#4166)

**Summary**

This PR prevents using `yarn add <pkg>` from within a workspace root folder, in order to prevent common mistakes where a package is added to the workspace root folder instead of being added to the right workspace (which, because of the node resolution algorithm, would be effectively invisible to the user).

If the user really wants to add a dependency to the workspace root folder, then we suggest them to use `yarn add <pkg> --dev` instead. This should be fine since the workspaces will probably only be used in development mode anyway. An alternative would be to introduce a new flag `--force` that would bypass this check, but I think the current heuristic is fine until we receive complaints.

**Test plan**

Added two tests.",False
634c239980d53440e506425e38877228f0920ec1,2017-08-14 23:26:42,kaylieEB,"Selective version resolution feature (#4105)

* refactor some test helpers

* first failing tests

* WIP

* Uses ""ResolutionMap"" instead of the duplicate name ""Resolutions""",False
50508b29509149451acda62aae64c963014d8c68,2017-08-14 19:09:35,Ma√´l Nison,"Fix: Reimplement part of the integrity check for workspaces (#4122)

**Summary**

Fixes #3863. The integrity file doesn't currently support workspaces,
which leads to #3863 (removing a workspace node_modules folder and
running yarn doesn't do anything, because Yarn incorrectly assumes
that everything is already done).

This PR rewrites a good chunk of the integrity logic to support and
fix this behavior.

**Test plan**

New and already existing automated tests.",False
f513948fb19d79dcc490be295b5e3df2a7dd95ed,2017-08-13 12:39:45,Burak Yiƒüit Kaya,"Chore: Enable untyped-type-import warnings for Flow (#4151)

**Summary**

Enables one of the new lint warnings in Flow. Others are left out because they are too noisy to be useful at the time, without and easy override.

**Test plan**

Lint should pass.",False
116275cd00482fda7aaea6fde730b0e495eefa79,2017-08-11 18:09:05,Burak Yiƒüit Kaya,"Fix: stop all active spinners on reporter.close() (#4150)

**Summary**

We were not stopping any activities in the reporter and were
relying on `process.exit()` to kill them earlier. This patch
fixes that and ensures all activities are stopped when the
reporter is closed.

**Test plan**

Adds a new snapshots test that fails without the fix.

Manual: just try to install a non-existent package and see `yarn`
getting stuck due to an ongoing reporter activity. After the fix,
it shuts down properly.",False
22ff4f2f50fedfb3d21e7b2a8764a32d5c6f747d,2017-08-10 20:06:34,Burak Yiƒüit Kaya,"Fix: invalid linking in workspaces for unused packages (#4129)

**Summary**

Fixes #4106. When a local package is listed under `workspaces` but that specific version is never used by anything, `yarn` still tries to install its bin links because it is listed as a dependency of the virtual workspace aggregator (but never get installed). This patch makes sure we have a location inside `node_modules` when trying to create bin links. It also fixes where we don't pass the proper location for workspaces root which may result in unexpected behavior under certain circumstances.

**Test plan**

Added a new test case which fails on master and passes with the fix.

Manual:
```
git clone git@github.com:babel/babel.git
yarn
```

Fails before the patch with latest nightly and passes after the patch.",False
f072e965c7aa42cb3ad55efe955697c6ba17a45c,2017-08-09 21:22:53,Will Binns-Smith,"Upgrade: upgrade flow to ^0.52.0 (#4124)

**Summary**

This upgrades flow, both in the flowconfig and in the flow-bin dependency to ^0.52.0

**Test plan**

`yarn lint`",False
d77b3a0f055bb901ab6bb40509f6ca6da28a2287,2017-08-09 21:10:17,Burak Yiƒüit Kaya,"Fix: prevent hoister from adding an ancesstor when there is none (#4132)

**Summary**

Just fixes a small bug in the hoisting code where it pushed `undefined` to the ancestor list when traversing the-level dependencies.

**Test plan**

N/A",False
d42b81cab19ad414a0e96a845bd55e9fc2bd848e,2017-08-09 20:39:53,Burak Yiƒüit Kaya,"Fix: invalid versions for workspace package (#4131)

**Summary**

When resolving workspace packages, we were always using the version `0.0.0` instead of the version defined in that package. This patch fixes it to use the correct version available from the package.json file inside.

**Test plan**

Existing tests.",False
5cfb241ceedf3345da11084c505b8a59c09fa891,2017-08-08 15:02:33,Burak Yiƒüit Kaya,"Update: use a named version folder in NPM tarballs (#4094)

**Summary**

Fixes #3758. Makes the top-level folder in the tar archives have a name like `yarn-vX.Y.Z` instead of `dist` using the `--transform` and `-s` options in `tar` (they are different in GNU and BSD `tar`).

**Test plan**

Run `yarn build-dist` and then `tar -ztvf artifacts/yarn-v1.0.0.tar.gz`. Make sure the output lists all the files under `yarn-v1.0.0` directory.",False
6798df46a315354c837c80212d4fdbca67a35538,2017-08-07 21:05:29,Burak Yiƒüit Kaya,"Fix: fix unknown single-instance type error (#4111)

**Summary**

When `:` is not used in the `mutex` argument to provide a specifier,
`mutexType` and `mutexSpecifier` are parsed incorrectly. This patch
fixes that.

**Test plan**

Run `yarn --mutex=network` before the patch, observe the error. Run
the same command after the patch and see it pass.",False
eec75ea3861bfb40e0ee25b97e725980b317a381,2017-08-07 19:39:50,Burak Yiƒüit Kaya,"Fix: Clean-up cwd after integration tests and increase ramfs size (#4108)

**Summary**

We normally clean up the test `cwd` after running them but we
don't for integration tests. With the addition of a new test case,
this started causing macOS builds to fail on TravisCI due to exhaustion
of space on ramdisk which we use to run tests on for speed. This patch
also increases ramfs size on Travis to make tests pass since clean up
alone was not enough.

**Test plan**

macOS tests should pass on TravisCI.",False
55d7b00a454d901928e2aeb1aa1bc0a8c88cecdf,2017-08-07 16:21:45,Burak Yiƒüit Kaya,"Fix: deadlock when using network mutex and concurrent runs (#4107)

**Summary**

The current network mutex code relies on the old `process.exit()` to
terminate all existing connections. Since that has been removed now,
when a ""master"" `yarn` instance gets another one connected to it and
waiting for it to end, it stays in a zombie state due to the TCP
server not terminating with clients on it. This patch makes it shut
the server down properly when everything is done, fixing the deadlock.

**Test plan**

Adds a new integration test which hangs and times out without the fix.
Also can be tested manually, running two `yarn` instances side by side
with the `--mutex=network` option, concurrently.",False
4402b3b91cd85c183156a0521ce7d16f8fe271df,2017-08-07 16:17:39,Ma√´l Nison,"Fix: Prevents hoisting through peer dependencies (#4086)

**Summary**

Fixes #3933. Currently, the code hoists depedencies without ensuring hoisting doesn't break the final structure's `peerDependencies` requirements. This patch fixes that by adding extra checks before hoisting. It comes with a little performance impact but shouldn't be too much.

**Test plan**

A new integration test that simulates the reported behavior and ensures `yarn` now behaves correctly.",False
39d6fe21dfc0404f6792f306e1e774b27b54dfbc,2017-08-04 19:05:29,Burak Yiƒüit Kaya,"Fix: Fix numeric versions resolving to local files (#4088)

**Summary**

Fixes #4013. We were blindly priotizing local files (even if they
are not directories) if there's anything on the file system matching
a pattern for a package. This patch ensures that we only do this if
the pattern is not a valid semver range and the matched local entity is a directory.
**Test plan**

Added a new unit test and modified an incorrect old one. Also manually
verified that the issue described in #4013 does not happen anymore.",False
280b6eb59ac6a8aaafdde1d86b48372ac76149f4,2017-08-04 19:03:36,Burak Yiƒüit Kaya,"Fix: Progress bar continue to update after footer (#4084)

**Summary**

Fixes #4023. There was nothing preventing the console reporter from
having more than one progress bars, or keep updating and rendering
its progress bar after it was finished or the reporter was ""done"".

This patch stores the active progress bar, and stops it before
`footer` is printed out. Also makes sure the progress bar itself
ignores any updates once it stops.

**Test plan**

One, weak, existing test with updated snapshot. Manual steps:

- Run `yarn install express`
- Observe that your console is properly cleared after `yarn`
  finishes and the last thing you see is the ""Done in X.YZs.""
  message and not a corrupted progress bar.",False
5a191dd4751b69d6f3237351b4a0c5c0cccc5603,2017-08-04 18:25:09,Jack Aldridge,"Chore: Adding additional test for pull request #3945 (#4078)

**Summary**
Adding an additional test for an uncovered method from pull request #3945. The previous tests did not cover this, since the method, `getExactVersionMatch`, is only called if a package's `fresh` prop is false or the frozen flag is set. The fixtures directory for this test contains a lockfile to meet this condition.

If the `manifest && getExoticResolver(version)` condition does not evaluate properly the `multiplePackagesCantUnpackInSameDestination` warning is logged. This test checks for that.

**Test plan**

New tests, obviously :)",False
98af218ede219224d8ce8baf1107e03d03751c63,2017-08-04 16:05:04,Burak Yiƒüit Kaya,Update: bump version to 1.0.0 for master (#4089),False
9099ad4fbc13ea4ceb52a31559327b18ad42a0cb,2017-08-03 02:17:51,Onur Temizkan,Chore: Convert gulpfile vars to consts (#4075),False
8f1494e57e5b7143672d7585206f2fa2b41616ee,2017-08-03 02:09:05,Arslan Arshad,"added ignore patterns when resolving workspaces (#3996)

* added ignore patterns when resolving workspaces

* Stylistic changes

* Add tests",False
e187bd9ebbe67337309f05f6d8aee90b5d293156,2017-08-02 23:04:24,Burak Yiƒüit Kaya,"Fix: Make sure reporter is closed before exit (#4067)

**Summary**

We should call `await reporter.close()` before we know we are done to ensure flushing of stdout contents.

**Test plan**

Existing tests.",False
8ead83f4bce14badf59ea0c91256ebd0bb0c5727,2017-08-02 21:43:18,Onur Temizkan,"Fix: Handle scripts failing with exit signals (#3995)

**Summary**
Fixes: #3954.

Adds error handling for scripts that are failing with a signal such as `SIGBUS`, `SIGSEGV`, etc.

In current behavior, yarn checks the exit code of a script to show errors and fail the process. But certain errors make node child-processes to exit with a signal instead. (e.g. the case in #3954)

This fix adds support for handling exit signals from child processes and shows more informative error messages.

**Note:**  This implementation handles exit signals priorly, assuming exit signals are pointing to more critical low-level issues.

**Note2:** This is likely a Node.js bug.

**Test plan**

Added 3 test cases (one for _zero_ exit code, one for _non-zero_ exit code, one for _exit signal_)",False
de4e3c16507d6ec36672c3045f14f03c9db981da,2017-08-02 21:31:10,Ma√´l Nison,"Fix: Force workspaces to always be installed from their root (#4030)

**Summary**

Fixes #4028.

- When installing, we will now always start installing from the root of the workspace, or the cwd if there's none (which is what defines `lockfileFolder`).

- The relative paths are now resolved when reading the JSON files rather than when resolving them. It allows us to factor the logic, and I think it also solves a pair of issues where relative subdependencies were not correctly resolved when installed from non-`link:` and non-`file:` dependencies (this is only my belief based on my lecture of the source code, I haven't yet took the time to validate this hypothesis).

**Test plan**

Added integration tests.",False
462fbd24448d1ad27acbca1cfac3b298a88c5417,2017-08-02 20:49:14,Burak Yiƒüit Kaya,"Fix: Don't run pre/post hooks if they are not scripts (#4068)

**Summary**

Fixes #3994. We should not run installed binaries if
they correspond to `pre/post` script names. Similarly,
`pre/post` scripts should not be run if a binary is run.

**Test plan**

Added 2 new tests.",False
df09b7c342ec9fc2379e85333c58e78fb84267e4,2017-08-02 18:19:02,Burt Harris,"Fix: Make `yarn test-only` work on Windows again (#4071)

**Summary**

Fixes #4059. Windows sometimes has both `jest` and `jest.js` files under `node_modules` so this patch changes the `test-only` script to refer to `jest.js` bin file directly.

**Test plan**

Run `yarn test-only` on Windows. It should run and complete without errors.",False
2c54c02453341a59f29dcd05e657edd482b7c779,2017-08-02 17:24:40,Burak Yiƒüit Kaya,"Fix: Fix single-file builds and simplify bundles (#4063)

**Summary**

Fixes #4057.

**Test plan**

CI should pass, especially with `build-dist` job.

Manual:

 - Run `yarn build-dist`
 - Run `node artifacts/yarn-0.28.0.js --version`
 - Run `./dist/bin/yarn --version`

Make sure all above commands work without errors.",False
50fc0925d1f775750b49145f467ccca2c2b3dcd4,2017-08-02 16:43:37,Burak Yiƒüit Kaya,"Chore: clear no-console warnings from lint (#4036)

**Summary**

After upgrading ESlint, we started seeing a bunch of `no-console`
lint warnings. This patch fixes these or supresses them if necessary.

**Test plan**

Lint should pass without any errors or warnings. All existing tests
should pass.",False
5e1eee74f18b7f229e8accb49e7ba9ac9c4655bf,2017-07-31 23:52:21,Burak Yiƒüit Kaya,"Fix: Fix broken snapshots (#4056)

**Summary**

Fixes build.

**Test plan**

Ci should pass.",False
3e8a285cc86564e02a15c5e758631ea04c3e66d4,2017-07-31 20:47:32,Burak Yiƒüit Kaya,"Fix: use `git add` with relative path to git root in version command (#4038)

**Summary**

Refs #3610.

Some versions of `git` doesn't support passing absolute paths to
`git add` causing it to fail. This patch runs
`git rev-parse --show-toplevel` to git root and uses the relative
path of `package.json` to that directory when calling `git add`.

**Test plan**

Manual tests for now.",False
c42ecb78c41fd898bd2c65c31612b2ba7e7ef6dd,2017-07-31 20:45:54,Frederick Morlock,"Update: Add support for Github URL shorthand to yarn init (#4012)

**Summary**
This pull request fulfills #4006 ‚Äì an issue that requests a feature be added to `yarn init` so that Github shorthand i.e. a value of `yarnpkg/yarn` can be used in the repository field.

**Test plan**
I have added a test to the test suite. Outside of that, this is the difference in usage:

**Before:** Running `yarn init` with default options other than the repository field which is set to `yarnpkg/yarn` would yield a package.json that has the repository URL set to `yarnpkg/yarn` 

**After:** Running `yarn init` with default options other than the repository field which is set to `yarnpkg/yarn` would yield a package.json that has the repository URL set to `https://github.com/yarnpkg/yarn`",False
9195932dbf710f0311420c315410f19413e475d5,2017-07-31 20:43:38,Tiago Pina,"Breaking: `yarn <command> ls` command cleanup (#4045)

**Summary**

From https://github.com/yarnpkg/yarn/pull/3898#issuecomment-318609494

This PR is to clean up the remaining undeprecated `yarn <command> ls` command and update the usage template.

**Test plan**

Some rounds of functional manual testing to assert that the correct messages are displayed and previous commands work as per expected. Touched files do not have any associated tests.",False
0ef3bf1f03d128e4793eca3fe3b5f93542451f15,2017-07-31 18:47:23,kaylieEB,"Fix: Check for npmrc in home directory for linux root users (#4047)

**Summary**
Fix for https://github.com/yarnpkg/yarn/issues/3920.

In this [commit](https://github.com/wtgtybhertgeghgtwtg/yarn/commit/f4fe7431ed992862a1c1d2357e6521c268bad7a7), `userHome` for linux users running as root was changed to `/usr/local/share`, mainly to allow for other users to run globally added bins. However this introduced a bug where npmrc wasn't being looked in the root directory after checking `/user/local/share`. So this change pushes another location to check in case `userHome` is different from native home directory returned by `os.homedir()`

**Test plan**
I've added a test to generally test the `getPossibleConfigLocations` method, but I haven't been able to properly mock out running it as a root user on linux. Suggestions welcome!",False
cd86ba42e8ec627c5caf7af42667eb9fb7aee811,2017-07-31 03:57:39,Sara Vieira,"fix: Update error message for install (#4040)

* fix: Update error message for install

* fix: Update error message for install",False
709296432b656fc38ffcd625e310b7c6291e2435,2017-07-29 05:27:37,Jeff Valore,"Warn for missing bundledDependencies (#4046)

* [#886] Added test for missing bundledDependencies

* Requested changes for PR 4046",False
8a1dfee93c68d1967b62eae0f8b92eb05aa5c50c,2017-07-28 23:15:10,Dav√≠√∞ Bachmann,Change to correct npm upgrade command. npm upgrade -> npm update. (#4032),False
cbb27f4fb0bb5860435ac0ae5f0dd3f0062825eb,2017-07-28 19:27:18,Chappo,"Fix: Scoped packages 403 on yarn install with empty cache (#4027)

**Summary**

Fix scoped packages not adding correct auth headers (#4016)

**Test Plan**

Having set up config for a scoped registry with an auth token. It should be possible to run `yarn cache clean` followed by `yarn install` without having the scoped packages 403.

Also additional unit tests for the scope determination and auth token sending mechanisms.",False
0d29b07f23a4b6850b03ecbe2697b012dd5e9ba2,2017-07-28 01:01:40,Onur Temizkan,Upgrade: Update Jest flow-types to v20.x.x (#4039),False
357dc225505adbf2e9cc8ddd1374e16d4dc5d1a3,2017-07-27 20:21:30,Burak Yiƒüit Kaya,"Chore: enable no-process-exit lint rule (#4026)

**Summary**

A follow up to #3955 to disable further usage of `process.exit()`.

**Test plan**

`yarn lint` should not produce any errors.",False
99d09ca336bb6db00c615b8b9fca60eb41d53fe1,2017-07-27 15:28:13,Jeremy Judeaux,"Fix: use shell option from child_process.spawn (#4031)

**Summary**

Fix for #3773
> Yarn run no longer works on windows with executables not mentioned in package.json/scripts

**Test plan**

I think we don't have automated tests for this case, it's OS specific and the fix relies on the `shell` option of `child_process.spawn`, so we cannot use mock to reliably test this issue.
(Any idea welcomed)

I ran manual tests on Windows 10 and a Linux VM.",False
6d793aec15a9b666fa8977649ef8a40b381a5bff,2017-07-26 23:04:41,Jack Aldridge,"Fix: Local package dependency resolving (#3945)

**Summary**
File protocol dependencies will now be de-duped correctly. E.g. './a', 'a', and '/absolute/path/to/a' will be treated equivalently. Fixes issue #3897.

**Test plan**
Test added to cover the above cases.",False
c01fbed288bcfe6e66d47c4ab36747fe7d5c0cc6,2017-07-26 19:25:10,Burak Yiƒüit Kaya,"Update: upgrade ESLint to 4.3.0 (#3962)

**Summary**

Upgrade ESLint to version 4. I did this mostly to get [no-process-exit](http://eslint.org/docs/rules/no-process-exit) rule introduced in v4. Refs #3955.

**Test plan**

Lint should pass without errors.",False
11aa37a5b03f49cf104959a805024c4404e8eb3f,2017-07-26 18:31:32,Burak Yiƒüit Kaya,"Fix: handle potential race conditions when using cache (#3985)

**Summary**

There's a delay between when we make sure a file in cache exists and when we actually start reading it. Our code wasn't doing any error handling when trying to open the file so if another process removes the file we assume existing we were throwing an unexpected `ENOENT ... open` error.

This patch removes all delayed existence checks and catches the error directly on the `ReadStream` instance directly. Moreover, it automatically falls back for local caches: direct, cache, offline mirror.

This revealed a bug in tarball path resolution which I fixed.

**Test plan**

Existing tests.",False
050815d5c2552d1ab8a74aa16790150c7f881a2b,2017-07-26 16:17:26,Reyad Attiyat,"Fix: Only add auth token when registry url matches pathname url (#3987)

**Summary**
Fixes: #3907.

In yarn version 0.27.4 a patch (https://github.com/yarnpkg/yarn/commit/5ff69228f6cc9fa27bbaeb67412f7f66f218b9da) introduced a change that caused an authorization header to be added to requests that were not being sent to the registry.

This commit brings back some older logic to ensure we only add the authorization header when we are sending requests to the registry.

**Test plan**

Many new unit tests for requests and `isRequestToRegistry`.

To test this change you need a private repository using a repository server such, as Verdaccio configured, to only allow authenticated calls to be made for both download and publish commands. This configuration requires that yarn has the `always-auth` option enabled.

If we install additional packages from GitHub and save them to the `yarn.lock` file it should not send the authorization header for these requests.",False
9dd9599b9b7e7ddb8b669408aac9f3c0a562d5c7,2017-07-26 15:45:25,Ma√´l Nison,"Fix: Prevent optional subdependencies from being installed with --ignore-optional (#3976)

**Summary**

Fixes #2666.

**Test plan**

Additional unit tests.",False
67dfc7af80bad0034a1f23e9ef4da8c696e134c7,2017-07-26 15:15:42,Jeremy Judeaux,"Fix: Refactor branch/tag resolution for git dependencies (#3836)

**Summary**

For git dependencies, the branch/tag resolution does not always work as expected.
Refactor the code to make the resolution algorithm more explicit and follow discussions in #3720.

**Test plan**

New test in `__tests__/util/git-ref-resolver.js`.

Also, benefit from the fact that Travis CI ran the test with an older Git version. I don't know if we have a minimum git version requirement, it seems we currently don't test against any specific version.

**Implementation details**

I refactored `parseRefs` to return the full ref name, so we can differentiate branches and tags.

I use `git ls-remote --symref` to get the default branch name. This works only in recent versions of git (thanks Travis CI for reporting the issue), so I fall back to another algorithm if `--symref` is unavailable.

I tried not to use the variable name `hash`, which is confusing between the git-url hash and the commit hash.",False
d56c6dbe34092051846740588e855e9ec9e6bee7,2017-07-25 19:08:01,Tiago Pina,"Breaking: rename every `yarn <command> rm` to `yarn <command> remove` (#3989)

**Summary**

From #3952 - For the sake of consistency and clarity, we need to rename the `rm` command to `remove` and add a deprecation warning for `rm`.

**Test plan**

Only manual testing for now. Unfortunately, every command with `rm` requires a login. Coincidentally, and if I am not mistaken, none of the commands that implement `rm` has tests ( `owner`,  `tag`, `team`).",False
ce4a61875719348655259245a83b8ee8ebc1ec9c,2017-07-25 19:04:07,Tim Cheng,"Fix: pruneOfflineMirror should handle undefined resolved (#3960)

**Summary**

Bug: pruneOfflineMirror does not guard against `lockfile[dependency].resolved === undefined` (eg. the dependency is a local file)
This results in the following error when running `yarn install`:
`TypeError: Cannot read property 'split' of undefined`

To reproduce:

- set a `yarn-offline-mirror` path and set `yarn-offline-mirror-pruning` to `true`
- have a `file:` local dependency in `package.json`
- run `yarn install`

Simple fix - set basename only if resolved is valid.

**Test plan**

Use proper flow types so this kind of errors get caught at lint step.",False
278a5a93168218526f610b44a28760dcdbd44901,2017-07-25 13:57:36,Fatih Kadir Akƒ±n,Fix: fix typo in color legend messages (#4017),False
958f3eab8048babb719473a6d4e1758a3144506b,2017-07-25 05:24:43,Burak Yiƒüit Kaya,Fix: fix missing path expansions after #3941 (#4014),False
61e402b1f7bad6613a7efd24e84c9716834b364f,2017-07-20 21:53:28,Burak Yiƒüit Kaya,"Fix: avoid using `process.exit()` when possible (#3955)

**Summary**

Refs #3524. We are using `process.exit()` pretty liberally although it is [strongly advised not to use it](https://nodejs.org/api/process.html#process_process_exit_code) since it may cause the `stdout` to get corrupted/terminated before a full flush. This patch changes all possible `process.exit(code)` calls with `process.exitCode = code` statements.

We'd also ideally enable [no-process-exit](http://eslint.org/docs/rules/no-process-exit) rule in ESLint but it requires an upgrade to ESLint v4 which should be handled separately.

**Test plan**

Expect tests to pass and actually finish (not run indefinitely due to `yarn` not exiting at all). Also, the script referenced in #3524 to output something like the following:
```
DATA 18
DATA 8192
DATA 8192
DATA 5392
DATA 15
EXIT 0
```",False
fa0fb69a567e1c44320d6f2a5f2a8ee42bc226ea,2017-07-20 20:58:12,Parakleta,"Fix: global config should be looked up in ${PREFIX}/etc/ (#3958)

**Summary**

This searches for the global `rc` files at `${PREFIX}/etc/{npm,yarn}rc`, whereas previously it looked in `${PREFIX}/.{npm,yarn}rc`.  By code inspection it looks like the NPM code does the same thing on windows and posix, but the documentation suggests it doesn't use the `/etc` path component.

**Test plan**

N/A",False
1d06624bb8fc91ca0d2635185e72a5ed69274e2d,2017-07-20 16:20:58,Jeff Valore,"Upgrade version rework 3603 (#3847)

* WIP: upgrade-interactive now shows versions based on package.json range or --latest

* WIP: many former upgrade tests passing, some still broken

* WIP

* WIP fixing tests

* Fixing upgrade tests

* additional upgrade tests for --exact, --tilde, --caret flags

* Added additional upgrade tests for version range preservation

* upgrade code refactoring

* handle exotic packages when building upgrade parameters

* updates based on PR feedback",False
acbb8021aa562b276c60cad657c4ff4711cc7af6,2017-07-19 19:41:29,Roman Dragan,Add exec to node commands in the binary (#3965),False
8409de5cb6409f7e3d9c4381fcbf18601b079f7a,2017-07-19 17:19:56,Jack Aldridge,"Fix: Ensure valid target passed to fs.symlink

**Summary**

Refs #3276. `path.relative` returns an empty string for the current directory. This
was being passed as the target to `fs.symlink`. Changed it so '.' is
passed instead in these cases.

**Test plan**

Existing unit tests.",False
1ae8a6351d8fbd4741426197b216e26fdd620ad4,2017-07-19 16:11:10,Daniel Lo Nigro,"Update: When upgrading Yarn on Windows, use the previous install dir (#3957)

Closes #3944.",False
78243bc49de94e423031e37c21dd16bb235f00dc,2017-07-18 19:02:23,Burak Yiƒüit Kaya,"Fix: Don't assume all string configs are paths (#3941)

**Summary**

Refs #3787. When reading from the config, it was assumed that all string values are possible paths unless explicitly stated causing the `~` semver modifier to be expanded to user's home path if it was set as `save-prefix`. This patch makes `expand` default to false.

**Test plan**

Added a new test case for this specific scenario.",False
2134f5bee434126c7c37ace236f653e9289ca491,2017-07-18 04:05:58,Kishan Bagaria,"Fix: Fix yarn global prefix directory (#3721)

**Sumary**

Refs #2064.

Uses `%LOCALAPPDATA%\Yarn\bin` and `/usr/local/bin` on POSIX systems if it's writeable, falling back to `~/.yarn/bin` if it is not.

**Test plan**

N/A. Should add automated tests.",False
f7aa742776e4689c040fed7664fd8f4b695903b2,2017-07-17 19:34:38,John Ferlito,Fix various commands asking for a password (#3862),False
68d59b98e4a8788a3957b2577b50c718b012015d,2017-07-17 19:23:41,Daniel Lo Nigro,Update Dockerfiles (#3934),False
71dd1fbe0205c2371920f5175823d560d6229a02,2017-07-17 19:23:11,Ma√´l Nison,"Prevent --check-files from crossing symlinks (#3931)

* Prevent --check-files from crossing symlinks

* Update integration.js

* Lints",False
77328c398e70eadc2780c8c58510a2c575953801,2017-07-17 15:52:12,Daniel Lo Nigro,Publish npm release of Yarn directly from CircleCI (#3938),False
7a053e2ca07d19b2e2eebeeb0c27edaacfd67904,2017-07-16 16:54:01,Richard Weber,"Fix: Do not use /usr/local/share as home under fakeroot (#3924)

Refs #2536",False
eddbc4e7b118af175b17480100e1f8e4b19d78e5,2017-07-14 22:47:44,John Gozde,"Link binaries defined in workspace packages (#3896)

* Add WorkspaceFetcher to ensure bins are linked

* Remove IIFE in WorkspaceFetcher.fetch",False
78465cba97c3dca4013385ecc7fa360015f9ea8f,2017-07-14 19:38:01,kaylieEB,"#3821 Remove manifest check for global commands (#3921)

* skip manifest validation when it's in global folder

* Add tests",False
8816df3c51a4400c01e97beaa8e6d42a654bd7c8,2017-07-12 20:37:53,Burak Yiƒüit Kaya,Chore: use a constant in file resolver for `file:` prefix (#3917),False
21566ddb5c9fd07b94a0b92390df19911b994bd5,2017-07-12 19:27:01,kaylieEB,"#3818 Add -v command to show version when specified without other commands (#3913)

* add -v command

* Add -v command

* reorder tests",False
1de6ccc4782c065540a10102b1d948de2be894e5,2017-07-12 08:59:22,Aleksejs Sinicins,Prioritize git environment variables from parent process (#3885),False
df321cd5b7dc19dbb919462e9e66b51a509b8142,2017-07-12 01:00:53,Onur Temizkan,"Breaking: Remove unsupported aliases (#3904)

* Remove unsupported aliases

* Remove leftover tests and unused vars",False
d9e86b646c97840625f9cd423414154251ec5acd,2017-07-12 00:54:25,Simon Vocella,deprecate yarn <command> ls in favor of yarn <command> list (#3898),False
879b4f3c893b5e5ec162a1d0a9234c3793e7ac01,2017-07-11 23:19:52,Onur Temizkan,Lower platform incompatibility message to info (#3902),False
8dab49edd3dd4257956437b145eeb191ed2b0b0d,2017-07-11 20:39:01,Simon Vocella,Update: remove babel-eslint (#3874),False
2a5428bb8b6e6b2424e6925cce39147bb3198434,2017-07-11 16:35:42,Burak Yiƒüit Kaya,Fix: fix failing tests on master after release changes (#3899),False
f57778830733fa284a949c231144d8a78c75e9d9,2017-07-10 22:38:50,Daniel Lo Nigro,[ci skip] Make scripts/update-npm.sh executable,False
02a495d9c5ecd071789e8035be0bcdf4030f81b9,2017-07-10 22:16:16,Daniel Lo Nigro,"Fix CircleCI config so it builds tags

I didn't realise that CircleCI only builds tags when there's a ""deployment"" section. I had to add a dummy deployment section to get it to properly build tags. https://circleci.com/docs/1.0/configuration/#tags",False
3c9b51e0c42eb246e4085af7829c4f0d0b44d06e,2017-07-10 14:30:29,kaylieEB,"Prioritize bin links at the root level (#3877)

* fix links to only search at root level

* remove outdated commment",False
1e12660c85d5b147dcf2923ed4989cb7f95e41bf,2017-07-10 13:33:20,Simon Vocella,upgrade node-emoji to 1.6.1 (#3875),False
5b4af8ae0c5a33cc96e98a8e0785b5dfc9c94383,2017-07-10 12:22:07,Simon Vocella,remove babel-jest from package.json (#3873),False
763d018b9e602b41d1661166657b14042741eded,2017-07-10 12:21:29,Simon Vocella,remove babel-plugin-transform-es2015-typeof-symbol (#3872),False
c5a758856e59504f5f18590ff6441acb927e9148,2017-07-10 12:18:28,Simon Vocella,upgrade flow (#3876),False
3a7a0772be96e354b2fcd223a7c70637c9851d05,2017-07-10 12:09:36,Jack Aldridge,"Adding a condition for install lifecycle scripts (#3865)

Install lifecycle scripts will no longer be run for hoisted
dependencies. Previously these were run against the cache, causing
errors. See issue #3806.

* Test added",False
1d37af05ee3f0f35f38ea270613a805b2a20d86e,2017-07-09 19:59:10,Ma√´l Nison,0.28.0,False
7ca70f49f87fbc37f999a87df9b9d29bf80c5c08,2017-07-09 17:14:35,John Ferlito,Fix HTTP status check for publish (#3861),False
f6ff8683caf8e3f3623b82c972fc018ee28ad0a9,2017-07-09 17:10:30,George Waters,Strip 'file:' from the path before checking with path.isAbsolute() (#3856),False
a13957cbb947e51234225590946edfe2502c2308,2017-07-09 17:06:57,Jeffrey Xiao,Sanitize packageJson version (#3858),False
ac657af00be2995412e33d7aeb74991fd7611736,2017-07-09 16:57:03,Luke Tillman,"Fix list, outdated commands when workspaces enabled (#3860)",False
057655d1489b9562a9ac0578b4368fb0f7e75a85,2017-07-09 16:50:16,Jeremy Judeaux,"Yarn create links the bin to a temporary file to ensure OS cross-compatibility, fixes #3530 (#3848)",False
cbcdede995ecbd94cb8ee037a51c55597721d4e4,2017-07-09 16:42:30,Daniel Lo Nigro,"Publish tarball with single JS file build to npm (#3866)

* Remove unneeded package.json fields from dist

We don't need dependencies and devDependencies in the package.json within the Yarn distributable, as the dependencies are bundled with Yarn itself. We also don't need ""scripts"" or ""jest"" as they're purely for development

* Add script for publishing to npm

* Add Jenkins job for publishing to npm",False
5093142e42af915aab2e3e81b018f4584fb01340,2017-07-07 23:35:54,Rifat Nabi,Add retry on 5xx errors. Fixes #2849 (#3686),False
7de213bd6ecad2739d6f8d6601d9df25f5f5701f,2017-07-07 23:28:41,Adam Stankiewicz,Fix allowing to install packages without manifest (#3855),False
337b73f741ff3eabb7c39daff8ad80edd2d969b6,2017-07-07 22:09:54,kaylieEB,"Fix:  Peer dependencies should only be looked up from top level dependencies (#3803)

* Fix peer dependency to only look from top level dependencies

* lint

* Upgrade/add peer dependencies

* Fix babel-eslint

* variable name fix

* feedback from @byk",False
3bfa1e3d6303c58aed9660e1a2af3a6d6f030bce,2017-07-07 18:36:39,Sebastian McKenzie,"Auto detect and merge lockfile conflicts (#3544)

* auto detect and merge lockfile conflicts

* Skip over common ancestors when using diff3.

* Small code cleanups

* Nits",False
5ff69228f6cc9fa27bbaeb67412f7f66f218b9da,2017-07-07 17:31:55,Ma√´l Nison,"Fix: Fix various npm auth issues (#3774)

**Summary**

Fixes #3765. There was some confusion around when and how to send the auth tokens to NPM and Yarn registries. This patch is a first attempt to get these fixed.

**Test plan**

See #3842.",False
15f53ddb37022f93bf1b1a747f79557c13bda9e0,2017-07-07 16:42:25,Ma√´l Nison,Fixes package linking when a filename casing changes (#3843),False
3901ba4e17edf0a835fb17a42e4da15238d6cd58,2017-07-06 22:13:32,David Pfeffer,"Adds compatibility for cordovaDependencies engine (#3786)

**Summary**

Fixes #3437. See https://cordova.apache.org/docs/en/latest/guide/hybrid/plugins/#specifying-cordova-dependencies for a description of when the `cordovaDependencies` engine is used.

**Test plan**

N/A",False
fe5f7cb0015b8f7b7007e794efa7ecf3de58f7cd,2017-07-06 22:11:52,Burak Yiƒüit Kaya,"Fix: honor selected version when saving deps (#3840)

**Summary**

Fixes #3817. Fixes how the version to be saved being determined
when adding packages with different patterns.

**Test plan**

Existing tests.",False
13b57b439abfe813aba309204e34856ec7a59775,2017-07-06 19:00:43,Ma√´l Nison,"Fixes link: protocol linking (#3832)

* Fixes link: protocol linking

* Update package-linker.js",False
fc6fb656dea0917ac001a332fbc0f5afa5d0c043,2017-07-06 17:26:17,Joachim Seminck,"Update: Add support for ""//"" comments in package.json dependencies (#3829)

**Summary**
Fixes #2484. Adds support for the `""//""` package in package.json, by deleting it before we resolve the dependencies.

**Test plan**

Adds a new integration test.",False
ad1a4f538b1e85e29ff1ce290c96bb3679022590,2017-07-06 17:17:59,Simen Bekkhus,"FIX: Don't prompt for version on CI (#3820)

**Summary**

We should never prompt things in a CI environment. This patch makes `config.nonInteractive` depend on `isCI` and `stdout.isTTY`.

**Test plan**

See #3838.",False
bd99f3c97493b7d0be55a13a65ab22076b0ff06f,2017-07-06 17:09:04,Ma√´l Nison,Adds back the prettier script (#3839),False
47179ffd1823226f98c80c7c8e487cb807cd9197,2017-07-06 04:20:24,Jack Aldridge,Adding integrity check for top level patterns (#3811),False
dfb91c3c54ecfc28f5547abe1c826a43d07c75bd,2017-07-05 16:48:13,Konstantin Raev,"Fix: Warn instead of failing when a file is tried to be copied twice

**Summary**

Refs #3751. Looks like we do multiple traversals of the file tree when doing bulk copies, resulting a run-time exception from `invariant` when we try to add the same file twice to the copy list. This patch makes that a warning instead of a hard failure until we fix the bug.

**Test plan**

Run `yarn add nyc@11.0.3`. Make sure it doesn't fail but you see the warning.",False
472a051ec830f1da19f0df5a37823155a9acc0e7,2017-07-04 02:58:22,Simon Vocella,"Use eslint-plugin-prettier instead of custom scripts for prettier (#3796)

* use eslint-plugin-prettier instead of custom scripts for prettier

* remove prettier script",False
d709c2fa2ca1d89e456fcbe9c0b3a4eedb3d5088,2017-07-03 22:32:05,Mark Larah,add failing test (#3779),False
e6df4d289215874546e5d0ca234fc16b960893ec,2017-07-03 21:59:24,Gabriel Aumala,"forward SIGTERM to spawned child processes (#3789)

If yarn receives a SIGTERM signal, it forwards it to all the child
processes that it has spawned.

module 'src/util/child.js' now keeps a reference to every spawned child
process until it exits. it also exports a new function
forwardSignalToSpawnedProcesses() which sends a signal to all child
processes.

new module 'src/util/signal-handler.js' exports a single function
handleSignals() which attaches a SIGTERM listener to the global process
object that calls forwardSignalToSpawnedProcesses()",False
31fec2a3fbd7ba9b7f8981b1d9de2951f83f0802,2017-07-03 21:52:37,Simon Vocella,upgrade prettier and run it (#3795),False
db13a72b9f96637cac94db6415827fa4e308a647,2017-07-03 21:51:13,Burak Yiƒüit Kaya,Chore: simpler Travis CI builds with yarnception (#3805),False
e0e119e9195cb6fd0b885f61b0a9f7a7e5d0326a,2017-07-01 08:54:33,Pig Fang,Do not save lockfile when no dependencies (#3395),False
4d5dcc64ad1c1b32acb43f49762bc6129b5a5b75,2017-07-01 01:58:11,Burak Yiƒüit Kaya,"Update: add regression tests for Git.spawn env issues (#3772)

* Update: add regression tests for Git.spawn env issues

**Summary**

Regression tests for #3742 and follow up to #3743 and #3759.

**Test plan**

Tests shall pass, mocks shall not pass.

* Import from the right place",False
6d145c3d0a76ef88c29d4a9ee751a0cc7338ecb8,2017-07-01 01:57:42,Arslan Arshad,"Bugfix help command (#3706)

* removes unsupported aliases from help command

* fixed lint warnings

* fixed compatibility issues

* with prettier",False
39700817bda1811cbbaf86c881b19f10fab6d3da,2017-06-30 23:21:00,Burak Yiƒüit Kaya,"Fix: fix e2e yarn output tests after #3536 (#3771)

**Summary**

Fixes #3536. Explicitly and programmatically passes `YARN_SILENT=0`
to test runs that checks yarn's output.

**Test plan**

All CI tests and local test runs with yarn 0.27.3 should pass.",False
313b3b90c8c496e8dd91bfba176e67e3fa2269b6,2017-06-30 17:27:21,Burak Yiƒüit Kaya,"Update: Upgrade Jest to version 20 (#3760)

* Update: Upgrade Jest to version 20

**Summary**

Fixes #3757. Jest 20 is the latest version with many improvements,
most importantly for us, not automatically polyfilling `Array.includes`.

**Test plan**

CI should pass without issues.

* Fix .includes error

* Kill all `.includes()`",False
f5364940b60adb022352e229aa17a8a952128af0,2017-06-30 12:48:51,Burak Yiƒüit Kaya,"Chore: prefer async/await to `then` (#3763)

**Summary**

Follow up to #3667. Uses `async`/`await` instead of `.then()` in
`unlink` tests.

**Test plan**

Tests should pass as usual.",False
de7bef4636274bbe423ee66a5537b1e9a341139c,2017-06-30 09:57:41,Konstantin Raev,"Revert ""Update: add regression tests for Git.spawn env issues"" (#3768)

* Revert ""Fix: emoji should default to true on darwin platforms (#3766)""

This reverts commit 69574f6a695a4184d349876ff196905e7fb992be.

* Revert ""Support for ~ (home dir) in path configurations (#3756)""

This reverts commit 35ee7de206e3078df32f1626d1dde6ba1ed41d0b.

* Revert ""Update: add regression tests for Git.spawn env issues (#3759)""

This reverts commit cd26fec502f073667ded6d2178216c65613d89d5.",False
69574f6a695a4184d349876ff196905e7fb992be,2017-06-30 06:09:08,Burak Yiƒüit Kaya,"Fix: emoji should default to true on darwin platforms (#3766)

**Summary**

Fixes #3764. Follow up to #3126. Adds the missing `[bool]` type
descripter to `commander` definitions.

**Test plan**

Run `yarn` on macOS and enjoy your emojis responsibly.",False
35ee7de206e3078df32f1626d1dde6ba1ed41d0b,2017-06-30 04:25:09,Julien Roncaglia,"Support for ~ (home dir) in path configurations (#3756)

fixes #2930",False
cd26fec502f073667ded6d2178216c65613d89d5,2017-06-30 02:46:06,Burak Yiƒüit Kaya,"Update: add regression tests for Git.spawn env issues (#3759)

* Update: add regression tests for Git.spawn env issues

**Summary**

Regression tests for #3742 and follow up to #3743.

**Test plan**

Tests shall pass.

* Fix CircleCI tests where process.env needs to be overridden

* Don't use unnecessary braces and return statements",False
08a9c7b57cd852f1cae435ddeeb7a68dd1fa6a84,2017-06-30 01:53:29,Konstantin Raev,"Yarn workspaces: running commands from subfolders that don't match workspaces glob should now change CWD to root (#3739)

This fixes an issue that if you run a Yarn command from any folder that is a subfolder of a workspace will automatically change CWD to the root.
Before changing CWD the code now checks that workspaces glob matches the original CWD.",False
08411a05a4f2a722d51c7fc0bb69d51702781b91,2017-06-29 20:04:42,Burak Yiƒüit Kaya,"Fix: Make tests great again on Travis CI macOS (#3667)

**Summary**

macOS tests on Travis CI keep timing out and they run very slowly. This patch attempts to solve this by doing the following:

- Use ramfs for `__tests__` folder and for `$TMPDIR` for faster file system
- Remove unnecessary `brew update` and `brew install yarn` commands
- Remove unnecessary `--max-workers` argument since all CI VMs have only 2 cores
- Clean up tmp folders per test after they are done
- Fix `link/unlink` test's race condition and previous test case reliance
- Fix `request-manager` timeout tests to be more reliable and finish in under our normal timeout
- Use real timers by default and add necessary `useFakeTimers` calls
- Increase heap size for Linux and OS X to 4 GB since OS X builds were crashing due to limited heap space
- Removes retries from Travis CI

**Test plan**

All tests on all platforms should pass and pass in about 20 minutes max.",False
30d3e53ecc861b9a959ee5bd35bab0174e055a4c,2017-06-29 13:04:13,Ivan Jager,"Add path to remaining fetchBadHash error (#3749)

Fixes #3689",False
4f02c5ba05ec433c5d365226b7479f1fccf99638,2017-06-29 02:45:26,Andre Bluehs,"support pattern matching with list command (#3734)

* support pattern matching with list command

* prettier formatting

* Update list.js

switched to require for external dependency",False
08c36face53ee3606b90b00714ecaa0192bdfdbd,2017-06-29 02:28:13,Jeremy Judeaux,"Fix "".bin"" not linked when preparing a git dependency, reported in yarnpkg/yarn#3553 (#3723)",False
8918da15c36e793c8f5ed7be24197a7b5afc89d4,2017-06-29 02:26:28,Jeremy Judeaux,"Allow `git+***://` dependencies (#3735)

* Move getExoticResolver function to resolvers/index.js

* Add tests for getExoticResolver

* Use Git Resolver for any `git+***://` dependencies
Fix yarnpkg/yarn#3677",False
df26e88f69125fd95dae0a146ab3de2d9c1ed9a3,2017-06-29 02:11:22,Burak Yiƒüit Kaya,Chore: add missing request caches (#3745),False
ad19cfef799816dbf81621d272b2cc65da5a40c4,2017-06-28 19:08:27,Burak Yiƒüit Kaya,"Fix: inherit env variables from process when calling Git (#3743)

**Summary**

Fixes #3742.

With #3633 we started overriding the default `env` map that was passed
to `git` calls. It defaulted to `process.env` and since the option is
a whitelist, now it is only the ones we wanted to add, instead of
`process.env` + the additions. This patch fixes the problem by spreading
`process.env` before the new values.

**Test plan**

Manual verification for t19705486. We should have automated tests for this
so I'll start working on them. Just want the fix our first.",False
5152bd716234a6e36df2d18f06f08377bcbdf556,2017-06-27 15:17:28,Ma√´l Nison,"Fixes unwanted yarn.lock optimization issue #3490 (#3729)

* Resolves non-fresh-packages with the exact version specified in the lockfile if possible, fixes #3490

* Adds a test",False
a7e6efeaaa68a8c4cafa40f04a2143508c1140e1,2017-06-27 05:04:38,Stian Didriksen,"Fix: nested relative link: protocal dependency symlinks (#3605)

* Add test case for broken nested symlinks using link: protocol

* attempt fix by borrowing logic from file-resolver

* make flow-type happy",False
576687b81a8fb78d1b5d7e4ce523cd530690e950,2017-06-27 03:10:05,Konstantin Raev,"fixes hardlink collitions (#3691)

* fixed #2734

* added another test

* fixes for Mael

* prettier

* added comment",False
8d52cad6ec7f465ad4786544c3248fda2b63d9c6,2017-06-27 03:06:58,Konstantin Raev,add a check that same file is not copied twice (#3712),False
6ff49662690b1026f42dc52c3dee1402379abce2,2017-06-27 02:38:37,Konstantin Raev,"fixes transtive file: dependencies (#3709)

* fixes transtive file: dependencies

* fixed tests

* moved file: stripping to fetcher

* nits",False
e7c0be18efa899954473a252e142313cbeaab233,2017-06-27 01:10:00,Konstantin Raev,fixed typo in integrity file (#3731),False
fe34bb06eab69ce9ac5d63ce8476b3d40c51b8a9,2017-06-24 07:32:22,Konstantin Raev,lockfile optimized (#3715),False
3204a3afcf7c0abf2144f4c9ddeadb5f78d1b218,2017-06-24 07:24:42,Konstantin Raev,"Revert ""Change global prefix directory to `/usr/local` on OS X (#3458)"" (#3713)

This reverts commit edfc3709e29dce5757bd445c8d50456313b174d1.",False
edfc3709e29dce5757bd445c8d50456313b174d1,2017-06-24 03:03:08,Kishan Bagaria,Change global prefix directory to `/usr/local` on OS X (#3458),False
e6d5d30ea4716590417d0d344168a635f2f026ac,2017-06-24 02:38:05,Adam Crabtree,"Include top-level package.json in engines check (#3675)

* Include top-level package.json in engines check

* Run checkingManifest iff engines field exists; Fix name",False
237196d815cd2fcaaa8a90971440e6715d9fe4d0,2017-06-24 02:32:46,Konstantin Raev,tests caches (#3711),False
d1dca28ccb235ae215d93d3fb923b73422348287,2017-06-23 18:41:24,Ma√´l Nison,0.27.0,False
68210a329851064781c56013f9ff5c62347ad183,2017-06-23 14:50:10,Konstantin Raev,fixes #3506 (#3704),False
c63e015db12e48b9438bd8eeb22b0e26a612ecdb,2017-06-23 14:47:17,mchro,"Always try to semver.clean(), fixes #3661 (#3702)",False
1e0575c5c6762e2b594a1dd75094389d771799a1,2017-06-23 14:45:16,kaylieEB,Add new plugin to .babelrc to transpile Array.prototype.includes (#3705),False
f404b62f4290aa7439d8e8a8a3cee012c1e3dd1d,2017-06-23 02:50:37,Adam Stankiewicz,"Improve handling of packages without manifest (#3701)

- Better guessing of package names
- Support for hosted git, like github or gitlab
- Support for .tar.gz archives",False
73499a6953eb0d71a92562bd2457fb29349ab6ed,2017-06-22 22:54:57,Ma√´l Nison,Fixes resolution concurrency problem (#3673),False
23dd84b4ba2e7aff585cadf98b41edad0c925cfe,2017-06-22 22:53:18,Arslan Arshad,replacing invalid chars with underscores in env (#3687),False
b0a47580aba7af12a4e87cb50f4c800ca88a0d81,2017-06-22 22:50:49,kaylieEB,Rename upgrade-interactive help option (#3690),False
a3ce7c702f644efde783beb8e0b99dc08100f0df,2017-06-22 22:47:45,Simon Vocella,update flow (#3695),False
b223d51f39e77476ce4cc6c77849f3e200672394,2017-06-22 05:56:59,Adam Stankiewicz,"Allow for installing dependencies without manifest (#3624)

* Allow for installing dependencies without manifest

* Remove extra await

* Fix yarn check test for checking integrity with lockfile

Now that we allow for installing packages without package.json,
shallow integrity check will succeed if it's removed from package.

I fix the test by removing installed director instead.",False
73a758ea37f573a25279d3acf2e9501988b249c8,2017-06-21 04:32:23,Konstantin Raev,fixed lint error (#3684),False
5839c36d3f9fd737adbfd7c6e54b2c02840b2a41,2017-06-21 02:32:38,Jeremy Judeaux,Run install and pack when fetching git dependencies with a prepare script. (#3553),False
f78fecc2d173599ed8413b87fad78041f35b5130,2017-06-19 22:42:16,Konstantin Raev,Update: Better comment around symlinks and workspaces (#3672),False
b92c19a2ea059c742e444c37002f802cd920e511,2017-06-19 21:56:38,kaylieEB,Use setFresh for  attribute (#3666),False
0e2c7cd44a4520b1a0e636290ce63f737a5c7869,2017-06-19 21:48:38,Konstantin Raev,Fixes 3598 (#3656),False
71506194f11e3c639cadbd3fcb9e4b24ce2a1500,2017-06-19 21:46:22,Konstantin Raev,"Update pack.js (#3657)

removed unused variable",False
2cb5e6c6b23c09ec2f35e963d73eecc23d0277f3,2017-06-17 00:03:26,Burak Yiƒüit Kaya,Fix: Fix Node 4 by not using `.includes()` (#3654),False
d3df0057a59b8cdc2b29370dd61a008553c39106,2017-06-16 23:21:39,Burak Yiƒüit Kaya,"Fix: Use a dedicated sink for tar reading instead of a transform stream (#3646)

**Summary**

Potentially fixes #3011 (specifically https://git.io/vHAzW).

Turns out our `ConcatStream` implementation was only used to read
from `tar-fs` when creating a package to upload and put that stream
into a memory buffer. Since `ConcatStream` was implemented as a
`stream.Transform` and nothing was reading back from it, it had the
potential to just hang there until something reads from it. This
patch replaces that with [a small script][1].

[1]: http://www.geekpeak.de/images/produkte/i22/22-go-away-or-i-will-replace-you-de.jpg

**Test plan**

Removed existing tests for the old module. Rely on other existing
tests for the replacement code.",False
9199a1bc92d1bd2d860320c89aa94014e7b2e49b,2017-06-16 06:02:34,Gabriel Aumala,"Give higher priority to .npmignore over .gitignore (#3538)

If .npmignore or .yarnignore are present in a directory that also
contains .gitignore, don't take into account .gitignore when running the
pack command.

New function filterOverridenGitignores takes a WalkFiles object with all
the potential package files and returns another WalkFiles object only
with the relevant dot ignore files (.npmignore, .yarnignore or
.gitignore) taking into account the priority rules. This new collection
is the used by the pack command to create the ignore regexes.",False
7a5df84e8d8c3552deb0321d5d8df7795f37f726,2017-06-16 05:59:35,Ransom Briggs,Add scripts-prepend-node-path flag (#3511),False
3299509938848e13352cfe606ad09cca76c3dfaf,2017-06-16 05:44:34,Markus Doits,"Make `yarn run` only add global path to env if it is not present already (#3637)

If the global path is present already, prepending it should not be necessary
and might change the order of path entries. This can break
applications that rely on the correct order of path entries, like
rbenv.

fixes #3636",False
a4e02f8c960a829f31e04fd836bab3010a7690dd,2017-06-15 20:14:20,Pweaver,Add missing await in npm-resolver.js (#3640),False
ec720fc4db9018ee32a036ad368047eea9eb2d0e,2017-06-15 20:13:42,Ma√´l Nison,Runs prettier,False
99b822c34bb7bc13acb19c055f23f60316e078ac,2017-06-15 07:31:12,Charles Dimitri,"Add legend colors 3454 (#3561)

* Color legends added for upgrade-interactive

* Updated the legend color message",False
27e9922e97f28db9d0151478e39133ba0cb46926,2017-06-15 03:10:58,Burak Yiƒüit Kaya,"Fix: prevent Git from showing a password prompt (#3633)

**Summary**

Fixes #764.

Turns out when fetching packages from remote sources via Git,
it may ask for a username or password and get stuck there since
we run it in the background. This patch passes the following env
variables to disable any prompts:

1. `$GIT_ASKPASS=""""`
   This is the command Git runs to get username and pass. Setting
   it to an empty string disables it and git exits with an error.
2. `$GIT_TERMINAL_PROMPT=0`
    This is new in Git 2.3 and it prevents git from even trying to
    ask for a password. Surpasses `$GIT_ASKPASS` above.
3. `$GIT_SSH_COMMAND=""ssh -oBatchMode=yes""`
    This is also new in Git 2.3 and it makes git make the call to
    ssh via this command. `BatchMode=yes` option tells ssh to not
    do anything interactive (because batch/script mode) like
    password prompts in case publickey auth fails etc.

**Test plan**

Do `yarn add git+https://github.com/Napsty/privrepo.git#1.0.2`. `yarn`
hangs before this patch and fails with a ""Refusing to download"" error
after the patch.",False
0361edf4b4bd330370bff1d57803f2d0ecd94273,2017-06-14 20:04:35,Michael Kriese,"Color fix (#3607)

* Added reset to unbold for simple windows console.

* Reset chalk for test consistency.",False
a7202858b0b39895037996aec851b419db9b4455,2017-06-14 20:02:47,Michael Kriese,Fix prettier on windows. (#3635),False
0817ded0eedd1719ef96a3dd7e711bd3a8bf7fce,2017-06-14 19:08:59,Burak Yiƒüit Kaya,"Enhancement: slightly optimize how we update status from running scripts (#3629)

* Enhancement: slightly optimize how we update status from running scripts

** Summary **

This patch does two minor optimizations:

1. Do not even have a handler for data updates if we don't have a
   spinner. This avoids noop calls to a handler that just returns
   if we don't have a spinner.
2. Optimize getting the last available line from the buffer.
   Instead of using `.split()` and `.pop()` it uses `.lastIndexOf()`
   and `.substr()` to locate and extract the last line.

** Test plan **

Existing tests.

* Use `invariant` instead of the `.bind()` trick",False
e411962c5c87c2fb44b83bb03621c2ba09afca97,2017-06-13 21:11:51,Burak Yiƒüit Kaya,"Fix: Properly escape additional script args (#3627)

**Summary**

Fixes #3595.

We were naively adding quotes around arguments that contain spaces but not doing any additional bash/shell escaping. Additionally, we were not compensating for `node` not giving access to raw arguments and were passing parsed arguments to any scripts without reescaping them. This patch tries to fix the madness by replicating `npm`s escaping.

**Test plan**

Existing `run` tests and one additional test.",False
7e52cbb03715606e6198c878a8637388702a1f44,2017-06-10 03:54:51,Burak Yiƒüit Kaya,"Chore: Remove unnecessary empty objects from resolver.init calls (#3611)

Follow up to 7515772eabc91b741244a4f19aa34dce0a5dc5f4.

After refactoring #3604 I forgot to remove these empty objects
so now I'm doing it with this diff :)",False
7515772eabc91b741244a4f19aa34dce0a5dc5f4,2017-06-09 01:55:58,Burak Yiƒüit Kaya,"Fix: Don't do range collapsing when using a frozen lockfile (#3604)

**Summary**

Fixes #3313.

Yarn automatically optimizes less-than-ideal `yarn.lock` files, usually from older versions. That said when run with the `--frozen-lockfile` argument, it should neither touch the lockfile nor throw an exception if the lockfile satisfies all the needs, even if it can be optimized.

**Test plan**

Existing unit tests plus a new unit test which fails without the fix applied.",False
472a9312a09dc5c93df6e683f34806f5a988731b,2017-06-08 19:05:12,kaylieEB,"Add `yarn run env` script (#3596)

* Add env script

* use process.env instead of printenv",False
b9fe983307ed426ee02624f219519c52b828d110,2017-06-07 22:29:38,Jeff Valore,"Add ""latest"" flag to ""yarn upgrade"" (#3510)

* Added additional (passing) tests for existing upgrade behavior

* [#3384] add --latest/-L flag to

* added previously forgotten files to make tests actually pass",False
645d0d8fa0a9bb93ecdd31e98894765cad011b0f,2017-06-07 15:42:14,Adam Crabtree,Remove .includes for node 4 compatibility (#3592),False
0cc6c312a69693143d9ef6873aeba49b90f9320e,2017-06-07 12:26:05,Burak Yiƒüit Kaya,Use `.every` instead of `.filter().length === 0` pattern (#3594),False
f94bef3fdf6724f1310d069c49781cd6e0951f43,2017-06-06 18:33:57,Ma√´l Nison,0.26.0,False
879e768b1506ab03ecf20b8e0c5ba27bcd4fcb9b,2017-06-06 18:33:00,Ma√´l Nison,Adds support for both slashs and backslashes on Windows (#3578),False
4463175c5cd67264d116cd54bc724fc3b0967256,2017-06-03 00:27:23,Konstantin Raev,"Workspace phase 3 & 4 (#3516)

* Workspaces phase 3 & 4

* fixed check command

* addressed comments from @arcanis

* returned if worksapce condititon",False
bebe4cc36f77f050ea70d678a5c9c8d0ecf83dbf,2017-06-02 18:38:51,Ngo The Trung,"Fix GitFetcher.fetchFromLocal using wrong hash (#3527)

Following up #3449
expectHash is used beforehand to generate the cache destination, but
actualHash is returned. This causes future cache destination path
generation to use the wrong hash, resulting in EOENT errors.",False
168ae00b6586f103f120977dc03df4e0fb7f047c,2017-06-02 18:09:42,Ma√´l Nison,"Calls setupMirrorFromCache when fetching through the git-fetcher (#3548)

* Calls setupMirrorFromCache when fetching through the git-fetcher

* Adds tests

* Update integration.js",False
46750b2bebd487fb2d2011b9c4b7646ec6e2d8a3,2017-05-31 21:03:43,Miguel Jim√©nez Es√∫n,Allow tildes (~) in config paths. Fixes #3393 (#3537),False
c5a32cc8521736fff1da22b8ba78e260faa9c73b,2017-05-31 21:00:59,Konstantin Raev,"fixes binary links issue (#3545)

* removed save phase in package-linker

* added test

* test fixes",False
7a63e0d23c46a4564bc06645caf8a59690f04d01,2017-05-31 16:29:53,Kat March√°n,"fs: do bulk file reads to optimize cache extraction (#3539)

* fs: do bulk file reads to optimize cache extraction

This patch boosts cache extraction by ~2x+ by letting node
do more parallelization work. This makes nearly all of the file copy
stuff be done by the C++ code with minimal boundary-crossing (at least
compared to node streams).

Streams in node.js are ~3x slower, specially for small files,
than just doing fs.writeFile/readFile, because of this boundary. This
is something Yarn might want to take into account in other places.

The reason this is OK is because pretty much any files this would
handle would fit neatly into memory (any npm packages MUST fit
into memory by definition, because of the way npm@<5 does extracts).

If you really want to make doubleplus sure to minimize memory usage,
you could do an fs.stat to find the file size and then do heuristics
to only use streams for files bigger than <X>MB.

* Uses readFileBuffer instead of readFile",False
76489f9c8e03a72be032866218dc76ac94c54120,2017-05-30 23:22:44,Sebastian McKenzie,Put yarn into silent mode when calling nested `yarn run` commands (#3536),False
db5edeaa22dd27898ab5c5f1b45f88b6b2095e39,2017-05-30 19:08:51,Olivier Louvignes,Add support for new link: dependency type (#3359),False
9a54b456e18cc3527a8140cee9a1114e6d0e13da,2017-05-30 17:11:52,kslimani,"Allow to clean named package from cache (#3523)

* feat(cache): allow to clean named package from cache

* test(cache): add a test for clean with package name",False
94778772fbd6ef967233f05f9664899446909f9a,2017-05-30 16:10:50,Raido Kuli,Make lockfile Yarn and Node versions opt-in instead of opt-out (#3513),False
9acdd68db4c3431ada75ef26b80e49490477a392,2017-05-26 05:21:06,Kishan Bagaria,"Refactor and optimize `bin/yarn.js` (#3482)

* Refactor and optimize yarn.js

* Refactor and add `watch-modern` task",False
848139fb50fcb022a1e4aabb42c39a3b08a39a67,2017-05-26 05:18:24,ppsmirnov,Fix typo in reporter message (#3502),False
8ede3c41cfb389ee408ae1094503649dc11b11cc,2017-05-24 22:34:01,Ma√´l Nison,"Workspaces phase 2: executing commands (#3365)

* Adds yarn workspace command

* Adds workspace support to install (/ add / remove / ...)

* Avoids multiple invocations of ""findWorktree""

* Adds yarn exec

* Prevents the node_modules folder from being read during the workspace resolution

* Fixes flow

* Fixes lint

* Reuses resolveWorkspaces

* Fixes linting

* Refactors things

* Moves args validation before we do more work

* Fixes linting

* Fixes workspace resolution bug

* Moves the experimental check into the config init

* Adds lockfileFolder

* Moves the test into add

* Fixes linting

* Fixes hoister tests

* Fixes tests",False
c4f264f2e9d23f473abc406c4828cff864177fc6,2017-05-24 21:34:16,Kishan Bagaria,Exit process with code 1 when outdated dependencies are found (#3484),False
550e87ba85982f4f64fa7c57f47f3af1b6b29d2d,2017-05-24 15:57:50,Yaroslav Admin,Fixed yarn outdated and yarn upgrade-interactive to show URL for packages (#3442),False
e177c3732e6cd2adb468427d06a3bbcd2a5e4356,2017-05-24 15:42:15,Rob Hulswit,"Fix manifest trivial dependency normalization, fixes #2660 (#2923)

* Add test for normalizing manifest with trivial deps

* Fix normalization of manifest with trivial deps, fixes #2660",False
1f84d37ddebeb1d5f18ecf128d6a812a42be4a72,2017-05-23 20:48:40,Ma√´l Nison,"Bugfixes (#3478)

* Fixes scoping

* Fixes how the ""files"" entry is generated with enable-meta-folder

* Adds a test

* Increases Jasmine timeout",False
9e28a26d2572555f6b68bae029f672da1005be26,2017-05-23 19:30:16,Kishan Bagaria,"Replace `no-async-without-await` plugin with in-built rule (#3480)

* Replace no-async-without-await plugin with in-built rule

* Prettify .eslintrc",False
675a3e6a2b849d76bdca5acf5085f465e4589164,2017-05-23 17:05:30,Simon Vocella,"Make package-compatibility and package-fetcher stateless (#3422)

* extract resolver from compatibility class

* make package-fetcher stateless and indipendent from package-resolver

* trasform PackageCompability in a function

* renaming check and importing better in install and import command

* renaming fetch and importing better in install and import commands

* remove seedPatterns from package-resolver

* remove newPatterns from package-resolver and add fresh flag in manifest

* run yarn lint-prettier in yarn lint script instead of yarn prettier

* add comment to fresh flag in Manifest

* add pretty files

* remove redunant await from package-fetcher

* remove redunant await and useless async from fetch function",False
a080a835587430ffa0d2529cd16fd04ed1b2763c,2017-05-23 16:23:13,Rob Hulswit,Delay resolving patterns to existing versions until all final versions are known. Fixes #3466 (#3477),False
d57cce98efc3bb1b8a9768998cadb961a4381f91,2017-05-23 15:54:11,kaylieEB,"Add explicit check for tarball files in mirror files directory (#3467)

* Add explicit check for tarball files in mirror files directory

* Add test case",False
c1fe8a16c6c66d4c0fe7a0955b8432aa01a01587,2017-05-23 15:44:37,Kishan Bagaria,"Optimize async functions (#3461)

* Add lint rule `no-return-await`

* Replace redundant `return await` calls with `return`

* Convert async functions which no longer have `await` calls to normal functions",False
ca8140369629bb9bfd132d5447fea7ecd48e031f,2017-05-23 15:43:32,Rob Hulswit,"Properly ignore hoisted popular transitive devDeps in --prod mode. Fi‚Ä¶ (#3465)

* Properly ignore hoisted popular transitive devDeps in --prod mode. Fixes #3439

* Use destructuring to avoid boolean parameters to _seed

* Run prettier over package hoister",False
67fe99dc8d59e1423dc455057f9716ec186e2b44,2017-05-19 22:19:25,Jeff Valore,Display activity spinner during cache clean. #3452 (#3456),False
eac179c6ce8d8064774d06f20e2c3f77d61b4f80,2017-05-19 17:30:37,Ramiro Silveyra d'Avila,"Fix support for private git repos when using shorted repo syntax and lock file exists (#3425)

Force git remote type if the resolved url it's a git private url.",False
77ce1c9f943865ebb83fb637362696990360cdab,2017-05-19 17:26:38,The Dumb Terminal,Added support for more git URL formats (#3445),False
dac451d260790ae97e86a3731ce2cecffe416638,2017-05-19 17:24:11,Stephane Rufer,"check.js: Ignore dedup warnings for bundled dependencies (#3337)

Any package with bundledDependencies will be added to a hash of bundled
deps, which are used to check against when printing dedup warnings.
This is because bundled dependencies could result in duplications which
we would otherwise detect as false positives.

Fixes #3299",False
da920f2cfafc3b6d3d88bbf8d4fa4a3e6aa4c6a1,2017-05-18 23:17:12,Ma√´l Nison,Disables the hash check for git repositories (#3449),False
e56cdb8f0a68aa8e7c0992698a0f9b3225052d5b,2017-05-18 04:22:24,Alex,"Remove concurrency in creating bin links (#3097)

* Remove concurrency in creating bin links

Fix for #1961

* Add linkBinConcurrency constant and comment

* Fix: semicolon",False
fb2d1a42b3a9d6ec2e60c2a87e0b7e71961a53fb,2017-05-17 21:41:47,G. Kay Lee,Improve feedback messages for `link` & `unlink` (#3434),False
b728e330d51a572eb02a2ae61124bbc1982ee304,2017-05-17 17:37:54,walkerburgin,"Plumb ""--network-timeout"" command line flag through to the request-manager (#3417)",False
1b21157868f7f9b4ff82e6d3d0dfb0177da2867d,2017-05-17 17:37:24,Simon Vocella,"Delete eslint-plugin-prettify and revert back to custom scripts for prettier (#3426)

* delete eslint-plugin-prettify and return back to custom scripts

* formatting eslintrc

* set print-width to 120",False
25890c8cf90ff23c3230ab7b8debe73ef9a80b34,2017-05-16 23:42:03,Simon Vocella,"add prettier and prettying everything (#3401)

* add prettier and prettying everything

* fix scripts and run yarn prettier

* fix scripts again and run yarn prettier

* use eslint-plugin-prettify instead of custom scripts",False
6fc6d6279dbba3ec40cc3a0dad31755b5a90f7c2,2017-05-16 00:30:10,Konstantin Raev,"fixed order of object.assign (#3410)

* fixed order of object.assign

* added tests

* lints

* added fixtures",False
b501276ab7c7281ee1cd4ba41840a97f1cd8ce1a,2017-05-14 02:31:39,Simon Vocella,"update eslint, eslint-config-fb-strict and other dependencies (#3390)

* update eslint, babel-eslint, eslint-config-fb-strict

* update lockfile

* downgrade babel-eslint, remove eslint-config-fbjs because the latest is incompatible with the latest of eslint-config-fb-strict, update eslint-plugin-flowtype and eslint-plugin-react",False
a371bc2e851c48ba2c922c5eb2834aea5feafa11,2017-05-13 04:56:34,Kevin Ji,LICENSE: Specify BSD 2-Clause (#3133),False
10b82bb063c2e2feee669ddb9dfaf4126b74c7a7,2017-05-13 01:35:25,Liam O'Boyle,"Allow emojis to be force enabled with `--emoji`. (#3126)

The previous behaviour had a default of enabling emojis for Macs, and
allowed explicitly disabling them.

This PR keeps that default but allows `--emoji` to enable for other
platforms if the user wants to.  `--no-emoji` still works as before, but
due to the way that commander processes ""--no-"" flags (forcing the
default to true and overwriting the default value given in the `.option`
definition) it was necessary to switch the flag definition from
`--no-emoji` to `--emoji`.",False
33820719e2c049ff93e86d29251b96d496f2b6e8,2017-05-13 01:07:15,Lukas Spie√ü,"[Replace #2507] Support VSTS and other custom registries with unusual feeds (#3231)

* Fix issue 2505

* Fix flow check

* Fix test errors

* Load custom package host suffix from .yarnrc

* Update tests with new customHostPrefix parameter

* Use customHostSuffix parameter to determine if request is to registry",False
cc79cff21e4076b61bde511854d81c9e6f57c464,2017-05-13 00:54:39,Konstantin Raev,yarn publish not ready for CI (#3391),False
4a37df0a72922ac584bc84aaa8b8a077ce9d07ef,2017-05-13 00:46:33,Matt Fehskens,"Added a list sub-command for the yarn global command. Added unit test. (#3308)

This involved moving the list function out of the buildSubCommands so it could be called from ls & list.

Calling global ls will display a warning that global ls is deprecated and to use global list.",False
20f00acc36c20351bfb94dd64a31e3077d4be10d,2017-05-12 23:49:32,Konstantin Raev,0.26.0-0,False
f6b9659d914d91788b2d47be614bc1d076b113da,2017-05-12 23:49:29,Konstantin Raev,v0.25.0,False
065c5a121ef401a2b5d0d32f3d17f135b72e089b,2017-05-12 23:38:56,Konstantin Raev,picked form #3387 (#3388),False
859a6ba4dec9619bdb11069117b278ffad951edf,2017-05-12 22:40:36,Daniel Lo Nigro,Make yarn-bundle-entry.js executable,False
90095543c6adff0b5f09d0a6d9242e4251da2975,2017-05-12 21:45:09,Konstantin Raev,"improved error message (#3269)

* improved error message

* updated snapshot

* different errors for hashes mismatch",False
41e882ee88fa609b7b954a30f9b3d0c99590ad8f,2017-05-12 21:24:20,Matt Traynham,Remove warning spam during install with file mutex (#3165),False
e4f29cc9fe364c428aee881841b945fbfc83b00d,2017-05-12 21:20:05,Mason Richins,added check on response code on publish cli command to accomodate additional registries (#3149),False
d2231165dd7f99a8bfb4d510102b30ecc130350f,2017-05-12 20:59:40,jrop,"Switch to micromatch: fixes yarnpkg/yarn#3336 (#3339)

* Switch to micromatch: fixes yarnpkg/yarn#3336

* Trim patterns before generating RegExp
Test suite now passes

* Add test + test fixtures to test micromatch

* Oops.  Actually add the fixtures to Git this time

* Update yarn.lock

reverted registry change",False
6e545785f464180175d562e63b435f914afd056e,2017-05-12 20:49:53,James Ide,"Allow prerelease versions when checking peer deps (#3361)

* Allow prerelease versions when checking peer deps

Uses lower-level APIs in node-semver to allow prerelease versions when checking peer deps. This honors the intent of library authors e.g. when they write a React component that asks for `""react"": "">=15.0.0""` they're saying OK with `react@16.0.0` (partly because the React team specifically has said that if you don't have any warnings in version N, then version N+1 should work for you). By extension and modulo bugs, `react@16.0.0-alpha` works too (if the user explicitly installs it).

Test Plan: Added unit tests for the new semver utility.

Tested in a real project that uses React 16.0.0-alpha.11 and verified I didn't get any peer dep warnings that usually appear from libraries that ask for `""react"": "">=15.0.0""`. Downgraded React to 0.14.0 (too low) and saw peer dep warnings come back as expected.

* Tighten up upper bounds so that ""2.0.0-pre"" doesn't match ""^1.0.0""

node-semver converts ~ and ^ ranges into pairs of >= and < ranges but the upper bounds don't properly exclude prerelease versions. For example, ""^1.0.0"" is converted to "">=1.0.0 <2.0.0"", which includes ""2.0.0-pre"" since prerelease versions are lower than their non-prerelease counterparts. As a practical workaround we make upper-bound ranges exclude prereleases and convert ""<2.0.0"" to ""<2.0.0-0"", for example.

Added unit tests as well.",False
95592ee5315282092c5dcccd7908a5b1ceef1338,2017-05-12 20:44:00,Jeff Valore,modify git ref parsing to not error on non-matching lines #3325 (#3351),False
72ccccc574eb33b94f52595e1459803d5503be55,2017-05-12 19:24:58,Andres Suarez,Include requested url in cantRequestOffline error (#3335),False
20e5779ec324b3103ef9cca14ce9f96d29fd93c6,2017-05-11 22:23:36,Konstantin Raev,"workspaces: first phase: install node_modules aggregated from all workspaces (#3229)

* workspaces proof of concept

* added glob support and removed support for recursive workspaces + added tests

* more tests, allow workspaces only on private projects

* conflict in versions will throw errors in first iteration, later we'll do a smart resolution/linking",False
d2ef6a5b93a6a48e7520e3f52c5a9e12f000a4b0,2017-05-11 20:03:20,PICHOU Ky√¢ne,Fix Travis OSX tests (#3379),False
44ff2c3fd752962ca7a789452556c9ed39188333,2017-05-11 19:16:24,PICHOU Ky√¢ne,"Fix yarn ""entrypoint"" shell script (#3362)

#3260 PR broke the `bin/yarn` shell script (see issue #3321)
#3338 tried to fix it in a improper way

This way should work.",False
9931b39b8749d7af2a31c9fa1254ad0f0b34bbc9,2017-05-10 23:32:52,Simon Vocella,use yarn instead of npm everywhere is possible aka Eating your own dog food (#3374),False
98095116f5d156f3e647e7b22b2ea4a042a35bfa,2017-05-10 23:31:08,Ma√´l Nison,"Implements the enable-meta-folder (#3367)

* Implements the enable-meta-folder

* Adds enable-meta-folder support to yarn-error.log",False
7d9acc66b76a2d45a37df259a95584e78399363b,2017-05-10 21:52:45,Simon Vocella,upgrade babel-core (#3366),False
2841d2f327e19f100c0072746648fe4337feb071,2017-05-09 18:26:39,Ma√´l Nison,Updates the yarn-create prefix (#3358),False
0f6848608b2d316357cc80c16360810b46fc53de,2017-05-09 18:25:45,Roman Sandler,"Add a more useful error message when we cache a broken tarball (#3355)

It looks like there should be an error handler that reports the
`fetchErrorCorrupt` string, but instead an error from tar-stream
is being returned without the filename.",False
525ce9c34c074dea25ddf487b0ba57e6cfacea0c,2017-05-08 22:18:25,Christopher Stott,"Include yarn and node versions in yarn.lock (#3265)

Sometimes it is helpful for automated tooling to know the version of
yarn and nodejs that was used in the environment that last modified the
yarn.lock file.

For example, this allows CI platforms to automatically ensure the
same versions of yarn and node are used in CI as locally.

This functionality can be disabled by adding to .yarnrc
  yarn-disable-lockfile-versions true",False
1b1706484eeab4f56103a4cfc51e1f5ffdc06c05,2017-05-08 21:26:15,Jeff Valore,"link bins of transitive deps to top level (#3310)

* #2874 link bins of transitive deps to top level

* fixing bin link location checks for windows, where they are not symlinks

* WIP: adding debug line to debug appveyor build

* fix link path regex

* fix Flow type

* move install unit tests related to bin linking to own file

* added tests for NPM bin link behavior mentioned in PR #2874 comments. Changed bin linking to match this behavior",False
fff16860744ac89d9fcb40e855133c2e30d52157,2017-05-08 21:23:32,Nicholas Bollweg,"Don't always prune mirrored scoped packages resolved by URLs (#3342)

* include scope prefix for mirror tarball name check before pruning

* add tests, do as extra check

* removed comment",False
b0bb1787f16471ac1e9f050a3755b4fc1eaea216,2017-05-05 14:56:04,Ma√´l Nison,"Adds yarn create (#3244)

* Adds yarn create

* Fix stdio redirection

* Forwards arguments to create packages

* Adds scope support

* Adds flow

* Fixes linting

* Fixes extra prefix

* Uses a github url in the error messages",False
8e758e642711358a06d5dfd911f6721b1e665386,2017-05-04 22:18:17,Ma√´l Nison,"Fixes offline resolution for absolute Windows paths (#3319)

* Fixes offline resolution for absolute Windows paths

* lint fix

* Update tarball-fetcher.js

* Update lockfiles.js

* Update lockfiles.js",False
569fbb2a9f62d761cab15e23a14b8ccdf7c4434b,2017-05-04 18:24:44,Konstantin Raev,0.25.0-0,False
19122357fb8f03896582c0d0f3de674adce872c5,2017-05-04 18:24:41,Konstantin Raev,v0.24.0,False
d097060b35a9a9a507b6fcab25ac1df37f773580,2017-05-04 18:21:36,Ma√´l Nison,Fixes windows test (#3316),False
00f67807f9b99edb746a48677849d331d19ae03f,2017-05-04 18:16:13,Ma√´l Nison,Fix offline resolution (#3311),False
0b3c443fc8fe17347a89faf9061f6513813515e8,2017-05-03 16:09:25,Matthias Lochbrunner,"Add vendor informations to licences ls command (#3292)

* Add vendor informations to licences ls command

* Fix typo

* Add test for licenses ls --json command

* Rename expected table json file",False
6455ffc73ec2cd8bd3cf3d5e7adf3dd31677b2d0,2017-05-03 10:42:20,Daniel Lo Nigro,"update-homebrew.sh: Check out master before deleting old branch

Closes #3305",False
24ecd849c7f38fcab2b68405fe3ef6bf21d36c08,2017-05-02 19:59:36,Daniel Lo Nigro,"Correctly handle installationMethod when using bundled build (#3113)

* Correctly handle installationMethod when using bundled build. Closes #3085

* Fix all the things! Use async file reading function, correct ""Yarn"" to ""yarn"" so tests pass, and use proper Flow type for installation method.

* Fix Flow error",False
a9288dc85adbd015c8dc58b650623e5969e0f280,2017-05-02 15:41:50,Ben,Better use of English in `why` output (#3280),False
473164109b1205f21ba8a9832f5137059547da35,2017-05-02 15:00:20,Simon Vocella,"Add tests for global command (#3238)

* add test for global bin command

* add test for global add command

* add test for global remove

* add test for global ls command and fix issue #3142

* add test for global upgrade

* move tests with side-effects under isCI branch; the other tests now are side-effects free

* the global folder in win32 platform is prefix env/parameter without bin folder inside, do assert only on global folders for yarn global v0.23.3
Done in 0.26s.",False
5f28a9077d9b15d6f0c2fa759f77756977094f88,2017-05-02 10:01:16,Daniel Lo Nigro,Only update Chocolatey and Homebrew for non-RC releases,False
b4f59960a3761fc2f0635f646ab40c8e98be5087,2017-05-02 00:30:56,Raymond Wang,"Resolve Git dependencies offline if tarball is available. (#3000)

When running yarn offline, Git dependencies get trapped in
hasHTTPCapabiity even though resolveOverHTTP defaults to returning
the tarball. This change allows us to bypass that step altogether
if the tarball already exists.",False
f625912e51ba7a0570511b907af172a7167b9918,2017-05-01 23:16:28,Daniel Lo Nigro,"Swap Discord badge for shields.io version

This brings its style inline with all the other badges.",False
85296b2b4b39c5e156656950914a994107b91b19,2017-05-01 21:48:28,Simon Vocella,"add some tests for link/unlink command (#3293)

* add tests for link command

* add tests for unlink command

* fix some lint issues",False
2bbdaccf032dbbd6c16c6a0c949031e27317b30b,2017-05-01 21:40:45,Simon Vocella,remove duplication in __tests__/commands/pack.js (#3291),False
40f7f9d978b99655ecb57781c2aefe1606ab2145,2017-04-30 05:35:33,Daniel Lo Nigro,Clean Homebrew Git repo before committing. Fixes #3275,False
65afaa5256ab04374e546e5339df8dfacb8edc5c,2017-04-30 05:35:33,Daniel Lo Nigro,"Pass version number to build-chocolatey and update-homebrew

Instead of always grabbing the Yarn version number from yarnpkg.com, allow it to be passed in as command line argument.
Updates Jenkins bump-version job to pass it in.

References https://github.com/yarnpkg/website/issues/471",False
a5b9cac48329d3c28bd682982089f6620f964660,2017-04-30 01:22:20,Daniel Lo Nigro,"Add Jenkins job for bumping version on website

References #471",False
3bd3f17bf17e943bdd62101773c99fa0973cb66c,2017-04-28 22:11:51,Joseph Frazier,"`pack`: include contents of directories in `files` field (#3175)

* Use tar-fs instead of tar-stream in `yarn pack` (and fix packed emojis)

This lets tar-fs do the [header construction] for us.

[header construction]: https://github.com/mafintosh/tar-fs/blob/b79d82a79c5e21f6187462d7daaba1fc03cdd1de/index.js#L101-L127

I tested this by comparing the output of this command before and after
the change:

    ./bin/yarn.js pack >/dev/null && tar tvf yarn-v0.24.0-0.tgz | sort && wc -c < yarn-v0.24.0-0.tgz && rm *tgz

Here's the diff between the outputs:

```diff
diff --git a/before.txt b/after.txt
index 5e7f370e..5565a808 100644
--- a/before.txt
+++ b/after.txt
@@ -7,13 +7,13 @@
 -rw-r--r--  0 0      0         657 Mar  4 07:19 package/Dockerfile.dev
 -rw-r--r--  0 0      0        1346 Mar  4 07:19 package/LICENSE
 -rw-r--r--  0 0      0        1789 Apr 17 15:10 package/jenkins_jobs.groovy
--rw-r--r--  0 0      0        3061 Mar  4 07:19 package/README.md
--rw-r--r--  0 0      0        3438 Apr 17 16:18 package/package.json
+-rw-r--r--  0 0      0        3057 Mar  4 07:19 package/README.md
+-rw-r--r--  0 0      0        3430 Apr 17 16:18 package/package.json
 -rwxr-xr-x  0 0      0          42 Mar  4 07:19 package/bin/yarnpkg
 -rwxr-xr-x  0 0      0         172 Mar  4 07:19 package/bin/node-gyp-bin/node-gyp
 -rwxr-xr-x  0 0      0         906 Mar  4 07:19 package/bin/yarn
 -rwxr-xr-x  0 0      0         929 Apr 10 15:59 package/bin/yarn.js
 drwxr-xr-x  0 0      0           0 Apr 10 15:59 package/bin
 drwxr-xr-x  0 0      0           0 Apr 17 17:04 package
 drwxr-xr-x  0 0      0           0 Mar  4 07:19 package/bin/node-gyp-bin
-    6206
+    6177
```

I extracted the tarballs into `./package-master` and `./package-feature`,
then diffed them to find that this change has the side effect of
fixing emojis in the tarball. You can see examples of the broken emoji
here:

* https://unpkg.com/yarn@0.22.0/package.json
* https://unpkg.com/yarn@0.22.0/README.md

```diff
diff --git a/package-master/README.md b/package-feature/README.md
index aabfc24f..6aff13d8 100644
--- a/package-master/README.md
+++ b/package-feature/README.md
@@ -30,7 +30,7 @@
 * **Network Performance.** Yarn efficiently queues up requests and avoids request waterfalls in order to maximize network utilization.
 * **Network Resilience.** A single request failing won't cause an install to fail. Requests are retried upon failure.
 * **Flat Mode.** Yarn resolves mismatched versions of dependencies to a single version to avoid creating duplicates.
-* **More emojis.** √∞¬ü¬ê¬à
+* **More emojis.** üêà

 ## Installing Yarn

diff --git a/package-master/package.json b/package-feature/package.json
index c89ad7a6..8e7e3bc7 100644
--- a/package-master/package.json
+++ b/package-feature/package.json
@@ -4,7 +4,7 @@
   ""version"": ""0.24.0-0"",
   ""license"": ""BSD-2-Clause"",
   ""preferGlobal"": true,
-  ""description"": ""√∞¬ü¬ì¬¶√∞¬ü¬ê¬à Fast, reliable, and secure dependency management."",
+  ""description"": ""üì¶üêà Fast, reliable, and secure dependency management."",
   ""dependencies"": {
     ""babel-runtime"": ""^6.0.0"",
     ""bytes"": ""^2.4.0"",
```

* When testing `yarn pack`, use fs.walk instead of fs.readdir

This ensures that files inside directories are listed too.

* Add failing test for packing directories recursively

https://github.com/yarnpkg/yarn/issues/2498

* `pack`: include contents of directories in `files` field

This makes it so that you don't have to put '/**' after a directory in
the `files` field of package.json to ensure that the contents of the
directory will be published.

Fixes https://github.com/yarnpkg/yarn/issues/2498
Fixes https://github.com/yarnpkg/yarn/issues/2942
Fixes https://github.com/yarnpkg/yarn/issues/2851

Includes and closes https://github.com/yarnpkg/yarn/pull/3170

* `pack` test: Use path.join() to create nested path

* `path` test: Make output easier to understand

Now, we can see just what the expected/actual difference is, rather than
just getting a -1 vs 0 from an indexOf test.

* `pack`: transform each [ ""file-name"" ] into [ ""file-name"", ""file-name/**"" ], whether it's a file or a folder

See https://github.com/yarnpkg/yarn/pull/3175#issuecomment-295663363

* Account for backslashes in paths when filtering files

See https://github.com/yarnpkg/yarn/pull/3175#issuecomment-296687878

* Use `path.sep` instead of slashes

See https://github.com/yarnpkg/yarn/pull/3175#discussion_r112967037

* Revert ""Use `path.sep` instead of slashes""

This reverts commit c2df043343092dcc408f8792ad16eb86cad6ba3a.

It caused an additional test to fail:
https://ci.appveyor.com/project/kittens/yarn/build/2195/job/q5u26f85qlroy533#L3011

* Revert ""Account for backslashes in paths when filtering files""

This reverts commit 20646f5d4ac5207dbf929af4e96acebeca29d07f.

I don't think it actually helps, see
https://github.com/yarnpkg/yarn/pull/3175#issuecomment-296714233

* Keep pattern in IgnoreFilter, use with minimatch() in matchesFilter

This should help with Windows support. See
https://github.com/yarnpkg/yarn/pull/3175#issuecomment-296714233

* Update ignoreLinesToRegex tests",False
2b1956c2dfd2c4678225ba9df9d6e0ff42e8c9f8,2017-04-26 22:18:29,Simon Vocella,"extract the reporter out of integrity checker (#3248)

* extract the reporter out of integrity checker

* use warning for messages from integrity-checker in check command

* add tests for integrity when integrity file is missing or is not a json

* add assert on pre-existent tests

* add test for integrity failed for linked modules

* delete warning for integrity failed for patterns because we return before if one pattern is missing and we never reach that code

* lint the code correctly

* use flow enum, and remove every Promise.resolve in integrity-checker",False
cd9bdd5d106a52da5b6358ec713c45f11c2765cc,2017-04-26 21:47:19,Konstantin Raev,fixed unary line 16: [: : integer expression expected (#3260),False
aa800e0bc12b3a532beac544a97ba27254643f0f,2017-04-26 20:49:00,Dennis Webb,Adding verbose output for config file search (#3236),False
0f2de58e94694578dfa909051e3d0021e4aa3651,2017-04-26 20:47:24,Daniel Pihlstrom,"use close instead of finish event for file copy completion (#3234)

Windows Defender updates timestamps on files immediately after a write stream closes. Moving utimes update to after the file has closed corrects this issue.",False
086f9b86c1a3e10e190d661be2fea24b59a29b04,2017-04-26 20:45:26,Lukas Spie√ü,Fix a couple of lint warnings for unused variables (#3232),False
1638d06f5c4ac94e980b3d044fbc67e50a7b6543,2017-04-26 20:42:25,Sebastian McKenzie,"Add .yarnrc env config option (#3218)

* add .yarnrc env config option

* inherit existing env config",False
08e1e6bc923226b1b68444cc94fd3dc3e3dfccb6,2017-04-26 20:27:50,Joseph Frazier,Fix typo: specifally -> specifically (#3246),False
a45a6775eb10114e275afcac5d86948238c3791d,2017-04-26 20:27:30,mikew,Change `use_winpty` logic in bin/yarn to just look at YARN_FORCE_WINPTY in environment (#3245),False
d54fff37dcf633db850f178a967e7df8120ae065,2017-04-26 20:21:28,Ma√´l Nison,"Fix tarball file (#3221)

* Fixes #3168

* Adds tests

* Fixes linting",False
e4a51026bdc75d7017385d745c627030322c5fc6,2017-04-25 20:34:09,Rog√©rio Chaves,"Fixies for running with artifactory 4.14.1 (#3172)

* Add fallback vdn header for repositories that do not support it

* Add auth even if registry url is https and archive url is http",False
24587583c6b08ed6ca0aa1de1bf2991cb0e5b67c,2017-04-25 16:36:38,Sebastian McKenzie,When in flat mode don't add unused dependencies - fixes #2781 (#3251),False
01508902e2113cb3d0adc3d25ed8bd5beeb1a040,2017-04-25 16:36:06,Sebastian McKenzie,Move integrity artifacts tracking to separate method - fixes #3247 (#3250),False
7241de13bb236526fa439a2528fbed319f60ef24,2017-04-25 03:01:45,Matt Traynham,"Ref #2165 - file-resolver should invalidate cache with a new hash (#2860)

* file-resolver should invalidate cache with a new hash everytime

* Add/update tests for file protocol cache busting with force flag

* Fixing cache test and adding comment on size of cache directory.",False
5fc8539bcd68266fd50802bacc295990444ea664,2017-04-24 15:26:39,Daniel Lo Nigro,Fix global module executable path on Windows (#3233),False
cd4a8d707f031f23442b126b9531800b321435c4,2017-04-24 15:18:40,Simon Vocella,rename skipIntegrity in skipIntegrityCheck (#3239),False
50c5bf0cde3b71d00d889ff09582b2734b1d5423,2017-04-24 15:14:48,Daniel Lo Nigro,"Use npm's node-gyp if available, otherwise automatically install node-gyp (#3240)

* Attempt to install node-gyp if it's required but missing

* Try to use node-gyp version from npm

* Trailing commas",False
65595e34d6a0ad36783c9b69895a8805bd11d652,2017-04-24 12:23:16,Joge97,"feat(Upgrade): add scope flag to the upgrade command (#3190)

* feat(Upgrade): add scope flag to the upgrade command

* feat(Upgrade): upgrade command add tests for scope flag

* fix(Upgrade): fix scope flag behavior and apply coding standard

* fix(Upgrade): fix tests and add new test cases

* fix(Upgrade): fix scope check regex

* fix(Upgrade): fix tests

* fix(Upgrade): add missing quotes in tests",False
18b15b6dbf463f989b8d1767fc786a77b2d4ba8b,2017-04-24 07:33:44,Daniel Pihlstrom,"accept 1ms difference in filedates as equal on windows (#3235)

a nodejs issue causes certain dates to be off by 1ms after calling utimes

See: https://github.com/nodejs/node/pull/12607",False
bb927d0a8318dc7825f7ab1f464a79c24a15ebee,2017-04-22 21:15:03,Sebastian McKenzie,"Put build artifact tracking in integrity file (#3224)

* Put build artifact tracking in integrity file

* fix lint",False
b8266f5fa7b45fa79d1a51dbbb271b2c9b933df9,2017-04-22 21:14:18,Vladimir Agafonkin,fix lint warning (#3226),False
504b8cfc3c8e86a5ea90a6b06aa37c62fd47ad79,2017-04-22 20:22:10,Rifat Nabi,"Move inquirer code to console reporter (#3207)

* Move inquirer code to console reporter

* Fix double ctrl+c to exit problem",False
ba451628b186b4dae76be92f580293c0be0265ae,2017-04-22 01:51:46,Vladimir Agafonkin,partially revert #2657 to fix add command test (#3222),False
e7e2aa7a5252aeb8ca9760b0a2dc6ee5f923f964,2017-04-21 07:49:38,Michael Heuberger,"Do not test new version with pkg.version (#3103)

See issue 3011 for details. Leave it to
npm registry to validate the version number.",False
978632278f0d9b2fdc07a57ddc803483f173247e,2017-04-21 07:38:06,Ma√´l Nison,Adds clean-mirror.sh to scripts (#3179),False
4e48fd74e551f80762724486660212dc9bb42191,2017-04-21 06:18:00,Joseph Frazier,"Fix `yarn pack` to always include the file in the ""main"" field (#3092)

* Test that `yarn pack` always includes the file in the ""main"" field

This is for compatibility with npm, which [specifies] that:

> Certain files are always included, regardless of settings:
> * package.json
> * README
> * CHANGES / CHANGELOG / HISTORY
> * LICENSE / LICENCE
> * NOTICE
> * The file in the ""main"" field

[specifies]: https://docs.npmjs.com/files/package.json#files

* Fix `yarn pack` to always include the file in the ""main"" field

This is for compatibility with npm, which [specifies] that:

> Certain files are always included, regardless of settings:
> * package.json
> * README
> * CHANGES / CHANGELOG / HISTORY
> * LICENSE / LICENCE
> * NOTICE
> * The file in the ""main"" field

[specifies]: https://docs.npmjs.com/files/package.json#files",False
9a6afe1e0f616a8005cb352a45d805d2a5516eea,2017-04-21 04:50:48,Vladimir Agafonkin,"Optimize buildActionsForCopy routine (#2657)

* optimize buildActionsForCopy routine

* more resilient sync in util.fs, add comments",False
6d8dcec7e84d7271bc3acde2946cfcc5a93b530f,2017-04-20 20:56:59,Simon Vocella,"Use an alias system instead of camelCase function (#3101)

* - move aliases to unsupported aliases
- tests properly camelised comand
- tests properly command with hyphen
- move generation of documentation in src/cli/commands/index.js
- move every command related stuff in src/cli/commands/index.js
- tests some corner cases
- delete every camelCase use in src/cli/commands/index.js and
src/cli/commands/help.js

* fix typo and initialize commands in a clearer way",False
219bd63a2342c18f27c1ebe6038da6b9240bef3b,2017-04-20 16:02:13,Simon Vocella,add hasWrapper function in clean and remove command (#3205),False
cb453f56353016d5c98e4d6a0f4069896b1eef43,2017-04-20 15:38:43,Simon Vocella,"Ensure that every command has setFlags and hasWrapper functions (#3105)

* ensure that every command has setFlags function

* ensure that every command has hasWrapper function",False
ab97b0f81647b0276299ea0c8e9559d6079abb06,2017-04-20 15:29:39,Alec Merdler,"Hide Activity/Progress Output in JSONReporter with --no-progress Flag (#3158)

* remove activity output when --json and --no-progress flags used

* added more tests

* cleaning up tests

* fixed CI snapshot tests",False
b2bafc455119ab04c66335f23155959eb476b840,2017-04-20 15:26:12,Miguel Madero,"Avoids using Array.prototype.includes since it is not avaialble in node 4. (#3139)

Fixes https://github.com/yarnpkg/yarn/issues/3138",False
08974574710ae11499ed1544b3d292cff815963c,2017-04-18 21:35:37,Victor No√´l,Use gunzip-maybe instead of reimplementing (#2971),False
4e5b5f03ead9787429248ab617eb5b08325e1548,2017-04-18 21:32:32,Kornel,"Better match npm's SCP vs SSH URL heuristic (#3147)

Fixes #3146",False
2ee0d8a2921fab3f9d46af61f60b2735eac0c023,2017-04-18 21:07:40,Joseph Frazier,Fix typo: inlude -> include (#3171),False
ed53ca312515311ce315977d9aee97b3c3293abb,2017-04-18 21:07:16,Joseph Frazier,Fix typo: definently -> definitely (#3173),False
f68c10198f2a91373a8dfb90cf38aec4978428ff,2017-04-18 16:22:34,Igor Redchuk,"Fix bug when cannot set a config value to empty string (#3018)

* Fixes regression introduced in PR #2440
* Related to #2434",False
4cdc52065f5ae74c42e24b6666e5deadb3aa25a8,2017-04-14 05:40:04,Konstantin Raev,added request caches for linux (#3140),False
bb45834217063e3480f9ce2fc85c611f1594b984,2017-04-13 22:19:19,Daniel Lo Nigro,Make update-homebrew.sh executable (#3132),False
a3226f4a53c0f26af956b9d0b3a742a9ff2ae28d,2017-04-13 20:49:09,Daniel Lo Nigro,"Automatically update Homebrew package when new versions are released (#3083)

Closes #2841",False
fecbc0abb08ab793da06fc0a54808c16ddedafa3,2017-04-13 20:06:41,Konstantin Raev,[CI fix] track missing request caches (#3117),False
977497a71d57ed499d154d9a025d7d559f81a54c,2017-04-12 23:25:05,Konstantin Raev,fix lints on master (#3120),False
c32d69624b14d2f5fc889f42aa556fc35ab377fd,2017-04-12 22:58:42,Konstantin Raev,"Fix resolver incorrect lockfile (issue #2629) (#3106)

* wip fixing resolver when lockfile has incorrect semver entries

* Fixes incorrect entries in lockfiles

Fixes #2629.
If lockfile pattern does not match a version it will be ignored and re-resolved",False
c92411d8540001f6f4043b17d7d38c58301e9640,2017-04-12 22:46:30,Konstantin Raev,"supported smaller package metadata API (#3112)

* supported smaller package metadata according to https://github.com/npm/registry/blob/master/docs/responses/package-metadata.md

* fix tests and info command

* regenerated test cache",False
e8092bdc10fc6936b96549a0edd2fae38fd8b343,2017-04-12 22:42:13,Konstantin Raev,"Added --ignore-scripts flag to integrity check (#3094)

--ignore-scripts affects the underlying node_modules and should be factored in integrity check",False
fb40251c5b10bf3b43eed2daaaab53a1aab86f31,2017-04-11 03:23:35,Konstantin Raev,"Fixed concurrent unpacks into the same folder (#3090)

This is a mitigation for issue #2629.
In some cases two different packages could end up unpacking into the same cache folder.
Example https://github.com/yarnpkg/yarn/issues/2629#issuecomment-282745896, package typescript is downloaded twice because yarn.lock has inconsistent entries.
This change prevents more than one package to be unpacked into the same cache folder.

This is not a final fix for #2629, there is a more specific bug in resolver that causes this internal inconsistency but I think fetcher should check that every package will be extracted in a unique folder anyway.

Test Plan:
- I'll add a unit test in the next PR when I'll be fixing the reason for the same package having 2 downloads
- Manual test plan
1. Check out https://github.com/yarnpkg/yarn/issues/2629#issuecomment-282745896
2. yarn install
```
yarn install v0.24.0-0
[1/4] üîç  Resolving packages...
[2/4] üöö  Fetching packages...
warning Pattern [""@angular/core@^2.0.0""] is trying to unpack in the same destination ""/Users/bestander/Library/Caches/Yarn/v1/npm-@angular/core-4.0.0-rc.1-7f87b7696b407476e45d6d3c1880a50d5afbb6e3"" as pattern [""@angular/core@4.0.0-rc.1"",""@angular/core@>=2.3.1 <5.0.0 || >=4.0.0-beta <5.0.0""]. This could result in a non deterministic behavior, skipping.
warning Pattern [""typescript@>=2.0.0 <2.2.0""] is trying to unpack in the same destination ""/Users/bestander/Library/Caches/Yarn/v1/npm-typescript-2.2.1-4862b662b988a4c8ff691cc7969622d24db76ae9"" as pattern [""typescript@2.2.1"",""typescript@>=2.1.4""]. This could result in a non deterministic behavior, skipping.
[3/4] üîó  Linking dependencies...
warning ""@angular/flex-layout@2.0.0-rc.1"" has incorrect peer dependency ""@angular/common@^2.2.3"".
warning ""@angular/flex-layout@2.0.0-rc.1"" has incorrect peer dependency ""@angular/core@^2.2.3"".
warning ""@angular/material@2.0.0-beta.2"" has incorrect peer dependency ""@angular/core@^2.3.0"".
warning ""@angular/material@2.0.0-beta.2"" has incorrect peer dependency ""@angular/common@^2.3.0"".
warning ""@angular/material@2.0.0-beta.2"" has incorrect peer dependency ""@angular/http@^2.3.0"".
warning ""@ngrx/effects@2.0.0"" has incorrect peer dependency ""@angular/core@^2.0.0"".
warning ""@ngrx/store@2.2.1"" has incorrect peer dependency ""@angular/core@^2.0.0"".
warning ""angular2-notifications@0.4.53"" has incorrect peer dependency ""@angular/core@^2.1.2"".
warning ""angular2-notifications@0.4.53"" has incorrect peer dependency ""@angular/common@^2.1.2"".
warning ""angular2-notifications@0.4.53"" has incorrect peer dependency ""@angular/platform-browser@^2.1.1"".
warning ""ng2-translate@5.0.0"" has incorrect peer dependency ""@angular/core@^2.0.0"".
warning ""ng2-translate@5.0.0"" has incorrect peer dependency ""@angular/http@^2.0.0"".
warning ""redux-batched-actions@0.1.5"" has unmet peer dependency ""redux@>=1.0.0"".
[4/4] üìÉ  Building fresh packages...
‚ú®  Done in 6.16s.
```",False
45af6562c22652404993fb1d77616fadf3e5eff2,2017-04-10 22:13:24,Simon Vocella,"Reduce complexity of src/cli/index.js (#2887)

* clarify initial part of src/cli/index.js when we extracting arguments; flags and arguments after --

* change test if we do not provide any command name and specify a flag because the previous one was flaky

* fix silent error in test when we expect an error from a yarn command

* enrich commands with aliases

* simplify if statement: if no command we set install as default

* simplify if statement: we always have command with value undefined

* put every logic related to help in help command

* use deconstructuring instead of concat and some shift/unshit command

* remove useless invariant on commandName: we are sure that is always defined

* if command is not recognized set default to run; if command is run we set commandName as the first arg for npm_config_argv

* add some tests cases when we do not recognize command

* we use commander.js only to parse flags, remove every logic to put commandName and place only a placeholder

* implement hasWrapper function for help command

* display correct help link for aliases

* display documentation link correctly in every case

* add some console.asserts to ensure that we early crash if something is not expected

* fix erronous case: yarn constructor",False
cd58df8c66b61dcd551ea78668937d36869bae6a,2017-04-10 20:34:47,Simon Vocella,add tests for cache commands (#2956),False
e086476e8c89d218efc281d407288c41290a42de,2017-04-09 03:25:11,Daniel Lo Nigro,Remove Roadrunner (#3079),False
3af60cf9c1df2e70bb688111ce4c88c134e43b19,2017-04-09 03:10:19,Daniel Lo Nigro,"Use standalone .js bundle in dist tarball rather than individual JS files (#3030)

Instead of including all the raw JS files in the dist tarball, just use the single Yarn JS file that's built as part of the build, along with a few other files that are required. This significantly reduces the number of files in the tarball:

```
C:\src\yarn\dist (bundle-as-dist) (yarn@0.23.0-0)
Œª find .
.
./bin
./bin/node-gyp-bin
./bin/node-gyp-bin/node-gyp
./bin/node-gyp-bin/node-gyp.cmd
./bin/yarn
./bin/yarn.cmd
./bin/yarn.js
./bin/yarnpkg
./bin/yarnpkg.cmd
./lib
./lib/v8-compile-cache.js
./lib/yarn-cli.js
./LICENSE
./package.json
```

There are three .js files in the archive:
 - `lib/v8-compile-cache.js`:  Speeds up instantiation time by using the V8 code cache (https://www.npmjs.com/package/v8-compile-cache). This needs to be separate as it has to load **before** the bulk of the application code is loaded, so it can **not** be bundled
 - `lib/yarn-cli.js`: Contains all the bundled Yarn code
 - `bin/yarn.js`: Entry point to the app, just like today. Loads `v8-compile-cache` then loads `yarn-cli`

This change means that **only** the JavaScript files that are actually used are included, resulting in a nice file size reduction for the installation packages:
![](http://ss.dan.cx/2017/04/Yarn_bundle_dist_metrics_-_Google_Sheets_-_Google__01-13.51.49.png)

Differences are due to differing compression algorithms: Debian packages use xz or LZMA, RedHat uses gzip, Windows installer uses Cabinet

They're also slightly faster to extract:
![image 3](https://cloud.githubusercontent.com/assets/91933/24582332/483b41f4-16e2-11e7-9509-8024b1e78a39.png)

Testing was performed on my desktop computer (Intel Core i5 6500, Samsung 850 Evo 1TB SSD, Windows 10), with testing for Linux stuff (like installing the Debian package) tested in a Docker container.

Raw data: https://docs.google.com/spreadsheets/d/1d8jdf3DU_GUFdotlPl08PkYa8SkzStK2tgnQ54ivsm0/edit?usp=sharing

Performance is very slightly faster when using `v8-compile-cache` along with the bundled file, but it's not extremely significant (`yarn --version` went from 0.19s to 0.14s on my BuyVM server). The difference might be bigger on servers with slower disks (HDD) or with more overloaded servers.

I also deleted the `build-dist.ps1` file because we _should_ be able to assume that Bash is available on Windows, particularly if Git is installed (as it comes with Git Bash). I need to verify that this works on AppVeyor.",False
b2882e73341ec1c0925c9cf8baceef361052d47b,2017-04-07 23:37:38,Jamen Marz,"Make it log ""email"" instead of ""username"" (#3073)",False
508c959080c52183697602f52ebb95b086b6b3d3,2017-04-07 19:58:55,Ma√´l Nison,"Remove the dependency on the ""rc"" module (#3063)

* Removes dependency on the ""rc"" module

* Removers shebang-loader, not used anymore

* Fixes flow errors

* Fixes tests on Windows",False
13c8bcae318855b5ce9d72c6357ba0e7c778cbef,2017-04-07 19:35:11,Konstantin Raev,"Fixes integrity check for --production flag (#3067)

* fixed integrity check when running with --production

* added test

* removed unused var",False
88ba3bcd05d5f949d265af2a69077d40fce2649a,2017-04-07 19:18:54,Konstantin Raev,fixing lint (#3070),False
076e625a02d968749e128a9cac842790b7bf6461,2017-04-07 19:10:21,Konstantin Raev,replaced deprecated asserts (#3069),False
713d671d518b4f0e6f46e7d67404c1580f689454,2017-04-07 17:11:11,blexrob,"Fix missing subdeps in production install when those are present in devDependencies list (#2921)

* Test for install skipping subdependencies when those are named in root devDependencies

* Add 'incompatible' flag to references, use that to ignore incompatible packages instead of faulty inherit logic. Fixes #2819

* Unconditionally mark packages as ignored, hoister now fully corrects transitive uses",False
2f50ad6737c1261fc732302349cdf4d609445e00,2017-04-07 16:57:15,Ma√´l Nison,Checks that the webpack builds are working properly (#3064),False
bdec717662aaf3eda676bd55b38f0608e8f4d79a,2017-04-07 16:02:01,Dan Harper,"Ability to opt-out of offline mirror (#3009)

Configs are merged with configs in parent directories, so currently if a .yarnrc in a parent directory enables the offline mirror, all projects in child directories would also use the offline mirror.

This commit allows a child directory to opt-out of the offline mirror in their own .yarnrc with `yarn-offline-mirror false`.

Previously if you specified `false` you'd get an exception as false is parsed as boolean but it expects a string.

Also included tests verifying the existing .yarnrc merging behaviour (previously wasn't covered).

t14078443",False
188d377194bf5853eba500af16d8f8cc752690bc,2017-04-07 03:58:28,Hari Juturu,"Providing override for CHILD_CONCURRENCY via ENV (#3032)

* CHILD_CONCURRENCY ENV variable to override default concurrency

* Fixing linting error

* Changing the config read from constants to config.js",False
2bc0d96b91bdf65cfbb27e61a836e2bfb06f44fc,2017-04-06 21:35:24,The Dumb Terminal,"Supports public and private git repos when using shorted repo syntax (#2992)

* Now supports public and private shortened git repos

* added tests for new method",False
d4b61a4b8096d5391679f3040065194689a7dd87,2017-04-06 20:13:38,Ma√´l Nison,0.24.0-0,False
71bc09e5e2564bff6260ee9e9786e5195c8db2cc,2017-04-06 20:13:34,Ma√´l Nison,v0.23.0,False
fc6d26dc9c0147c795715bf0a62bf8697c682775,2017-04-06 19:21:15,Ma√´l Nison,"Rc args extra tests (#3053)

* Adds extra tests for the yarnrc arguments feature

* Supports falsy yarnrc arguments",False
a5a5915965c94de116a30b64e1863b2ddd1e3768,2017-04-06 18:20:52,Ma√´l Nison,"[feature] Ability to pass command CLI arguments via configuration in .yarnrc (#3033)

This PR opens the way to share configuration between multiple projects via the use of the .yarnrc
files. The current design it pretty simple: it simply adds the supported options from the yarnrc file at the beginning of the command line.

Some notes:

The yarnrc is currently parsed synchronously. I believe this is not an issue, since it's quite literally the very first thing we need to do when booting the application (even before the command line can be parsed), so there's really nothing we could run concurrently anyway.

The yarnrc is read in another file (https://github.com/yarnpkg/yarn/blob/master/src/registries/yarn-registry.js). I haven't changed how it works there, since I wanted my first draft to have as few changes as possible, but it's something that should probably be fixed so that the code only use one path to manage the yarnrc files.",False
ec5c8a16acfadee295acc3bcfaa86561e0268136,2017-04-06 16:18:01,Julien Roncaglia,Add tests to fileDatesEqual function in fs module (#3047),False
aed6fba99cbd350689c35b8a8642e4573c720ee5,2017-04-06 16:13:54,Hi·ªÉn ƒê√†o Vinh,Add package name to chooseVersionFromList message (#3043),False
eb6abed0e4ff1218d95c1fdf962084ffec84c190,2017-04-06 16:08:47,Andres Suarez,Update to flow 0.43.0 (#3046),False
80065c7ae7e9f1edf52fbed0aea1d446a3c9d5da,2017-04-06 16:08:32,Kir Shatrov,Test the retry policy of RequestManager (#3050),False
a715098235da9dbae02f7b424174e4e7b2d5de81,2017-04-05 22:36:54,Konstantin Raev,CLI command quick description fix,False
15faf3a240c4152cf0007222465617d6aba855fb,2017-04-05 22:35:07,Rafael Rinaldi,"Add silent flag to allow raw output (#2420)

* Add silent flag to disable console logs",False
b2c2c3be79088285418e88734841c7452aa3a02e,2017-04-05 22:14:46,Kir Shatrov,Use TCP timeout when downloading packages (#2950),False
4df8bf569076ecdc9da1f4fb6a6ecd3cffd1b6b4,2017-04-05 18:24:35,Konstantin Raev,"Optimized check --integrity and added tests (#3039)

Summary

Fixes #2514

Integrity check does not need resolver to be initialized and install hydrated.
It needs to read yarn.lock and pass patterns and entries to integrity checker.

This change reduces execution time of check --integrity from 2 seconds to 0.2 seconds.

Also I added a few more tests to integrity checking logic and moved some lockfile and integrity related tests into a separate test file",False
263c7598f16738b3bc122c892750f6081272e81a,2017-04-05 16:00:37,Konstantin Raev,"fix --verify-tree test stability (#3040)

* fix --verify-tree test stability

* fixes flaky test

* removed tests that test PRODUCTION configuration via environment variables",False
e8d3f1663cea0277ba83589a64e2aa22ab7d6d87,2017-04-04 21:10:07,Konstantin Raev,"[breaking?] `--check-files` for install/add/upgrade/check commands that verifies node_modules consistency (#3025)

Summary

This PR expands internal implementation of integrity check functionality.

.yarn-integrity file now contains all the properties as exploded JSON instead of sha-1 hashed.
This makes it easier to debug issues with integrity checks and installations

.yarn-integrity now contains list of files in node_modules if install/add command has --check-files flag passed.
When check command is executing it will have an option to test that files exist on disk.
This makes the command useful to identify when node_modules gets partially removed.

To use the new file checking feature:

yarn install --check-files
yarn check --integrity --check-files
This is an opt-in feature so people should not be affected buy it yet.
In the next iteration we may consider making --check-files the default option.
Also we may want to reevaluate other flags in check command and end up with more semantic/self explanatory options.

Exploded .yarn-integrity and especially files field allows us to integrate with third-party tools that may need list of files before yarn install is executed (e.g. BUCK).
Also it allows us to make a quick integrity check without loading much of the Yarn internals - only check that lock files entries are present, flags are the same and folders exist.",False
9660ecc7f8031a9a5a2d0319f0df39262eb128db,2017-04-04 03:24:25,Dan Harper,"Add option to disable the self-update check (#3035)

t16181086",False
3b8a1ac15e9d3df88ee44524e4ffad2150459448,2017-04-03 21:16:56,Kornel,"Special parsing for git's not-really-urls containing scp host specifiers (#2990)

* Non-nullable git supportsArchiveCache

* Git URLs are not real URLs, they also support scp host specifiers

Fixes #1796

* Remove workaround replacing ':' in git URLs

(#573, #1796)

* Expect already-parsed URL in Git constructor",False
bc128d1cf2106334c03b2fdea70d278b1e203d21,2017-04-03 07:23:51,Julien Roncaglia,"Avoid node issue with utimes on Windows

Lot of nodejs versions are buggy on windows regarding utime : It's not
setting the milliseconds part.

Issue: https://github.com/nodejs/node/issues/2069

With this change file date comparison is now done with only seconds
precision on windows when copying files. It make linking fast again under
windows.",False
16a8b19eff0ae34b3be1dc9546386790063e0dbb,2017-04-03 04:40:34,Dan Harper,fix uncalled matchers (#3027),False
cc0d51222a5308d8acb6aaed618804b35b377bd5,2017-04-03 04:37:17,Konstantin Raev,"Update constants.js

Relanding https://github.com/yarnpkg/yarn/commit/bdae0ae03b81409fc70299c5cd8765a74659aaef because I have made a wrong merge in a following commit, Doh.",False
b275aea03396ad6a7662ca2056ef5535f93b2efb,2017-03-31 15:47:07,Simen Bekkhus,Update .npmignore (#3024),False
76c9fc181e819d76d6f0833f57313c646b9b5406,2017-03-29 22:27:35,Ma√´l Nison,Replaces assert w/ expect (#3014),False
f9c433d5d91828d3483bff52463b5dce5b7dc586,2017-03-29 17:45:07,Konstantin Raev,"fixed trunk: lint, updated network caches, increased timeouts, loosen‚Ä¶ (#3008)

* fixed trunk: lint, updated network caches, increased timeouts, loosened some conditions

* +sudo for travis build

* possible fix for check verify-tree test

* exclude failing test from node 4 runs

* added comment",False
d9c2377e1a085879b053aad64d72cd81a73b980b,2017-03-28 19:25:08,Paul Irish,Bump request-capture-har to 1.2.2 (#2999),False
eac1836cea4a2a8e89d140fa22c204c1c416f14a,2017-03-28 18:55:46,Ma√´l Nison,"Lockfile resolution online ‚áÑ offline (#2970)

[breaking?] - When using offline mirror yarn.lock does not change anymore",False
9a743d714d1940489dd9bbb0a90468c30cda51f4,2017-03-28 18:49:23,Ma√´l Nison,"Adds prepare & prepublishOnly lifecycle hooks (#3004)

* Adds prepare & prepublishOnly lifecycle hooks

* Adds tests",False
0ce2d8170ff2c9b275b3cc248fc64c1b5d823314,2017-03-28 15:49:10,Andres Suarez,"Update to v8-compile-cache@^1.1.0 (#3001)

This version fixes a cache permissions issue.",False
fb1d128b20b16d8658024a336c8f942bf8681701,2017-03-27 19:27:07,Simon Vocella,add test for bin command (#2957),False
9b60b6e8d8c9786c6e34d2be054aee3140b7a7b8,2017-03-27 18:35:23,Tim van der Lippe,Fix undefined error when package has no binaries (#2969),False
de9b288f631dc7f35d5a6dff4166a6bbe356745d,2017-03-27 18:33:46,Ram Kandasamy,"Fix indentation in `yarn list` tree output (#2961)

* ConsoleReporter.tree test

* Fix yarn list indentation

* Update snapshot",False
557db7630fcfddd2c691b6439239624ad149ffad,2017-03-27 18:26:59,Greg Thornton,Add verbose build log (#2994),False
c701c1498754cc046d6da143fc36e0e849da90c6,2017-03-27 16:56:48,Paul Irish,Bump request-capture-har and request to latest. (#2995),False
6fa8732f7e4c979819598b66ca579ad89eaa5944,2017-03-24 17:59:21,Konstantin Raev,"Mock inquirer for all e2e tests (#2982)

* Mock inquirer for all e2e tests

Fixes #2955, we don't want yarn to prompt during e2e installs

* fix exports

* fixing test",False
c545847802d9b64ec16b2f8f5d2b39439f0a90fc,2017-03-24 17:38:54,Konstantin Raev,"Revert ""Resolves issues with git+ssh when ssh daemon has banner set."" (#2984)

* Revert ""Upgrade to flow v0.42.0 (#2972)""

This reverts commit 6bb3cf5c80d400b26ddb90d4b39b8d0fd9021406.

* Revert ""Resolves issues with git+ssh when ssh daemon has banner set. (#2905)""

This reverts commit 4abdafd0916aaa9850de2374a689980f8700f7bb.",False
6bb3cf5c80d400b26ddb90d4b39b8d0fd9021406,2017-03-23 22:45:04,Andres Suarez,Upgrade to flow v0.42.0 (#2972),False
4abdafd0916aaa9850de2374a689980f8700f7bb,2017-03-23 05:53:03,Bryan Pfremmer,"Resolves issues with git+ssh when ssh daemon has banner set. (#2905)

* Silencing git+ssh banner

If your ssh daemon has a banner set this currently causes yarn add to fail because it‚Äôs expecting to get an array of git shas instead of the banner.  This uses the quiet option of ssh to exclude the banners for git+ssh.

* Fixing linting issues

Fixed linting issues found during circle ci build.",False
74b093471cd406a30e6ec93ab2a38d33f643854d,2017-03-23 05:49:30,joe-re,"ignore devDependencies on licenses command if is enable to --prod option (#2941)

* ignore devDependencies on lisenses command if is enable to --prod option

* change variable name for easy to understand

s/noUseIgnore/ignoreUnusedPatterns/g",False
47a5177caa6e8a4035c863fda088a84f0b45222f,2017-03-23 05:38:26,Adam Edgett,Make registry env variables case agnostic (#1273),False
3ce8427b37e0eaa5b32307460ef94cd916c1a9f4,2017-03-23 05:03:53,Juan Carlos Medina,"`yarn upgrade` any dependencies via protocol (#2906)

* Ensure test covers a dev dependency not in any registry

* Ensure `yarn upgrade` also considers dev dependencies

* Explicitly test cases of packages not in registry for: dev, optional, and peer dependencies

* Ensure all type of dependencies are resolved via package.json",False
6e9a9a6596ca8f177f68f6672a1ef4ff16705336,2017-03-20 16:54:25,Sam Clift,issue 2495: warn users when install yarn globally with yarn (#2926),False
500941778ec5ceace48ff4ae83ce9ddc7bd318f7,2017-03-15 00:47:15,Danny Guo,Remove unused lockFileInSync function (#2917),False
6fb3ba5090c9c5723c6329b412a1e3a3194e9817,2017-03-13 16:33:36,Yong Wen Chua,"Fix User Namespace issues with untaring (#2898)

* removed entry.props.uid=0 for root after we switched from node-tar to tar-fs

* removed root condition from tar extraction

* Set UID and GID to zero when user is root

* Add test to Circles CI and just set chown to false

* Change test script

* Fix sudo test",False
664b6a4f6beeb2e1f69447e1186a8aa889e0980c,2017-03-11 10:57:01,Tim van der Lippe,Generate coverage for uncovered source files,False
1b89ee877338873473fdee0ca20571ac51686b6e,2017-03-11 10:44:48,Scott Addie,Add console.warn to process.stdin catch block,False
7466829cc509b40f4873cd5ea3432e91c3c949ce,2017-03-10 17:20:45,Danny Guo,Remove Git conflict markers (#2873),False
1650f5cbc0217833906f5e6d1628099c80cf234d,2017-03-10 17:17:59,rmacklin,Add test for pruning on install when mirror pruning has been enabled (#2880),False
1c36baff78fdd5dfab932f7e4d71f1082a775622,2017-03-08 18:08:58,Danny Guo,Add optional offline mirror pruning (#2836),False
2072978a0ffc2a65512e0336491485cce9bb6691,2017-03-08 06:42:18,Daniel Lo Nigro,Use release infra rather than ghr to create GitHub releases (#2839),False
8ed57c0de6a8c29ac2f44a599cd39a6c2b7082f9,2017-03-08 06:40:07,Andres Suarez,Upgrade to flow v0.41.0 (#2862),False
2f49dcfe0119a960e28958679be15ace5c527ca3,2017-03-07 20:55:13,HOU Bin,use process.mainModule.filename as npm_execpath (#2843),False
157a34aa5928792b596b1da99fc12027c9e00032,2017-03-07 20:46:21,Konstantin Raev,"switched to tar-fs from node-tar to unpack tars (#2826)

* Set default network concurrency to 8 and switched to tar-fs instead of node-tar

* migrated pack test

* another file migrated to tar-fs

* changed concurrency in another PR

* wip migrating git to use tar-fs

* removed tar dependency

* bump tar-stream

* reverted changes to url in hasArchiveCapability

* made changes according to feedback

* 0o444

* added flow suppress",False
ddff4c5ae8f8ef65284746931c851cc642177816,2017-03-07 20:43:02,Konstantin Raev,"Refactored integrity generation and check (#2818)

* proper integrity check: first commit

* moved the rest code to integrity-check and integrated with install and check commands

* more fixes

* removed todo

* removed hashes from integrity error message

* typos fixes

* replaced todo with a proper comment

* added a test for bailout

* changed integrity hash location logic a bit",False
d093c6cc1d2e28d906e0972b1d9a5ad5cd757bff,2017-03-07 18:10:52,C√©dric Connes,"Move ROOT_USER to a separate file, fixes #2807 (#2855)",False
52da2c8ff545a7964b007af4d1630438bcb51405,2017-03-07 01:18:17,Ben Demboski,"Fix #1435 (failing dependencies of optional dependencies) (#2811)

* Fix #1435 (failing dependencies of optional dependencies)

Mark all dependencies of optional dependencies as themselves optional, so that if they fail, the whole install process doesn't fail.

* Update tests

Add a test to make sure code marking sub-dependencies as optional doesn't do so when another dependency marks it as non-optional, and convert a test (plus a pre-existing one) to use file: URIs instead of offline mirroring, for readability.",False
06bd1fee03873d7eb537fa4e888f672fc6a82fa4,2017-03-06 22:36:20,Konstantin Raev,0.23.0-0,False
0f71911e85a10fced522750dbe9e9f053aec9aa2,2017-03-06 22:36:15,Konstantin Raev,v0.22.0,False
82f44761be95ab62c73935e19297af4a3dbdc9ce,2017-03-06 04:09:02,Scott Addie,handle process.stdin exceptions,False
689c07ddfa6b495b0cdbcefe4bbc29cc7fc7c9c3,2017-03-05 07:12:29,Daniel Lo Nigro,Rename jenkins-jobs.groovy to jenkins_jobs.groovy due to Groovy filename limitations,False
2a9f632b26eabd54f83c312e970a25e61ece0558,2017-03-05 07:01:36,Daniel Lo Nigro,Add Jenkins jobs to repo,False
5b3ceba840805411cd1b6e50cc7251c7304b2fa9,2017-03-03 17:10:51,Tim van der Lippe,Upgrade camelcase + flow and specify supported engines (#2812),False
bdae0ae03b81409fc70299c5cd8765a74659aaef,2017-03-03 15:42:33,Konstantin Raev,set default network concurrency to 8 (#2829),False
19eb5007510f039c61630948b01a491c3ccdde23,2017-03-03 06:04:46,Tim Oxley,"Mention yarnpkg/rfcs in CONTRIBUTING, README and PULL_REQUEST_TEMPLATE. (#2820)

Improves discoverability of yarnpkg/rfcs",False
ed6b9b99c4a83ec9ab8a113892ba900365316b5d,2017-03-02 23:08:14,Ma√´l Nison,"Adds versioning to the cache path (#2768)

* Adds versioning to the cache path

* Adds a test to check that the cache path is correctly updated

* Renames ""cacheFolder"" into ""versionedCacheFolder""

* Adds a test to check that the cache is correctly busted when bumping the cache version

* Fixes tests on Windows

* Changes variable names",False
0ad2bf91639911e49d68024c56df4e03189fd153,2017-02-28 19:50:13,Kamil Og√≥rek,"Correctly resolve peerDependencies for concurrent installs (#2801)

* Correctly resolve peerDependencies for concurrent installs

* Tests for resolving peerDependencies when using add command",False
cd13d017af23f194c5a6857636302be866d497c0,2017-02-28 17:29:02,Hendrik Purmann,Remove linter warnings (#2797),False
6930ffbf0f6a3fe864f9661d965e36b05ec89529,2017-02-28 05:39:30,Albert Fern√°ndez,Installing git-ssh dependency should resolve to offline mirror (#2775),False
964dc430780aae4cbaf06c2ff587d70a7b4530cc,2017-02-28 05:21:08,Daniel Rey L√≥pez,Implemented mutex system to make bin links be generated consistently in Windows (#2795),False
81261369f8161dfbcdc9f3f35cfd6210f467a9ac,2017-02-28 04:38:27,Hendrik Purmann,"Update jest to version 19 (#2778)

Unfortunately this doesn't work in node7 but seems to be a bug in jest. It stops execution when testing remove, though returning a 0 exit code.",False
437ca02515e5fa00c86b72d408d30b304b5f1195,2017-02-27 23:10:55,Jeff Valore,"added unit tests for package-hoister (#2736)

* added unit tests for package-hoister

* fix some flow errors for new package-hoister test file",False
d20eaaa857a98fb59534f21d8a42da89bb785243,2017-02-27 22:38:05,Juan Carlos Medina,"`yarn upgrade` packages via protocol (#2780)

* Implement spec coverage for package hosted on github

Signed-off-by: Juan Carlos Medina <juanca.med@gmail.com>

* Check manifest for possible remote source when upgrading a package

* Flow fixes: possible `undefined` values

* Clean up spec

Remove console.log and add appropriate whitespace

* Avoid splice in favor of splats

Signed-off-by: Alan Wong <naganowl@gmail.com>

* Switch out `git+ssh://` protocol in favor of `https://` protocol

AppVeyor does not play nicely with SSH.

Signed-off-by: Juan Carlos Medina <juanca.med@gmail.com>

* Determine valid remote source via PackageRequest.getExoticResolver

* Use `addArgs` instead of `args`

* Replace juanca/yarn-test-git-repo with forked juanca/e2e-test-repo

* Ensure multiple packages as dependencies and resolved in lockfile

* Replace assertion of non-existence with existence

The assertion was incorrect and this particular assertion was testing nothing. The whole test itself still provides some coverage: packages not in registry does not blow up `yarn upgrade <package name>` command.

* Add assertions on e2e-test-repo in lockfile

* Look up all given packages in `yarn upgrade` in root manifest

* Ensure force flag is enabled when using `yarn upgrade`

Otherwise exotic packages are not updated.

* Update package-not-in-registry to unforked yarnpkg/e2e-test-repo

Replaces existence assertion with non-existence assertion: this is fine as long as the same pattern is used between the existence and non-existence assertions",False
257a804e2da5aa19f9e517aab08c607a624cd963,2017-02-27 22:25:34,Konstantin Raev,"added test for #2744 (#2791)

* added test for #2744

* fix lint

* updated network caches

* more tests optimization",False
b409e183a0cf4c506e30211a1c2a8307e437e5af,2017-02-27 20:37:26,Petr Kosikhin,fix errors thrown if symlink source does not exist (#2744),False
f8fd81341ec283ed8fa5880762c5670551aa7bd7,2017-02-27 17:02:25,wtgtybhertgeghgtwtg,Use `Object.assign` over `defaults`. (#2687),False
0adbc59b18b38b6ac6e4b248e19788ed1d2e80da,2017-02-26 21:54:29,Matt Adam,"Add ‚Äînon-interactive flag for automated processes (#2770)

* Add ‚Äînon-interactive flag for automated processes

* Remove duplicate value",False
3d20a522a45bebf14ba59ba4cfc71fbc63a95ff4,2017-02-25 14:26:11,Aaron Harris,Added yarnpkg.cmd batch shim for backwards-compatibility on Windows (#2534) (#2746),False
67cc334e5303c314f7a1949a7ddd2d77f66eb4f3,2017-02-24 17:16:39,Dawson Botsford,"Add filename output to parse errors (#2761)

* Add filename output to parse errors

* lint fixes",False
bd8e326668aa1deac07b53bb9b9d93daf172c070,2017-02-23 21:45:52,Konstantin Raev,"Enabled skip-integrity-check flag for install command (#2765)

* Enabled skip-integrity-check flag for install command

Sometimes you need to run full install even if integrity check returns OK.

* added test to --skip-integrity-checl",False
b7ba34693fe4c72667ba70f1e3023534bd82c4f6,2017-02-23 19:32:01,Andres Suarez,Add v8-compile-cache (#2749),False
d853a9692e85faf863b9e8e0d1e4979ee14a9513,2017-02-23 19:29:01,Hendrik Purmann,"Sort outdated packages by name, fixes #2513 (#2759)

This is the same npm does when calling `npm outdated`.",False
4e4075fd59d3db07632c884992bb17f664a291c1,2017-02-23 16:40:53,Matt Swensen,Fix inaccurate peer dependency warning on upgrade (#2704) (#2733),False
5b968dd53222a6bad18acbe4fee5ad482be2014a,2017-02-22 15:14:18,Simon Vocella,"skip test in __tests__/index.js for win32 platform: it does some tricks in bash, it does not work with powershell (#2748)",False
3c459de1b0f3a2074feaa5cb889d8c989a644172,2017-02-21 23:49:33,Ma√´l Nison,"Unescapes ESC character, fixing #2439 (#2745)",False
7aaee9bec6150875a9a34ae7d5dd86fbf4910092,2017-02-20 21:47:05,Simon Vocella,"Refactoring cli index (#2613)

* add tests to cover almost every cli parsing case and add docs info for
`command --help`

* extract help command",False
c001bb222c78c54a77732a95b332de879660f1fe,2017-02-20 21:30:22,Simon Vocella,install package with file: protocol as default if it exists in the filesystem (#2723),False
be9dca83e66871ec271d6cbc063626d6cbac10dd,2017-02-20 18:48:57,Konstantin Raev,fixed import version for not installed dependencies (#2731),False
8506db8ffc9c39bd0e846ac235eb30eb634d5c28,2017-02-20 05:36:31,Daniel Lo Nigro,[Chocolatey] Add `UseBasicParsing` to Invoke-WebRequest so it works in environments without the MSIE engine available (#2726),False
81989b4e6db078b06766d7c85d0c9c0c6c692506,2017-02-20 04:23:37,Victor No√´l,Add global upgrade-interactive command (#2021) (#2689),False
9a9a8ba15b1d59f505be83e3410d5eb4e98c7055,2017-02-20 04:22:00,Keraito,Fix tests when path location of yarn contains spaces (#2700),False
975051070b3add8e146462eee927d5097fd79cfc,2017-02-20 04:16:11,Daniel Lo Nigro,Remove logic for loading self-update versions (#2720),False
7182302de342cb8bc67a88a590509335d59cba4f,2017-02-19 06:52:30,Daniel Lo Nigro,"Create Docker image for Node.js + Yarn (#2721)

* Create Docker image for Node.js + Yarn

* Fix comment in Dockerfile.node7",False
c77d4d781e484cff3cb4f2ac0d7ba353aeae764b,2017-02-15 21:05:43,Sebastian McKenzie,Prioritise popular transitive dependencies when hoisting (#2676),False
d819f4d4a11dd11fa3cb56da1041d656c8d6fead,2017-02-15 01:39:43,Konstantin Raev,0.22.0-0,False
70e76d174b0c7d001d2cd608a16c94498496e92d,2017-02-15 01:39:38,Konstantin Raev,v0.21.0,False
51b4d0dcf289ed89b4e774b1c3efad1f04d688e6,2017-02-14 23:39:25,David Wickman,"Windows: can not run scripts starting with relative path #1729 (#2617)

Enable the fixCmdWinSlashes class for the lifecycle scripts to clean up the
Windows run scripts starting with a relative path",False
15369cb053f1e3ada434dc5a5704dadb0c7469f9,2017-02-14 23:27:09,Konstantin Raev,added prompt fix for add tests that fail occasionally because of wrong cache versions (#2694),False
88f558c057074b545b6888b894a0050a2484e6dd,2017-02-14 23:19:19,wtgtybhertgeghgtwtg,Remove `json-loader`. (#2605),False
4d59f5bf4b8ae75a330d2e57b48730f63cfc0e5c,2017-02-14 20:11:42,Greg Thornton,Add import command (#2580),False
b57fcc9fb986f24227486bd6b87dcf3baf24db82,2017-02-11 11:26:36,Daniel Lo Nigro,"Add Dockerfile for building Yarn (#2628)

* Add Dockerfile for building Yarn

* Use Node.js 7.x

* Don't send any files to Docker daemon

* Remove Debian comment",False
3dc9cf43448da51d3b8890de339a0ed27b12ca62,2017-02-09 19:45:54,Konstantin Raev,"--link-duplicates flag. Creates hardlinks to duplicate files in node_modules (#2620)

* Feature: duplicated dependencies are hardlinked from the first copy

* cleanup and tests

* made linking non default

* added fallback if links are not supported

* lint fix

* nits

* nits",False
e2f4a3cf1b3cc863f078b68cf4f9195d0ebe423e,2017-02-09 05:20:09,Liran Tal,refactoring URLs and generic links to be used as defined constants (#2670),False
209190ac29af2054ff22815d1c0cc34b16c3ed66,2017-02-09 05:19:17,Yong Wen Chua,Throw error on frozen lockfile failing check instead of simply bailing out (#2663),False
eb94372e22a2a31aa18bc06e1b5f3d5c0f81c146,2017-02-09 03:03:17,Konstantin Raev,switched git repo for test (#2669),False
32b62607e58f52bdbcca3d5069c968d4c5712714,2017-02-09 00:13:21,wtgtybhertgeghgtwtg,"Replace `user-home` with `os.homedir`. (#2635)

* Replace `user-home` with `os.homedir`.

* Replace `os.homedir` with `user-home-dir`.

* Fix use `require('user-home-dir').default`.",False
4e16d7166858c30a6823f2081622ba2906d69daf,2017-02-09 00:02:12,Konstantin Raev,"Added timestamps to verbose logs (#2642)

* Added timestamps to verbose logs

* added ISO date verbose log to startup for syncing",False
9694eab57045493a2e73430ef211f8a31e7d1653,2017-02-08 03:06:12,Haroen Viaene,"add a description field to the package.json (#2654)

this is used on npmjs.com, yarnpkg.com/search and more places, right now the description will be read out of the first part of the readme, which isn't that useful:

```
description: '<p align=""center"">   <a href=""https://yarnpkg.com/"">     <img alt=""Yarn"" src=""https://github.com/yarnpkg/assets/blob/master/yarn-kitten-full.png?raw=true"" width=""546"">   </a> </p>',
```

The npm site renders this as html, while yarnpkg.com/search renders it as escaped text, so plain text is the best choice for this case.

I picked the description from on github to replicate here.",False
de43f4a993d1e08cd930ee22ecb2bac727f53449,2017-02-05 06:52:08,Balthazar Gronon,"Fix private urls using colon separator (#2519)

* Fix private urls using colon separator

Closes #573, closes #2416.

Related to #2384, #573.

* Remove unused suppression

* Move to dedicated method & add tests",False
8ff015857ae3ab35d0af35ee3722c820279ab119,2017-02-03 23:17:06,Konstantin Raev,"CI: added retries to Travis runs (#2604)

* Added 3 automatic retries for builds on travis",False
8deff0565c243396e52d09ad5d2068f731558a0e,2017-02-02 07:10:35,Ed Robinson,adds YARN_INSTALL_METHOD for apk (Alpine Linux) (#2607),False
d66575e2b03a80aa9c08578a7e28d9e745faa836,2017-02-01 20:39:32,Constantine Antonakos,"Fix `yarn version` which yields same output as `yarn --version` (#2491) (#2510)

* Fix `yarn version` which yields same output as `yarn --version` (#2491)

There was a conflict when commander attempts to parse the incoming args
between the command executed and the options since the name `version`
was shared. In other words, executing the command `yarn version`
would yield the same output as `yarn --version`. This relates to PR #2268.

* Shift first arg that shares name with an option to circumvent conflicting name bug

Relating to tj/commander.js#346, when an arg shares the same name as an
option, it wrongly ignores the arg command and executes the option
instead. Therefore, executing 'yarn version' would instead translate
to 'yarn --version'. This logic can subsequently be removed once this issue is resolved.",False
9533405a9413b12b29aec9a5096f04c2176ebe78,2017-02-01 05:03:10,Simon Vocella,"add Named Constructor for Config and create a real NoopReporter (#2594)

* create a named constructor for the class Config; remove every useless import from other files

* create a real noop reporter and use base reporter when it is useful",False
bb21491df0f09887b61f62057d30c2b8e59c1db5,2017-02-01 04:37:36,Ian Taylor,Fix registry auth comparison when registry urls and request urls have explicit vs implied port numbers (#2598),False
e3edb66f09dd61c5b1bcd2f22c2b3e94b6e4fc42,2017-02-01 04:27:15,James Judd,"Make sure there is a url to resolve before trying to resolve it (#2561)

Currently, when you have interconnected file dependencies, yarn install
fails after a lockfile has been generated. This failure occurs because
we call split on the package's resolved url, which is undefined. This fix
makes sure we have a resolved url before trying to call split on it.

For example, you have a project that has only two dependencies, a and b.
Both are local files. Package a depends on b, and b has no dependencies.
You can run yarn install from a clean state without issue. This generates
a lock file. Running yarn install a second time fails. This issue fixes
that.

Resolves: 2256",False
41930e4b94ca24ab46943a6b12efdde9dbae4886,2017-02-01 04:19:01,Dave Brotherstone,"Do not link bin scripts from dev dependencies with `--production` (#2584)

* Do not link bin scripts from dev dependencies with `--production`

`bin` scripts for `devDependencies` when installing with `--production`
should not be linked

* Switch to much smaller packages to test devDependency bin scripts

`rimraf` and `touch` were chosen as small modules that are also owned
by `isaacs`, and hence are unlikely to disappear",False
ad28433ef24d57627113824a628878effebae3ad,2017-02-01 04:17:07,wtgtybhertgeghgtwtg,Drop `diff`. (#2592),False
79e77f164c4d39c4d49a65c5259d53d8ba1d1b53,2017-01-30 19:40:48,Konstantin Raev,0.21.0-0,False
978a3b185e606e6df08a7790be5035ae9150675f,2017-01-30 19:40:41,Konstantin Raev,v0.20.0,False
03abc968fec866d6afd178d051031a89fdc3fcc3,2017-01-30 18:49:32,wtgtybhertgeghgtwtg,Remove `eslint-config-kittens`. (#2587),False
864b563074af16c804fc79fda07677af3e6cd501,2017-01-30 12:08:01,wtgtybhertgeghgtwtg,"Use `string.prototype.repeat` over `repeating`. (#2583)

* Use `string.prototype.repeat` over `repeating`.

* Add test for `upgrade-interactive`.",False
268d2e4821dd21a312ff50e747ea49a87104aa6f,2017-01-29 23:29:45,wtgtybhertgeghgtwtg,Bump `detect-indent`. (#2579),False
de42a0a7bf0789d9619526c27ece595295bc59e1,2017-01-29 11:23:54,wtgtybhertgeghgtwtg,Remove `babel-preset-es2015`.,False
6a29bfed8cfc86a1eb4c2d35c25f52aae04b9022,2017-01-27 04:55:08,philtay,Fix clause termination (#2562),False
e25633a02d7e351a4a1026854db0f814f674ec8e,2017-01-27 03:34:49,philtay,Canonicalize symlink on Linux only (#2560),False
5e107976f545f5c1086992779f67899ab2599f7c,2017-01-26 21:15:40,wtgtybhertgeghgtwtg,Bump `strip-bom`. (#2555),False
a1c13e931212f0ad2ef1eddd22f7e4af6e461978,2017-01-26 17:22:47,Grant Timmerman,"Remove `lockfileOutdated` description `$` to allow easier copy/paste (#2516)

* Remove `$` to allow easier copy/paste

* Remove more dollar signs",False
dfb6a2b636860c516c02b1272e4c2629f87025d3,2017-01-26 05:52:04,Simon Vocella,make add command working with latest tag if offline or preferOffline is setted (#2521),False
b0eb13a4e17c36f1c3afef05450bb92f632391d3,2017-01-26 05:45:45,Krs Joseph,Fixes yarn init showing [object Object] (#2545),False
8175bd3f6529abbcda8f0c0774cff7ed5c58563d,2017-01-26 05:34:06,wtgtybhertgeghgtwtg,Bump `inquirer`. (#2544),False
741bb680e4b4e0e340852fe767b5262f6a4c75a0,2017-01-26 05:29:26,Jake Faris,Sanitize add'l arguments if value contains spaces (#2551),False
e957e223c5bb0b70eea8262750730c5d46db3e11,2017-01-26 05:23:45,blexrob,"Fix install --production not installing used packages, fixes #2468, #2263  (#2537)

* Explicitly mark ignored deps of non-ignored packages as non-ignored (#761, #2468, #2263)

* Fix style nits",False
fff789e3e30b854f69a98a2fcf41e9165c965e7e,2017-01-26 05:19:26,Donald Pipowitch,"don't cache dependencies installed with file: protocol - fixes #2165 (#2443)

* added failing unit test for #2165

* fixed unit test

* updated unit test",False
93fa0f7c2857b5e9301d554b2b4c362d20988324,2017-01-21 05:18:50,Konstantin Raev,"fix: check for cpu and os constraints if the arrays are not empty (#2490)

* fix: check for cpu and os constraints if the arrays are not empty

* added tests fixture",False
49c02b3eed1ed92f8823d89932b5abfedb39e86c,2017-01-21 01:36:23,Konstantin Raev,generated new caches to fix tests (#2518),False
ddb9fa8a10415a9082d7deda8a314aaee2eab7e9,2017-01-20 21:11:59,Alex Saveliev,"Handling scoped packages offline (#2497)

- Scoped packages are located in `CACHEFOLDER/REGISTRY-@SCOPE/NAME` opposite to 'regular ones' stored in `CACHEFOLDER/REGISTRY-NAME`. Addresses yarnpkg/yarn#2453.",False
8482400ee1b5dbb467b6013cbf0c9b6810e8fecc,2017-01-20 20:38:09,Colin GILLE,"fix 2083 supportsArchive can be changed with nothing beeing cloned (#2431)

* fix 2083 supportsArchive can be changed with nothing beeing cloned

* improve fix 2083 supportsArchive can be changed with nothing beeing cloned",False
e8242cd098d5ffb59496d0f937fa04c54d67eeef,2017-01-20 17:26:49,Thomas Grainger,Remove .DS_store this should also be in a global .gitignore (#2506),False
65e89b5d02e06a15c65f13198c39271684c4f217,2017-01-20 17:22:42,Stefan Penner,"[FIXES #2096] fix relative symlinks of symlinks (#2454)

This makes yarn link work when $HOME/.config/yarn/link/ is itself a symlink.

----

The following commit forces symlinks to be relative:
https://github.com/yarnpkg/yarn/commit/36d73cc3bb0e3c4afcea4f25b06cc76b7b5531fa

This isn't ideal, although it enables some portability it breaks others.
For example, it is not uncommon for `$HOME/.config` itself to be be a
symlink: `$HOME/.config` -> `$HOME/src/stefanpenner/dotfiles`.

Now when running `yarn link` inside `$HOME/src/ember-cli/ember-cli` we
end up with:

```js
path.relative('/Users/spenner/.config/yarn/link/ember-cli',
'/Users/spenner/src/ember-cli/ember-cli');
=> '../../../src/ember-cli/ember-cli'
```

Which results in the link located at:
`/Users/spenner/.config/yarn/link/ember-cli` pointing to
`/Users/spenner/.config/src/ember-cli/ember-cli` rather then
`/Users/spenner/src/ember-cli/ember-cli`

This is because `/Users/spenner/.config` is actually a symlink pointing
to `/Users/spenner/src/stefanpenner/dotfiles/.config/`

---

This PR provides mitigate the issue raised in #2096, but reifying the
paths via `realpathSync` before deriving the relative path. This doesn't
fix all issues, e.g. symlinks cannot be changed after this reification.",False
edd1a07968d8d2e526d0c5ca00fd18ef80b553b3,2017-01-17 15:47:10,Konstantin Raev,"Typo fix (#2475)

* fixed typo and test

* skip test, still not fixed",False
dca82232f02236aa5d448699b75cdaaaacd1edaa,2017-01-17 15:29:53,Simon Vocella,"Install a package with latest tag, it looks for the latest dist-tag (#2471)",False
52891570be62e03665fe9a75591b2f8db4a10c81,2017-01-17 06:42:36,Konstantin Raev,added a broken test for #2263 (#2473),False
97c4583dafbd8e8fc96a5d132395b903650f52a8,2017-01-17 05:21:05,Konstantin Raev,"[CI] disabled 'install should dedupe dependencies avoiding conflicts 8' test in Travis OSX' (#2461)

* [CI] disabled 'install should dedupe dependencies avoiding conflicts 8' test in Travis OSX'

* removed unused line

* inverted condition",False
fda53e97b07d32982d9ada611588d4baedc7ff51,2017-01-17 05:08:49,philtay,Do not hardcode basedir in bin/yarn (#2455),False
9347540b09cc71d71f8651b2423ff8bbe3eeaf50,2017-01-17 05:07:06,Konstantin Raev,"fixes #2406 - don't create tag for preminor version change in master branch (#2407)

* fixes #2406 - don't create tag for preminor version change in master branch

* new line",False
c98df16b1d01dda2dd804c3da35ff6915649917e,2017-01-17 01:09:39,Konstantin Raev,"feature: check --verify-tree for verifying node_modules structure (#2419)

* feature: check --commonjs for verifying of node_modules structure being in sync with common.js

* refactoring

* refactored and localized

* lint fixes

* lint fixes

* minor fix

* added some tests

* added more tests

* removed wrong comment

* added deep check for tests

* renamed to --verify-tree",False
af4cc0ee08986e66c9fb54ace1f1ded1cbdf21eb,2017-01-15 00:41:58,Vladimir Agafonkin,"Add hash to cache path for non-NPM packages (#2074)

* use a more robust cache directory name for non-NPM packages

* add basic tests for the new cache paths",False
d2036360002354497df5e770291cce6490502727,2017-01-15 00:37:08,philtay,Canonicalize symbolic link (#2441),False
500bd03a02d7520d196880bbd6d86ebc0fbac124,2017-01-15 00:33:47,QWp6t,"Add `-loader` suffix in webpack, closes #2410 (#2447)

Previously, packages named with `-loader` suffix could be specified as loaders within Webpack without requiring the suffix to be named explicitly. Webpack 2.1.0-beta.26 no longer looks for `-loader` suffix automatically, and packages have to therefore be named explicitly or `-loader` can be added to `resolveLoader.moduleExtensions`.
See: https://github.com/webpack/webpack/releases/tag/v2.1.0-beta.26",False
8231aecd41a2fa6a01bfff757358aebe1a72d2f5,2017-01-15 00:32:17,Clayton,"Fix bug for #2117 - http url not working (#2449)

* test for https but fallback to http if necessary

* add lang key for https

* fix broken tests",False
9316ebd62750d0dd7e68325511bb228bcf9e7e5e,2017-01-14 22:46:20,Igor Redchuk,"Set boolean config values correctly (#2440)

* Fixes #2434",False
c3191986dd0c75214441b6c9160019014b1fa34d,2017-01-13 00:53:05,‰øûÁÅ´Ê±ü,"Treat some configs as internal to fix #2286. (#2422)

* Treat some configs as internal to fix #2286.

* use user_agent as config key for test

* Use es5 in files that won't be transpiled.",False
6d988fe5cc244e43d18ba854aee66d7437b60718,2017-01-12 21:01:39,Konstantin Raev,"[CI] enabled package-resolver tests (#2373)

* [CI] enabled package-resolver tests

Keeping npm-ml tests disabled for now because they are still broken.
Removed a test that suppports bower.json

* babylon resolver was too large + made all tests run sequentially

* fixed paths for package-resolver for windows

* fixed lint",False
e48cd2ab06a0f9ebbe501ec2e2f23175051a594e,2017-01-08 00:23:24,Pelle Wessman,"Fix check of scoped packages' sub-dependencies (#2295)

* Fix check of scoped packages' sub-dependencies

* Added test of scoped packages' sub-dependencies",False
244d6881d232e5fda194b0a07b7989567923e60b,2017-01-07 06:54:32,Konstantin Raev,v0.20.0-0,False
98e0ce78a497cd909f6e51276f7704ad61063412,2017-01-07 06:54:21,Konstantin Raev,v0.19.0,False
408152960f75536ebad1d001e67fb365bbc0e644,2017-01-07 06:54:03,Konstantin Raev,supported non stable releases by default according to https://github.com/yarnpkg/website/pull/338 (#2404),False
19c6300d0384b7fdb93fa1d39759548220f9dc9e,2017-01-06 22:51:47,Karolis Narkevicius,"Fix yarn pack command for scoped packages, fixes #1714 (#1897)",False
df8ff3613b21f9e83847ee00b121f154954330a3,2017-01-06 16:15:06,Kevin Ji,constants: Fix file path comment (#2399),False
6c56fb7719ffa03ec5fa8356a85f20a8b15afef5,2017-01-06 16:13:10,Kevin Ji,[CI] circle: Fix the yarn cache directory (#2397),False
a1192e596b85acb2f63daa1cbf30e662c2125310,2017-01-05 23:03:37,Kevin Ji,travis: Use the built-in yarn support (#2391),False
6656ee3717330fb93c616c0ce8d0d9c154585774,2017-01-05 04:17:21,Mauricio Saglietto,Add use of reporter lang method (#2269),False
a9eb571a85d2aa3c2255582ff93aca1bc37823fb,2017-01-04 23:15:42,Adam Miskiewicz,"Fix `yarn link` not linking bin (Fixes #1585) (#2271)

* Makes `yarn link` link the target package‚Äôs `bin` entries to the global bin directory, as if it were `yarn global add`‚Äôed.

Fixes #1585

* Add error handling if bin link destination already exists

* Run bin unlink before we unlink the whole package

* Updating error message",False
d4370f815157ced77afbc75e2f2572a2c120647f,2017-01-04 19:52:45,Konstantin Raev,"[CI] Configured Travis OSX builds to run in 1 thread for stability (#2386)

* [CI] Disabled OSX tests on travis again, stability

* try tests with less parallelism

* setting up travis to run in 1 workers and others in 3

* setting up travis to run in 1 workers and others in 3

* setting up travis to run in 1 workers and others in 3

* cleanup matrix a bit

* set limit to 3 threads for other CI",False
70a412f1a4cd1b41a24aab160bb0c782ae5d705f,2017-01-04 18:41:30,Lukas Geiger,"Remove failed to install optional modules from node_modules (#2375)

* Remove failed to install optional modules from node_modules

* Rename and fix tests

* Use async fs.exists

* Check command: Support optional dependencies",False
0674a95127b219d6773dc42198064b6b0abddbab,2017-01-04 17:16:31,Lukas Geiger,Don't push duplicated elements to config.rootModuleFolders (#2377),False
ece99d066f7849e267ed5da5be70c9b512ef11e3,2017-01-04 17:07:11,Lukas Geiger,Change log level of optional deps to warn (#2379),False
4fc2fe3ce4b19a90a3bbe2fd423bf543b3186f14,2017-01-04 17:04:28,Chris Chua,remove lines that cause tests to fail,False
e22f85fb879ffa3c6f68102b8790435809779cb9,2017-01-04 17:04:28,Flavio Signorelli,removed some comments,False
7bd57c5b73a16e3c5fbe3d048425a400c9438746,2017-01-04 17:04:28,Flavio Signorelli,removing console.log,False
e48275dd4d550dabe94e34d98faae76793d02649,2017-01-04 17:04:28,Flavio Signorelli,fix private ssh urls,False
38c7aa591b2352a2b31a94ef62e40bc4b4501920,2017-01-04 16:31:50,Konstantin Raev,"fixed lint issues after merging #2296 (#2374)

* fixed lint issues after merging #2296

* increased add.js timeout for add command",False
ba807f7071c313ca71aeddb6fbfa2b4f22520875,2017-01-04 00:44:28,Sanket Parab,"The output of `yarn add` with a non-existent version is messy (#2296)

* add inquirer prompt for searching package versions

* add test

* missing fixture folder

* code-review

* fix tests

* more cleanup",False
9d1f04fd0830bad2822b9f0ff8e2c49ec8c69d43,2017-01-03 22:56:13,Konstantin Raev,[CI] enabled node 4 in Travis builds (#2370),False
fdade5d74c95f251a10ab8582eb0ccafbc3b4764,2017-01-03 20:43:22,Ryan Stelly,"Fix `global add` on Windows (#1043)

* rename cmd link to cmd shim from .cmd.cmd to .cmd

* use !== instead of !=",False
e66026436a22d57afef017832c951a5604e5a11a,2017-01-03 16:41:44,Konstantin Raev,"[CI] flow is a dev dependency, removed it from prod dependencies, broken in #2307 (#2369)",False
867cf4f2e4fefee5b682b1b61fc360502834d70c,2017-01-03 16:07:20,Patrick Stapfer,"Upgrade to flow@0.37 / fix some typings (#2307)

* Adds inquirer libdefs for more exact typings
* Refine / Fix some flowtype errors (mostly in __tests__)
* Fix a small bug in src/util/map.js found by flow@0.37",False
cbf19f6bc9831ea881510be21dae2df64c7cb7da,2017-01-02 23:34:44,wtgtybhertgeghgtwtg,Bump `proper-lockfile`. (#2299),False
301f802f976cd668866a9462107294c70915dd5e,2017-01-02 06:20:49,Andrew,Remove all IDE-specific ignores (#2325),False
cdfe06c59d7a17af2906d2e3c2e231d8115fdea6,2017-01-02 06:20:15,Igor Redchuk,Fix #2281: prevent hanging when cannot write yarn-error.log file (#2328),False
52adb292c738739b31126683c80e306afbe8cbd8,2017-01-02 06:16:29,Konstantin Raev,"Tests stability improvements (#2362)

* Silly fix: Node on Ubuntu on Windows crashes when there is a for-of loop followed by an exception

* Run global install script only on CI because it modifies user's environment

* fixed tests setup when fixture location was not set - it would copy full folder otherwise

* Revert ""Silly fix: Node on Ubuntu on Windows crashes when there is a for-of loop followed by an exception""

This reverts commit 68179d03e23ee71b78100574f263e3a58c7fa81c.

* cleaned up herlper logic when fixture name is not passed

* refactored test: Unhandled promise warning

* fixed lint error

* fixed lint error

* fixed lint error

* fixed lint error

* moved temp folder creation to an fs function and added a bit to omit folder name collisions",False
efa1c7a84082589e6f8c375c3fcbc82f07e7a238,2017-01-01 03:41:10,vpoverennov,change up to alias upgrade (#2363),False
f3bfc9cf5dd0089e1dd4920d153954ffa91881b6,2016-12-25 08:06:01,Konstantin Raev,"updated tests caches (#2338)

* updated tests caches

* updated hash in test",False
31fbafe30f2d573e2b29737c2fe3d41177993993,2016-12-20 11:56:28,polizz,"Simplified test due to inability to mock process.platform (#2262)

The original test asserts that window cmd line formatting is properly applied or not applied, for only the target platform the tests are executed on - that will have to be good enough.

It is not possible to test both branches from one platform because the path module employed in the test alters its export based on process.platform in Node bootstrap, well before one can mock it.",False
ffefcabb003f1641b65d50e570eee1931ff27b52,2016-12-20 11:53:58,polizz,(2301) Release notes in Chocolatey package,False
8f3cb99ca45871ff188c4169fd0272327cac9157,2016-12-19 20:16:51,Nick Olinger,"Disable progress bar (#1962)

* Add support for disabling progress bar

* after config is initialized, check global yarn config for disableProgress

* Add utility function to disable progress on base-reporter

* Add base reporter disableProgress test",False
6972396c2308b1e0f063bd866b0d1b3fb166c2df,2016-12-19 03:12:21,Igor Redchuk,"Fix adding package with name like one of the options (#2268)

* Fixes #2112",False
2e79c5efc00eea37e90e91e2c2407cfa67eaa233,2016-12-17 17:06:12,Konstantin Raev,"Fixed #1242 - missing transitive dependencies (#2279)

* Fixed #1242 - missing transitive dependencies

* nits and fixes

* added a few more tests that cover current behavior

* redisabled test

* typo fix

* typo fix

* fixes for @cpojer

* comments",False
eb95e1593000ca42cc6119da48b7983a73e024bd,2016-12-16 16:49:45,Simen Bekkhus,Set tgz files as binary in git (#2273),False
f14597c00034b692105516fa44848bbef0ae1404,2016-12-16 04:41:34,Andrew Monks,"Removes patent/license boilerplate from last two remaining files (#2267)

* Remove patent/license boilerplate

* Removes patent/license boilerplate",False
1df5359a66346aedf5b654e42b993eafde0c6a0f,2016-12-15 21:49:09,Alex Brazier,"Allow production=false flag to override production ENV (#2223)

* Allow production=false flag to override production ENV

* Set production config flag in one place",False
24199a0091196144ba373e31afde199dc4e077ac,2016-12-15 20:19:19,Thomas Verfaillie,"fix-679: empty lockfiles with no dependencies (#1703)

* fix-679: add the test

* fix-679: fix test after merge

* fix-679: add fix on install patterns length",False
73d9e70cc7c84ee1cd5b56c64e668a7d54519e52,2016-12-15 10:55:34,Andrew,"Increased specificity of Windows platform check (#2262)

* Increased specificity of Windows platform check
#2261

* Extended tests for #2261

* simplify win32 check in run command
#2262",False
35ca8605817ee22068d6cb3fb088eabebed36933,2016-12-15 10:16:40,Brian K. Christensen,"Support interactive commands in standard MINGW as well (#2243)

* Support interactive commands in standard MINGW as well

Previous fix only supported some old configuration of Git bash
provided by Git for windows, newer Git bash use standard MINGW
which uses a different `uname` but the fix is ultimately the same

Github: #743

* Refactor: use better variable name when determine to use winpty

* Support both MSYS 32bit and 64bit terminal emulators",False
6a317c276e7bb170255ca609a56b59cd5c870444,2016-12-14 11:37:48,Daniel Lo Nigro,Convert scripts/install-latest.sh to a shim that loads the real script,False
8809eddf51c0c6d2046881c2cc3f2c402c96f695,2016-12-14 11:32:36,Alex,Fix scripts cmd slashes for windows (#2082),False
2843f24fe5500e3c00ec699be55129a18f14a84a,2016-12-13 21:27:53,Rodrigo Fernandes,"Add version lifecycle step to the version cli command (#2128)

Like npm having the option to perform commands during
version publishing is important. This new lifecycle step should
add npm compatibility to the version cli command.",False
546c970551f47ae4ced2e4d90386ec434607009c,2016-12-13 20:50:41,tuures,"add package name to warning messages about unmet/incorrect peer dependecy, fixes #1556 (#2207)",False
f0541aa1b8b7c693f44c832ad5b7a42942271238,2016-12-13 20:48:22,Andrew Pinkham,"Fix #2177 - Remove GLOBAL_INSTALL_DIRECTORY const (#2216)

Replaced by ~/.config/yarn, as seen in the getDirectory() function in
src/constants.js and the CONFIG_DIRECTORY and GLOBAL_MODULE_DIRECTORY
constants.",False
44d9f87d5cd7c24cfe3be53f48d119c9a0a43f39,2016-12-13 20:45:50,Daijir≈ç Wachi,"Normalize the author and repository the fields (#2219)

Fix for #2179. The interactive prompt of `yarn init`
can't display the nested sub-question for the questions
when there are no default values of the author/repository
and the fields have Object values in `package.json`.",False
85026be29e0bdc223dff74b95d2c68fa6669af90,2016-12-13 20:31:29,skratchdot,"Small aliases refactor. (#2236)

* fix eslint `sort-keys` rule

* seperate shorthands and affordances",False
b1166d786fbe842ab79fa8bea44701c1040703f2,2016-12-13 19:10:05,skratchdot,"Add ""Too many arguments"" message to `info` and improve code coverage (#2235)",False
8515f9b9ba5000bcbb456fb3404bcc6467c96409,2016-12-13 07:59:58,Brian K. Christensen,Fix #743 - make yarn interactive commands run in Git Bash/MSYS env (#2230),False
90245484d49b7f0e03c5c656e5c361a02fb13556,2016-12-13 05:48:23,Mathias Vestergaard,"Fix an issue in package hoisting (#2164)

* Fix an issue in package hoisting

When a dependency is ignored in a dependency branch where the parent is ignored
it is also sometimes ignored in branches where it is still required

* Move test into integration.js and rename the test

* Revert code changes and skip new test for now",False
7fe2e53a59d5c5d256459854dd7ad4d4ff874682,2016-12-12 05:03:04,Andrew Pinkham,Fix #1941 - Allow yarn script to be linked (#2217),False
89f181491e1258032c2b0365855ee2f1c37a913d,2016-12-12 03:01:37,Juan Soto,"Add project commands that `yarn run` could run (#2215)

Close #2194",False
1f2c74295402e8b868c994fbe28fde42715d8d71,2016-12-10 23:51:48,Randy Coulman,"Show homepage of outdated dependencies (#2209)

* Show homepage of outdated dependencies

* Don't compute max length of URL column

Since we‚Äôre not padding that column, there‚Äôs no need to compute its
width.",False
d5da81e7cb49fc992ec31a04ab0e6283465732f7,2016-12-10 05:23:01,Igor Redchuk,"Support field paths in the info command (#2183)

* Support field paths in the info command

* Also default to local package when second arg is not specified
* Fixes #2175

* Add tests for info command",False
c2a84a12c6317f86406b18f07eb8a26e9aa8660a,2016-12-09 02:03:12,Joe Esposito,Allow 'production' ENV to take precedence over NODE_ENV (#2057),False
ee6cb2ffa5916b4fe1cb7dfee46e9acc2bb18d5b,2016-12-09 01:01:07,Albert Fern√°ndez,Apply the network-concurrency option to the package fetchers (#2178),False
d1d5343082cd5a3b2020962c0bb6f2d6fb1ac4f3,2016-12-08 21:43:38,Rifat Nabi,"Fix pack includes files from `node_modules`, closes #2047 (#2063)

- Only look for mandetory files (`package.json`, `readme`, `license`, etc) in root
- Stop `fs.walk` inside ignored dirs (`node_modules`, `.git`, `.svn`, etc), makes `pack` way faster",False
8a12b1b2a206ac3bc092450041250487d2481cf6,2016-12-07 18:08:00,Greg Poole,"Fix scoped bin paths (#2163)

* Add failing tests for bin path normalisation from scoped package name

* Add fix for bin normalisation for scoped packages",False
066410353071d090e66f442a33d61b4947f79856,2016-12-07 18:04:06,Igor Redchuk,Do not output wrapper for cache dir command (#2158) (#2159),False
24ce6397f01ee18fb5e55523eb1b3b2431f2b648,2016-12-07 17:26:30,Alfredo Matas,"Use effective uid to set the userHome variable (#2150)

* Use isRootUser function instead USER environment variable
 * Fix #2123",False
6cca59fc84423e07e34191e8d8e3ceb8b348009d,2016-12-07 16:52:45,Tim Griesser,"Fix for #1214, linked scoped dependencies should not be overwritten (#1970)

* Fix for #1214

Scoped dependencies are nested one folder deeper than traditional
dependencies, the possiblyExtraneous needed updating to work with the
actual dependencies, not the entire scoped folder.

* Fix typo/variable renaming",False
776359e92850ba5b93546371554f606ac4554d33,2016-12-07 16:29:56,Karolis Narkevicius,Fix authentication when @scope:registry does not specify trailing slash (#2168),False
eb66b9c3dfe3e32a95f51c81f483d00c4beb8ad7,2016-12-05 20:56:36,XP,create cache folder in temp 'cwd ' folder (#2157),False
d98ec45b4d398128b756ae53bfa24c52f03d382a,2016-12-05 16:29:34,Albert Fern√°ndez,Add support to max network concurrent requests (#2129),False
8a235bb5777d535f16d93bd55c31ba47206d582f,2016-12-05 16:25:13,Rifat Nabi,Add support for --exact & --tilde in upgrade-interactive (#1858),False
039b176112c7ad9d3000148c104f98262706c2ed,2016-12-05 16:21:38,Mathias Vestergaard,Fix an issue with cache config tests modifying actual config (#2144),False
ad11748d218d0d2d937ca4e739168660193168dc,2016-12-05 16:05:17,Yong Wen Chua,"Add --frozen-lockfile to fail if Lockfile needs update (#2052)

* Add --frozen-lockfile to fail if Lockfile needs update

* Add period at the end of the message

* Fix missing require due to rebase",False
dcc48934a35ac1e00d3c4d073f094f2f0806a86d,2016-12-05 00:28:49,Nick Olinger,remove engine from upgrade options as it's supported globally. (#2145),False
6505d52ff4d4eb9b811bbb00c50af06ee7ac4b44,2016-12-04 19:59:21,Konstantin Raev,v0.19.0-0,False
59fd84fddd8fb8f59966e66d21fb1a5519957f22,2016-12-04 19:59:16,Konstantin Raev,v0.18.0,False
8437487cc57043e8ea83cdc2f5983ef8503380d1,2016-12-04 19:57:41,XP,"add cache-folder config option for setting cache folder location (#2046)

* add cache-folder config option for setting cache folder

* unit test for cache-folder config

* test the priorities of different cache folder setting methods

* run the cache config tests in sequence",False
68df0ead8031dd77e50a6cc1a847eaf711ddcc89,2016-12-04 19:55:23,Karolis Narkevicius,"When tarball fetches fail, report the status code instead of ""invalid tar"" (#1958)",False
5d0d40265f122c5c7e3309add3338ee455113c0e,2016-12-04 19:19:56,Tal Avissar,Better documentation for the readMenifest method and the maybeReadManifest (#2121),False
d95dd09131204a130d0e21a6523367b579ca041c,2016-12-04 03:12:08,Kevin Goslar,Match CircleCI badge visually to the other badges (#2131),False
6e7d396451ed7622a92f4a25d9370e5724c54635,2016-12-03 20:28:39,Sebastian McKenzie,Refactor visibility to fix numerous environmental bugs (#2116),False
1ea09c2969994648fcb7c4f3eb3e3753d132e440,2016-12-02 13:06:51,Daniel Lo Nigro,Fix AppVeyor deployment webhook,False
f49c577b62784f0ce5564c621ff65780183c4abe,2016-12-02 00:14:57,Daniel Lo Nigro,"Use regex rather than Convert[To|From]-Json to update installation method

Closes #2065",False
718d4ed9ccbd1b4c945991ba353708a2d111db43,2016-12-01 18:24:11,Cristian Carlesso,"Fixes race condition on yarn install mutex network (#2092)

* Fixes race condition on yarn install mutex network

* Better comment on  as per @bestander request",False
d8b72f3369ae9381976da45b28576790f66de902,2016-11-30 02:26:23,Denis Gorbachev,"Remove packages in non-empty namespace (#1992) (#2036)

* Remove packages in non-empty namespace (#1992)

* Add a test for removing a single scoped package (#1992)

* Minimize fixtures for scoped-package test (#1992)

* Fix remove command test (#1992)

* Inline subfilepath (#1992)",False
2a0afc73210c7a82082585283e518eeb88ca19ae,2016-11-29 18:19:51,Denis Gorbachev,Fix `which` check during yarn install (#2061) (#2071),False
caa94a6404328ce801f47eb7dcae9a896950a199,2016-11-29 15:16:41,Bouke van der Bijl,Make yarn check --integrity behave as yarn install when flat (#2024),False
8779130a40a1a1de158088123a3ed775586d69d8,2016-11-29 05:53:13,Tobias Kloht,"bugfixes to yarn pack, retry of #1464 (#2062)

* add tests for pack with files-array

* include mandatory files if not in files-array

npm pack includes some files even if they are not included in the ‚Äúfiles‚Äù field in package.json. This commit creates the same behaviour in yarn pack.

* explicitly exclude dotfiles in pack with files

if files is used in package.json all other files should be excluded. Files with dot as first character have to be excluded explicitly because minimatch will not match them by default.",False
ac90c23be2766229e46b177f9f7f80916ee3e663,2016-11-27 09:14:33,Rifat Nabi,"Add global add prefix test (#2025)

* Add global add prefix test

* Add yarnrc to reset prefix set by npm test

* Remove concurrent from env test",False
3efcbbd0f490cf9117666c86817f9a2a946409ab,2016-11-27 06:36:00,Pascal Berger,Update package sourc to link to Chocolatey package,False
1696029ff593d091d9c4a55a1892365ce8628d53,2016-11-27 06:12:31,Alexandra Parker,"File url normalization (#1498)

* normalize manifest in FileResolver

* add a comment",False
fa16b8b2c6ee34a15b9fd5370600a6dd6a67d4c7,2016-11-27 05:41:26,Paul D. Hester,"add build option to generate sourcemaps (#1688)

running gulp --sourcemaps will generate maps in lib
can also run gulp watch --sourcemaps, etc.",False
1e7249966890c22df0c1564660a21a54ce17370b,2016-11-27 05:29:39,Konstantin Raev,"Revert ""Bugfixes to yarn pack, partly fixes #755 (#1464)""

This reverts commit 949c9e58526093765a27f575905e6abf72361bbc.",False
949c9e58526093765a27f575905e6abf72361bbc,2016-11-27 05:23:25,Tobias Kloht,"Bugfixes to yarn pack, partly fixes #755 (#1464)

* add tests for pack with files-array

* include mandatory files if not in files-array

npm pack includes some files even if they are not included in the ‚Äúfiles‚Äù field in package.json. This commit creates the same behaviour in yarn pack.

* explicitly exclude dotfiles in pack with files

if files is used in package.json all other files should be excluded. Files with dot as first character have to be excluded explicitly because minimatch will not match them by default.",False
c8935ea6b0216a35fd4bc9bd507027ce3cf51d44,2016-11-27 01:11:21,Hendrik Purmann,"Add public repository hint for issue creators (#1983)

Instead of copying snippets and creating files locally, I want only clone a provided repository when looking into an issue.
This advice will hopefully be followed by some people and thus simplify reproducing issues.",False
94eda12ef035169e5d8393ab29b6d36808c3b5ca,2016-11-27 01:05:31,Mathias Vestergaard,"Properly skip installation of packages that do not need to be installed (incompatible optionalDependencies for example) (#1997)

* Properly ignore package using ENVIRONMENT_IGNORE

Set the ignore flag using ENVIRONMENT_IGNORE visiblity.
Add the compatbility check as a step of the install hydrate, and call hydrate from install check.

* Do not propagate ENVIRONMENT_IGNORE to dependencies

Only set it on the directly affected package, and then ignore those
packages in the hoister

* Remove unnecessary ignore check in linker

* Add tests",False
58e24ca6be7a34022a2d4ab7e635831967dbebf5,2016-11-26 05:57:16,Pascal Berger,Update build script so that it can be run from any directory (#2041),False
3cf33748172cef753423e4455043ead6f059bcc5,2016-11-25 21:41:45,Konstantin Raev,removed /localhost/.bin from git so that it is not conflicting anymore (#2034),False
c3fb6456bce8f16e8dea25cb0e1cade4cbc47f0e,2016-11-25 16:42:07,Denis Gorbachev,"Fix duplication of available bin commands (#1991) (#2019)

* Fix duplication of available bin commands (#1991)

* Fix lint errors

* Move the code out into a separate for-loop

* Revert ""Move the code out into a separate for-loop""

This reverts commit a968fd0701b93354d33c6c40f438ec0883042e05.

* Use Set instead of Array for performance reasons (#1991)",False
42b47592ed2904c05c509d76b11c1e1e9d1ca033,2016-11-25 05:15:43,Daniel Lo Nigro,"Fixes two issues with the install script: (#2027)

- Old versions of Mac OS (10.10 and below) require the `-t` option for `mktemp`
 - The check for GPG wasn't returning correctly, and tried to run GPG even when not available

Closes #2012
Closes #1984",False
099e76dc075763427605a6a63906127402370bb2,2016-11-24 21:18:09,Sebastian McKenzie,"[WIP] Add verbose flag - fixes #763 (#1994)

* Add verbose flag - fixes #763

* fix lint

* fix lint add verboseInspect method",False
b5abc42ae591b2caf31d1cb54e9dfc774e6be945,2016-11-24 20:21:51,Sebastian McKenzie,Don't output header and footer when json flag is passed (#2022),False
191b030a451e37fd1adb60ad597eb4499b6e14b3,2016-11-24 20:21:13,Sebastian McKenzie,DRY up command tests (#2007),False
c505b1203d57a004968dbd0a4b99402be47215a1,2016-11-24 17:45:27,Denis Gorbachev,"Update CONTRIBUTING.md to reflect the necessary steps (#2020)

* Update CONTRIBUTING.md to reflect the necessary steps

* Fix CONTRIBUTING.md

* Fix CONTRIBUTING.md

* Replace npm with yarn",False
3ef999cebc606622eade220cbf17f57f9debeebd,2016-11-24 16:34:29,Peter Janes,Log the artifact that caused the error when a malformed request is found (#1996),False
dfeabcc9b6b4d4ea0ed38b6142bdc0a86c7d2431,2016-11-24 16:18:59,Daniel Lo Nigro,"Automate release of Windows installer. (#1999)

Closes #1977",False
2a4a56ff8a79747cbe322c738736fc53a072d98b,2016-11-23 20:16:24,Scott Busche,"Remove duplicate --production flag from licenses (#2005)

No need to add --production flag explicitly to licenses as it's already a
global flag. This also fixes the --production flag from appearing twice
when running `yarn help licenses`",False
45a32e0bfe6596437a485fe65edbd6beeb0f1310,2016-11-22 19:58:57,Jeffrey van Hoven,Actually use the flag (#1936),False
5394cadc7556dd67935812114475aee602b61c37,2016-11-22 19:58:30,Daniel McGraw,Rename ls command to list. (#1940),False
47ffc523d0d66580b6ae92f66e3c42a57e4e164b,2016-11-22 12:03:08,Daniel Lo Nigro,"Verify GPG signature in installation script (#1949)

* Verify GPG signature in installation script

* Add YARN_GPG environment variable for omitting GPG check",False
a870497417081fce59d83a7ac1bc7e58eca5fb7a,2016-11-22 05:03:34,Hendrik Purmann,"Fix .tar.gz pattern matching

Closes #1973
""tar.gz"" actually [is a node module itself](https://www.npmjs.com/package/tar.gz)
Any real .tar.gz will have the preceding dot in the file extension.",False
5ee3721c08dc9a052cbce1b1f7c40663a1a14184,2016-11-21 17:27:38,Sebastian McKenzie,add a cache breaker to the yarn cache based on the current version to prevent dependency shifting (#1965),False
73ea5b47b50ec906dfdb325d1b0711767502c908,2016-11-20 05:13:09,Daniel Lo Nigro,Delete Docker container after test runs,False
b84fde34600bc6bf91a01ea4796ebf3bd8bff0d3,2016-11-19 21:12:48,Robert Axelsen,"Add usage section to README.me with link to docs (#1950)

Upon looking for basic usage commands I discovered that there is no
mention of this in the official README.md, just an indirect link to
the installation guide section of the official documentation. I
therefore propose to add a separate usage section, and/or a
documentation section with url to the official documentation for
further reading.",False
0ea4c68a35e03ebb3ba68de61b27a44279932493,2016-11-19 21:12:21,Artem Sapegin,Only highlight changed part of the version in upgrade-interactive. (#1951),False
99916d4c519fd210923f5fe2dcbb1341725903ba,2016-11-19 20:55:18,Karolis Narkevicius,"Fix request authentication for scoped private registry tarballs (#1666)

* Fix request authentication for scoped private registry tarballs

Yarn correctly sends authorization headers when resolving metadata, but
when it's time to download the tarballs, it calls registry.request
with a full tarball url. This causes the getRegistry() function to
incorrectly return the DEFAULT_REGISTRY url which means the authorization
headers are no longer sent. The response in this case is a JSON error
object instead of a tarball file. Untaring fails with ""invalid tar file""

* Don't assume anything about the registry URL, read registries from config

* Add a test for installing private packages requiring authentication

* Change the authed package testing strategy to be more local

* Include non scoped registries in available registries list

* Unnest the authed pkg test, use FlowFixMe for afterEach",False
bacf1fbe76cf2dd038efbfe210012905448f1bd2,2016-11-19 19:01:26,Nick Olinger,"fix todo message when url not found on hosted git (#1947)

Close #1921",False
d047b1851315219721cb4c888c58b09fbf9fab87,2016-11-19 17:47:24,Daniel Poindexter,"Resolve scoped package paths during linking on Windows (#1866)

* Resolve scoped package paths during linking on Windows

* Normalize file copy destination when creating hoist manifests

* Add flow types to package-hoister unit tests",False
c9500aba370130d86b1e67930b57f2081b83d27d,2016-11-19 03:02:11,shahmirn,"Fix: warn instead of error when a shrinkwrap exists in the cwd (#1942)

* Fix: Need to remove file: from the prefix, not the suffix.

* Fix: warn instead of error if an npm shrinkwrap file exists.",False
328b4e1f13fcbc569b47f9c9a1a1a19e753f277f,2016-11-19 01:42:25,Konstantin Raev,made test cross platform (#1939),False
3f765c354306bd8e6ca22b3bb333542d1a8fd6e2,2016-11-18 22:48:06,Sebastian McKenzie,"When saving build artifacts, rather than copying, save list of files to ignore (#1935)

* When saving build artifacts, rather than copying, save list of files to ignore

* fix lint and tests

* fix test fixture",False
5be113bb9c75081954b11ada89850228fc39b899,2016-11-18 10:05:14,Alan Wong,"Add `--version` flag to install script (#1928)

* Add `--version` flag to install script

* Lower case variable names

* Declare `latest_url` as a local",False
6cee0fc3b5afc564ec94ac71d4772f382cb22449,2016-11-17 21:52:44,dormond,"Warn when man or bin directory not found but don't crash (#1663)

* Warn when man or bin directory not found but don't crash

* Mispelled ENOENT

* Moved fix call below defining of warn function

* Change try/catch to fs.exists check to be consistent",False
c77ade1812f445e9a79a2d585b2b4fd60ee6ec29,2016-11-17 19:44:02,Hendrik Purmann,"Gracefully quit when using unsupported node version (#1901)

Fixes #1898",False
05bf97728cbe92f034f7d4596830f481a65fe8fa,2016-11-17 18:18:00,Igor Redchuk,"Infer EOLs from existing file or use OS EOL (#1911)

* When writing lockfile, yarnrc or manifest file, keep line endings as in existing file
* Implemented as proposed by @ahelmberger
* Resolves #1061",False
4ce67f3d5da3ba99c3e8718100883e9f145ce125,2016-11-17 15:42:37,Neil Kistner,Ensure cache diretory exists before using roadrunner (#1902),False
75b65ee799eda6e2257d35b961b50a6b1f9d43c1,2016-11-17 04:56:58,James Ide,"Remove warning about depending on packages with the same name as Node built-ins (#1790)

The reason for this is that Yarn is useful in many JS environments such as browsers and React Native, which don't provide the Node built-ins. Depending on polyfills is the right thing to do in that scenario and the reality is that people intentionally publish these polyfills under the same name as the Node built-ins (e.g. url and buffer).",False
1180f0fb0e20281cf09303d18281ff9f6a0e2e6a,2016-11-17 01:47:07,Thomas Schaaf,"Skip setting hash if hash was not set previously (#1871)

* Skip setting hash if hash was not set previously

* Add end to end test for installing a github package

* Update README.md

* Fix eslint

* Reverse accidental fixture changes

* Add unit tests

* No end to end tests for github installs",False
32cf644da6cbb8bc0b1ba2cae1be50195278b4f4,2016-11-17 00:17:46,Daniel Lo Nigro,"Remove NodeSource repo from Travis build (#1891)

I don't think we need this any more",False
8f9fc6b64792750d306d14bad9ad0136792208b0,2016-11-17 00:07:49,Neil Kistner,Consolidate outdated logic and check for wanted > current (#1865),False
135fd87661a78e982283e086863ba7a76546a789,2016-11-16 23:44:33,Neil Kistner,Create lockfile when missing even when integrity hash matches (#1888),False
b76ac934a2d738aaf8c103801c8dc7f80ba8cf3f,2016-11-16 23:39:05,Rifat Nabi,Fix global add linking issue (#1889),False
1c762137518b36e58b98a1aedffb214fe6a0d27f,2016-11-16 22:09:02,Rifat Nabi,"Add very basic test for global add (#1878)

* Add very basic test for global add

* Add assertion & Fix typo",False
22d75d3a53ec91a1b7eb8444053c89f33efd0b03,2016-11-16 17:12:08,Anthony Ross,"Include description for --ignore-optional (#1868)

This PR resolves issue #1857.",False
92399c4b323ce8033685b170f74a566e7879a266,2016-11-16 07:28:59,Yong Wen Chua,"Set UID and GID of untared files to zero if user is root (#1837)

* Set UID and GID of untared files to zero if user is root

* Remove second platform check",False
e51c7ea402a9575f6886000badd2197832364632,2016-11-16 03:45:38,Konstantin Raev,reverted Nested executables #1210 to fix #1823 (#1867),False
16a5268f1702fbfa54b89b995d7e86f48cb568bf,2016-11-15 20:29:46,Rifat Nabi,Fix `expected manifest` on global add (#1840),False
567f8af51ab6ce67d345177ccc4cc514680827fd,2016-11-15 20:26:06,Sebastian McKenzie,Don't outpudate list if all dependencies are up to date - fixes #1843 (#1846),False
4b93ea533772428a511a075d55e5ab14a971ca2e,2016-11-15 17:17:49,seongahjo,"Minor misspell (#1811)

yarn -> Yarn",False
8ead0c7fe8cdd478493aab66b0c1ff4180ac924a,2016-11-15 04:33:42,Kevin Huang,Fix version typo on install.js (#1828),False
15d011274eabe89a5fe8d5d32a966ba48c92755e,2016-11-15 01:52:21,Sebastian McKenzie,"Add automatic check for updates that nags the user when there's a new version available (#1429)

* Add automatic check for updates that nags the user when there's a new version available - fixes #1138

* remove self-update

* add support for updating yarn to tarball installer

* use new installationMethod package.json value to output update command

* address comments from @Daniel15

* remove self update tests",False
e9245504ddd064ae43d23d70781b09d84134748f,2016-11-14 22:28:03,Konstantin Raev,v0.18.0-0,False
6aae4d35bc67719ceb056dc0ea95a96f74a726c1,2016-11-14 22:27:58,Konstantin Raev,v0.17.0,False
1dc3c8bf87f7dee8c346cb12fba40bf6e868d8cf,2016-11-14 22:24:02,Konstantin Raev,limited number of cores to be used in test runner (#1814),False
d202c734df7a0ac7d4e29311f4d356f0496ab96f,2016-11-14 22:07:01,Neil Kistner,Replace `.includes` with `.indexOf` for older Node 4 versions (#1813),False
5c84c656f0bbcb7778efa4fde5efb8c737e5a272,2016-11-14 19:38:37,vvm-broadsoft,Add support for 'ca' config file option (#1742),False
96a0fbb94e8c820b5d5e4061cea6240e318b570e,2016-11-14 19:05:26,Sebastian McKenzie,"Remove crappy folders from node_modules in dist tarballs (#1810)

* Remove crappy folders from node_modules in dist tarballs

* add windows version of scripts/clean-node-modules",False
b4e42e3e73a3d714fd44cc0d3968cf33e43a03c7,2016-11-14 18:46:59,Chris Trevino,"Allow token replacement of .npmrc configuration with env vars (#1207)

* test IGNORE ME

* Update npm-registry to inject env vars into npm configuration the same way npm does

* Add type annotation to config object iteration

* Update envReplace function

* Move env-replace function to a separate util module. Add unit tests

* Correct the env-replace tests

* Updates per @kittens' comments",False
42dc14e867062fced0f99fb0cceab6559295b727,2016-11-14 15:42:25,Neil Kistner,Fix `yarn ls [package]` command to filter properly (#1792),False
a5db1cdb588c477e8a5a820a30f59e369a0ca944,2016-11-14 15:41:58,Jake Goldsborough,"making link command warn instead of throw an error if (#1793)

link is already registered",False
3342c47353058f87eb43793f18de1a16e7f3025a,2016-11-14 15:39:25,Neil Kistner,Fix `yarn run [script] [-- <args>]` command usage (#1788),False
ecba5f9ebbb42833ec4feb2c3f38f2d014d86445,2016-11-14 15:39:08,Rifat Nabi,"Update outdated condition in upgrade-interactive (#1791)

* Update outdated condition in upgrade-interactive

* Minor refactor sorting code

* Fix $FlowFixMe for process.stdout.rows",False
3ed303995b1dbf2123d8b90d6336f859b47e2632,2016-11-12 00:50:29,Neil Kistner,Fix cli aliases test (#1789),False
fcf6cfa156d853b4519e14edf95840378c5424b6,2016-11-12 00:11:04,Sebastian McKenzie,Merge branch 'torifat-feature/update',True
b6f3aec6b6fb4c2186cbf70e2d3701ac755f04b4,2016-11-12 00:10:22,Sebastian McKenzie,rename update command to upgrade-interactive,False
1d5ae4218fe3a641791462ada8c8038ba083d65e,2016-11-12 00:08:44,Sebastian McKenzie,"Merge branch 'feature/update' of https://github.com/torifat/yarn into torifat-feature/update

# Conflicts:
#	src/reporters/lang/en.js",True
0c17423bef359f058fde90c6138b0243e0949e69,2016-11-12 00:08:19,Sebastian McKenzie,Make existence of manifest optional when performing lifecycle wrapping - fixes #1747 (#1787),False
b82512387b6dc3fc2c30a5d21307439caada995d,2016-11-12 00:04:30,Mark Vayngrib,"fix readme detection (#1533)

* add breaking test for readme detection, a la the sjcl module

* check all readme candidates",False
6c2155610349af00944bc692b78f6880fbec32a7,2016-11-12 00:03:27,Jan Olaf Krems,"Delay visibility propagation until deps are known (#1739)

Fixes https://github.com/yarnpkg/yarn/issues/761",False
286efb93106471d20cd1e458043c04851dfae935,2016-11-11 12:12:05,Daniel Lo Nigro,"Directly add NodeSource repo in end-to-end tests, rather than using their shell script (#1782)",False
86ff2c6a7844eb8adfab3f74c480f8b82c3c9e06,2016-11-11 00:05:29,Konstantin Raev,made test non concurrent + fixed lint (#1777),False
136a4fb8dd74f6a012d983f70b5775529e7d525a,2016-11-10 22:56:28,Konstantin Raev,"lockfile is rewritten only if there are substantial changes (#1712)

* fixed that lockfile is not rewritten when there are no substantial changes

* lockfile is rewritten when --force flag is used

* mend

* fixed test",False
351270f08755a4150a83085756be24a24ac0024e,2016-11-10 22:00:19,shahmirn,"Fix: Need to remove file: from the prefix, not the suffix. (#1775)",False
05f9f64067c4e3c2c0c64de0d216bf202ac57a03,2016-11-10 21:33:26,Konstantin Raev,"Add integrity refactor (#1757)

* made add command generate correct integrity hash

* enabled test

* lints

* fixed tests

* fixed flow

* extraceted resolver.replacePattern

* extracted duplicated code",False
ec8ec8ac8b0eb459cf632cf26facb36615300124,2016-11-10 16:25:53,Andres Suarez,"Use deterministic sort (fixes #1308) (#1755)

* Use deterministic sort (fixes #1308)

* Simplify compares",False
e089081680cd84538adde9dcafa6df3a4e7c32ac,2016-11-09 20:59:04,Konstantin Raev,"made integrity hash to be generated based on lockfile entries, not lockfile content (#1708)

* made integrity hash to be generated based on lockfile entries, not lockfile string content

* fixed lint

* added resolver.init to the top of install.init to get correct integrity hash calculation

* moved integrity check to after dependency resolution

* fixed lint issues",False
abb4f7f048a319695aa940c5753469fd606feaeb,2016-11-09 19:53:13,Konstantin Raev,"[CI] moved ghr out of project (#1246)

* moved ghr out of project

* trying ghr in /usr/local/bin

* Revert ""trying ghr in /usr/local/bin""

This reverts commit 0a29c97e123e111a15aaf36bab6e091dcb83de62.

* Revert ""Revert ""trying ghr in /usr/local/bin""""

This reverts commit 6bfd63d389c500ac4d62f7a098f51913799c3726.

* added sudo

* fixed wrong path, doh",False
8e9ec886cca32a126528f49772714ce1e718e9cb,2016-11-09 19:52:13,Konstantin Raev,added a test for #1733 (#1754),False
eae3317292930f7ded12d2c38c38e9d21f693f55,2016-11-09 11:16:17,Daniel Lo Nigro,"Create blank package.json during end-to-end tests to work around #1747 (#1748)

* Create blank package.json during end-to-end tests to work around #1747

* Other misc changes:
 - Set `DEBIAN_FRONTEND=noninteractive` so apt-get doesn't complain about not having a tty
 - Grab GPG key via HTTP instead of keyserver to avoid flaky keyservers",False
bee5a8a9b333d5348ac960b40d3399ca786cdbde,2016-11-09 04:17:57,Daniel Husar,Move eslint-plugin-react to dev dependencies (#1741),False
d27cdd548fa9b505c58ef8ab35e0e07e62ab9af0,2016-11-08 13:10:51,Daniel Lo Nigro,Update end-to-end tests to use nightly repo,False
c209f84b8ab160fa711916b753f2b983daa21b9c,2016-11-07 20:28:40,Peter Ebden,"Fix --mutex (#1717)

* Fix --mutex, pass specifier through to repeated promise calls.

* Minor grammar fix",False
253269f6708415a8fcd2e93c3b89dcefd414c76b,2016-11-07 19:38:43,Nick Olinger,add depth specification to ls (#1463),False
5787ace88510dc339f3fb2c6d52c5be2211bc17b,2016-11-07 04:07:43,Aaron Tribou,"Change all console format grey to dim fixes #1699 (#1702)

Add updated jest snapshot for ConsoleReporter",False
4ce3de169c16061ad26a5ee60480e781e38f21a4,2016-11-06 23:08:00,Neil Kistner,Fix `yarn outdated` when current is greater than latest (#1696),False
d624103b4c12e2f33b96146827effeda02d7a3d6,2016-11-06 22:35:32,Neil Kistner,Fix flags for `yarn add` command (#1701),False
ea35fe926923b42967569640a62f3402eaa33ff6,2016-11-05 01:33:24,Konstantin Raev,"tests cleanup: reenabled test, removed npm from CI commands (#1692)

* enabled install-import-pr-2, this feature has been implemented

* a better test fix",False
f97c5b5cdac16c691a0dec08ef495ef5e0289e0f,2016-11-04 23:21:58,Neil Kistner,Fix `yarn upgrade <package>` command to store version in lockfile (#1691),False
dc22912b7f4bd50588c80f77846de0204c2190f6,2016-11-04 23:11:04,Konstantin Raev,"Mark master branch as ""prerelease"" (#1689)

* set prerelease 0.17.0-0

* bumped release script to make prereleases

* switched npm with yarn",False
87dbb859f4e994ca89f6e8ba1ce783e2349e6ff7,2016-11-04 22:30:18,Konstantin Raev,"Revert ""0.17.0-0""

This reverts commit 166bf6c10f69db5645d36654b3189088c4238562.",False
5f6b3bd54a0225e0b74f11049d83e20fd4a74661,2016-11-04 22:30:07,Konstantin Raev,"Revert ""0.17.0""

This reverts commit 363fdd9af268f87a821a9ad4a91610ae45f53fb9.",False
15d5c94b5c99c413a3fdf00c386ee010fd68081e,2016-11-04 22:29:54,Konstantin Raev,"Revert ""bump""

This reverts commit a748ea50299ef04af40f607ac81d04c664d688c7.",False
f8661309dd6a3d5c43a83abecedf774f76f4bbcf,2016-11-04 22:29:41,Konstantin Raev,"Revert ""0.18.0""

This reverts commit 5f279916ccca83c71346bcad765366486a0ace87.",False
231753cac6755c462cc547b513f4486d2d73299c,2016-11-04 22:29:26,Konstantin Raev,"Revert ""0.19.0-0""

This reverts commit f0d875a67a06d8b2405be177d0c43820442d802b.",False
f0d875a67a06d8b2405be177d0c43820442d802b,2016-11-04 22:13:17,Konstantin Raev,0.19.0-0,False
5f279916ccca83c71346bcad765366486a0ace87,2016-11-04 22:13:13,Konstantin Raev,0.18.0,False
a748ea50299ef04af40f607ac81d04c664d688c7,2016-11-04 22:13:11,Konstantin Raev,bump,False
363fdd9af268f87a821a9ad4a91610ae45f53fb9,2016-11-04 22:11:22,Konstantin Raev,0.17.0,False
166bf6c10f69db5645d36654b3189088c4238562,2016-11-04 22:11:10,Konstantin Raev,0.17.0-0,False
1c1dae728d8da3d51abc60d32ac998b3a71db3c5,2016-11-04 21:15:13,Stephan Schneider,support yarn-offline-mirror in .yarnrc (#1131),False
ba5a20307992057c49663fce2569c01f59266701,2016-11-04 20:27:37,Sebastian McKenzie,fix bugs with hash cache folder names,False
5efc97ac2f5eaaf602e1dfaf31d6bfbc402859bc,2016-11-04 19:13:13,enoshixi,Prevent parallel writes to the same destination (#1665),False
bc4d78fbee460b99b49363bc51c2a56a8afcd8ce,2016-11-04 19:11:34,Sebastian McKenzie,Use ~/.config/yarn and ~/.cache/yarn on Unix systems - fixes #1672 (#1679),False
b04fb8702c263c9d3e2c796d1a9c5a5a5deed0e5,2016-11-04 18:58:14,Neil Kistner,Properly save dependency with `yarn upgrade [dependency]` command (#1620),False
3f401bd4862f2eb403a311682a47a0fea361a310,2016-11-04 15:46:25,Sebastian McKenzie,Add remote hash to cache folder name to prevent registry collisions (#1641),False
b7105f62476eb6abeb24bd1ad3ce8af60c323a5f,2016-11-04 15:22:22,Neil Kistner,Fix flow types and install test (#1668),False
96fbeea6afb144652a5a05c0ee8571057d78c4b6,2016-11-03 22:02:02,Sebastian McKenzie,Add --no-bin-links flag - fixes #929 (#1651),False
41fe065ca55cc11a286a00469a966c71fd5acced,2016-11-03 22:01:53,Sebastian McKenzie,Add option to change the prefix of the global bin folder - fixes #630 (#1654),False
9a604a016a0c286bb842062d5149c3c435121df5,2016-11-03 20:04:26,Sebastian McKenzie,Merge branch 'master' of github.com:yarnpkg/yarn,True
3d57f08767d3339ab6ac974a71ab5735013050c3,2016-11-03 20:04:22,Sebastian McKenzie,patterns -> filteredPatterns,False
29524a9567e93cca36a5d142f4f2af37d085860d,2016-11-03 20:02:42,Thomas Grainger,"Add helpful nudge to yarnpkg/rfcs on issue template (#1650)

* Add helpful nudge to yarnpkg/rfcs on issue template

* I",False
bb492f1b048f97a1ba5bad947bc56e2587d3958d,2016-11-03 19:35:36,Sebastian McKenzie,Change reporter.log to console.log in generate-lock-entry command - fixes #644 (#1652),False
81ae7028739c7516a32ffe2af2d4f7dc5a4b6f01,2016-11-03 19:35:28,Dhruvdutt Jadhav,"Fixed add command flag (#1653)

* Added short flags in yarn add command

* Fixed the missing hyphen in add flag

* Fixed commander signature for add",False
ecabf0098627902e65731908eb8f315b0e258b24,2016-11-03 17:18:01,Jonathan Kim,"Nested executables fix (#1210)

* Added fixture for tests

* Added test

* Use cwd instead of package directory when linking bin scripts",False
46ffa7eaa59f378761e9692d0d0b85c407eb90ce,2016-11-03 17:17:01,Dhruvdutt Jadhav,"Added short-flags for yarn add (#1618)

* Added short flags in yarn add command

* Fixed commander signature for add",False
65a2794c1d9c316cc8c53c6fd08872dd94af584c,2016-11-03 17:16:34,Sebastian McKenzie,Add name lookups to ls command - fixes #1599 (#1643),False
ba8df982568b495329cce43a5b914ec816d601b8,2016-11-03 17:16:27,Sebastian McKenzie,Disable flaky secureUrl test (#1644),False
0e19c065982255ee6e53f20faf68915c7dea274f,2016-11-03 16:58:53,Jeffrey van Hoven,Add unit tests for `yarn why`. (#1544),False
f092f379243ad2b4a588893e51175abac52f2aeb,2016-11-03 16:57:39,Sebastian McKenzie,Refine flow type for config.generateHardModulePath (#1642),False
eafc40144c1d92d7fbb036c5831c38804ee94760,2016-11-03 16:18:32,Sebastian McKenzie,Use ~/Library/Caches as default cache location on OSX - fixes #1637 (#1638),False
8de54b1d8fa494b5e10fc2d50ee023ef7aa462c5,2016-11-03 15:47:27,Nitesh Sarode,Update aliases.js (#1635),False
741ba050500599806578f311ab631c7bb7c97302,2016-11-03 15:47:23,Nitesh Sarode,Update aliases.js (#1634),False
98028509d7be102d8fad665f95f53bc3fdd23b46,2016-11-03 12:52:39,Daniel Lo Nigro,Add webhook to archive AppVeyor build artifacts (#1631),False
254d6244ca87a0201b962c4cd32dbb6eb522fb21,2016-11-03 09:41:12,Neil Kistner,Attempt to fix failing Circle CI builds (#1629),False
ebe899382fdb70222651380f299737c6625d87e4,2016-11-02 19:36:30,Pushkaraj Shinde,Adding 'yarn global upgrade'(Issue #776) (#1616),False
855b45a427b272e27acdece2d314831d452da524,2016-11-02 17:35:31,Jeffrey van Hoven,"Show error message in stdout. (#1502)

* Show error message in stdout.

* Use err.message instead of err.stack",False
6e5c0656ecd14c3173fc572499a2d82a93c8465d,2016-11-02 17:34:08,Sebastian McKenzie,Nicer permission errors when trying to write global binaries - fixes #1578 (#1592),False
06b09fdefeec06c64e90e2297417e865bf229f4c,2016-11-02 17:33:35,Sebastian McKenzie,Support scoped packages in why command - fixes #1529 (#1593),False
3daf6b89104ba46680f8ccba3067dd90d5807227,2016-11-02 17:24:10,Sebastian McKenzie,ignore trailing arguments for pre and post scripts - fixes #1595 (#1596),False
444a63adc5e2b61a7efc7c067aa4247b9335b737,2016-11-02 10:14:26,Daniel Lo Nigro,AppVeyor now has Yarn preinstalled (#1608),False
d2865a91bc58c89a5e9e4e52a3b210e41e655add,2016-11-01 23:21:48,Daniel Lo Nigro,"Load GPG key from URL rather than keyserver (#1598)

Removes one point of failure (flaky GPG key servers)",False
5fec1fc00c07e47f939712906d48df49394afc64,2016-11-01 19:32:55,Sebastian McKenzie,Fix file protocol referencing local tarball - fixes #639 (#1591),False
c36dc4e97005df860a4d2711ea64c49de2d66d5d,2016-11-01 18:42:10,Sebastian McKenzie,Normalise config booleans - fixes #1292 (#1590),False
99c98b9b0e72be0c872f6156f7b1f0b87c810b97,2016-11-01 17:35:21,Sebastian McKenzie,correctly save exotics - fixes #1532 (#1589),False
cdc0c0ca9820e76bb79afe621fcf6737e6b9d6ea,2016-11-01 17:27:33,Chris Northwood,"Enable using TLS client certificates for communicating with private repositories (#1588)

* Add a failing unit test for #1165

* Add support for TLS client certificates when making requests (fixes #1165)",False
fde6860e688ea4ebbe29f63127d07b36dcd80283,2016-11-01 17:27:15,Sebastian McKenzie,disallow camelised command names - fixes #1530 (#1586),False
f057b8e2b77beefc1f7ed296bed083f70be55617,2016-11-01 16:52:21,Sebastian McKenzie,Merge branch 'inikulin-master',True
ec83534e8bfd31dfe0dbc45f9ed956a4a523a83c,2016-11-01 16:52:14,Sebastian McKenzie,"Merge branch 'master' of https://github.com/inikulin/yarn into inikulin-master

# Conflicts:
#	src/cli/index.js
#	src/config.js
#	src/util/execute-lifecycle-script.js",True
71aa0073af2117ef74816c5e46ce45c0a2e75109,2016-11-01 16:25:51,Sebastian McKenzie,Merge branch 'master' of github.com:yarnpkg/yarn,True
44cf22475d8335c81bbbee1a0ba8baa9aedac303,2016-11-01 16:25:40,Sebastian McKenzie,Merge branch 'sjs/env-compat',True
51a1fc28c8db1f681713000b7a99505f76ea1089,2016-11-01 16:25:34,Sebastian McKenzie,"Merge branch 'master' into sjs/env-compat

# Conflicts:
#	src/cli/index.js",True
6ca0723ea93316dfbf07e2e859458c583a2149d9,2016-11-01 16:24:12,Daniel Lo Nigro,"Add installationMethod property to package.json (#1557)

* Add installationMethod property to package.json

References #1139, #942, #1429, #1138

* Make set-installation-method.js executable",False
26ffbcc6b5c35b41c4fb6db65e38c97c8d4cd001,2016-11-01 16:21:22,Sebastian McKenzie,Merge branch 'ldabiralai-disable-progress',True
c2884781e1681a490940918dd68481e97e567d8c,2016-11-01 16:21:14,Sebastian McKenzie,"Merge branch 'disable-progress' of https://github.com/ldabiralai/yarn into ldabiralai-disable-progress

# Conflicts:
#	src/cli/index.js",True
031f0188bad7c34ba2d1afdc25c9e685200e85a0,2016-11-01 16:18:57,Neil Kistner,Add tests for `yarn outdated` command (#1212),False
2aefc1c1a90d032f3b5b734198610e6ad4868c31,2016-11-01 16:00:23,Krzysztof Zbudniewek,Rename 'manifestPotentialType' to 'manifestPotentialTypo' (#1575),False
1ba7ddfce553d754af1abed4c6a80719da06175d,2016-11-01 10:55:04,Daniel Lo Nigro,"Add end-to-end tests for Ubuntu 12.04, 14.04 and 16.04 using Docker (#1391)",False
d225ba4aa0b4367f6ec5ba5d8cdc5237de82bcde,2016-11-01 09:19:35,Daniel Lo Nigro,Revert #1553 and instead just use Bash explicitly (#1580),False
5d23b74c2aacdd25a8ea72104b9365e200d7ad69,2016-10-31 23:04:07,Yunxing Dai,"[git] Upgrade to secure url if possible (#1492)

https://github.com/yarnpkg/yarn/pull/1365/files introduced a fix to enforce secure protocols. This unfortunately broke a lot of packages we have which depend on the 'git' protocol ('npm show @opam-alpha/core').

Instead of refusing to work when a unsecure protocol is provided, maybe a better way here is to automatically upgrade to a secure url.",False
60f05a25cec8e4b78060e633454fb214325ea06e,2016-10-31 19:47:56,James Kyburz,allow blank prefix (#1559),False
6d238122e958d1eab22b26da90c66625257aafcd,2016-10-31 19:44:21,Claudio Bley,"Make `.git` suffix optional for hosted git (#1527)

When a github URL is used in a `package.json` file which has a `.git`
suffix attached to its repository name, resolution fails with an error:

```
TypeError: Cannot read property 'split' of undefined
 at Function.parseRefs (/usr/local/Cellar/yarn/0.16.0/libexec/lib/node_modules/yarn/lib/util/git.js:439:20)
 at /usr/local/Cellar/yarn/0.16.0/libexec/lib/node_modules/yarn/lib/resolvers/exotics/hosted-git-resolver.js:138:50
 ...
```

for e.g. `https://github.com/gulpjs/gulp.git`.

This was causes by an extraneous `.git` suffix appended to the URL by
the resolver.

Fixes #1287",False
f6241b179db543b2a2afc7e68bdb947616e6beff,2016-10-31 19:43:24,Mauricio Saglietto,"Use reporter for error messages on fetchers and config (#1560)

* Use reporter for error messages on fetchers and config

* Change fetcher test so it pass in windows",False
0b050d76b5ec495d0e3b6fd0ed70e37287d5f4e1,2016-10-31 19:42:02,Douglas Matoso,Fix lint warnings (#1548),False
8277835136d32700ef79f5aa32d037b70af0cadf,2016-10-31 19:41:49,Dhi Aurrahman,"Return SSH URL format for getGitSSHUrl (#1081)

* Return SSH URL format for getGitSSHUrl

At `GitFetcher._fetch` protocol should be there for the resolved URL
resulted from `HostedGitResolver.getGitSSHUrl`. If not, the actual
fetching process fails.

* Add tests for getGitSSHUrl",False
93677e1ef659219bc11add368c46f3072bd9775d,2016-10-31 19:40:42,Dhi Aurrahman,Do not follow redirect for HostedGitResolver#hasHTTPCapability (#1558),False
43cc69c01678a13fd2357903efdf59a95d1e5211,2016-10-31 19:40:14,Daniel Lo Nigro,Add `--nightly` flag to install script (#1554),False
4400b77e8919ef6bdb2f3d036b31cc94efe494eb,2016-10-31 19:39:48,Daniel Lo Nigro,Fix colour codes in install script (#1553),False
cf07f8e9ff7dd581d378d2a31efad5af8d1c4fb5,2016-10-31 19:39:04,cdarras,Add CLI arguments to set the proxies (#655) (#1564),False
f4fe7431ed992862a1c1d2357e6521c268bad7a7,2016-10-31 08:28:12,Lucas Katayama,"Fixing global add in linux root folder #1029 (#1344)

* Fixing global add in linux root folder #1029

* Changing global path to /usr/local/share",False
08f428489722c3b937f5d1bb0f57fd67ae5a9b7a,2016-10-30 07:34:25,Daniel Lo Nigro,getUTCDay ‚Üí getUTCDate in set-dev-version.js,False
14fe80f0aa97bd0ac5145e967a44bfdc52efb504,2016-10-28 21:51:34,Rifat Nabi,Fix wrong const name,False
0c63149deddced5c7d4b1fe74fb0d0c496e6f888,2016-10-28 21:12:34,Karan Thakkar,"Add an option to not commit to git. Fixes #1228 (#1243)

* Add an option to not commit to git. Fixes #1228

* Combine custom flag and option to check if git commit should be done",False
cd0d2987b5a49a572ac035853eeda6fb361c1929,2016-10-28 20:13:53,Neil Kistner,Add tests for `yarn remove` command (#1521),False
c80b323334ef6fe57d739bf8f9b4fdefa24b5ae2,2016-10-28 19:21:40,Konstantin Raev,"Revert ""Add tests for command ""run"" (#821)"" (#1537)

This reverts commit 782fd8484d829b3a062b0e960433e18657018d0b.",False
782fd8484d829b3a062b0e960433e18657018d0b,2016-10-28 19:10:46,Alican √áubuk√ßuoƒülu,"Add tests for command ""run"" (#821)

* Add basic tests for command ""run""

* Add run test with args and space in path

* Expect executeLifecycleScript to be called properly",False
420a1552ebfafe84cc54b38c3f1e59cff2e59086,2016-10-28 19:00:33,Adam Miskiewicz,"Properly save scoped packages in offline mirror. (#784)

This resolves a bug in which yarn was saving scoped packages in the offline mirror by their base name, which meant that if two packages in a project had the same name and version, but one of them was scoped and the other was not, only one of these would be saved in the offline mirror, and this would potentially cause a ""bad hash"" error to occur.

This commit fixes this behavior, and saves scoped npm packages in the offline mirror in the form `@[scope]-[package name]-[version].tar.gz`.",False
9c979b8293fa4eb75600479e7acf556e887ff548,2016-10-28 14:48:56,Lawrence Dabir-Alai,Override noProgress (set by is-ci) in ConsoleReporter test to ensure test works correctly on CI,False
1484a02af99ea91ef83545e4a8b9a76da54ac1b5,2016-10-28 14:28:46,Lawrence Dabir-Alai,Merge remote-tracking branch 'upstream/master' into disable-progress,True
6b2a55b733d88a5c10c7191abd3aa15445723e96,2016-10-28 11:45:40,Daniel Lo Nigro,Add webhook for archiving CircleCI build artifacts (#1473),False
e2070095a65bc32b67269b184ddeb0107dabffcf,2016-10-27 22:53:32,Sebastian McKenzie,Add support for NPM_CONFIG_USERCONFIG env variable - fixes #1512 (#1519),False
57c804a80db0750190ea0ccb5559fe70ef885a94,2016-10-27 22:31:58,Rifat Nabi,Simplify some obscure code,False
c6bd30b4b01c2e5422d82b2568ab5f45f79350bc,2016-10-27 22:31:04,Rifat Nabi,Add interactive update,False
958ff9807a10a0a4aa77020232d9d88d5c1640ef,2016-10-27 22:27:49,Sam Saccone,"Set node env to production with --prod install.

Fixes #1450",False
484f05a51b09e6f3e7f015e929a679cd5f18a4f3,2016-10-27 22:25:18,Sebastian McKenzie,Make all install flags accessible from all commands - fixes #1504 (#1517),False
ea9676b8f328f26deeed5c01ffb9902d317865a3,2016-10-27 22:12:55,Kyle Mendes,Small grammar fixes (#1515),False
681ae25cb771d5898245333f40b51bd3049214e1,2016-10-27 21:49:43,Jure Triglav,Git branches can have hashes as part of their name (#1489),False
d5a6f222e7ab7e25b9d8e1a12a158c24003ac677,2016-10-27 21:48:48,Robert Jackson,"Document `--prefer-offline` and `--offline` flags. (#1514)

Add documentation to `--offline` and `--prefer-offline` command line options.",False
5e2fbe6d1d86d2f1420b66c6351f765300ddde79,2016-10-27 06:10:32,Yunxing Dai,"Don't re-install cached artifacts. (#805)

This patch makes sure if we load a package from cache, we don't install it again.",False
58a4fa79d9ef92f640af5c90977d2e81c58c4ad6,2016-10-27 00:11:57,Zeke Sikelianos,init package.json repository as a string instead of an object (#1484),False
56586af1ff641b4e0c2ac6c545bc8af3063f8c0a,2016-10-26 23:26:11,Zearin,"Minor README tweaks (#1452)

* Minor README tweaks

formatting, phrasing, etc.

* Rephrase ‚Äúlockfile format‚Äù bullet point

* Update README.md",False
550bbadcf9079da3970227fdd4b43705a9a97913,2016-10-26 21:46:10,Jure Triglav,"Factory needs to be a function. (#1481)

See also: https://github.com/yarnpkg/yarn/blob/master/src/resolvers/exotics/git-resolver.js#L106",False
af9d80cebfcf5ea992bd3005ce1ee57a2da7bd97,2016-10-26 21:23:58,Sebastian McKenzie,remove bower (#1441),False
ec6a4508ad4aa748fc9ff9b2c665228bf5770696,2016-10-26 20:30:13,Thomas Verfaillie,"fix-1158: resolve verions by ranges, not equals (#1477)",False
33013513fc1f3213eaa4a850df8c2a245c196cec,2016-10-26 19:13:52,Sam Saccone,"Handle using local module info when running info . (#1467)

Fixes #1347",False
19490be6aff23adf9fd299ad65baa77cf77cd259,2016-10-26 18:48:57,Sam Saccone,"Builds on #1382 (#1466)

* Fixes #1382

* Add test coverage around init author and email.

Also now be explit when checking for undefined values since 0 and ''
before would have caused this to do the incorrect thing.",False
115b1e4b61b8286e685445f113b9f8c6539352fd,2016-10-26 18:47:18,Mark Stosberg,"Add CLI docs for yarn add --exact and yarn add --tilde (#1478)

Descriptions were based on official docs:
https://yarnpkg.com/en/docs/cli/add",False
3cd994977a7d804d5483d6671624f60a5aa398c6,2016-10-26 18:46:36,Nick Olinger,"Tests/resolvers/exotics (#1470)

* Move github-resolver to match src dir structure

* Add bitbucket resolver tests",False
86899fea2718dfd6da3666cca1166cbedec79f28,2016-10-26 08:38:23,Nick Olinger,Add test coverage for aliases (#1421),False
eac02f7e07d1fe638842ff17e1c13ff33f288664,2016-10-26 08:36:54,Neil Kistner,Add detection of NODE_ENV for `yarn install` command (#1455),False
a8e7b9218211fbf19d9f4f6950ba9b5ed9b10f2b,2016-10-26 03:43:59,Elad Shahar,"Add period to `savedNewDependency` for consistency (#1459)

Most messages, including the very similar `savedNewDependencies`, end in a period.",False
385dee85e72a12c29565867085661bd9ff6b040b,2016-10-26 01:04:54,Mauricio Saglietto,Replace some MessageErrors string for lang  codes (#1392),False
6f62e7a5630c0667030bfc83e2c22f22b30429c5,2016-10-25 19:12:13,Jakub Synowiec,"Fix `yarn cache ls` for scoped packages (#698) (#1279)

Yarn was trying to readi the metadata file from parent directory of scoped
packages instead of the scoped packages directories.",False
e950b9bde2c4dcbee3451da0d0be7be8c548f003,2016-10-25 19:09:10,Julien CROUZET,Join available versions with newline if more than 20 (#1427),False
860c9082e29e6d43b426fe5983531be4324f87a7,2016-10-25 19:08:56,Tobias Kloht,set filename arg mandatory in pack -f (#1403),False
76f48b8ca25a9208adb5c2203c627da2d9ce79b2,2016-10-25 19:05:13,Sebastian McKenzie,remove default filters from `yarn clean` (#1430),False
2ef2e5edeed090814e890b91ae9c1217730ce164,2016-10-25 15:02:16,Nick Olinger,Add validation to package name upon init. (#1425),False
9f3d037da23243c821b78ed7564cf42c83fd4302,2016-10-25 14:18:48,Azim Khakulov,"fix #680 check README, LICENSE and AUTHORS are files. (#1426)",False
798d190d2c3aea834c209e9d27fd54e5af00d293,2016-10-25 13:49:10,Sebastian McKenzie,add missing code comment,False
cbdeeaa406d56493d5729d723d225499332409a5,2016-10-25 13:47:03,Sebastian McKenzie,Generate helpful error messages whenever we fail to parse JSON - fixes #1229 (#1424),False
601dcaec3ae97e08a51da85e1749594e4480bf2b,2016-10-25 13:39:48,Sebastian McKenzie,Consolidate lifecycle script execution - fixes #1319 (#1422),False
2992678050ca15dbbe198affd379b2e328fa9386,2016-10-25 13:39:38,Sebastian McKenzie,add yarn versions command as analog to npm version - fixes #1369 (#1423),False
3a2585976e9e39c2955a59d5ddb29f2d2e56bcd0,2016-10-25 12:31:51,Jakub Synowiec,"Fix `yarn outdated` for scoped packages (#620) (#1276)

Package name was not escaped when querying NPM registry.",False
716503f269ea838d619c7aa3e29639d328a42d39,2016-10-25 12:28:43,Julien Roncaglia,"Don't let the authorization header be empty (#1373)

* Don't let an authorization be empty

It create problems with some servers like ProGet when used as a nuget
cache.

It's most likely the source of #825 and #1260

* Fix flowtype checks

* Revert the change to the type returned by getAuth",False
cbfa664437f369e5f25abdfeeabbddf72371bf33,2016-10-25 12:26:44,Troy DeMonbreun,Fixes removal of invalid package name as showing successful (#1409),False
824f12250a9a105c24558e87e8074c6adde1cb19,2016-10-24 20:03:15,Thomas Verfaillie,"fix-1221: offline flag, metadata argument falsy (#1277)",False
309e62fab5edca556d8e7dd30e0645c9b2966399,2016-10-24 19:39:36,Ben Berman,"Meaningful error message on malformed registry response (#1356)

* Meaningful error message on malformed registry response

Addresses #1348

* Changed malformed registry response error to use i18n",False
f563184adbd809e10ec36121ace0e9b349d653d9,2016-10-24 19:28:08,Luke Zilioli,fix #1199 by removing extra newline from cli/install.js (#1200),False
845356d1168028f4249f65774094a37149fea812,2016-10-24 18:13:26,Neil Kistner,Add package type output to `yarn outdated` command (#1357),False
0d3c00beb27e784cc149b59f018fbf84e455b244,2016-10-24 10:46:46,Sam Saccone,Switch to using vars for hostname in gh resolver.,False
a40aab8d892a754dd442ed509ea9af6b15211fef,2016-10-24 10:46:46,Sam Saccone,Add tests for exotic github resolver.,False
a7436713ad77c19ef873d7433ecc66aeec382ef0,2016-10-24 10:46:46,Steve Shreeve,honor github commit hash,False
967b314eddf10edf5def0b188522c6ad503e3f10,2016-10-24 09:10:51,Neil Kistner,Add --ignore-engines flag to `yarn upgrade` command (#1375),False
f71a70dba2518ef7dde94e0373567c5d7d765ce7,2016-10-23 00:02:03,Tudor Gergely,improve Git coverage (#1365),False
0c5bd61b5b50c376ffe37a3bb951d2b3bbe19ed1,2016-10-22 11:46:58,Chris Fritz,"Fix typo in comment ""occured"" -> ""occurred"" (#1359)",False
0ad1ec6781a6c8bc00fabb31777dfce6971a7d04,2016-10-21 09:39:46,Daniel Lo Nigro,"Set unique version number for CI (CircleCI and AppVeyor) builds (#1230)

* Set unique version number for CircleCI builds

* Separate script for setting dev version, move everything else back into circle.yml

*  - Set version through JS rather than shell script, so we can reuse the same script for AppVeyor
 - Only use date, not CircleCI build number (so the version is approximately consistent with AppVeyor)

* Also set version on AppVeyor",False
b17082da073d46dbdbc46be1b425c65073bff334,2016-10-20 10:49:37,Daniel Lo Nigro,Build tarball and standalone JS files into artifacts directory (#1231),False
59d02bddd469a33329b140c0adb8ba8bb066c66b,2016-10-20 09:36:19,Tom√°≈° H√ºbelbauer,"Add a newline after the global comment in the lockfile (#1192)

The lockfile is nicely visually separated except for the first package which is right after the comment. The comment is global, though, not related directly to the first package so in order to make it easier to visually navigate the file and to mark the comment as global and not just related to the first package, I propose a newline is added after the comment.",False
f0a350062a645a1879d106c62dd7c7b20fe12fb3,2016-10-20 04:05:45,Daniel Lo Nigro,"Don't install Node.js via Chocolatey on AppVeyor (#1270)

May fix #1232 as per the discussion in http://help.appveyor.com/discussions/problems/5425-nodejs-690-seems-broken",False
ae7c24a9201c03f53e80981ffbb8de97fb265b8c,2016-10-20 00:57:12,Mario Pizzinini,Added a comment to explain why catch is suppressed.,False
5890b9c4652608d67cd5fcb3abf3409aac29a44b,2016-10-20 00:57:12,Mario Pizzinini,"Added try/catch block to .yarnclean write file operation

Added try catch block to handle error ‚ÄûEEXIST: file already exists‚Äú.",False
d155ce81bfc5f183ad6bf8a52be2cbb0596e6d83,2016-10-19 21:24:22,Jiayu Liu,"fix a typo (#1256)

occured -> occurred",False
a9580f8faad9bdeb62ece89b192b979f280a9099,2016-10-19 20:05:19,Kai Cataldo,Check in request cache .bin files (#1250),False
8746efa0b0d68a954849cb5e7a3be992a1cd0f88,2016-10-19 16:58:30,Jesse Buchanan,"Fix `yarn info` failing on single character packages (#1219) (#1220)

* Failing test for parsing single character packages

* parsePackageName: Allow single character packages",False
822616d35523294c4b7dacdfb939c1a31a9e5422,2016-10-19 16:32:58,Konstantin Raev,added npm auth for publish,False
1c55ce050388f8fda44a7ac0cbdb824e8d606d9b,2016-10-19 16:32:58,Konstantin Raev,fix deploy script,False
41b43af518e9a42397782df5c992d48374251583,2016-10-19 14:48:15,Lawrence Dabir-Alai,Add is-ci dependency and disable progress bars in CI environments,False
8dea075d2e05b78fa72e8bd32dccdee0bafafe83,2016-10-19 14:44:52,Lawrence,Merge branch 'master' into disable-progress,True
476c7c4ac2bcb21d713eea7e8f9a8a6af8a8e527,2016-10-19 10:55:49,Daniel Lo Nigro,"Revert ""Set unique version number for CircleCI builds""

This reverts commit 671c6a022d366d10e48668fa079dda8861c04512.",False
671c6a022d366d10e48668fa079dda8861c04512,2016-10-19 10:51:04,Daniel Lo Nigro,Set unique version number for CircleCI builds,False
08e520b209c29d9eb64aa1bf41a1c3ea848eecd4,2016-10-19 10:35:52,Daniel Lo Nigro,Remove hack for #1142 (#1225),False
2971d856da3f2d43256cdc45a9531d68ee91b97d,2016-10-19 02:52:51,Lawrence Dabir-Alai,Change --disable-progress to --no-progress to keep with cli convention,False
b4de033c863714db6133b97b11820626d02d7bea,2016-10-18 21:04:11,Lawrence,Merge branch 'master' into disable-progress,True
5ce30e8f2e742ad40ef8bcdd885f9c4f8302c1c0,2016-10-18 21:01:19,Konstantin Raev,0.16.0,False
e2f5c268862d053d15df798d683c8ad086d7f00d,2016-10-18 21:00:51,Daniel Lo Nigro,"Convert ""yarn"" executable to a shell script that runs either ""node"" or ""nodejs"" (#1180)

Also fixes Cygwin.
Closes #1142
Closes #819",False
553e55f146a465a4e773b53b0a93752163c4b039,2016-10-18 19:37:31,Hemanth.HM,Better error message.,False
41e1d18fbfdb274ea610a06967275ea3f6f10913,2016-10-18 19:24:45,Dan Harper,Add support for usernames in git resolver (#934),False
009ceda137aabfdaa4c8529c7533d626cb867f87,2016-10-18 19:22:23,Mark Stosberg,"Improve 'Usage' docs for upgrade command.

Before: Usage: [command] [flags]
After:  Usage: upgrade [flags]",False
26313f2d80cb830b67121ec757eafe89b2a005ba,2016-10-18 19:04:36,Mario,Don't crate .yarnclean if it already exists (#1188),False
fcfdaa2f0e0a8865274121f5823690699d622adc,2016-10-18 17:00:49,Lawrence Dabir-Alai,Remove tick from console-reporter test to ensure test is relevant,False
5cd11467ee409adf877e8de808c02f89b6d37832,2016-10-18 17:00:38,Lawrence Dabir-Alai,Fix eslint error,False
eb27a69936fcc869e330b09d0c455bd0229e4777,2016-10-18 16:53:25,Lawrence Dabir-Alai,Disable spinner progress too,False
f5d1ded5cc2f6010c478aa9b92f98679eba930eb,2016-10-18 16:23:31,Lawrence Dabir-Alai,Add option '--disable-progress' to turn off progress bar,False
3dd0264040858ab5ae361e3dde4b7b9e98afb099,2016-10-17 23:45:57,Sergey Rubanov,remove outdated kpm parts (#758),False
b584b4f089c03b7a5334d0c2b94d3bbabdc883ba,2016-10-17 20:25:45,Daniel Tschinder,"Fix self-update (#676)

* Fix self-update

Pick the correct file to download in self-update
We cannot rely that the first asset is always the tar file
This picks the correct file from the assets

Use dev version of roadrunner and reset it correctly

Enable self-update tests

* Remove github resolving from self-update

* Fix tests.

* Update roadrunner and fix tests

* Increase test timeout to 3 minutes

* disable test because to slow on circleCI",False
145cd0a4b4964b6a1a3af4128624f8c6abd55055,2016-10-17 18:16:24,Konstantin Raev,"Added yarn install to circle.yml (#1157)

* Added yarn install to circle.yml",False
00e42ae7da30362a93a6135ffe11ba9c23dca35e,2016-10-17 16:05:46,Sebastian McKenzie,refactor how we rehydrate an install instance fixing the --production flag in yarn licenses - fixes #1103 (#1104),False
81e5b001869b41d45832368fbd95a2310f4f9b95,2016-10-17 16:05:34,Brandon Mills,"Add docs link to npm-shrinkwrap.json warning (#1141)

Fixes #1069",False
50aae7db7f733a506b73edb8c55ce1af5829d46c,2016-10-17 12:08:22,Devon Govett,"Support auth for private npm packages (#1146)

Sends the auth token for scoped packages, which may be private. Fixes #1134 and #521.",False
c091ac4cc526d149b92c07299ff36046011902ce,2016-10-17 11:06:29,Daniel Lo Nigro,"Add %LocalAppData%\Yarn\.bin to PATH as part of installation (#1129)

* Add %LocalAppData%\Yarn\.bin to PATH as part of installation

* Add LocalAppData path to user environment rather than system environment",False
de29ce0e62a61c280f2d1667f3eb537bc1def221,2016-10-17 08:56:47,Daniel Lo Nigro,"Decouple Chocolatey build from Windows Installer build (#1132)

* Decouple Chocolatey build from Windows Installer build

* Add more metadata to the nuspec",False
9f50043c3848b897c22d1deba254cdd2db20e0ab,2016-10-16 15:40:28,inikulin,Emulate `npm_config_argv` environment variable for lifecycle scripts (closes #684),False
8f4f01e89c5b0d3e677f327bff5017adb81fcdf4,2016-10-16 10:15:38,Daniel Lo Nigro,Use Yarn package/installer on Travis/AppVeyor/CircleCI rather than npm (#1117),False
d24c5dab653d8c94f4cadf5485c708a0a2d9dde7,2016-10-16 02:14:16,Sebastian McKenzie,add appveyor cache,False
d9e3f6f880d71c7951ec9cf7dcf762b6e559a8d6,2016-10-16 02:12:05,Sebastian McKenzie,use yarn to install deps on travis and appveyor,False
23ae7b3075f10589828bdc819f3565d5366d4357,2016-10-16 02:08:52,Sebastian McKenzie,cache ~/.yarn-cache on circle,False
20bf125d5aa0c9edc58035ae36857f48c7a8a360,2016-10-16 02:07:33,Sebastian McKenzie,use yarn to install own dependencies on circle and fix ghr curl command,False
371d12988eb5a02f95930f759c06323852cf6f11,2016-10-16 02:02:29,Sebastian McKenzie,remove go get,False
f8c6f5bc93127f27eb2267004b8c18a6516b09f7,2016-10-16 01:58:38,Sebastian McKenzie,Merge branch 'master' of github.com:yarnpkg/yarn,True
59ebd840f3e46f448cd1ea42ae1ce46f312926f7,2016-10-16 01:58:33,Sebastian McKenzie,fix ghr install,False
eded72393fd83717b80c5541199c7849acc66e6d,2016-10-16 01:51:04,Jason Palmer,"Fix git resolver so isVersion matches git+https and the lke (#1107)

Change-Id: I63c9edd331e268e753382313cd7db11361762e0e",False
40490c25f5962021aa71d8121ce900d66b3b29b3,2016-10-16 01:28:22,Sebastian McKenzie,+x on bin/yarnpkg,False
fe419998399ae89c7894702274d10d6f7e1301ea,2016-10-16 00:46:36,Max Nordlund,Only write escape sequences to a TTY (#766),False
7de47e567dad59667f071b32f7a9c193b63a46f5,2016-10-16 00:46:17,Sebastian McKenzie,spoof supportsColor too,False
6040f50549ad9e7dc0c3182c0fa84d6a681be700,2016-10-16 00:38:03,Sebastian McKenzie,add bin/yarnpkg,False
b5087a2dde4e2b17121eb4cb5d5e1ca877c3e41f,2016-10-16 00:36:31,Sebastian McKenzie,Merge branch 'master' of github.com:yarnpkg/yarn,True
cefa9a368dd3df1a1f1ecd9e50de9c5fabefbc92,2016-10-16 00:35:53,Sebastian McKenzie,add yarnpkg bin alias,False
383273cd987d8fe0e365c689ea4355eff447e53e,2016-10-16 00:11:57,Ryan Stelly,prefer local config to home and home to global (#951),False
e0dce96ed1c2f82e94f88eead5e81f8a52621dcf,2016-10-16 00:02:40,Sebastian McKenzie,add `npm publish` to circle deploy,False
76292b51b0193e4bb67e9a3f482995dbe87880cb,2016-10-15 23:45:16,Sebastian McKenzie,add timeouts,False
7a18523163867b29a0014c2073aae0087201931f,2016-10-15 23:29:38,Carl Henrik Lunde,"Custom CA trust store with config option 'cafile' (#736)

Add support for local registries with TLS/SSL certificates issued by
private CAs certificates or self-signed certificates.

References #606, #631",False
a3eaa55e4b39813c83f3cf86f3611438b59e922f,2016-10-15 23:24:39,Devon Govett,"Support npmrc for private registries and auth (#839)

* Get npm registry and auth from .npmrc file

* Fetch tarball through registry

Needed if the registry requires auth to get tarballs

* Support .npmrc auth for write commands

* Support basic auth

* Attempt to fix flow

* Implement default request method for BaseRegistry

Needed for tarball fetching now that it is going through the registry

* Fix flow bug

* Clean up

* Fix requestUrl

* Broken by #712, which changed from url.resolve to url.format. We need resolve in the case where the pathname is really a full url (when requesting tarballs). So only add the trailing / if it is not there.
* Only add authorization if the request is going to the registry (not random tarballs).

* Check scoped always-auth option

* Remove unused function (bad rebase)",False
a0c50f5d24aac8bd63f1564ae69b795c03bc3467,2016-10-15 23:07:12,Jake Basile,add option to disable emoji (#922),False
b0611a6ee5220b0b1e955b271b6140640158f96c,2016-10-15 22:39:08,Tommy Graves,"Add support for strict-ssl config (#1025)

* Fixed config resolution

* Added support for disabling strict ssl

* Fixed flow errors",False
73251d4ffd983e6001a58c69fa988bc15690c023,2016-10-15 22:38:30,Tommy Graves,Fixed config resolution (#1024),False
965811cd1b4357a04fe33607aa21d5e64cccca53,2016-10-15 22:30:03,Troy DeMonbreun,Preserve any subsequent '/' after user/repo split (#1023),False
8ebc3c2ea8aa26a41b6aaa0be9b0469eb3aaa04b,2016-10-15 20:09:17,Sebastian McKenzie,"Nicer unexpected error handling (#1097)

* don't leak stack traces into output, write yarn-error.log on unexpected errors - fixes #948

* fix lint

* fix lint

* fix lint

* fix test",False
f04b157a0162114de7252b682ecf4b66895d7e87,2016-10-15 19:49:49,Sebastian McKenzie,respect indent of manifest if detectable when modifying - fixes #1091 (#1098),False
63142443caffb7ba6c815885eea005975d4d8eba,2016-10-15 19:12:00,Neil Kistner,Remove duplicate team display (#1079),False
1c6ce22f9a06b861e3c8bebcbd60b9b60d84476e,2016-10-15 15:01:32,Neil Kistner,Ensure arguments to `yarn team <cmd>` before going further (#1080),False
37631c2955490f7239634b195251359b41f88dce,2016-10-15 15:00:00,Neil Kistner,Enable ability to run `yarn upgrade [package]` (#1077),False
771ac7683b4d4220eca784f63e670bec62fdc99c,2016-10-15 13:46:28,Daniel Lo Nigro,Build installer on AppVeyor (#1090),False
33b7779bd72d793234854674456b04a8df73ad04,2016-10-15 13:10:09,Daniel Lo Nigro,Set umask to 0022 so file permissions are correct (#1089),False
6517dd10ba24a7a126506497295520d87062a2f3,2016-10-15 11:38:51,Daniel Lo Nigro,"Fix obsolete-relation-form lint in Debian package

`<` is deprecated for Debian packages, need to use `<<` instead.

https://lintian.debian.org/tags/obsolete-relation-form.html",False
0829a745ae5d6948d939d0c181bbb7bb2cd1686a,2016-10-15 07:33:34,Konrad Dzwinel,Enable gzip compression,False
dc18f27238e43ee834e3b71c5a9ab89a1bef8c56,2016-10-15 02:51:26,Sebastian McKenzie,change BaseReporter.getTotalTime to check type rather than value,False
29c957b65534163fcea159026e80faaef107c00b,2016-10-15 02:42:45,Sebastian McKenzie,use latest npm to install deps for appveyor,False
18180e6840b1025ec147c2cd254fa07c48cced7e,2016-10-15 02:41:26,Sebastian McKenzie,update request cache,False
b59fd78d8580765fa6d7aef5d492d90383922727,2016-10-15 02:32:17,Sebastian McKenzie,disable package-resolver tests,False
b682d0f6b54a5718d742f9d517357d6201f633c2,2016-10-15 02:17:27,Sebastian McKenzie,use chalk.styles rather than ansi-styles,False
e743e519d079bb7c439831c6a212cf46cb29c158,2016-10-15 02:12:15,Sebastian McKenzie,ensure consistency across environments for console reporter test,False
a6d367b6ce86b6f58e941a4017d6d5425a2063bf,2016-10-15 02:00:51,Sebastian McKenzie,add missing trailing comma,False
ed50146e3717e2b21815c0f2c88a3d2b43093a52,2016-10-15 01:58:09,Sebastian McKenzie,fix some windows tests,False
3e6ba1e5b2c43db649c032582e26a53864bc0d31,2016-10-15 00:51:29,Sebastian McKenzie,disable travis tests on osx,False
046a9eeadbfb2f655d975a534899f0c186968628,2016-10-15 00:42:26,Sebastian McKenzie,run lint on circle,False
9852fdab0eb3850316ae9b3fe7bf81ff687efd8b,2016-10-15 00:42:18,Sebastian McKenzie,don't test node 5 on appveyor,False
962f522040895e8cedae1b13b5b3f77e0f66afec,2016-10-15 00:42:05,Sebastian McKenzie,fix ci badges,False
487416572cdfacf779a2ade1f98083a28a08a4d1,2016-10-15 00:32:21,Sebastian McKenzie,fix last test assertion,False
6c75fd5f441e2b29136731a5427501b403bcee6d,2016-10-15 00:25:52,Sebastian McKenzie,fix more tests,False
634eb3d4113fc68698bf7ed34ab056d2dd13d91c,2016-10-15 00:18:25,Sebastian McKenzie,fix tests,False
12a60ca339dfa57fb6a5635beb25950b19e4d1aa,2016-10-14 23:22:07,Peter Petrov,"Change DEB nodejs relation from Depends to Recommends (#916)

* Change DEB nodejs relation from Depends to Recommends

A ""Recommends"" relation preserves the out-of-the-box experience for most people,
as recommended packages are installed by default on modern Debian / Ubuntu
distros. But it allows people who install Node.js in a different manner to opt
out of the nodejs DEB package.

* Add ""Conflicts"" relationship with DEB nodejs < 4.0.0",False
ae0caa340b55a02fb08f7993303dddbeabd7acd3,2016-10-14 23:12:57,Alexander Vagin,"Do not exit 1 if yarn already installed (#829)

I think it's bad idea to exit 1 in this case - because this script can't be used in pipeline or in ansible. Throwing exception breaks next movements. If Yarn already installed this script - it will warn and normally exited with exit code 0.
What do you think?",False
f12ea64ca0215a8f97c29d8bbb01ee860d15e48c,2016-10-14 23:12:36,Ankur Kaushal,Fix grammatical typo mentioned in #900 (#957),False
ff01b45ff7ceb05217d3fbd682044e4d745a5e27,2016-10-14 23:11:06,Vladimir Kurchatkin,Improve flow coverage (#890),False
749fbc6a2bbecf3e65eda5061cf4dea81504bed9,2016-10-14 23:09:02,Sebastian McKenzie,remove dead alwaysFlatten code,False
e79bd94814151fa5b7f4787f361c8ec49df74b5d,2016-10-14 16:25:51,Krzysztof Zbudniewek,"Make `yarn why` more accurate (#1028)

* Calculate packages size on disk in `yarn why`

Fixes #578.

* Count size of real packages instead from cache in `yarn why`

* Merge two functions into getFileSizeOnDisk",False
e9454250941d2f61f35e81d67dd017360f613264,2016-10-13 20:47:35,Samuel Reed,"fix(engines): Suppress 'rhino' as invalid engine. (#1004)

Fixes #1003",False
a41ce86f8d5b197ce9d32c8267376debfd650282,2016-10-13 20:39:22,Krzysztof Zbudniewek,"Fix test for `yarn init --yes` (#1005)

Fixes #997.",False
d7c1d5ef172bf3a213368943770ade7615eb934c,2016-10-13 17:33:55,Daniel Lo Nigro,Build .deb and .rpm on CircleCI (#962),False
ecbceeb9ca463626834a44b8bb7807711460065e,2016-10-13 16:03:20,Ekin Koc,Add node shebang to single JS builds (#915),False
c99ff4dff3950dad5aa9d2d744e2872240bec7fc,2016-10-13 14:22:15,Kasper Lewau,fix(packageLinker): ensure dir before symlinking bin (#975),False
100b12420ab00abbd94e8685da75750313591e47,2016-10-13 10:44:44,Daniel Lo Nigro,"When rendering spinners, only clear to the right of the cursor instead of the whole line (#959)",False
ee07644ed9080a22ca9742c9383100b8f03221a3,2016-10-13 07:57:04,Fokke Zandbergen,"Document --force (#870)

* Document install --force

* Address https://github.com/yarnpkg/yarn/pull/870#issuecomment-253202762",False
ef9375568e43937a8f59769e50b866ed7ed8f573,2016-10-13 07:48:21,Enrique,Fix 'yarn cache dir' by using config.cacheFolder (#938),False
0a29fb391715ca87665fc96620e85b438fa66cdb,2016-10-13 07:47:35,Andrew Goode,fix(config): show proper command for `yarn help config` (#940),False
9edf577cb864a7f45d0d6925e09284385552119d,2016-10-13 06:48:26,Steve Lacy,Lint: remove unused vars (#720),False
cb00d27abc1f442e7f5eb6223b8b5c31dacb115d,2016-10-13 00:10:04,Ryan Stelly,"Add pre and post install script calls (#800)

* fix tgz glob for powershell build (echo #729 fix)

* add pre and post install script calls, and wrap prepub in ifdev",False
eea92a3d6af3dac48270428a2509912f54ba1ec1,2016-10-13 00:00:44,Chris Shepherd,Move `babel-plugin-transform-inline-imports-commonjs` to devDependencies,False
e7e95f5d4b9b8b21fa2c97bec22b9e6df9386450,2016-10-12 23:57:52,Oscar A. Funes Martinez,"Add mkdirp to create a @<scope> folder before doing symlink so that yarn link works (#910)

* Add mkdirp to create a @<scope> folder before doing symlink

* Change from path.parse to path.dirname",False
4a5785da3f0b92a45d7cf5ff8476de82786e2956,2016-10-12 23:53:01,Bouke van der Bijl,Add single resolved version to flattenedPatterns instead of patterns (#894),False
2185bfdd72fe4d000aa1613d198a199a8829604c,2016-10-12 23:52:32,Rusty Toms,"increase the timeout for long running tests (#905)

These tests seem to take a long time in mac os",False
fe5bdd851fc0ff5b6120e1f3a3b6add77e7b5af5,2016-10-12 19:30:15,Sebastian McKenzie,add cache dir command to output path to cache directory - fixes #654 (#880),False
e70cb84ebe2914d3f66142501bab2efb98ff482c,2016-10-12 19:26:55,Sebastian McKenzie,Rename packagesRoot option to cacheFolder - fixes #831 (#881),False
454bf9b93306dab6d5def24bec73a886d08ac11f,2016-10-12 19:03:31,Ryan Stelly,fix tgz glob for powershell build (echo #729 fix) (#793),False
76c559a2d6759891cbf0e0bc842cec59ba2afa00,2016-10-12 18:46:35,Sebastian McKenzie,"Merge branch 'master' of github.com:yarnpkg/yarn

# Conflicts:
#	src/constants.js",True
71c050b06c83a01eac3ffb25cd81e998bf021ad6,2016-10-12 18:45:53,Sebastian McKenzie,properly retrieve yarn directories,False
7bb82783c48630ed113cffd36187fc94f55f2f5d,2016-10-12 18:39:27,Hiro Asari,"Increase git clone depth to 10 (#876)

Since this repository has a lot of commits, cloning with
depth 1 can cause builds to fail erroneously when the commit
to test is not available in the shallow clone.",False
04930493ec86c82403a426af10218c5411b982b1,2016-10-12 18:37:58,Krzysztof Zbudniewek,"Add --yes flag to yarn init (#873)

Fixes #637.",False
5d1704d3b5be0983f58bbdae3002dd560637cba1,2016-10-12 18:34:24,Sebastian McKenzie,fallback to npm config if it exists after getting default yarn config value - fixes #606 (#871),False
26901dd9d07df5ece2155158b6856e1260c46c99,2016-10-12 18:34:16,Sebastian McKenzie,silence canceled read errors - fixes #661 (#874),False
ab42cab05ddb49391a49893bb19e1d99e1fd2466,2016-10-12 17:51:20,Sebastian McKenzie,fix alt discord image in readme - fixes #866 (#867),False
81222735551724fbc9c63c8273d3ac699918c1f8,2016-10-12 17:07:51,Sebastian McKenzie,store link and global folder in a separate folder outside of yarn cache - fixes #861 (#863),False
f69df20126eeacc1bc848c3bff4181b51392d7e1,2016-10-12 17:06:29,Sendil Kumar N,fix(optionalDependency): reset ignore-optional default flag (#789),False
271ef9a9d021e59fbced660989d1fa5589413eca,2016-10-12 16:58:46,Bouke van der Bijl,"Don't remove compiled files in `yarn clean` (#718)

Some packages (like 'timepicker') use them as the main entrypoint",False
add0a6cb70fbe03cee7a23563fa25291bcb959ee,2016-10-12 16:58:13,Sebastian McKenzie,use console.log instead of reporter.log - fixes #851 (#860),False
113fab9698611d6e24f355c1a66e2ad9e7325317,2016-10-12 16:44:00,Mathieu Darse,Flag to ignore platform compatibility (#752),False
85214c8e17adf80d5a4cd1d75188e712f807c68b,2016-10-12 16:42:05,Pooya Parsa,Hostname check inside isPossibleOfflineError() (#725),False
369539f7553c74deb04c080cc140187eeb2c5f5e,2016-10-12 16:41:32,Jon Sharratt,"Fix custom registries with paths (#712)

Ensures with and without trailing / registry url is correct and resolvable.",False
558aa38d306abdd5b902f989c364247622b0f434,2016-10-12 16:40:38,Jessica Stokes,Fix executing scripts with spaces (#809),False
e5a7cc120e08f1d4d4450aa909822b5d52763cb4,2016-10-12 16:38:32,Neil Kistner,Remove commander's `allowUnknownOption` method call (#777),False
67ca5cc29c04d32e48b15ca6dab203f94a88dce4,2016-10-12 16:33:52,Sakthipriyan Vairamani,"cli: make mutex's type a mandatory argument (#848)

Without making `mutex`'s `type` argument a mandatory one, by default,
`true` is assumed and it fails with the following error.

    ‚ûú  yarn git:(master) ./bin/yarn --mutex
    yarn install v0.15.1
    error TypeError: mutex.split is not a function
        at config.init.then (yarn/lib/cli/index.js:336:25)
        info Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.

And if just `mutex` is specified, commander treats that as an array and
fails like this

    ‚ûú  yarn git:(master) ./bin/yarn mutex
    yarn mutex v0.15.1
    error TypeError: mutex.split is not a function
        at config.init.then (yarn/lib/cli/index.js:336:25)

This patch makes the `type` a mandatory parameter. So, now

    ‚ûú  yarn git:(fix-mutex-cmd-args) ./bin/yarn --mutex

      error: option `--mutex <type>[:specifier]' argument missing

Also, simply typing `mutex` will be ignored.

    ‚ûú  yarn git:(fix-mutex-cmd-args) ./bin/yarn --mutex
    yarn mutex v0.15.1
    error No command specified.
    ...
    question Which command would you like to run?:",False
4ca4fd13cf72e00f0f83aff9c0b9566ec90d82da,2016-10-12 13:57:29,Sakthipriyan Vairamani,cli: fix help for misspelled command (#830),False
b1a0656c7d88eaddd8b434cbce38bc809242e232,2016-10-12 13:20:14,Martin Broder,"chore(package,yarn): remove eslint-plugin-flow-vars (#622)

eslint-plugin-flow-vars is deprecated and has been merged into eslint-plugin-flowtype.",False
3fde2589e713939ceca80de38b50926d725e887d,2016-10-12 12:58:44,Or Kazaz,Created an .eslintrc file for the eslint configurations instead of having it in the package.json file (#823),False
df3c35d7192e042b16e8fca786e8e76d2708f7ec,2016-10-12 12:28:41,Ben Ripkens,Remove duplicate hashing utility (#808),False
3f6231199dd91a6a5b2502f5b43e8cd270a99050,2016-10-12 12:28:23,Shuan Wang,"Don't display a documentation url if actual command does not exist (#810)

This basically checks first that the command is actually a yarn command
before it displays a url on the yarn website.

Fixes #664.",False
0a5baff0a3077a1f8a5d6b956e168f459d1699e7,2016-10-12 12:26:27,Hiro Asari,"Improvements on Travis CI (#799)

* Move to containers on Travis

Since git-core PPA is already available, there is no reason to
stick with GCE.
(Unless the build requires a lot of memory.)

* Move correct archive

The resulting package is `yarn-*.tgz`, not `yarnpkg-*.tgz`.

* Skip updating nvm

The preinstalled version is good enough to install Node.js 6+

* Clean up .travis.yml

* Instead of excluding certain builds, add OS X builds (build matrix
definition is more compact)
* Change TEST_TYPE names, so that we can call `npm run` uniformly in
`script`.

* Skip upgrading git on OS X

A newer git is unnecessary, and upgrading adds too much time to the build.

* Contruct build matrix with exclude

To keep job number consistent with older builds",False
76c8f9ba410bdcdd163e9611611eafb07fd62f27,2016-10-12 12:17:49,Sascha Gehlich,Fix git dependencies with slashes inside branch name (#813),False
8e81bf47e7ed52692483c3d5e6b5f152f9a88500,2016-10-12 12:12:43,Sebastian McKenzie,"Revert ""Add ied as prior art"" (#817)",False
5452bf694c06cc45d89ab146073952a01cbd9ce2,2016-10-12 10:45:03,Jason Staten,"Add ied as prior art (#797)

Per HN comment from @kittens: ""We initially used a method similar to ied when we first started experimenting with internal usage at Facebook.""",False
5c2bae4d4d711484489488334ad1734052d6bbb1,2016-10-12 10:30:07,Shuan Wang,Include MessageErrors class (#796),False
3033240adca79554b1ae688621dd6ce3f92eea51,2016-10-12 10:28:45,Daniel Lo Nigro,"Delete RELEASING.md (#801)

This exists on the site, and looks nicer there: https://yarnpkg.com/en/org/release-process",False
4c82ac021792af6f1374701bd0cac61fa8ec8b9a,2016-10-12 07:57:09,Vlad Filippov,"fix base-fetcher: use proper util to stringify, clean up imports (#707)",False
16b4e3b9f35a7226cb3b1d425025b654cac60283,2016-10-12 07:55:33,Hasit Mistry,"Handle installation for 'fish' shell (#690)

* Handle installation for 'fish' shell

'fish' is a popular shell. This commit adds support for proper detection and installation of yarn in 'fish' shell. If the detected shell is 'fish', add path to ~/.yarn/bin in $HOME/.config/fish/config.fish file.

* Use a more modern way of setting $PATH in fish

Set `~/.yarn/bin` in `$fish_user_paths` instead of setting it in `~/.config/fish/config.fish` file.

See [suggestion from fish documentation](https://github.com/fish-shell/fish-shell/issues/527#issuecomment-13811988) for more reference.

* Run command to set $fish_user_paths instead of evaluating a string.",False
c9415ca3d2593cf0801111b2b22a6c80b9d084c5,2016-10-12 07:31:02,Roger Nesbitt,"Support unimplemented call in Windows Subsystem for Linux (#772)

* Support unimplemented call in WSL (#753)

Yarn works fine on Windows Subsystem for Linux (WSL) apart from a single call
to enumerate network interfaces.  If this call fails on WSL, we instead assume
that the user has an internet connection and continue.

* Fix a comment which said the opposite of what it meant to say",False
d3a1d85fde2474ffa023041988403669bdf02f8a,2016-10-12 07:29:37,Ryan Stelly,#767 add validate license for empty string and show warning (#768),False
744f1450699b15fc5dacc2e592152f0193da03c2,2016-10-12 07:28:40,nbhargava,"`yarn --help` now equivalent to `yarn help` (#765)

- Makes help flag more idiomatic
- Fixes #740",False
e93bc91516d7a1199343b2135fd0b4675c4c3306,2016-10-12 07:27:36,dalmaer,out dated comment: no more kpm/fbkpm (#745),False
22d0ac99bc2dc070ef109ea02b6d29ebcb4dc5df,2016-10-12 07:27:07,Sergey Rubanov,"Add info for `yarn why` command (#741)

* add info for `yarn why` command

* add more error messages",False
e6739873a3a3f704b80cac8ab78e853522816df8,2016-10-12 07:25:52,Kristj√°n Oddsson,Set the correct filename for the npm package (#729),False
6816bbfa17eb00543c339e8eda7263dde148b408,2016-10-12 07:24:09,Jake,Fix server ID in badge (#734),False
3c2d12b8d918f0e9507643c1533f34aaff722a76,2016-10-12 07:19:27,Vu Tran,add link to LICENSE file (#723),False
b54fc23c6f7e39287c2012971f584a074cd07537,2016-10-12 07:11:08,Zlatan Vasoviƒá,Simplify repository property in package.json (#710),False
c727449254b77b03a43770f0807511c424abfb94,2016-10-12 01:33:11,Henry Zhu,"CONTRIBUTING: add setup instructions [skip ci] (#702)

* add setup instructions [skip ci]

* link to install docs [skip ci]",False
126d8c21f56466826e4cc9d43b66123872b982fe,2016-10-12 01:31:52,Vu Tran,use https protocol in docs link (#719),False
0a2f2e5ab2ffddce7b865f5d7651b0d833186d36,2016-10-12 01:31:19,James Kyle,Add discord badge (#717),False
5545d11e7da72940d090c1d9fd2745e1b8b9af2d,2016-10-12 00:40:27,Henry Zhu,Add back eslint-plugin-react since it is a peerDep of eslint-config-fbjs,False
742cf8d42ddb68464287289de87f4b3877a383d1,2016-10-12 00:35:10,Vlad Filippov,fix typos: git and git-fetcher to use proper archive (#672),False
5758441e2770221a1209fa8fbedb7ebc96c4a4d6,2016-10-12 00:34:49,Victor Szeto,"Show the units of `yarn clean` saved size (#659)

Include 'MB' in cleanSavedSize message.",False
d888f018a3825f9d1a6783a52414c62959009190,2016-10-12 00:33:33,Sebastian McKenzie,add package name credit to @samholmes,False
b880d403ed9f32e724207ecbdb94c794d4c64131,2016-10-12 00:28:53,Sam Saccone,"Respect ignore engines flag. (#647)

Fixes #638",False
aea9e24b514eb5e3dfdb8abd24539977ade87170,2016-10-12 00:18:01,Sebastian McKenzie,update name in package.json,False
ada42e3b0cdec20e851507c0bb5d392d08506651,2016-10-12 00:17:46,Sebastian McKenzie,"Merge branch 'master' of github.com:yarnpkg/yarn

# Conflicts:
#	scripts/install-latest.sh",True
c844df7236ec122ca6b803b9f2943352c9b09a7e,2016-10-11 23:36:49,chico,Remove react,False
57104fe91909ab16df3d5b4c5736227c7537ce75,2016-10-11 23:30:52,Daniel Lo Nigro,"Remove Node.js check from Windows installer for now (#677)

It doesn't handle systems such as nvm or nodemon that install Node.js without updating the registry.

References #626",False
e16953540bebbd42fe4a495ff2f6314568c972c1,2016-10-11 23:28:44,Alican √áubuk√ßuoƒülu,Quote command so paths with whitespace work (#663),False
131bc3ada524c4535ab7c5c0d424f2c7004a4856,2016-10-11 21:46:55,David Brear,changed tilde to home to fix for .zshrc (#625),False
fc4ca7fe23d6d106da8d80cf32379d89bef7a6f0,2016-10-11 21:35:41,Brian Ng,fix typo: enoguh -> enough (#618),False
a3ff5ac0cf1eb13b983d350b1e1503962576e3bf,2016-10-11 21:19:00,Sebastian McKenzie,use $HOME rather than ~,False
fbe848585d1670a50fe17281c47cd69386c23a37,2016-10-11 21:17:45,azu,fix typo: self-udpate => self-update (#608),False
c5472c3f92a1ab1bd7b15b27ff252c3de8abe6a6,2016-10-11 21:17:32,Sebastian McKenzie,alert users that we edited their profile with PATH,False
966b476a471ecc1d8316d7d0b981e581366d8469,2016-10-11 21:01:53,Daniel Lo Nigro,Don't add extra slash to path. References #600,False
918f4400eea9f9abb3254977a4bebc9ecfd6e3b1,2016-10-11 20:56:10,Sebastian McKenzie,0.15.1,False
3d517925d3c8a7c7ac2bea1ac89fabc77a23b9c9,2016-10-11 20:49:56,Sebastian McKenzie,fix yarn.js script reference,False
b642846f98f6ead77a436f5a6d30a39ea90ecfa2,2016-10-11 20:49:05,Sebastian McKenzie,remove symlink,False
25ed711e1d419db0fb9434a3f99ff01f7028ee19,2016-10-11 20:35:28,Sebastian McKenzie,don't remove tarball before we extract it...,False
26de4f0d3ac603e09ac1976892a7058ace97527c,2016-10-11 20:27:06,Sebastian McKenzie,follow redirects,False
0f1db96846badbbe3b43c470c05196eb29437fb4,2016-10-11 19:05:17,Konstantin Raev,0.15.0,False
840c463626d00cc63b35a688198048d7c1673e7b,2016-10-11 18:57:50,Konstantin Raev,removed node4 from circle tests and added single file deployment (#597),False
b008cbb112ef30bc8ae938722b7198388aac2fa7,2016-10-11 18:13:28,Sebastian McKenzie,fix lint,False
28c49a62f5895ecf032ec1cbda2c0be3c3196f7d,2016-10-11 18:12:03,Sebastian McKenzie,Add npm_config_ and npm_package_ lifecycle env variables - fixes #399 (#596),False
be9ed5562f0e8d5b804cab170e63431e5f465f4f,2016-10-11 17:30:01,Sebastian McKenzie,allow proxy to be specified via yarn/npm config (#594),False
855fc0deb634b0e4c536db03324b60d9f38169cb,2016-10-11 17:17:30,Sebastian McKenzie,fix lint,False
41798a50fa3809e28f886ae6dd2e495ce97a7d7d,2016-10-11 17:14:07,Sebastian McKenzie,properly resolve global bin folder (#593),False
c4654ce70cdb198f8d0b725683fb63d82e923c85,2016-10-11 16:52:45,Sebastian McKenzie,use yarn name in cli header,False
057b78bfe465d5407a82fb7758f1010cacfb9bcf,2016-10-11 16:49:32,Sebastian McKenzie,Change .yarn cache directory name (#592),False
5034ac53e999b220fc70227c5314cb4a2d0ebfb9,2016-10-11 16:48:49,Sebastian McKenzie,remove unlink alias,False
82c4b4a2458c2eabba14a0903f3ecf9cce2ed52a,2016-10-11 16:42:56,Sebastian McKenzie,make yarn link work the same as npm (#591),False
4fb5dbc29062809e57db6b380c486c1d31961806,2016-10-11 14:21:02,Christoph Pojer,Less confusing subcommand error messages. (#590),False
50f31337b2c11fcc2d97d2dd93ba0338fae7c0cc,2016-10-11 12:06:10,Christoph Pojer,Make `yarn why` not crash. (#586),False
3378a5614e4966049189f8ebe1580110d78cd07c,2016-10-11 11:48:24,Daniel Lo Nigro,"`yarn init` shouldn't fail if directory is a Git repo with no remote called ""origin"" (#585)",False
6932c25a8a8f994da0b47c1591fc55797d0297f7,2016-10-11 11:24:41,Christoph Pojer,Update debian package descriptions. (#584),False
b8d9e17e35f93283c5d40a1ce756bab53c8975cb,2016-10-11 10:49:13,Christoph Pojer,"`yarn global bin` + README update. (#583)

* Add `yarn global bin`.

* README updates.",False
0011eb027051e67d622c77b37a750c2a1beba0c7,2016-10-11 10:28:47,Daniel Lo Nigro,"Add more stuff to npmignore (#581)

* Add more stuff to npmignore

* Keep yarn.lock",False
40a0b74bc8dc388f49770f36497ba757ea3d3281,2016-10-11 10:15:00,Daniel Lo Nigro,"Build Windows installer into artifacts directory.

References #548",False
48484b238deb2deec4ad8fdcdea8450837534d60,2016-10-11 09:48:06,Daniel Lo Nigro,"""yarn"" -> ""yarnpkg"" (#580)",False
4f3036e6e9e38cdcb465f95350aa1ac14b1bcd89,2016-10-11 04:42:07,Daniel Lo Nigro,"Remove Jest from dependencies (#574)

It's already in devDependencies

npm warned me:
```
Dependency 'jest' exists in both dependencies and devDependencies
```",False
f1adbc6da541e3d645fcb6a1ab21899b5068ea89,2016-10-11 00:31:13,Daniel Lo Nigro,Make `yarn` a symlink to `yarn.js`,False
953c2385142e64f172267318ce655c476f477c0d,2016-10-11 00:20:33,Joel Marcey,"Add `bin/` to the wrapper script commmand in `bin/yarn`
`",False
2010f7d0c1226fe106d53ff5671e3f527d9e469f,2016-10-10 23:10:05,Daniel Lo Nigro,Rename yarn back to yarn.js as a bunch of things still rely on it being called yarn.js. Add a wrapper shell script instead.,False
453d396235d14287d845d10728df10c11f546b5c,2016-10-10 19:08:02,Sebastian McKenzie,"Tarball install (#568)

* rename yarn package to yarnpkg

* add install-latest script",False
44b873480ba3c2edc1745b30c013507f0d50f2bb,2016-10-10 18:09:51,Sebastian McKenzie,correctly handle deduped flattened patterns - fixes #435 (#567),False
3f03aa4bf82d2475e4ad5a4301b8c99d77ca62a9,2016-10-10 17:59:48,Sebastian McKenzie,remove artifacts,False
848f655e0da214900651368ad85d0addcbc075f4,2016-10-10 17:53:45,Sebastian McKenzie,fix optional dependencies - fixes #525 (#566),False
b2cf6771bdb06c5f9e10ea6681e8acf1ceb7605b,2016-10-10 17:45:48,Sebastian McKenzie,don't link a bin if it doesn't exist,False
82b77a546e81b30b6e9e624324dfbe4bcc6bf1c0,2016-10-10 17:32:50,Sebastian McKenzie,"defer execution of git commands until after yarn publish and make it more resillient to errors - fixes #473, fixes #477 (#565)",False
3d7f112c66b4eef7c9a1088d1ebdc8ec8e91082c,2016-10-10 15:41:16,Sebastian McKenzie,add support for files field - fixes #515 (#564),False
a5e22988f709bab5711d6b7d88c542809aa40171,2016-10-10 15:40:20,Sebastian McKenzie,fix lint,False
d59ae0d070e4dc5d1307832503830be6f3147af6,2016-10-10 15:26:43,Sebastian McKenzie,create package root after removing in `yarn cache clear` - fixes #550 (#563),False
1e268f52cace2e658f0ed88c943a7cbf1d67e9f3,2016-10-10 15:23:45,Daniel Lo Nigro,Add RPM packaging (#556),False
4f60e6a3e956c572a5a7b502964f073f412a0884,2016-10-10 15:23:11,Daniel Lo Nigro,"Group packages by license text in ""yarn licenses generate-disclaimer"" (#552)",False
d564e57c0279b70ff95104657c7cd8b980be7ce4,2016-10-10 15:22:46,Sebastian McKenzie,add team command (#562),False
99dd4504469273332f01ce5ad846c995378cc048,2016-10-10 15:22:35,Andres Suarez,Add transform-inline-imports-commonjs plugin (#561),False
91a1ec374fd33c8ebc778052e8cb837f55963493,2016-10-10 15:21:34,Konstantin Raev,"fixed a few tests and lints (#559)

* fixed a few tests and lints

* fixes after @zertosh review",False
de1d843ba839e53698db590e08434acb9540a3a8,2016-10-10 13:45:23,Konstantin Raev,fixes reporter test fails (#558),False
f6918a58917eb30286202fc98ea676365af76412,2016-10-10 05:39:25,Daniel Lo Nigro,Fix website URL in readme,False
50d60fe0373990f20e29c8eaed79900c74752e29,2016-10-10 00:28:09,Sebastian McKenzie,Use our mirror of the registry rather than the existing one (#557),False
f2858f5a5bd04a0eb696044b9398477c9a7076cb,2016-10-09 16:09:16,Daniel Lo Nigro,Store cache in LocalAppData rather than AppData (#554),False
d5a95766e6a357620c9663f5fd82e25bc9809598,2016-10-09 16:08:50,Daniel Lo Nigro,Don't use colons in HAR file name (#553),False
5ec32c1b52acda2da41fc688bb85b57faf5633a1,2016-10-09 04:17:41,Daniel Lo Nigro,Fix CLI documentation link,False
d3e3433ce288bce15961bdb2784ebbe2becac0e0,2016-10-07 19:45:48,Sebastian McKenzie,remove kpm name (#546),False
54dd6cb49fb4eed18336d68860090290b54ebfc6,2016-10-07 16:15:38,Sebastian McKenzie,add back prepublish lifecycle script - fixes #542 (#545),False
7f2d97ce74203ef09720614db7bc47540d73f9c9,2016-10-07 15:53:58,Christoph Pojer,Expand why command. (#544),False
46ef8b9e5be70c11b2e95532bfc4dffdd16ee9d6,2016-10-07 15:53:45,Christoph Pojer,"CLI polish. (#539)

* Add link to website for every error that is thrown.

* Add support for `yarn outdated [list of packages]`

* Don‚Äôt throw invalid arguments error when `yarn install <package>` is given. We already log an error and show the right command.

* Add `bin` command because it seems like something people might use.

* Update install command.

* Rename file.",False
2812f05b300b510cc8c83c26b841f207f3ac9d26,2016-10-06 20:47:39,Sebastian McKenzie,"Add missing ls commands (#535)

* fix lint

* add unlicense

* add missing ls commands - fixes #529, fixes #530

Signed-off-by: Sebastian McKenzie <kittens@users.noreply.github.com>",False
25ac76e574b0d1225a17a8a55682ebc55057bef1,2016-10-06 19:26:37,Sebastian McKenzie,add more reporter tests (#534),False
1e92791d1ff208509558af13b2c5d3039787d7ae,2016-10-06 13:50:08,Christoph Pojer,`yarn help` updates; rename `dist-tag` to `tag`. (#528),False
0e201722341ce2a83730d9ae74319f00ddb5d55f,2016-10-06 13:09:28,Sebastian McKenzie,add yarn version to engines - fixes #522 (#527),False
49ba81895d836c73cb37773f24867ea7a58e29be,2016-10-06 11:50:39,Daniel Lo Nigro,"Tweaks to progress bar: (#526)

- Decrease width by 1 to account for the fact that some terminals need an extra character for the cursor
 - When re-rendering, just go to the start of the line rather than clearing the line. This prevents flicker",False
eb5e6ab75af9a6198829e6de5eb65f13c692a7f8,2016-10-06 08:23:17,James Kyle,Allow os/cpu whitelists and blacklists to be mixed (#523),False
24654500602bac6e2ad752fd05b3ef3cab968ed9,2016-10-05 23:01:40,Sebastian McKenzie,put roadrunner cache in ~/.yarn - fixes #517 (#518),False
c41c3d622ee0016ee2343f7bc2717d483b82adea,2016-10-05 22:06:25,Sebastian McKenzie,remove cwd from git clone,False
c86930e087aceb88b342311354d92bbe70282bbd,2016-10-05 21:26:53,Sebastian McKenzie,let -> const,False
e5da478e055db80c7a6c99b33653f87b564ee932,2016-10-05 21:14:59,Sebastian McKenzie,"add `generate-lock-entry` command - fixes #198, fixes #342 (#516)",False
1c8f2c1ffb5af6b4130f4f2ec9ce632b810c07a9,2016-10-05 20:20:30,Sebastian McKenzie,use `git clone` rather than `git fetch` for proper ssh support - fixes #242 (#514),False
080d7a35b33291b136f2c87cdb51e1aa6b406a8a,2016-10-05 19:48:16,Sebastian McKenzie,prune tag from node version when checking bin/yarn compatibility - fixes #511 (#512),False
715cf52e0865e7d0050931f995b666363e3760e1,2016-10-05 18:40:03,Sebastian McKenzie,fix tarball resolution of named patterns with .tgz extension - fixes #455 (#509),False
55de3e76e8ed819a1ae889a4731066f60a02b970,2016-10-05 18:28:58,Sebastian McKenzie,add missing lifecycle env variables - fixes #399 (#508),False
e4262dba04d6440643cd5abd2206e5a18ef43ba0,2016-10-05 18:17:31,Sebastian McKenzie,fix registry references in `publish` and `login` commands - fixes #474 (#507),False
0b4f2df9a485663bf2653dd8c99e91192f20da54,2016-10-05 18:08:18,Sebastian McKenzie,more thorough repository check in `init` command,False
7aea3c5d2353edc53d56757fef18f93cc1b339dc,2016-10-05 17:46:15,Sebastian McKenzie,require name and version in manifest to pack - fixes #457 (#506),False
536d89e71ad3d37d49841cb05d53c64fbf38516f,2016-10-05 17:36:49,Sebastian McKenzie,const -> let,False
17710d52e6c926e813b8bbfc64cdb81355e2d0a2,2016-10-05 17:35:44,Christoph Pojer,var/let -> const (#505),False
0ae3de436674eade590b385c0417172bd4baf954,2016-10-05 17:34:58,Sebastian McKenzie,Create empty registry folders when nothing to install (#504),False
86c98a62a721ec6b3cfcbb9ad745a1e6e1fafdf1,2016-10-05 17:20:44,Sebastian McKenzie,"Add missing commands (#439)

* add init command - closes #360

* list available commands and examples in cli help - fixes #345

* add outdated command - fixes #379

* rename uninstall command to remove

* add global command - fixes #227

* remove command aliases

* fix licenses not being shown due to integrity check shortcircuiting - fixes #424

* turn aliases back into js

* clean up single instance arguments - fixes #308

* ignore arguments that are included after -- - fixes #251

* add unlink command

* add lint rule against non-language keys

* clean up Config initialisation

* add link command - closes #336

* support array of string engines - fixes #447

* add missing request cache fixtures

* polish link command

* remove gulp file output

* add config command - fixes #378

* add yarn.lock and fix constants

* update aliases

* add missing i18n for CLI

* make `upgrade` command work how you'd expect

* update test metamethod

* require arguments for add command

* move dependency objects into constnats

* add init command - closes #360

* list available commands and examples in cli help - fixes #345

* add outdated command - fixes #379

* rename uninstall command to remove

* add global command - fixes #227

* remove command aliases

* fix licenses not being shown due to integrity check shortcircuiting - fixes #424

* turn aliases back into js

* clean up single instance arguments - fixes #308

* ignore arguments that are included after -- - fixes #251

* add unlink command

* add lint rule against non-language keys

* clean up Config initialisation

* add link command - closes #336

* support array of string engines - fixes #447

* polish link command

* remove gulp file output

* add config command - fixes #378

* add yarn.lock and fix constants

* fix lint, copy test fixtures to temp directory rather than mutating cwd

* fix lint

* add handler for extractor errors

* remove unused jest snapshot

* fix check-lockfile script

* fix lint

* fix check-lockfile

* try and fix test

* properly copy over lockfile scripts folder, ignore ds_store files in test directories

* remove problematic fixtures

* add back problematic fixtures

* disable test",False
fa5e2ba61d8cfab7c603790d808497f08d11234c,2016-10-05 16:47:44,Christoph Pojer,Add newlines to toplevel items in the yarn lockfile. Fixes #498. (#500),False
b230cc27c51c796fa0b8b1cd2a9703b7138dfd5c,2016-10-05 15:53:29,Christoph Pojer,Add error when `version` is used without `‚Äînew-version`. (#501),False
683f0baffa848c21630066550f5f3ea9c1a21c2e,2016-10-05 15:24:51,Christoph Pojer,Fixes for `yarn why` (#502),False
14fbecdb6feb7f7bd3adf2fcadc96e9300453720,2016-10-05 14:08:39,Sebastian McKenzie,fix CLRF line,False
9e51fa2de815d9527edc419353a76972914687e9,2016-10-05 12:27:36,cpojer,Run proper test command on CI again.,False
dbc2706d5aea83ba1b7c3b9707a33ac8acfaa53a,2016-10-05 11:33:46,Christoph Pojer,Update to Jest 16. (#488),False
58d1f499527175876cbef77e2f3f192118ed269f,2016-10-05 09:13:55,Christoph Pojer,Improved `yarn run` command. (#493),False
81b98dfb43d625a61203b3f999cbc4d605a1beda,2016-10-05 02:55:34,Sebastian McKenzie,fix line ending,False
b63a1d15109dac72f522d2dccf234c4f8bc531a8,2016-10-05 00:16:40,Daniel Lo Nigro,"Debian package build (#414)

* Script to build Debian package

* Adjustments for Debian scripts:
 - Add copyright file
 - Add full description to control file
 - Ignore some lintian rules
 - Delete clowny files that aren't needed and break lintian rules
 - Update shebang in yarn.js from ""node"" to ""nodejs"" as per Debian package of Node

* Add basic Debian instructions

* Revert readme change and explicitly require Node.js 4 or above",False
f2b93ffc00add25b9b73e35c355f42ddbe87a509,2016-10-04 22:45:16,Daniel Lo Nigro,"Add Windows Chocolatey package (#442)

* Add Chocolatey package

* Update to final URL",False
91024fe5247c3797df9c77d2db1d6c3519988f57,2016-10-04 21:36:00,Andres Suarez,Fix lockfile sorting (#497),False
08625c3eb7c1e3d579b00ec4d0648dd689e243d0,2016-10-04 19:16:11,Andres Suarez,s/normalise/normalize/,False
72dc2ab09b9dc34ef140592baa02c757adf53fd8,2016-10-04 19:15:52,Andres Suarez,Bundle & distribute yarn as one js file (#413),False
54a7900cd6d0c42051c62176f99b1ebf76c49779,2016-10-04 17:20:12,Konstantin Raev,"Allowed unknown options in arguments parsing (#496)

By not alllowing unknown options we break forwards and backwards compatibility.
This settings allows options that are not supported yet.",False
d8bdd4599a1b0af8beae5d8a486a0d37b0d812e5,2016-10-04 17:02:27,Andres Suarez,"Fix .gitattributes for binary files (#495)

Fixes #494",False
e193ed482c955ad994db05b51d17e5ea427a9f63,2016-10-04 16:22:11,Andres Suarez,Pre-generate infer license regexs (#492),False
234b5d07918c1aa4a3635b8104ec8594813ac88a,2016-10-04 16:10:53,Daniel Lo Nigro,Pass version as variable rather than hard-coding it,False
55d7acdb90c8d72ad5dea937dfb1f77dc57d849c,2016-10-04 16:10:53,Daniel Lo Nigro,Add batch file (yarn.cmd) for executing Yarn on Windows.,False
66e43957654d45e1e801b66c4ef1a61dcd2a2af3,2016-10-04 16:10:53,Daniel Lo Nigro,Add Windows installer,False
de167884f4feb0c748070067b047aabb6d747124,2016-10-04 16:10:53,Daniel Lo Nigro,Enforce LF line ending,False
af01eb321c67e85a7d9822de5c878528de412fca,2016-10-04 15:54:36,Daniel Lo Nigro,Add build-dist script for Windows (#485),False
9a66392a8d9f3e7862629a6788a8bffe5fd06670,2016-10-04 15:43:11,cpojer,Sort dependency fields in package.json.,False
ffa5442e3f23ff352faec226c156b27ec7333e7f,2016-10-04 08:54:37,Yehuda Katz,"Update to Flow 0.33 (#487)

* Update to Flow 0.33

* Update flow-bin in package.json

* Update lockfile.",False
869cac2524bb03c9bae1495fc9170fdc803cbf11,2016-10-04 08:32:06,Eric Vicenti,"Refer to package.json file as such in case it is missing (#471)

* Refer to package.json file as such in case it is missing

* Update config.js",False
1bc46b30d3ab724a4d2a7d1daf0fe67d56ab6e8a,2016-10-03 19:40:17,Konstantin Raev,0.14.0,False
8417333d0b14ff12ab18ba29926bf381fd2bd91b,2016-09-30 20:53:15,Andres Suarez,"Fix ignoreLinesToRegex edge cases (#462)

It didn't handle lines with only a `#`, and would let invalid patterns through like `!`.

It also stripped ""trailing comments"", but that's not a thing in gitignore or npmignore.

Fixes #456",False
28736b7cd2e8d84c8a1c6c3ae77dbf5b88d7b8cf,2016-09-30 16:09:09,Igor Minar,fix: support scoped packages with yarn info,False
25cb8cebecb031341702db2bf10fac958059a090,2016-09-29 22:52:55,Konstantin Raev,"Fixed circular dependencies resolver (#479)

* fixed circular resolver in install scripts

* fixed more",False
d48f926cd4efa4297f884b56c4d37742766fab5e,2016-09-29 20:34:29,Konstantin Raev,"added test for creating mirror from git url, mirrors from git contain git hash in name",False
fb2d624b4bbf43b4604fa0bc096ff016fdb57494,2016-09-29 20:34:29,Yunxing Dai,"[GitFetch] Save/load from offline mirror

This patch adds the ability to save/load a package when offline mirror is enabled.",False
de03b318659aa2931744129437cb46c72d19e32b,2016-09-28 22:23:49,James Kyle,Add .yarnignore to ignored filenames list in pack (#465),False
1085c26a9316c4c16e02b77c11791824f393b18c,2016-09-28 21:49:47,Paul Irish,"bump request & request-capture-har (#464)

* bump request & request-capture-har

* request-capture-har bumps: yarn.lock",False
5f04e8691096de2423cdef4cd83670e0680d8c92,2016-09-28 15:26:56,Yunxing Dai,"Run install script in order  (#427)

* Fix parallel build logic

* Break circular dependencies

* Add semi

* Have accurate total number

* Add testcase

* Add missing fixtures back

* fix dependencies

* Add peer dependencies as dependency",False
1171aa835e431bb121860d5ad9518db904eed0f7,2016-09-28 09:51:10,Christopher Chedeau,"Do not put $ before command (#461)

Putting `$` is annoying because you can no longer copy and paste a block and just put it on your terminal",False
618d75247348f29b514a52717aff5388ea5f08d0,2016-09-27 17:05:18,Yunxing Dai,Normalise git urls that start with git+ (#451),False
46b5bd245412ca1f3cd8bf86482ee15d11a75739,2016-09-26 16:22:51,Christoph Pojer,Add info command. Fixes #445. (#448),False
e45eecbeb682b7c8512adbfd786aa9ae5a3f2da5,2016-09-26 15:18:52,Sebastian McKenzie,use roadrunner for caching node module resolution (#446),False
81b77425544a812a3167b9902a101fd9278ef8e3,2016-09-26 15:17:55,Sebastian McKenzie,"normalise git urls that start with git+ - fixes #411, closes #428, fixes #313 (#434)",False
9f9ee3954720d5128c02102cac1ae6a6de54193f,2016-09-26 10:56:29,Andres Suarez,Remove unused dependencies (#444),False
fb3acf321f1c20f6000f2e07c4427d8cde53c486,2016-09-26 10:51:13,Christoph Pojer,Update PULL_REQUEST_TEMPLATE.md,False
07eb3db20265050a183996ea8f57ee7668d78652,2016-09-26 10:50:24,Christoph Pojer,Update ISSUE_TEMPLATE.md,False
ae447f3a82455425b68149780c26a05348ce285d,2016-09-26 09:37:52,Christoph Pojer,"Merge pull request #441 from yarnpkg/lazy-require-request

Lazy load ""request"" module",True
56f58614547a1978a7d4eeb25e1b476441f0deec,2016-09-26 09:36:36,Christoph Pojer,"Merge pull request #443 from yarnpkg/remove-concat-stream

Remove concat-stream",True
512c693e69855deae3eb8145355d48505bb497e1,2016-09-26 08:19:44,Andres Suarez,Remove concat-stream dep,False
4721406e6cb71598c8c338e6be1b6734358c597f,2016-09-26 08:19:44,Andres Suarez,Replace concat-stream module with ConcatStream util,False
fd8adfc032b30fa4240783962261d74855bc3ae8,2016-09-26 08:19:44,Andres Suarez,Add ConcatStream util,False
85d9d10ae9535c8293225d393701de1ed72f7a58,2016-09-26 08:19:44,Andres Suarez,"Rename `util/{compress,stream}.js`",False
aea4bfb59341dcbb1ffa5a57ec5de96f65e69d47,2016-09-26 06:12:43,Andres Suarez,"Lazy load ""request"" module",False
7a3f9e61cc3c086af510ddcdfb8ad66361357363,2016-09-26 05:11:52,Sebastian McKenzie,remove assets directory,False
aa759b32b5e6a4a5073add814ecd90e211de8280,2016-09-26 05:02:06,Sebastian McKenzie,Merge branch 'wycats-windows-redux',True
59ed1b552d7557b8c4dda43f570076d9f41ea5d3,2016-09-26 05:01:56,Sebastian McKenzie,fix lint and fixtures,False
0e34e9cbb2d91392e1ec6172ee1d7f261ff6fe9a,2016-09-26 04:45:38,Sebastian McKenzie,Merge branch 'master' into wycats-windows-redux,True
7ab27db3fcb2623cf518bb978b1cc1e5620ac104,2016-09-26 04:45:28,Sebastian McKenzie,"Merge branch 'windows-redux' of github.com:wycats/yarn into wycats-windows-redux

# Conflicts:
#	src/cli/commands/check.js",True
96ee7e9745c8a7ca25f7f4a4eaa35171e67c92a9,2016-09-26 04:45:04,Andres Suarez,"Fix lint build (#440)

* Fix lockfile key priority sorting

* Fix eslint errors

* Remove unused variable
* Parentheses around arrow function argument
* Strings must use singlequote",False
629a06bf7193c089c2ff48de11db1d89d1753139,2016-09-26 03:59:54,Sebastian McKenzie,Merge branch 'master' of github.com:yarnpkg/yarn,True
c5249586b6021881739857060b41d29b269d69ee,2016-09-26 03:59:41,Sebastian McKenzie,Merge branch 'wycats-better-manifest-normalisation',True
157e2765f802c9504e684d363fbe048aa631d51c,2016-09-26 03:59:28,Sebastian McKenzie,"Merge branch 'better-manifest-normalisation' of github.com:wycats/yarn into wycats-better-manifest-normalisation

# Conflicts:
#	src/util/normalise-manifest/fix.js",True
b3ba3e9412062b3cc23dd7b6c6ab36812f676a3e,2016-09-25 22:05:10,Yehuda Katz,Fix a few failing tests,False
e622480866c5991d3de2ff12ac104b9dbfcc55cb,2016-09-25 21:49:54,Yehuda Katz,Better path splitting strategy for Windows,False
d59b91f6b984273072ae91ab33e171d29269db00,2016-09-25 02:49:20,David Xu,return only collapsed patterns on flatten (#436),False
8f1392a3fc3517c66652c5f8ade8353b683cb526,2016-09-25 00:41:26,Yunxing Dai,"[semver] interpret versions and ranges loosely (#429)

* [semver] interpret versions and ranges loosely

* use global config for looseSemver

* add --strict-semver flag

* fix semver version normalisation in manifests

* check semver version for validity in package-compatibility",False
bcd5f498ff44f45bd82ec145c71b8f248cfb66d4,2016-09-24 23:47:59,Sebastian McKenzie,Remove lodash usage (#433),False
b9bc5cfee9bd8ec9bf8711151bc44c4e7f8fbc6a,2016-09-24 06:16:11,James Kyle,Update CONTRIBUTING.md,False
013459b3832b5c05db5a95536e9b6bbdbc8cbf5e,2016-09-23 13:58:41,Yehuda Katz,"Improve types in normalising manifest

Make the values in the non-normalized manifest `mixed`, and then verify
that the raw values are what we think they are.

This should help avoid bugs when working with manifests that come from
ad-hoc sources like git repositories.",False
7c4cd092a3f8fc491fa11e69361b2592e4854e63,2016-09-23 12:54:34,James Kyle,Update RELEASING.md,False
978fa29da491e75a5d35ec0a597b7a1959178c3a,2016-09-22 20:08:01,Sebastian McKenzie,Merge branch 'master' of github.com:yarnpkg/yarn,True
8d8a48ffd2cad4fde801eef4ddcc272da9c6341c,2016-09-22 20:07:44,Sebastian McKenzie,add logo.psd,False
ad1656ed3506e15bf40397fb97fef284c8db31b0,2016-09-22 20:06:17,Sebastian McKenzie,add avatar to assets,False
679b9c35af0cf2fa74f593b6d16829551f2a7d38,2016-09-22 20:06:12,Sebastian McKenzie,add missing request cache items,False
d5dd92d40a5afc0da213b82e7f8c2787a0e137ff,2016-09-22 17:15:25,Andres Suarez,Ignore isTTY flow error (#416),False
0893d6bf832e0b62a9899b5dedf8a05be9494234,2016-09-22 14:29:00,Andres Suarez,"Misc stylings (#409)

* Remove non-existent file from eslintignore

* Fix file case

* Use as consistent style as possible in non-transpiled files",False
ccce36c0e4a4ba7fe878896d27a7cc2848467849,2016-09-22 14:28:08,Andres Suarez,Fix test dirs in gitignore (#410),False
56de8e4b747a5e94afab82ce06824cab297e0807,2016-09-22 14:27:51,Andres Suarez,"Fix require import (#412)

* Use require for CommonJS modules

* Use json extension to require json",False
305ce31a6e70155fad4961c43d40f830bac68e14,2016-09-22 14:27:38,Sam Saccone,"Remove -f alias for --flat (#408)

fixes #406",False
9f58576d127b34aadbb0c5b89e506faf503b3e34,2016-09-22 14:26:06,Sebastian McKenzie,only enable emoji for osx - closes #405 (#415),False
773e55217e3aba043f6dd97b9aea114e397c1c2b,2016-09-22 08:27:31,Yehuda Katz,Fix lints,False
412374d067c617f7def4121452eac516cd3e7f5f,2016-09-22 08:27:31,Yehuda Katz,"Most Windows tests passing

There are two exceptions:

expect().toMatchSnapshot is CRLF-sensitive. Since that facility is
supplied by jest, I can't quickly fix it.

There is some quirkiness with copying relative symlinks on Windows. For
now, I guaraded the relevant test, but I'd like to figure out what
semantics we want and how to make it work.",False
7ba8cfadb6d99e3b47917c5acd97794d3c08fb61,2016-09-22 08:27:31,Yehuda Katz,"Get add tests passing on Windows

This commit also fixes a few rebase conflicts",False
0e6ec0081e63df10b75c942b6fa6c6f500795c46,2016-09-22 08:27:31,Yehuda Katz,"Create LocalTarballFetcher

The TarballFetcher assumes that paths are also valid URLs. That isn't true
on Windows.",False
5b0334f4ecac62a64251e0abc5abe870dfe67853,2016-09-22 08:27:31,Yehuda Katz,Better path splitting strategy for Windows,False
f049ab56d198a81da097868be4bb1ccd84ffefe8,2016-09-22 08:27:31,Yehuda Katz,Windows passes again against master,False
36e14e5b39cfbdb7ac375d8814b8c91bec45d8e4,2016-09-22 04:28:39,Sebastian McKenzie,fix arrow function in JSONReporter,False
34ce765ad1a327c462e73b88ae62a08e94178d67,2016-09-22 04:22:19,Sebastian McKenzie,add back Promise.reject() instead of throwing an empty error,False
a922a95c7914c40df3add31387248f364841a109,2016-09-22 03:28:31,Sebastian McKenzie,copy npm user agent - closes #395 (#398),False
6d5472a6fc7344dd8d0cbb7edf008c1cdbe5cb47,2016-09-22 03:27:46,James Kyle,Remove CLA agreement in contributing docs (#403),False
527d9f67789313c1b6de9c9f213512fd8dbd7828,2016-09-22 03:24:25,James Pearce,nits in readme (#402),False
87f3da96909db1eeaaa597426655baf79af03151,2016-09-22 02:13:20,Sebastian McKenzie,"Warn when a shrinkwrap exists in the cwd (#397)

* warn when a shrinkwrap exists in the cwd - fixes #396

* Wrap TODO with brackets",False
b52b7c5f381db3a56029bf2689b4dfde10f6a3b3,2016-09-21 21:05:22,Konstantin Raev,"Added build-dist and check-lockfile to Circle (#390)

Until we get Travis as stable as Circle I rely on Circle green badge when accepting PRs.
This change adds the 2 missing commands to Circle.",False
d14878048b02dbf02aff6a8860bc859094d80236,2016-09-21 20:18:56,Sebastian McKenzie,"when fetching from lockfile bring over optionalDependencies - fixes #374, fixes #320 (#391)",False
297d1fca247cf5c37d709809ec258d70b35aeb69,2016-09-21 19:48:08,Sebastian McKenzie,clean dependency objects for all resolved package manifests,False
8168fd30f49e83dfb64b60e3fc3f9b99a86ad5ca,2016-09-21 17:52:05,Sebastian McKenzie,"Normalise manifests when loading for a root install (#369)

* Normalise manifests when loading for a root install
 - Also turn dependency collision from an error to a warning

* dedupe optionalDependencies key first when normalising manifest to ensure correctness

* add tests",False
2a9312bfc3e0aea3fe06e8bf65b262f5b2f3e8f2,2016-09-21 17:49:25,Sebastian McKenzie,show dependency chain when outputing npm deprecations - fixes #344 (#367),False
ade49ae12b9151921977eae74cee4a51a7b38acc,2016-09-21 16:26:35,Sebastian McKenzie,add `yarn check` to `test-ci` script to ensure `yarn.lock` is always up to date - fixes #291 (#368),False
bf1cbb82cd8534aaf0fdfcaa78b1e8923adfda3a,2016-09-21 16:04:08,Andres Suarez,"Even more flow improvements (#388)

* Fix RequestManager error flow type

* Fix getPathKey env type

* Fix class bind $FlowFixMe

These are the only circumstances under which `any` is ok. When you need to bind a method to an instance, there's just no other way.

* Remove unneeded invariant

* Consistently type request ""body""

* Type fetchers grab-bag entry module",False
e2223b425a0304c07d8d64a969eca4e663a1f009,2016-09-21 11:14:12,Christoph Pojer,"Merge pull request #387 from yarnpkg/update-usage-for-yarn-add

Fixes #384",True
8089dc1a0116908037da467a0d2b5c83b6b64b81,2016-09-21 11:13:26,Yehuda Katz,"Fixes #384

Update usage to match current implementation.",False
babe8e2fc216e98cb7966300bb62bc83c0d1c3e6,2016-09-21 04:52:42,James Kyle,"Remove bin aliases (#381)

* Remove bin aliases

* Add kpm bin alias back",False
34c77878ef50274b741816c7517a2465f15d9d02,2016-09-21 02:19:35,Andres Suarez,"More flow type improvements (#380)

* Prefer ""maybe"" types over ""false""

* Remove unneeded invariant",False
abaa285a8ddcac1cf043c40ac6e8d056b5c7c964,2016-09-21 01:14:02,Andres Suarez,"Remove strip_root=true from flowconfig (#373)

This setting only applies to `--json` output, which is normally only used by tooling, and said tooling adds it as appropriate. By forcing it via `.flowconfig`, you break integrations with tools like Nuclide (see https://github.com/facebook/nuclide/issues/662).

If you've used Nuclide, and you were missing errors in the gutter or when hovering over them, it's because of this.",False
957c70341ae0ffa847bf33a3857f6eea56f3972d,2016-09-20 23:12:48,Sebastian McKenzie,Rename `cache clear` to `cache clean` - fixes #355 (#366),False
d4d7e2ac89c8c4274c13b517064a8bbaaafbebe8,2016-09-20 22:35:07,Andres Suarez,"Clarify mirror path flow types (#371)

It wasn't entirely clear when it was ok to have a ""maybe"" mirror vs. an ""empty"" string mirror. Fixes #350.

It's unfortunate that the prevalent js style for checking for nullness is to check for falseness. Because Flow lets you express ""maybe"" as `null` or `undefined`, using falsey checks instead of `!= null`, leads to a lot of loss of information.",False
dec0f8e37664da4fb62a56dc79e51a7008ccbc8c,2016-09-20 22:34:29,Sebastian McKenzie,merge in additional child_process.spawn arguments when executing lifecycle scripts (#370),False
7011eb00c2a0d2aedbf3fd0370d509e98a590b55,2016-09-20 21:22:41,Sebastian McKenzie,fix build-dist name,False
624dc4171562b5c2959c1280d9c7b5fa0b283981,2016-09-20 21:21:58,Sebastian McKenzie,Add heuristic to generate new lockfile if existing one doesn't satisfy the request patterns (#364),False
e70376bcb7891eb0537ef27ac862d9000bcb7ff4,2016-09-20 20:37:38,Sebastian McKenzie,add determinism to hoisting queue - fixes #351 (#365),False
1c89ee8f530c9e7af4ce4191843b57518ec6b35d,2016-09-20 20:26:03,Sebastian McKenzie,only run tests for appveyor,False
6820fb2d33e360247a5c0ece0f1d5056b7a881b7,2016-09-20 19:33:11,Sebastian McKenzie,Rename kpm to yarn (#362),False
fcac277e41bcbbdff682c36ac58380e60bd35480,2016-09-20 19:27:23,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
6aead28e33f6b5a1c8e7454db86f5db40660668e,2016-09-20 19:27:06,Sebastian McKenzie,only run appveyor on master and stable branch,False
2ef0cfb9afcdb53d58497db5f682dcc2445f1ef0,2016-09-20 10:03:25,Christoph Pojer,"Merge pull request #363 from cpojer/master

Add issue and pull request template.",True
2e8c1b9ee349fba4e2d821fef3cf75840887d4eb,2016-09-20 07:13:40,cpojer,Add issue and pull request template.,False
2d4b18986e9bc1d03c6916cbb93ab801dce477c5,2016-09-20 02:13:49,Sam Saccone,"Run prepublish after install not before. (#361)

Fixes #354",False
1316ab2f7efa296e545c138f2cf833d81a540143,2016-09-19 20:29:39,Konstantin Raev,fixed repo name in release deployment (#358),False
d14f75da3fc79ae762be90d31e44c1aaf7ffc357,2016-09-19 16:43:36,Andres Suarez,"Silly nits (#353)

* Use arrow function instead of `this` alias

* Use map instead of for-of/push",False
0fd7b7998e3a1aa5ca0686d5697ded983203bcf3,2016-09-19 16:15:59,Konstantin Raev,"Fixed mirror paths in lockfile when multiple packages have the same remote (#347)

* Fixed mirror paths in lockfile when multiple packages have the same remote

fixes #318

* added test for the change",False
5770dc429c129745b11ef9892e9873d777cf85cb,2016-09-19 15:10:58,Jan Kassens,Small update to README (#357),False
a38ffc62a7954527220bba827cf9b7190c4abe30,2016-09-19 15:10:44,James Kyle,Moving docs to yarnpkg/website (#356),False
355988581a2be843559556ad0a262863c85d2672,2016-09-19 15:10:28,Andres Suarez,"Async function related optimizations (#352)

* Convert unnecessarily async functions into normal ones

* Remove explicit Promise returns from async functions

Returning an explicit Promise from an async function is doing unnecessary extra work, since the resolved/rejected value has to be denested. It's better to just return a value (or throw if it's a rejection).

* Add lint rule no-async-without-await",False
c077be9a4ab0821e2b11aa0a17e9db34deebe886,2016-09-19 15:10:09,Andres Suarez,"flowconfig improvements (#349)

* Remove unneeded `esproposal.class_static_fields` config

This was enabled by default in Flow 0.32.0.

* Ignore untyped high churn directories",False
0da5e861cb43882167917f44c9bf1ff613a1feb7,2016-09-19 15:09:58,Andres Suarez,"Refactor streams use in tarball fetcher (#348)

* Use built-in `stream.Transform` to create `HashStream`s

Since we're only targeting newer Node versions with a reasonable stream module, and we can use the `class` syntax sugar, it makes sense to extend `stream.Transform` directly to create a `HashStream`. In a future commit, this will allows to remove `through2` altogether.

Also, `HashStream` was previously mistyped as a `stream$Readable`, when in fact, it's a `stream$Transform`.

* Fix `cachedStream` type

`validateStream` (`cachedStream` is piped into it a few lines below) was mistyped as a `stream$Readable` instead of a `stream$Transform`. It's now correctly typed, so this isn't necessary.

* Use idiomatic streams to unpack tarballs

Instead of doing weird nested stream passing, there's now an `Unpack` stream constructor that can unzip a stream if the input is gziped, or passthrough the data otherwise.

* Unnest tarball saving streams

* Use `stream.PassThrough` for logging instead of `through2`

* Remove `through2` dependency",False
39f7a38c235e95700acd2f4dc504315b41c4b1d2,2016-09-17 04:32:33,Sebastian McKenzie,add appveyor,False
01d7662d61a08cc6a913c37868e3aca0b83fb51d,2016-09-17 04:18:40,Sebastian McKenzie,update README to yarn,False
ceb21ccc2902e7dc4cb899f5bbaea2ef96767346,2016-09-17 04:11:31,Sebastian McKenzie,add missing exec export,False
b887b4d36a6f0373692e8bfe38fbf92ead2748e6,2016-09-17 04:01:04,Sebastian McKenzie,fix org move,False
4c7725a798e479acde12f0896dae010f1bd18260,2016-09-17 00:57:41,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
46e8be5a9b5e692ac9307a79342d0c1e03ffc3da,2016-09-17 00:57:37,Sebastian McKenzie,remove patents and facebook license headers,False
98c1801f04371f14cdbc8cdba88d7bdf6490c4dc,2016-09-15 21:09:49,Sebastian McKenzie,"Special case semver semantics for node <1.0.0 in engine check - closes #328, closes #325 (#341)",False
06853a73a3268cb9061563dea71127eaa18c9f0b,2016-09-15 19:49:22,Sebastian McKenzie,use snapshots for json/console reporter tests - closes #278 (#340),False
94993157e3c5e4b4a773f445af059ec5c282577e,2016-09-14 20:21:20,Konstantin Raev,0.13.0,False
a530ad9cc89d94c3d1fcbd833371312444262756,2016-09-14 20:20:13,Konstantin Raev,regenerated lockfile (#337),False
7ac72dfa9cc16d68bf471318706f800b7f0e2e7c,2016-09-14 20:12:28,Konstantin Raev,fixed lock file (#335),False
3ae1be14e637fc69dded862f87bf23e2a4bacc21,2016-09-14 03:44:30,Konstantin Raev,Fixed symlink copy in build command (#332),False
f0c38aca77c1cab6f346d3bf29d770d06817efc0,2016-09-13 22:34:02,Paul Irish,fix typo in manifestDependencyCollision-en (#333),False
0db27621b89fc848c3379a26495ceef606264a22,2016-09-13 21:45:59,Sebastian McKenzie,add help command - fixes #326 (#329),False
9b3005bb2bcb1e3894ad9dbbbe33152230c5828b,2016-09-13 21:06:42,Cristian Carlesso,"Removes common-mirror folder (#331)

removes [network] tag in front of tests",False
7bc9f822b08bc8af0b11119c218ac3aa7e36a531,2016-09-13 16:42:46,Sebastian McKenzie,"Ensure scripts are ran correctly (#323)

* ensure scripts are ran correctly - closes #288, #287, #269, #236
 - add windows support for lifecycle scripts
 - run install scripts at the same place as npm
 - add `run` command
 - check .bin for possible comamnds

* fix nits",False
e48b9687966f7fa003a8bc4afcc76dc1df127add,2016-09-13 16:34:02,Sebastian McKenzie,"Merge pull request #327 from facebook/sjs/ignore-engines

Add ability to bypass engines validations.",True
4f64bdba8674fe93a56875e3f70908afe57431b4,2016-09-13 16:33:52,Sebastian McKenzie,"Merge pull request #324 from facebook/FredKSchott-patch-1

Update README to fix `git clone` mismatch",True
a0b8195c012eda24ce4ea8b9da60dce29794012a,2016-09-13 07:37:05,Sam Saccone,"Add ability to bypass engines validations.

Fixes #325",False
2024afa7457955088b723e19f84c8358a5de0a16,2016-09-13 01:08:09,Fred K. Schott,Update README to fix `git clone` mismatch,False
83e998d63f0459e32905fe34121814797641603d,2016-09-12 20:36:11,Sebastian McKenzie,"Merge pull request #321 from facebook/licenses-2

Cleanup manifest validation",True
4e2549155a2e0d27fd42c5f4b52f8529fc13856b,2016-09-12 20:35:56,Sebastian McKenzie,Cleanup manifest validation,False
45e90056719116d51e3e89d9bcf8663dd7cef1d2,2016-09-09 21:20:12,Sebastian McKenzie,"Merge pull request #317 from facebook/i18n

Abstract logging text",True
19560c376f1b94755d7536593a024865754fecc5,2016-09-09 21:19:43,Sebastian McKenzie,abstract out display text to a separate language file,False
9bee65fe99cdda2fdff1cc4d6e9a1f41e5175ca9,2016-09-09 19:13:36,Sebastian McKenzie,Fix use of request API,False
2acd70e8a6bcfcb48d5a7b5e0273badc4b0219ee,2016-09-08 18:37:10,Sebastian McKenzie,"Merge pull request #309 from facebook/tarball-mirror

Populate tarball cache when module already exists in cache",True
64039ed24840991ea081f744c27af2b57d13c4ed,2016-09-08 18:25:37,Sebastian McKenzie,add mirror path to integrity hash,False
8cb34ea72d46d2f822e6bea203e2a1d57691ebef,2016-09-08 18:05:15,Sebastian McKenzie,create module cache directory in BaseFetcher class instead of PackageFetcher,False
cd3dfb3ddbd195a78782505ba2c2918163aa3d30,2016-09-08 17:45:33,Sebastian McKenzie,fix up error handling for TarballFetcher,False
aede3a419f2f71da5ebf2a4adb70ddb805886394,2016-09-08 09:33:01,Sebastian McKenzie,copy over tarballs to cache folders and copy them when we're loading from an unpacked module with an existing tarball - fixes #282,False
770e41f90a82755a477ab3d1f927335b79615288,2016-09-08 09:31:33,Sebastian McKenzie,"Merge pull request #301 from paulirish/har

Add --har option to save HAR of network activity",True
7bec62df0ed2090eb7336f4adbb7476a395cbc6f,2016-09-08 09:23:54,Paul Irish,flow type annotations.,False
0eed96b050563ef3db3a04a7776fbae4e621af71,2016-09-08 09:18:45,Sebastian McKenzie,clear request manager cache after install rather than after package resolving,False
51c45a8247938f424d1233f56f4d346b5a62a578,2016-09-08 09:08:47,Paul Irish,"Use a local instance of requestCaptureHar, only applied if flag is used",False
d61a4371370fd7b9eedb61875df8f997679c9551,2016-09-08 08:48:16,Sebastian McKenzie,"Merge pull request #306 from facebook/bail-early

Bail early when we have no dependencies to install",True
a1a137c4ffd5d307e4b2dbc3aafeb9ecd005ac10,2016-09-08 08:47:57,Sebastian McKenzie,"Merge pull request #307 from facebook/bin-error

Rethrow last module not found error when we fail to load bin/kpm",True
df405bfa119b9cf710ee1b49ed163b39e44f161f,2016-09-08 08:38:53,Sebastian McKenzie,Bail early when we have no dependencies to install - closes #303,False
fe33d41c76f67b2d2cc9a4da5f62f615c0179c5f,2016-09-08 08:32:35,Sebastian McKenzie,Rethrow last module not found error when we fail to load bin/kpm - fixes #300,False
07afd822ec22624f2f84d450a7915a33fd0379bc,2016-09-08 08:29:23,Sebastian McKenzie,"Merge pull request #305 from facebook/ignore-basenames

Ignore kpm metadata file when copying to node_modules",True
a6d2936eea6745f08da14ad6b38a0670b3c72069,2016-09-08 08:26:36,Sebastian McKenzie,Ignore kpm metadata file when copying to node_modules,False
89731a5a5de355e8cd8bb1f2782610710ea977b5,2016-09-08 08:18:34,Sebastian McKenzie,"Merge pull request #299 from facebook/polymer

Fix Polymer issues",True
d7f823a7dad5404e50dfba758b79135e3b23a599,2016-09-08 08:18:26,Sebastian McKenzie,"Merge pull request #304 from facebook/root

Default to install command when none is specified",True
b6c81ad891e56e3fe3e6f450300b810d8f2e43a5,2016-09-08 08:13:36,Sebastian McKenzie,fix nits,False
330ae746d79d9b79e1e4581c7bb7802f8b782d04,2016-09-08 08:13:12,Sebastian McKenzie,"Revert ""remove dead snapshot""

This reverts commit 1b66ec9fa544925f2df43aaa84dc0f7f329cf016.",False
1b66ec9fa544925f2df43aaa84dc0f7f329cf016,2016-09-08 08:06:15,Sebastian McKenzie,remove dead snapshot,False
6ec22d4da27f7262ffbf885e2ab0a426fb13a0c4,2016-09-08 08:03:51,Sebastian McKenzie,make flow shut up,False
ba317815cf8faa31450085018555cbd3f2901faa,2016-09-08 07:59:07,Sebastian McKenzie,fix lint,False
00bddd1849e7e3148947eb9e85970287c5802e2f,2016-09-08 07:39:17,Sebastian McKenzie,fix lint,False
3fd532f29427fdb4b3b5cef4973a2a634b650625,2016-09-08 07:30:59,Sebastian McKenzie,default to install command,False
3fd25abbf3a05ec66798393cc1442949b36037a1,2016-09-08 07:29:47,Paul Irish,bump to new request-capture-har w/ better API,False
d2ae0a8246c5339684aa2a5c09ae843103debde4,2016-09-08 06:31:01,Paul Irish,Add --har option to save HAR to disk.,False
87640fb30f16eb2ebc4b0170072a62531a53e48b,2016-09-08 04:55:01,Sebastian McKenzie,add tests,False
363c3835c61b6302273f746f2a1e911abb96eeee,2016-09-08 03:37:59,Sebastian McKenzie,use level sort order when listing dependencies to flatten - fixes #267,False
c8106094b2b535eec910484a1c9113ffc2719aea,2016-09-08 03:28:56,Sebastian McKenzie,"when generating integrity hash, consider flat/production flags - fixes #270",False
e99df18dd1b975b07944d0eb71d490df96863b5f,2016-09-07 21:54:46,Sebastian McKenzie,save flat resolutions to root manifests - fixes #264,False
48df9eefd870160bc20cf632e5436478ec0fbbb3,2016-09-07 21:32:56,Sebastian McKenzie,attempt to flatten before checking modules in `kpm check` - fixes #266,False
06e81aae8ebe38c33d98724cd6e16dc5786cc1f9,2016-09-07 21:21:10,Sebastian McKenzie,add support for root `flat` option - fixes #259,False
746db05135a54018f54a1a211c998f34ed164b3e,2016-09-07 21:12:45,Sebastian McKenzie,support ungzipped tarballs - fixes #260,False
c57ee51f10473ea7fe2475547fe486f2f9c703e4,2016-09-07 20:29:05,Christoph Pojer,"Merge pull request #283 from facebook/test-network-cache

Mock HTTP for tests and parallelise tests inside files",True
d2539b11ffdec7f87f8b53a3ecd6bacf05710a0d,2016-09-07 20:16:00,Sebastian McKenzie,fix lint,False
93eb85182b546833cbdf29631d406d059e60dcec,2016-09-07 19:59:55,Sebastian McKenzie,parallelise tests inside of files,False
1c98014dc1515f0b2379dcd0295ea88ddac63efe,2016-09-07 19:59:07,Sebastian McKenzie,clean up request mock,False
b82a62b79a78e37a5c473a085fd3386ac15143ad,2016-09-07 15:39:23,Konstantin Raev,"Revert ""Initial windows work""

This reverts commit d569dfac8eb863f25be0d29ec52cd512565e2b0e.",False
d569dfac8eb863f25be0d29ec52cd512565e2b0e,2016-09-07 06:15:25,Yehuda Katz,Initial windows work,False
144e8ae536999f811f0e36e0a4c3c49f238a2939,2016-09-07 05:37:01,Sebastian McKenzie,Merge branch 'master' into test-network-cache,True
efb3c5691e4ad140fe92cac626f380d3a5cc8f4f,2016-09-06 23:27:10,Sebastian McKenzie,add docs skeleton (#292),False
f3b6559b3cf9433b9096d82be9e189b8ff6c672a,2016-09-06 23:22:06,Sebastian McKenzie,Move package ref setup to creation instead of delegating it (#295),False
fcf5bdbae52411c9bee16bef8376095bec405d0d,2016-09-06 23:21:01,Sebastian McKenzie,Add version command (#294),False
914dfa2f99e3c40005fdb8b1d60f866457daa193,2016-09-06 23:20:32,Sebastian McKenzie,Suggest self-update in old lockfile version message (#293),False
5300b482c851e2578ac1f3aa4908be4d0289dca8,2016-09-06 21:06:48,Sebastian McKenzie,"Cleanup workflow (#281)

* Rename --quick-sloppy flag from `kpm check` to --integrity

* Make --save implicit when installing new modules, remove strict lockfiles, always create updated lockfile and populate tarball cache

* Add integrity hash check to `kpm install`

* Update kpm.lock

* remove incorrect assert messages

* split up package resolving and fetching

* update kpm.lock

* clean up activityStep, move back cursor at end to cover worker lines - fixes #262

* use fake jest timers

* remove old test

* add mocks to jest test ignore

* fix test fixture lockfile

* Add lockfile version header - fixes #280

* split up `kpm install` into `kpm add` - closes #284

* fix lint

* fix using `latest` tag when adding new dependencies - fixes #263

* clean up kpm entry files

* add useless `kpm version` command

* rename config.js to Config.js

* remove Makefile and switch to simple npm scripts

* add more flow-typed definitions

* correctly case Config file

* fix misc lint

* fix type annotation of PackageConstraintResolver#reduce

* fix bin/kpm nits and unused variable

* use dashed filenames instead of camelcase

* move add command fixtures to separate folder

* hoist common-mirror test folder",False
763accd5b615bf800deded7773f87931298ee2fa,2016-09-06 19:00:32,Konstantin Raev,0.12.0,False
596ae8bf3ec0d318896d284b208d99b46523b30f,2016-09-06 18:49:24,Konstantin Raev,new lock file for master (#290),False
46baa9ae9037064c679e7c5fd4ee7ac20fd0f8b7,2016-09-06 07:06:37,Sebastian McKenzie,"Merge pull request #289 from zertosh/flow-0-32-0

Update to flow 0.32.0 with fixes",True
1be644f8f53e06757ed332880bc2fc919b6789d0,2016-09-06 07:02:47,Andres Suarez,Update to flow 0.32.0,False
d4f5332a521aa91f322a9a2d456c8cab16092866,2016-09-06 07:00:12,Sebastian McKenzie,pin flow to 0.30.0,False
b1c2953c2352a15e3a91d5fe21c7495eb1ee700b,2016-09-06 06:49:00,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
c0d2d24c12de1228393701356607424b3eeab16c,2016-09-06 06:48:52,Sebastian McKenzie,pin flow-bin,False
3d7b38bc2195b3458c5f758255db4cf7796330dc,2016-09-06 06:40:07,Sebastian McKenzie,"Merge pull request #286 from zertosh/flowconfig-changes

Pin flow version and prefer `<PROJECT_ROOT>` for ignore paths",True
767cba9ad1c84ef65793873de9813f1331cff06b,2016-09-06 06:39:52,Sebastian McKenzie,"Merge pull request #285 from zertosh/fix-gulp-paths

Fix gulp path rewrite to work with any base dir",True
db260f47f85151e42a1fe7f77c8e37f4df48e872,2016-09-06 06:36:34,Andres Suarez,Pin flow version and prefer `<PROJECT_ROOT>` for ignore paths,False
e1653b63916d03ee26cb52675407e2a7536b5715,2016-09-06 06:18:20,Andres Suarez,"Fix gulp path rewrite to work with any base dir

Previously, if you had fbkpm in a directory with `src` in the name, the new name would be mangled.",False
8f904e42a84f3eb0261a241bd0125dbebac051bd,2016-09-06 03:34:14,Sebastian McKenzie,fix broken test,False
99b7a5ef3ec015b7b59e8d0cd8b117cd8ca4cade,2016-09-06 03:27:38,Sebastian McKenzie,add test network cache,False
fd8f47972e2f3e2a10ca26209c808689643562e1,2016-09-05 18:26:55,Sebastian McKenzie,"Merge pull request #273 from facebook/flatten-ordering

Rewrite how we handle package visibility, make output of flatten more efficient",True
eba49515f6575e3da64334217a2853c5bc85fb92,2016-09-05 18:26:41,Sebastian McKenzie,"properly handle visibility filtering on packages when removing and collapsing - fixes #265, fixes #267",False
96a535fcb7e66f78633c9aa8891fa6aa5b3910c4,2016-09-05 17:49:57,Sebastian McKenzie,"Merge pull request #241 from kentaromiura/use_a_tcp_socket_for_single_instance

Swap from unix socket to tcp connection",True
d0c1afddcd963adfc83a3130011db9f07d48ad66,2016-09-03 00:08:46,Sebastian McKenzie,upgrade jest,False
58e8fa762b0cb9d5875ccabf9f7657c766878941,2016-09-02 15:51:56,Sebastian McKenzie,"Merge pull request #268 from yunxing/master

Fix circular installation dependencies",True
6bca112de8bfed87c527aa967769123bcfe983b3,2016-09-02 15:51:14,Sebastian McKenzie,"Merge pull request #255 from bestander/self-update

Feature: self updating command that downloads kpm releases from github",True
b666867c87fc01f2ba0c18c6683e73933231c722,2016-09-02 15:50:29,Sebastian McKenzie,"Merge pull request #261 from facebook/file-protocol

Add support for file dependency protocol",True
70fb85c2f1dff35771a986ef8bc0681aabbc30a8,2016-09-02 15:50:11,Sebastian McKenzie,add support for file dependency protocol - fixes #244,False
8ff4430bd8e080768d631d8b91d33c23d3db2a7a,2016-09-01 15:55:05,kentaromiura,@bestander's comment,False
cb730d657972cfad53ab03daf0218f9b5aeba1ca,2016-09-01 15:55:05,kentaromiura,Add a --force-single-instance-with-file option that use lockfiles for when working on NFS,False
e4e254b37cd66ddfe276c5ebc6f14b50f9a77e88,2016-09-01 15:55:05,kentaromiura,swap from unix socket to tcp connection,False
dd639f23b5d94aea0ec80063a06d922351fbf1eb,2016-09-01 00:02:24,Yunxing Dai,Fix circular installation dependencies by not adding them as installation dependencies,False
a8a486f3fda8e12f33fcf5f7d46a8002fe7830af,2016-08-30 19:49:20,Konstantin Raev,cleanup imports,False
619e669225b32b8818228bc2549a98a5dcb3ff26,2016-08-30 07:36:23,Sebastian McKenzie,"Merge pull request #254 from yunxing/master

Enable parallel installation",True
91af5965a60fa525722b5751d54934fffdd53621,2016-08-30 04:57:00,Yunxing Dai,Multiline progress bar,False
40ba61000b259dce20ff6ba36cf98d79cdb32da7,2016-08-30 04:57:00,Yunxing Dai,Return type annotation,False
b11638caa95089b343bc57d10f01d33efd7c8257,2016-08-30 04:57:00,Yunxing Dai,"Remove timeout call, which seems to be broken with Jest",False
fbb38ab54bd0949f9abf5f05cbd3bc18687f318f,2016-08-30 04:57:00,Yunxing Dai,Enable parallel install,False
a6be47cc2e71df7b6f350633ea861b92e3c21c60,2016-08-29 06:55:18,Konstantin Raev,removed unnecessary change,False
f70eab6a21ccb8f8e7d31da81d636f148084d648,2016-08-29 06:52:22,Konstantin Raev,disable tests until kpm is OSS and does not require a key,False
343aa44b7295ee27276adab22ebb671f7fb626ad,2016-08-29 06:40:23,Konstantin Raev,added test,False
a153da54744e84eb718aacc64559b10275c27324,2016-08-29 03:36:21,Konstantin Raev,updates cleanup,False
4432cce3b88375bf2b0a7f20e9e04d848ea8be8f,2016-08-28 06:32:22,Konstantin Raev,improvements,False
a36bd44a698b097fcaf7d1d0d6c361ce45a0067c,2016-08-28 04:14:33,Konstantin Raev,"renamed file because it was previously renamed spinner->Spinner (#257)

* renamed file because it was previously renamed spinner->Spinner and this plays well for rpms on Mac

* fix",False
756ef084d838d48f995f89cef6c4c49b3b9f723f,2016-08-26 21:54:39,Konstantin Raev,0.11.0,False
b7f55c5230a7c1d257cbc88627569edaadc922fc,2016-08-26 18:13:50,Konstantin Raev,flipped if-else,False
ca4ce9685bc4db57cc10f593290162477fd8a717,2016-08-26 17:14:41,Konstantin Raev,"removed make update, seems to be fine on Circle",False
bbfde230ad96c5f4906b23875e5d36c8765e5804,2016-08-26 17:09:57,Konstantin Raev,make testing,False
28e546b3f6e72a622c67005293c7fb6437bba8b2,2016-08-26 17:08:52,Konstantin Raev,lints + trying without make,False
d643e4850f22743763cdd416c4c3a1b7534ec48a,2016-08-26 16:48:58,Konstantin Raev,Feature: self updating command that downloads kpm releases from github,False
b23bfbf9221e15a0600484fc161da5d93c41d915,2016-08-25 06:24:53,Sebastian McKenzie,"Merge pull request #250 from skevy/make-node-gyp-executable

Make node-gyp executable",True
c9b3b8775ff26ab81288388c50fdc40176c174c2,2016-08-25 06:23:19,Adam Miskiewicz,Make node-gyp executable,False
12ff2bca446f2173de8c0861cb61b075fbf726f9,2016-08-25 05:12:42,Sebastian McKenzie,add my personal email to code of conduct,False
bc145319269bc1777f695d3915e4f9435c500f0e,2016-08-25 05:05:39,Sebastian McKenzie,"remove redundant ""kpm is"" from readme",False
0f4be257974fa4c5443e542a424c8152c41467ba,2016-08-24 18:20:33,Sebastian McKenzie,"Merge pull request #235 from facebook/publish

WIP misc",True
6f680dc77c17fca881d7d04af66833a9862dfb5d,2016-08-24 18:20:16,Sebastian McKenzie,add missing dep comments,False
4bbc653673bd65caf29084a30428cfa634166a66,2016-08-24 08:54:43,Sebastian McKenzie,ignore access errors in fs.bulkCopy,False
62e58d044dfc91728357a06214caf9fb5ebe8951,2016-08-24 08:49:05,Sebastian McKenzie,make leading sentence longer,False
5677d0bbe62c6209908fe5818e705faf801a0ea0,2016-08-24 08:43:02,Sebastian McKenzie,add config/link/outdated/team shell command,False
6e694c20decd66db1084ead9ad6002f4f2c3530d,2016-08-24 08:42:53,Sebastian McKenzie,fix tests,False
f288a0711878059ae63870a3ebabe7efe92d76f8,2016-08-24 08:42:01,Sebastian McKenzie,"simplify package hoister, make it more performant and straight forward",False
fd5407ce5ce0c5f2652e528abb644c5b2eb1de47,2016-08-24 02:51:16,Sebastian McKenzie,hide appveyor badge until we have it setup,False
b708201233a140866db4afc06404557a2a707671,2016-08-24 02:50:35,Sebastian McKenzie,remove redundant mention of goals,False
d8ebe58a53d32ea25c0a0987a057c14e59c01d22,2016-08-24 02:49:20,Sebastian McKenzie,clean up README,False
81f282ed8fc8d4fee6af6beb7bc3ce0452b58e53,2016-08-24 02:24:36,Sebastian McKenzie,add EventReporter,False
a22141d0749ec9fa07124cc644ae8c2b71de89be,2016-08-24 02:24:31,Sebastian McKenzie,clean up PackageInstallScripts#wrapCopyBuildArtifacts,False
60d373b242199703160537953bc8b974cb6fbfeb,2016-08-24 02:24:14,Sebastian McKenzie,remove tabs from lifecycle script spinner,False
b127e2c74196806895af5f62c21f4ce07455dadc,2016-08-24 01:16:26,Sebastian McKenzie,Fix child errors not including stdout,False
8524f05654a4e76d1dec8ed0937cf99a16cccbcb,2016-08-24 01:14:07,Sebastian McKenzie,fix hoisting recursion bug and install script build artifact copying,False
670a619903c4a5f7f558d756b0c757e4ceccaa8b,2016-08-22 21:07:11,Sebastian McKenzie,fix tests/lint,False
d95e469dc03d496bd31a76bdea309c32c0bf4ed5,2016-08-22 01:59:23,Sebastian McKenzie,add missing escapes to publish scripts,False
ff6ecff4f65a85b58a973b9525ceef555e1fb433,2016-08-21 22:18:00,Sebastian McKenzie,fix lint,False
daf7c042d67222218adf3feb478f796a90f738f0,2016-08-21 06:09:18,Sebastian McKenzie,remove accidently committed file,False
4f66026e14d221bdeaacc0f8bc8e38e3290844d2,2016-08-21 05:50:41,Sebastian McKenzie,create step functions for install steps,False
8ec18e5f636f40a379df375bdd4c0f6af58dae04,2016-08-21 05:44:23,Sebastian McKenzie,properly execute pre and post commands when running scripts,False
d207447f9454a4d58e8d4c453d33fefe4aa8bd12,2016-08-21 05:44:12,Sebastian McKenzie,fix lint errors,False
4615669e8ae290b2886b4d7c483005f216d1c8aa,2016-08-21 05:33:28,Sebastian McKenzie,add `kpm clean` - closes #223,False
6d1278bddb8c613bb3ff7e8c9327b30a853ada52,2016-08-21 04:03:32,Sebastian McKenzie,fix lint errors,False
ec1aa402b4efba066f50b256c4a85c55be42fbf2,2016-08-21 04:02:34,Sebastian McKenzie,Add kpm dist-tag/owner,False
675fc5b187e0377430dc17b6eee5dd0ccd5b09fa,2016-08-21 00:29:58,Sebastian McKenzie,add --prefer-offline flag and crash on http requests when in only offline mode - fixes #170,False
0e8ed4a27cf9a9ad9e26dfead978487bd10ec0ff,2016-08-21 00:25:09,Sebastian McKenzie,don't display hoisted dependencies on `kpm install --save` screen,False
093dacce163dbf90f56a3d28799f7823d8ae3705,2016-08-21 00:24:47,Sebastian McKenzie,add support for peerDependencies - fixes #177,False
2995dee2f98906c8eac53855b7b24416522b866f,2016-08-20 23:16:49,Sebastian McKenzie,abstract out cli subcommands,False
e4a25bb987a58176525f0f54d1a151f38eda0d2f,2016-08-20 23:16:29,Sebastian McKenzie,make blocking queue messages silent,False
18a3d076ab316128402132d1954b6870090df0fa,2016-08-20 23:16:14,Sebastian McKenzie,Copy over build artifacts and properly execute install scripts in topological order - fixes #231,False
bf52d82934af00637d3e0ed508386bfe7a8b6d53,2016-08-20 20:38:55,Konstantin Raev,0.10.0,False
81e746a6805bd5b16f14e4f702e7ef87255cdf3d,2016-08-20 17:40:05,Sebastian McKenzie,Merge branch 'master' into publish,True
ad3b1a94422533e1c7081e01f9ad769aec2753b1,2016-08-20 17:39:49,Sebastian McKenzie,"Merge pull request #234 from bestander/build-scripts-ordering

Build scripts ordering",True
566e878502ea3186ceb479ecac643fc09d7b440a,2016-08-20 11:40:53,Sebastian McKenzie,ensure bower support works and fix places where we hardcode the module folder,False
986938e9242b852dcc9e7488f6a34abf627174a9,2016-08-20 10:18:53,Sebastian McKenzie,remove spaces after assignments to line them up and consolidate registry logic,False
0d003507eaa2503d796fe8627f0fdb1fa1f58b21,2016-08-20 09:21:53,Sebastian McKenzie,"Merge branch 'master' into publish

# Conflicts:
#	src/util/execute-lifecycle-script.js",True
5d9b1715b244dcdf576c6c038ac3a0b36ff49d10,2016-08-20 09:19:55,Sebastian McKenzie,add kpm access/dist-tag/login/logout/owner/pack/publish/version,False
35ffe28c8d5094e418a52b1cf354014c2b1ad4e6,2016-08-20 03:29:25,Sebastian McKenzie,"Merge pull request #230 from bestander/build-scripts-long-output

Build scripts long output",True
74fd74c270d3faf54207cf42e894adef8de60c20,2016-08-20 02:08:29,Konstantin Raev,lints,False
a640ced5c2392e09b62483f51301d86a5ac87161,2016-08-20 02:01:09,Konstantin Raev,lints,False
ab9f8165639912532c46599e1615bea731fc3b9a,2016-08-20 01:56:04,Konstantin Raev,sorted out order of install scripts,False
7c47997bb7be9949d36ba7431a5c76fb2f0bddeb,2016-08-20 01:35:44,Konstantin Raev,ordering of install scripts,False
3285507b8db716a3ded20baa2af259e2c4fa15eb,2016-08-20 01:35:44,Konstantin Raev,added test,False
2637515ea779c3c60d883180e403b9488a8e98eb,2016-08-20 00:39:47,Konstantin Raev,lint fixes,False
c193acea2914b4e3fa4898742f9c2cfea7250678,2016-08-20 00:35:43,Konstantin Raev,removed todo,False
bd382db2b3452e10ec9dab84010202ec8c404e94,2016-08-20 00:34:39,Konstantin Raev,outputs to spinner,False
4b0d94f11f9362160b19cfebfd65d1a2dda10dfc,2016-08-19 23:09:57,Konstantin Raev,removed unused,False
976f30414a8dd319f1a9f8e6d42729488b1d26a8,2016-08-19 23:08:35,Konstantin Raev,simpler spinner,False
daba5b5f70fffab5c7e1c0410f72d59478b7afd9,2016-08-19 20:39:32,Konstantin Raev,switched install scripts to run via spawn instead of exec,False
5ef05f8a6edc278d6e27abe95993ef9323cae4c3,2016-08-19 20:39:32,Konstantin Raev,removed package.json test because we need to clear all properties with arrays and this makes the test fail unexpectedly,False
48c0fdb4cc50448741431552d73a0d2709dc7902,2016-08-19 20:39:32,Konstantin Raev,extracted failing test,False
7dcbecbee97f9e3b9cf898bfdaf25e4cec7dfdb0,2016-08-19 20:30:49,Konstantin Raev,"makes trunk green (#225)

* makes trunk green

* returned bablerc back

* extracted failing test

* removed package.json test because we need to clear all properties with arrays and this makes the test fail unexpectedly

* case fix",False
f7e47e2d1826c40a1501d91951ad970aacdbe3b6,2016-08-18 05:28:51,Sebastian McKenzie,facebookify util filenames,False
3df3a431228ae32803aa30683bb45845c1c38752,2016-08-18 05:27:13,Sebastian McKenzie,facebookify filenames,False
d17e360daf497cce90712a5fa8982369932d3d75,2016-08-18 05:01:00,Sebastian McKenzie,update to eslint-config-fb-strict,False
d8c18227f6c301063be9d11fd70f3bb124a2f64b,2016-08-17 16:35:33,Sebastian McKenzie,"Merge pull request #222 from facebook/prune-extraneous

Prune extraneous files/modules",True
bd6613a89146f57eaa56e2e59796b18855e24328,2016-08-17 16:17:38,Sebastian McKenzie,"prune extraneous files/modules - fixes #124, closes #218",False
2dc453d5d155a2488ae43da72dbe29035e58f623,2016-08-17 05:03:03,Sebastian McKenzie,"Merge pull request #220 from facebook/fix-scoped

Add support for scoped packages",True
1acee606cf21ae725f7aa1ee8802774539f22ec2,2016-08-17 04:51:10,Sebastian McKenzie,Add support for scoped packages,False
085c5816489b793acb615f334102c884aebd5b8c,2016-08-17 04:45:49,Sebastian McKenzie,"Merge pull request #221 from facebook/non-greedy-registry-pattern-match

Fix support for allowing npm packages to be renamed",True
653204f9eed9dc17b21e2b9655a8cfd0da65d468,2016-08-17 04:35:11,Sebastian McKenzie,Fix support for allowing npm packages to be renamed,False
2e983700c4e45f14a6bdd3749465960bbfa8292a,2016-08-17 03:45:13,Sebastian McKenzie,"Merge pull request #219 from facebook/facebookify

Switch to Facebook code style",True
7b4d7c8fd2d22b300bd2cf02449f0231c95affe3,2016-08-17 03:35:13,Sebastian McKenzie,Switch to Facebook code style - closes #172,False
93e532b940a11ff4f283585d25a5e747f22573c2,2016-08-17 01:23:28,Sebastian McKenzie,"Merge pull request #216 from facebook/infer-name-from-lockfile

Remove `name` field from kpm lockfile when it can be inferred from patterns",True
2983a0425684c40f3ac2c3690ccd1423b5fd73d7,2016-08-16 20:23:27,Sebastian McKenzie,"Merge branch 'master' into infer-name-from-lockfile

# Conflicts:
#	src/lockfile/index.js",True
ab95d23d582453c7c0861cf6cb5f3c4b20fd33b0,2016-08-16 17:54:55,Sebastian McKenzie,fix spelling mistakes,False
3d78552561386d56aa9c9bacc7362fe4b910cfa4,2016-08-16 16:24:37,Sebastian McKenzie,Remove `name` field from kpm lockfile when it can be inferred from the patterns = closes #215,False
03e61483068dc9f5c6ea7d48dae7704e3842854d,2016-08-15 16:22:21,Sebastian McKenzie,fix badges,False
c73705ebf8d96677bfb478a9fac847f7d44cd6c3,2016-08-15 16:19:14,Sebastian McKenzie,fix circle badge,False
88197040512ff07bdfa695013bbf7aec050f71f8,2016-08-15 16:15:01,Sebastian McKenzie,add kpm logo,False
6d81a136d1064ec637562443fd1129ef412e5141,2016-08-15 16:10:42,Sebastian McKenzie,add back kpm logo,False
f341b56cdb1d828af112ed45af9def48064573c6,2016-08-15 16:07:46,Sebastian McKenzie,"Merge pull request #202 from bestander/fix-git-hash-url-resolve

Fixed hash in git URLs to work as tag and commit-sha1",True
35a0171ce925ed8b09e8ba09a7e3566be9e5fb4f,2016-08-15 16:04:57,Sebastian McKenzie,always create integrity file (#214),False
49caec9379d4c9819a64b862a6101db9705fdb7d,2016-08-15 16:03:27,Sebastian McKenzie,sort lockfile duplicate keys alphabetically (#212),False
8450c39cd923cc19cb3f020a5f3ea2220f6a45b3,2016-08-14 04:45:44,Konstantin Raev,fixed isCommit regex to enable short hashes,False
affe4bbdd56a2dbc105f8e663df9732464d9ee3e,2016-08-14 04:00:48,Konstantin Raev,Switched hash in dependency to be used as git tag rather than commit hash,False
9fdc96a54684e777785d6e256272d46b24756161,2016-08-13 14:33:42,Konstantin Raev,0.9.0,False
87b81a8b90ccea22b283dd94af4c039d76559044,2016-08-13 14:30:41,Konstantin Raev,"Fixed check to verify top level package versions (#211)

* Fixed check to verify top level package versions

Fixes #209

* added a test

* added a test

* fixes",False
28b6f0ab0359d7c150b5d5216c360e3ccf185b91,2016-08-12 20:21:32,Konstantin Raev,"Supported github dependencies without .git (#203)

* Supported github dependencies without .git

E.g. https://github.com/npm-ml/re

* lints

* nits

* added kpm lock file

* added comment",False
9fdafda58b3d35cd941f974b7070344ac95b9395,2016-08-12 15:35:36,Konstantin Raev,"Check and cleanup node_modules before install (#207)

* Check and cleanup node_modules before install

This fixes https://github.com/facebook/fbkpm/issues/84 and also optimises scenarios when multiple `kpm install` instances are running

* skip install if node_modules is correct

* fixes for --save

* fixes for --save

* another fix for install

* added a failing test for cleanup case

* removed duplicated test",False
db2295366fe1d5dc58953dcb2443b49d417a8313,2016-08-10 15:11:15,Cristian Carlesso,Quick fix (#200),False
8dff4056d498b827c7472889b6460beefa3a8786,2016-08-05 19:21:52,Konstantin Raev,"added a test for issue #161 (#187)

* added a test for issue #161

* disable broken test

* added expectation

* improved error message",False
403ba57f12e5f305d9eaea2360fd22cfd9ca9d19,2016-08-05 16:45:27,Konstantin Raev,removed fb- from release scritp (#186),False
e4d5c8731cde0c9770d604cb94125f52490c041f,2016-08-05 15:40:20,Sebastian McKenzie,Add support for --saveing exotic patterns in `kpm install` (#191),False
6fa0b1a7fee5ebe4aa1388eb8ac74c739ec586dd,2016-08-05 15:40:05,Sebastian McKenzie,Fix binding.gyp filename for automatic node-gyp rebuild command (#192),False
73f1cc700c20bc94601fcd48f6c40132b5cd90e4,2016-08-02 19:14:46,Konstantin Raev,0.8.0,False
7edd930bc5be9ab5b304361d20226d8a0ffd30c6,2016-08-02 19:14:42,Konstantin Raev,revert 0.7.1,False
6276ff1942c55986889db275910b0bac8da72d2c,2016-08-02 19:12:13,Konstantin Raev,0.9.0,False
ae3562c5c2ac1ed404a27733a359411fa391508c,2016-08-02 19:11:58,Konstantin Raev,0.8.0,False
7802eecb78ef265c51f903158596f91349af2ede,2016-08-02 19:11:48,Konstantin Raev,revert 0.7.1,False
246e2085d79f3439ea62eb1944b07bf76e60ab40,2016-08-02 15:27:12,Sebastian McKenzie,"remove unreachable dependencies check, add more history tracking, and correctly taint parents - fixes #173 (#185)",False
b61943357f28bcd88dffa0e81f9c5f5ad89b3120,2016-08-01 20:12:26,Konstantin Raev,Removed fb- remnants from dist script (#184),False
4844bb6bda621b029c5a5d82db87cde861b63090,2016-08-01 18:45:55,Konstantin Raev,0.8.0,False
533587a77af9b78f1a60b7d65dbe5bd37e79bbb1,2016-08-01 18:45:32,Konstantin Raev,made release branch script executable,False
a271c8768cc673d7cf27760eb6b13f49be840d5b,2016-08-01 18:43:05,Sebastian McKenzie,"Rewrite hoisting (#175)

* rewrite hoisting/npm3 style deduping/flattening

* fix lint errors

* convert package hoister data structures to uses sets, properly blacklist heirarchy when hoisting to prevent future shadowing and collisions

* fix flow errors

* add deduping validation to `kpm check`

* fix remaining bugs with deduping

* clean up useless command name messages

* don't output offline warning when using the offline flag

* fix lint errors

* add descriptions

* fix lint errors

* fix spacing nit

* reenable scripts",False
a9bcbd4248f4ff6ad75c5667f3a79cc10f728cfd,2016-08-01 16:06:10,Sebastian McKenzie,Output separate progress bar for file copy queueing (#181),False
39b4a8c06d366cb951d3b011c4794a7969521fe4,2016-08-01 16:03:32,Sebastian McKenzie,ignore teleport engine (#182),False
c4b09960b922958e43b78516afe34f50a702c9d2,2016-08-01 15:23:21,Sebastian McKenzie,add more flow types (#183),False
f3f49525fab3dd82b5dd7e24b77ca400aabbf0a7,2016-07-30 01:29:56,Konstantin Raev,rebase (#162),False
5aca1c3ebefeb609e97ad241314d255748bced19,2016-07-30 00:38:47,Konstantin Raev,"fixes bugs in error logging (#174)

* fixes bugs in error logging

* removed console.log",False
c53cb17c7b9351127b09bc0038e0c621c766f27c,2016-07-29 15:30:01,Sebastian McKenzie,fix `kpm check` ignoring hoisted dependencies - fixes #160 (#169),False
223e209177387df9db4d299bfbc4270dcd4dc301,2016-07-29 15:27:22,Christoph Pojer,"Update to Jest 14. (#171)

* Move fixtures.

* Update to Jest 14.

* Don‚Äôt track temporary files because of permission errors.

* Fix flow errors.

* Use node4 transforms for tests so they work on travis.",False
53b7ebfb191126b9bab7d426a289786e423a964e,2016-07-28 05:09:11,Sebastian McKenzie,"When saving a package and specifying a range on the CLI, use it verbatim instead of using default prefixes = closes #167 (#168)",False
5bf4deeeef0692a6da660023fc4fd484d445cc14,2016-07-27 14:46:50,Konstantin Raev,"Added tests for issue #112 (#156)

* Added tests for issue #112

* trimmed down deps

* fixed tests

* removed clean

* added self checks to install unit tests

* lints

* returned script to trim packages in the mirror because it may be useful

* fetch fix

* rebased",False
7d5da38400cf1d7a9f3381c75c4d301c243a39f6,2016-07-26 15:32:57,Sebastian McKenzie,add --offline flag to query local module cache (#165),False
82dbd174186667838b25dba8954d84554fb686bd,2016-07-26 15:17:29,Sebastian McKenzie,enable warning for invalid engine names (#166),False
5082def71b4db73b278e923f2f7827e58c0265a1,2016-07-26 15:10:04,Sebastian McKenzie,"Merge pull request #163 from bestander/fix-ci

fixed tests after rename fbkpm -> kpm",True
a269b81b3dbaf22125746bf35bca033544f59a57,2016-07-25 22:10:53,Konstantin Raev,fixed kpm install,False
95aaa2f7fe2e8881250e878adfbd2ed3415fa729,2016-07-25 21:25:17,Sebastian McKenzie,drop fb from fbkpm (#157),False
34cc2a9587ca72eda857f3c204725611f77bc143,2016-07-23 04:17:43,Sebastian McKenzie,Remove self variables (#155),False
9167893d7f7f3af8ebeabecaf4f634b3b477ac8d,2016-07-22 19:31:59,Konstantin Raev,0.7.1,False
e0cf8abaa756526e5de1f5f8b2b2b7bd80bfc43d,2016-07-22 19:22:42,Konstantin Raev,0.7.0,False
87de68797f8a245dafbc69fc0da5398d6edce27a,2016-07-22 19:11:02,Konstantin Raev,"CI deployment (#152)

* wip

* deployment via ghr

* nit

* nit

* fixing deployment

* fixing deployment

* fixing deployment

* fixing deployment

* fixing deployment

* fixing deployment

* fixing deployment

* fixing deployment

* fixing deployment

* bump deploy

* cleanup

* cleanup

* cleanup

* more tests

* another try

* 0.8.0

* final tests

* 0.7.0

* final tests

* added notes

* cleanup

* removed lock",False
1f10c887a4ef13b1a7e7c1d86205f7964ebce3f4,2016-07-21 16:05:13,Sebastian McKenzie,"Enable Flow types on tests (#140)

* enable flow types on tests

* add ava.babel = ""inherit"" config",False
0e819a862d108698b89ff938cdb110780b31a725,2016-07-21 16:04:14,Sebastian McKenzie,"Merge pull request #150 from facebook/travis-only-master

Enable only master and stable branches builds on travis because we dr‚Ä¶",True
1fc47be865d257bfa8217f9f6e531b917a3c2cb7,2016-07-21 16:01:18,Konstantin Raev,Enable only master and stable branches builds on travis because we drain queue on Travis with all branches builds,False
db7c557212be98c2c982960bf09292bd70e2a2f4,2016-07-21 15:47:38,Sebastian McKenzie,"error out when failed network requests fail 5 times, improve possible offline error detection (#146)",False
a0c0e1f496d87fea71c5661991a475b8bc5af3e4,2016-07-21 15:40:08,Sebastian McKenzie,Remove analysis folder (#149),False
114314926361c044953c1ae94bdd630f2a6676ae,2016-07-21 15:26:08,Sebastian McKenzie,"Always output with reporter.error when encountering CLI errors (#148)

* always output with reporter.error when encountering cli errors

* remove ""Error: "" from message when outputing CLI errors",False
37d451047b0fe4f7c28ae45f162cd1f110962458,2016-07-21 15:06:16,Sebastian McKenzie,don't allow for uninstallation of dependencies not in package.json (#145),False
19afa514a93c7622a440d387d106dac8ff0aa745,2016-07-21 15:04:23,Sebastian McKenzie,add license command (#144),False
105b6b97ad0bbbbc176800e3456f8aa708c888e1,2016-07-21 14:55:43,Sebastian McKenzie,restrict some kpm commands to only work when there's a lockfile (#143),False
09c58ea13ccf9a12770d055ebe0b4260383f5bcf,2016-07-21 14:54:27,Sebastian McKenzie,probe queue for activity on network io to prevent stuck message - fixes #139 (#141),False
5bde4893fc71241fab3dcbc76a0ee87d335435c0,2016-07-21 07:12:45,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
49d9572a42d7b02fd980b41ed0ac439f2453ce50,2016-07-21 07:07:39,Sebastian McKenzie,"Merge pull request #142 from facebook/uninstall-strict

Strict lockfile mode during uninstall process",True
a9dfaf4bfa1194297e9e8251d8c72037a6779cd8,2016-07-21 07:05:37,Sebastian McKenzie,switch to Sets rather than Maps when we can,False
2970a5ddb7f69fc40198cc1508edd4693bb5dd46,2016-07-21 07:04:48,James Kyle,Silence lockfile strict mode warnings on uninstall,False
f2fcbd660c47a4f15e041acc7861563165910af7,2016-07-21 05:12:59,Sebastian McKenzie,"Merge pull request #135 from bestander/new-badge

added Circle badge",True
4b45c44d6c54e4e9c7b210581749574d4ac880ea,2016-07-21 05:04:04,Sebastian McKenzie,"Fix race conditions in package linker (#137)

* fix race conditions in fs.copy by performing all operations as a queue - fixes #133, closes #126

* remove optional dependencies that fail compatibility check

* replace fsevents in install script test with flow-bin as it installs properly under linux

* make fs.copy more resillient to changing permissions

* fs.copyBulk should call itself again when unlinking

* unindent requires

* revert bin linking concurrency back to 4",False
98e5c60e195f5394d6150ceeae39b7b45150b9bd,2016-07-21 04:00:16,Sebastian McKenzie,nicer error message when encountering corrupt tarballs - fixes #132 (#138),False
de2b63dda98332a7ff6a070aa107b7e7d4055f4b,2016-07-20 23:18:04,Sebastian McKenzie,"Merge pull request #136 from bestander/reduced-coverage

reduced coverage to get tests green",True
f3f15bbc2664c8121a51af015b7dc1de97f84c66,2016-07-20 22:57:58,Konstantin Raev,reduced coverage to get tests green,False
1d25ee78b2f4fed77e4adb7005bdfd26dd96bd15,2016-07-20 21:14:02,Konstantin Raev,bump ci,False
aa1836818ae2e1183ace7590aeaa67cf300151b6,2016-07-20 21:10:54,Konstantin Raev,bump ci,False
686e2343f5e1b15d336ccb3dfc5ff64ad6e94800,2016-07-20 21:07:10,Konstantin Raev,bump ci,False
73c7ec611bff1a1fbe1a008044034ddd43eea440,2016-07-20 21:04:06,Sebastian McKenzie,update console reporter tests to reflect clear line ansi codes,False
882f6c0a32f8d11eacbfc374169c107a9f94be97,2016-07-20 21:02:28,Konstantin Raev,added Circle badge,False
77b2b27ba72a3e3c48d9d11af33e4b7290735319,2016-07-20 20:56:58,Sebastian McKenzie,remove exclude matrix from travis.yml,False
51850dd391de4aa29d530ebe19c3cc0814aed061,2016-07-20 20:56:14,Sebastian McKenzie,"Merge pull request #134 from bestander/circle-setup

Enabled Circle CI builds, fixed some tests and makred other tests as ‚Ä¶",True
740d7e70b15f3f543d9b6eeaab371533be571ab3,2016-07-20 20:55:35,Konstantin Raev,bump ci,False
fb1b98df3ee6381c5f79d2bc676416f15d9cba86,2016-07-20 20:09:41,Konstantin Raev,"Enabled Circle CI builds, fixed some tests and makred other tests as failing",False
604749d3a7a4cab1e9726511caab542144e8a53b,2016-07-19 19:48:55,Sebastian McKenzie,fix flow types,False
ebc0e47436d07ce58c5a9cc2bcfbae84131eea49,2016-07-19 19:46:56,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
1f516e3b5469bad2957cfe57f8bed9624a3343b8,2016-07-19 19:46:37,Sebastian McKenzie,fix lint errors,False
cf4cd2deba7b08a0d2c542e57af6d71b16d895c4,2016-07-19 19:21:02,Konstantin Raev,bump 0.7.0,False
1ef5dc4bf1de2458f869eeb3e88530d4b68dbec3,2016-07-19 19:19:55,Konstantin Raev,0.6.1 release,True
c8cf196b7ef5d5b95c0dfab43a09ec9cce6e2b89,2016-07-19 14:00:49,Sebastian McKenzie,ignore `mode` when performing `fs.copy`,False
fb03904ca2ae0e759f1c3f290f12037177b264df,2016-07-19 13:58:47,Sebastian McKenzie,perf improvements to fs.copy,False
7a106333f62a4adb1aeab67a17ee4fd19aa4735a,2016-07-19 13:58:39,Sebastian McKenzie,clean up ConsoleReporter.step question,False
44dbc258de8a9f0d37257d4dc540a46797668bb9,2016-07-19 13:39:43,Sebastian McKenzie,more reasons for kpm why,False
9f5aa0a1eb63f3ed9d89948647f868021506b4b6,2016-07-19 08:51:54,Sebastian McKenzie,add reasons why a dependency exists,False
3aca62f5df0ba7dee7e3af990b33b727e949c783,2016-07-19 08:35:13,Sebastian McKenzie,clean up kpm why,False
3b66be8b1f6aa85c287bf8efae5ff77b4dff8a84,2016-07-19 08:12:53,Sebastian McKenzie,add skeleton for `kpm why` command #131,False
ee32381f6bb4b28aa867280399ecf70c34278961,2016-07-19 07:42:20,Sebastian McKenzie,fix bug in key updating in hoisted manifests,False
b74f878dc3e76a22723f39421376f61de553e990,2016-07-19 07:39:23,Sebastian McKenzie,represent hoisting in `kpm ls` - fixes #130,False
818da654d60d327ed879ac713fc9cc2b4e0df725,2016-07-19 05:12:54,Sebastian McKenzie,add `kpm ls` command and dump new dependencies on `kpm install --save` - fixes #116,False
4ba02909e312023bf32c17bb40600ded97e1fbc3,2016-07-19 04:03:35,Sebastian McKenzie,clean up console output a bit - closes #128,False
0a99e3c985adcaee7e1fc5e4900944df34097863,2016-07-19 03:43:51,Sebastian McKenzie,better message for building step,False
5c98684c54b24d0855cb0695d84283442382944a,2016-07-19 03:42:51,Sebastian McKenzie,minor nits,False
c944798d30bd499ec710430c7ee473e7eb3dc3fc,2016-07-19 03:42:46,Sebastian McKenzie,remove checking package compatibility step,False
5cd08fad8b6c1b61b5e056547418457980dd3e5f,2016-07-19 03:42:22,Sebastian McKenzie,only run install scripts for fresh packages - fixes #127,False
6015e6f13730eca7607e068257f03bc36e72bb2c,2016-07-19 03:41:36,Sebastian McKenzie,move kreporters back into core - fixes #122,False
f7684dfbde994c63753d35662b5552a6805042bf,2016-07-19 00:25:36,Konstantin Raev,0.6.1 release,False
92915e6a17fb44546e9971f10f76938db4d651e8,2016-07-18 23:49:22,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
240d37277ab7bf951794784f647043f4e235a865,2016-07-18 23:48:31,Sebastian McKenzie,fix bugs in concurrency of fs.copy,False
b94cdeaee29e21d7fe880f3226f529eeb305a725,2016-07-18 23:27:59,Konstantin Raev,bump 0.6.0,False
90784b49e7d2012cfb7229becc20dc0975c959ba,2016-07-18 22:51:21,Sebastian McKenzie,handle case where we weren't properly restricting the keys of modules deep in the tree who could be satisfied by one higher in the tree,False
3662ef928145c03717474b23261330fab64bcc48,2016-07-18 22:39:17,Sebastian McKenzie,add case for non-existent package.json to `kpm check`,False
151ea372987accdc26b951526828603a1031b453,2016-07-18 21:53:19,Sebastian McKenzie,fix typo,False
7be76173f24fbc28a1424d3ffa99dc3d379461ae,2016-07-18 21:52:40,Sebastian McKenzie,add a check in hoisting algorithm for locations where modules previously existed that will cause a conflict - fixes #112,False
6eb3a1490ff0aeb0f56916164579fdefc1df64ea,2016-07-18 21:51:57,Sebastian McKenzie,remove path separators when humanising module location in `kpm check`,False
c7172caae698b9ba543655ef2454fdaa478a944a,2016-07-18 21:10:14,Sebastian McKenzie,fix multiple keys parsing,False
b63e20fdfb26c3e91e4451aae559a604f93e3a86,2016-07-18 20:58:21,Sebastian McKenzie,make uninstall test resillient to intermitent failures,False
7c31529520c0405cf5d8896e46ab35c22a5b56f9,2016-07-18 20:58:03,Sebastian McKenzie,only ignore lockfile in install command when the lockfile flag is false,False
047e2ebf59b691ebd2b32799efb85cb47078dd56,2016-07-18 20:48:03,Sebastian McKenzie,always clean in install command test,False
5bd9d74b1aa900760d5f87e3797c5ed2bd0d6077,2016-07-18 20:37:27,Sebastian McKenzie,don't allow optional dependency resolution to fail - fixes #103,False
63290c74ab5a209cec01379c6a04efd181e830e3,2016-07-18 20:04:20,Sebastian McKenzie,allow install scripts for optional dependencies to fail - fixes #40,False
d88fffe7d7fb8776e84fdfcba8f5b0fd200c30d7,2016-07-18 19:59:27,Sebastian McKenzie,remove cli flags we wont support and add support for --no-lockfile flag,False
170cb22829c9b39158e4739ff4f81804eab38995,2016-07-18 19:54:11,Sebastian McKenzie,"Merge pull request #119 from facebook/collapsed-objects

Collapse duplicate objects in lockfile to single line",True
1f0ece8885c0f2a20a5383bc620fe669053e5186,2016-07-18 19:50:10,Sebastian McKenzie,collapse duplicate objects in lockfile to single line,False
1246f74e0869889781883405b99f84563c8a2e7a,2016-07-18 19:10:28,Sebastian McKenzie,style nits,False
976fb57052ebbdb38fac5596b2605f3777a4b3ff,2016-07-18 19:07:51,Sebastian McKenzie,check mtime when checking whether to skip copying of files - fixes #114,False
7a4cc9d618e0821296e2c35007e7b30fd932062e,2016-07-18 18:31:15,Sebastian McKenzie,make strict `kpm check` check that installed modules match the satisfied versions - fixes #115,False
01d7fd76675c3ec4bb04f76dfb33f3b96a8c0805,2016-07-18 17:50:51,Sebastian McKenzie,"add --save-tilde flag, add support for multiple save flags - fixes #113",False
68bbec9dbd2a166d929643966c455438e2e6cc43,2016-07-18 17:21:18,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
2352ff6518d16d25b86fc2edd439c983e3368f70,2016-07-18 17:21:09,Sebastian McKenzie,add message to blocking queue when resolved a queue that was reported as stuck - fixes #117,False
58436d47367d56b07d9cf8bbadf21cf8a10bade7,2016-07-15 19:11:52,Cristian Carlesso,"Allows only one instance of kpm per time to work on the same folder (#100)

* Allows only one instance of kpm per time to work on the same folder

* fix lint

* Place the feature behind a flag

* move (and rename) constant into constants

* Nits, the flow error should go once @kittens accepts https://github.com/kittens/kcheck/pull/4 and update kpm deps

* fixes a flow downcast error and move the flag from being available for install command only to all the commands",False
2140fe87a27a88a1b712322c1ddcc54202fd463f,2016-07-14 18:29:32,Sebastian McKenzie,another attempt to get travis to build,False
d94afaa43257e336c9dead5e273b19ad66c96db4,2016-07-14 17:32:17,Sebastian McKenzie,another attempt to fix CI,False
155a50bad8478be2ec3905ed288f4abc7de193f5,2016-07-14 17:21:18,Sebastian McKenzie,fix travis.yml,False
0cd23233ed559ce0d21be02eac4bfa07572e6631,2016-07-14 04:47:30,Sebastian McKenzie,fix flow error,False
4ede6ff04a4f6fb5f739d93849da8542dd8c4c81,2016-07-14 04:46:47,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
6b5eae6a8846a5fd363f2ba7308d6c20636da78b,2016-07-14 04:46:34,Sebastian McKenzie,add modern make install command to travis,False
c69d9b2c5aa5f6155cae343e8a0e251c8b82c995,2016-07-13 23:48:23,Konstantin Raev,fixed a few lint errros (#111),False
6acb230cc50e0a5aa74aedb3d38dee71fcd78d97,2016-07-13 22:42:58,Shayne Sweeney,Version bump to 0.5.0,False
572c01d2efd5fb202c33eae54ba15fe6eafdad05,2016-07-13 22:29:04,Konstantin Raev,"fixes lockfile inconsistency between runs (#109)

* fixes lockfile inconsistency between runs

* nits and comments for Shayne",False
482eb4fc1ade26f63d1c3998cc57290f1a0c1ae7,2016-07-13 22:10:26,Konstantin Raev,hot fix estravese,False
848e53a83b1444e412874849fa8a61b71a2b0c1a,2016-07-13 18:34:20,Sebastian McKenzie,add deprecation message output - fixes #32,False
d283aecc2ecce2cefff096d6623752913bd85f8c,2016-07-13 18:18:10,Sebastian McKenzie,nice error messages when we attempt to spawn binaries we don't have - fixes #27,False
49fd1666a758377939ef05f8fc146a6378991db1,2016-07-13 18:09:33,Sebastian McKenzie,add `kpm cache` command - fixes #2,False
affbe6f118e0b3be24478b62e61a72b0381638e8,2016-07-13 17:58:26,Sebastian McKenzie,small change to trigger travis,False
150b88473caef1590f6d49454788267e48709ccc,2016-07-13 17:19:25,Sebastian McKenzie,separate lint into separate travis job,False
912cb196618f7137ce898b862c841a528199595c,2016-07-13 17:04:17,Sebastian McKenzie,remove kcheck,False
b91dcc4234696a896ecc176de82ec3e583f6f04b,2016-07-13 16:38:19,Sebastian McKenzie,remove incorrect flow type,False
b116e83c5a1b031a7e7b12f4cf0a19918ac88b0c,2016-07-13 16:32:21,Sebastian McKenzie,fix flow errors,False
df6ab0e92d17111d4193c2e62e9f73873b169e41,2016-07-13 16:16:14,Sebastian McKenzie,"Merge pull request #108 from kentaromiura/force-latest-kcheck

Update flow version via kcheck and fixes flow errors.",True
fc9ef9ee9756e18d5dbda90e4ecb32c8d4526a03,2016-07-13 16:14:02,Sebastian McKenzie,make uninstall command more lenient to the existence of the package on disk,False
68ff9fb4f66beb19fde3fc805872f16a1706559f,2016-07-13 16:03:34,Sebastian McKenzie,test travis against node 6,False
738ff5f0486784dcbb236e091f4dd9036a4d311c,2016-07-13 16:01:13,Sebastian McKenzie,"allow specifying local tarball filenames, clean up tarball fetcher - fixes #98",False
fc706c89458c143e303d663846f4e040dea47737,2016-07-13 14:44:06,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
7e24f4568934db9951b7b9349c1fa917c19c8b08,2016-07-13 14:43:42,Sebastian McKenzie,add `--quick-sloppy` argument to `kpm check` that is faster but doesn't do any file system checks - fixes #110,False
8ace894a954fa2dc6d1bce781c5581835a1050d0,2016-07-12 20:06:43,kentaromiura,Update flow and fixes flow errors.,False
2394a5ef5aa1d651e66de44970cd8fa834336780,2016-07-12 15:14:37,Konstantin Raev,lint fixes,False
6f0eabed61cf43abf8f797c3f99bedf7387e419f,2016-07-12 14:59:54,Konstantin Raev,made --save not strict by default (#105),False
414fae54d10bed7b5199f3d937da3f7f232f4f93,2016-07-11 21:14:44,Konstantin Raev,0.4.9 release,False
1ac38e669fb1dc58e8ee6f613c1bdbb0b3473723,2016-07-11 06:42:26,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
ab350f52346ed57a20679ece61b3549896275634,2016-07-11 06:42:00,Sebastian McKenzie,"when performing a save install rather than using the patterns for all installed dependencies, use the patterns passed as cli args - fixes #106",False
9ecf496fdeeaeef85914c0e2b9d43d0143efb728,2016-07-08 02:41:01,Shayne Sweeney,Version bump to 0.4.8,False
ab8a8feeead4c472e457b584cdd2f386cd5d063f,2016-07-08 02:40:30,Shayne Sweeney,"Merge pull request #101 from facebook/packages-root-param

Add packages-root as a cli option",True
83758b5bd2fc06d80a83ee48f6e7cad9bb407495,2016-07-08 02:29:06,Shayne Sweeney,Add packages-root as a cli option until we have better support for concurrent processes,False
d8059ad2ffda5299a57da6f59bc9df8132cfcb36,2016-07-06 04:55:37,Shayne Sweeney,Resolve realpaths for targetBinLoc and pkgLoc in linkSelfDependencies,False
def4e5422188a6aaf14bce6298d3fd7ec79da159,2016-07-06 00:40:05,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
ced95ad2f5f903d8fd89029e00c93bee2d037a8d,2016-07-06 00:39:44,Sebastian McKenzie,only relativise symlinks with an absolute source,False
f42b597d7c946486d5be87aca584d2847e01d1a3,2016-07-05 22:45:40,Sebastian McKenzie,"Merge pull request #95 from bestander/fix-import-pr-issue-77

Fixed scenario for importing a PR with package.json changed",True
229ef3d3d225366577e08670dc65577acb89061a,2016-07-05 22:41:48,Shayne Sweeney,Version bump to 0.4.7,False
bb0173a71a470372e26e71b55f6a145040587331,2016-07-05 22:40:30,Konstantin Raev,#78 is actually fixed too,False
36d73cc3bb0e3c4afcea4f25b06cc76b7b5531fa,2016-07-05 22:36:57,Sebastian McKenzie,make symlinks relative if possible - fixes #94,False
618f5cb39e0ae39681f10ba4fd526739526a7c82,2016-07-05 22:30:49,Konstantin Raev,allow --save without args,False
db5d1d79d75e7aaff3ece7cbb10ebe203dff2d81,2016-07-05 22:25:27,Konstantin Raev,"Fixed scenario for importing a PR with package.json changed

If package.json has changed you should be able to run `kpm install --save` to udpate offline mirror and fbkpm.lock with latest package.json.",False
f4738df277af03bcb22381e95f2c81caba1af90c,2016-07-05 22:10:24,Sebastian McKenzie,Merge branch 'master' of github.com:facebook/fbkpm,True
411205015b7d4f4af3c344062c1f85c64a32365c,2016-07-05 22:10:02,Sebastian McKenzie,don't accept a git pattern for the resolver if it has a name - fixes #59,False
7c52e1c75a5cfae756ae87f6e7e5817091689209,2016-07-05 18:43:30,Konstantin Raev,bump 0.4.6,False
13e0dbb3d7830145a9b09cb6706718406bb45a2c,2016-07-05 17:38:02,Konstantin Raev,"Mirror cached issue 80 (#92)

* wip

* Feature: --save to mirror now works when cache in .fbkpm exists

* nits var names

* nit: var names",False
97aadbead8dcebbe799ec3fa1c586ca2b626e1e9,2016-07-05 16:49:28,Konstantin Raev,"Marked network-sensitive tests (#90)

All tests that may fail because of network connectivitiy are now prefixed [network].
Reduced parallelism to 1, this makes them pass more often",False
70cf3ba6d30541d57c91542fb4c1928c4447a335,2016-07-04 20:11:31,Konstantin Raev,bump 0.4.5,False
753b413206b7baa317023953be629080bf45ecce,2016-07-04 20:10:26,Sebastian McKenzie,"Merge pull request #89 from bestander/hoist-jest-case

Added 2 more hoisting unit tests",True
fd30c0b7ad8b7d4ee268ec7ccb76a30165f70473,2016-07-04 20:05:16,Konstantin Raev,fixed #86 and lint errors,False
a2139953d59085eeb7dcbc7ec80b437ed2f3da82,2016-07-04 17:35:01,Konstantin Raev,more cleanup,False
45a821e1b2e7d32fe058322a5b81f7f6d469588c,2016-07-04 17:32:16,Konstantin Raev,refactored a bit,False
5b7b7ddadbf2d6c9c3af07378dae29c7673894bc,2016-07-03 16:57:04,Konstantin Raev,Added 2 more hoisting unit tests,False
a5fe4456aa590ed9a1949d29af25811ea9f4c383,2016-07-02 00:42:32,Konstantin Raev,bump 0.4.4,False
8da134f12872e090edf6b2f19744292afd17b0fe,2016-07-02 00:33:34,Konstantin Raev,0.4.3,False
277ad0477c845b8ab0fa116c102a64f379d0e135,2016-07-02 00:32:55,Konstantin Raev,bump 0.4.2,False
97bd7d782cc886bc87d23887982948ef4056b83a,2016-07-02 00:32:29,Konstantin Raev,Skipped a few tests and linked to issues,False
a83651a4c2a8a898bd8715c806bc14a171115dce,2016-07-01 22:11:08,Shayne Sweeney,Version bump to 0.4.1,False
62479d41688f6fde786094d38126187ba974e14c,2016-07-01 13:32:53,Sebastian McKenzie,use modulesFolder rather than cwd for .bin files - fixes #87,False
ae1912efd911ab58292ccc0d0c6a389e34f8c8b3,2016-06-30 04:00:13,Sebastian McKenzie,"t push
Merge branch 'master' of github.com:facebook/fbkpm",True
b2254b42160574bfc0d5f30613dd0a2f8e3381d3,2016-06-30 03:58:51,Sebastian McKenzie,consolidate weak and strict lockfile installing logic - fixes #86,False
ddb8bed1451bb93e82ee2291eb903248e0da5db5,2016-06-29 21:32:17,Konstantin Raev,0.4.0 release,False
9763b3ba9ad33816ac0caa7e42d4f7d3fc2cb7f5,2016-06-28 18:02:28,Sebastian McKenzie,"Merge pull request #82 from bestander/npmrc-relative

Added ability to load .npmrc anywhere from cwd and up",True
87847323841e308a96b2161c25993d29b14c9533,2016-06-28 00:48:46,Konstantin Raev,"Added ability to load .npmrc anywhere from cwd and up

Fixes #81

TODO: add tests",False
a070fced2f328c592f60c91d52ae83cae744eae2,2016-06-24 20:05:18,Sebastian McKenzie,"Merge pull request #76 from bestander/e2e-tests-3

e2e tests for fbsource integration",True
ec194bfe589145bd017360aa4d1d62b8dea1dfca,2016-06-24 10:26:40,Konstantin Raev,added test that passes,False
968eab6b5b9cda54e61d2a71794325a7152e6f45,2016-06-24 10:09:14,Konstantin Raev,added test for dedupe when installing top level dependency,False
6d92dd5ef5d834a443c216058e295ccade23876b,2016-06-24 09:31:07,Konstantin Raev,pr with package.json change scenario,False
76aeba5f42064a6147250fdcc094a2f3ee1ff282,2016-06-24 09:12:19,Konstantin Raev,comment,False
a7a77f34173bd0c1f382e6c3414851575974733e,2016-06-24 06:41:44,Konstantin Raev,added initMirror scenario,False
6357a1fe8969aee2f6a38d006826bb5b6788f766,2016-06-24 06:08:40,Konstantin Raev,added test case for PR import scenario,False
3c5348aa70b50fcabf27bcaa1b3d57f980e57bd2,2016-06-23 23:11:48,Konstantin Raev,upgrade scenario with deeper dependencies,False
6d503203504a8cac665df5140ed2e0c6f1eff286,2016-06-23 16:10:18,Sebastian McKenzie,fix minimum coverage stats,False
a2ac2f129ee17538f62eb1bc604b753b8a2c793c,2016-06-23 15:58:05,Sebastian McKenzie,update coverage requirements,False
6e4f1d36bbcb2852fa96649f236304f02138719b,2016-06-23 15:48:16,Sebastian McKenzie,don't warm cache with registry responses when we have a possible offline path - fixes #75,False
a01a88d2e63668a7643a1604cdb145a1c436feab,2016-06-23 15:37:29,Sebastian McKenzie,ok -> t,False
0a9e4a2261ad2f85d07ae4e52289fb7d03c57621,2016-06-23 15:32:02,Sebastian McKenzie,fix lint errors,False
2429cc427c72d6ca5383b5c22548baa1b3663ba0,2016-06-23 15:28:17,Sebastian McKenzie,Merge branch 'bestander-e2e-fbsource-tests',True
fa49227459e3dd87efb3a94c91f04c37c5fb2b05,2016-06-23 15:28:12,Sebastian McKenzie,"Merge branch 'e2e-fbsource-tests' of github.com:bestander/fbkpm into bestander-e2e-fbsource-tests

# Conflicts:
#	src/cli/commands/uninstall.js",True
ec762e653da5736a7fce4969a019eab7273b3b84,2016-06-23 15:27:05,Sebastian McKenzie,fix cli reference in bin/kpm,False
1d1a894dd639042b4bac1ab4a501a35adfd8ff0b,2016-06-23 15:26:54,Sebastian McKenzie,ensure transitive dependencies are removed when doing `kpm uninstall` - fixes #74,False
2c0f98fedbd00204f7977204689e57ecc3ed444c,2016-06-23 08:49:42,Konstantin Raev,Added another branch switch scenario test,False
3f1a03a91c3a8963ca7a0201bcccb5215e30cdb1,2016-06-23 08:34:59,Konstantin Raev,added change branch scenario where a change in packages causes dedupe to kick in,False
6007c9156d50c1571ea2c9ffecf14080a20a7734,2016-06-22 21:05:54,Konstantin Raev,added deep dependency uninstall test case,False
c1818ccf3020d1077fc3e319e6f93b5d53c93281,2016-06-22 20:17:52,Konstantin Raev,Implemented uninstall test,False
d9aebcdb24a49870293a4fdfe0ceff2fb9b8bd60,2016-06-22 16:50:55,Sebastian McKenzie,fix index reference,False
8300438761231a3efd723f11ca1d41c8eef6fcfe,2016-06-22 14:34:42,Sebastian McKenzie,suppress lint,False
a074bd908cdd7623e839b3fb2515298e86f5a179,2016-06-22 08:55:07,Sebastian McKenzie,update node version checks to throw on node <4,False
b7a48c0cdc8eb8d654e37544d8c791c0c8db7926,2016-06-22 08:54:49,Sebastian McKenzie,remove node 0.12 and iojs from travis,False
ba2375703921b4bf1f663a0e90a8710f1b51739d,2016-06-22 06:37:15,Sebastian McKenzie,add missing babel-core dependency,False
29eebf0e7b05c48782c1be2d63a58c9478a94fe6,2016-06-22 04:36:37,Sebastian McKenzie,fix lint errors,False
862d20b9b3bdc87b7fb3fde22ccea8383bef4e06,2016-06-22 04:26:09,Sebastian McKenzie,fix support for node 4 - fixes #63,False
c6e402300427823d7b3dd60132979a5ad74fb25e,2016-06-22 04:10:38,Sebastian McKenzie,add --modules-folder cli flag - fixes #71,False
5d91663ba423bbd9c58c2d48bcb7be64e303594b,2016-06-22 04:01:33,Sebastian McKenzie,add `--init-mirror` flag to `kpm install` - fixes #68,False
2ce0aaf38a9c00ada6922d309e855946243f2f63,2016-06-22 03:56:26,Sebastian McKenzie,finish `kpm uninstall` command,False
ffa5173b2ee00ad8ee3aadc93a3e03e447ecb9c0,2016-06-22 03:20:54,Sebastian McKenzie,clean up Lockfile.fromDirectory signature,False
754c0b7c136f382ac467d760cb1bcb4941ce4b3c,2016-06-22 03:17:20,Sebastian McKenzie,add `check` command - fixes #63,False
9c684097990bc5b8aa85ffbe7b2f3a8799cbbbe6,2016-06-22 02:44:10,Sebastian McKenzie,t.same -> t.deepEqual,False
3833874ffb04818c3327abfeefafd9dcbf2fdb18,2016-06-22 02:43:44,Sebastian McKenzie,fix upgrade alias,False
996ea5afcea8984fa7484d1fa71d046df6a2335e,2016-06-22 02:43:37,Sebastian McKenzie,"finish implementing --save flag - fixes #61

 - throw an error when using the --save flag on exotic patterns
 - exclude packages from install if their name is in the cli args",False
cbf70459a29667868071a3b4f63d25e932e23f36,2016-06-22 01:42:04,Sebastian McKenzie,"Merge pull request #72 from bestander/set-of-test-for-fbsource-1

Added new e2e tests for install commands",True
40f27a80caad2979464101ecc65947b1d0c1c7b9,2016-06-21 23:41:05,Shayne Sweeney,"Change gulpfile.js to be lowercase, for linux support",False
71767ada6655c8c9c2153e3d9393063d342ca7d1,2016-06-21 01:04:02,Konstantin Raev,uninstall scenario,False
58e56582d50270a79b43ffea8fd8ad527447a967,2016-06-18 00:32:25,Konstantin Raev,added update scenario,False
74266efb06e70b1ec92ec8e3479193ae72779d95,2016-06-17 20:38:39,Konstantin Raev,added unit test for fixed #67 issue,False
468b313a5c8f80baf88c62c7a2789e6497702ffd,2016-06-15 19:59:32,Konstantin Raev,"version: 0.3.0, ready for full testing",False
a77f67c0a5a2489e556ec07f9659e5395c667939,2016-06-15 09:01:14,Sebastian McKenzie,pop rather than shift last part of tree heirarchy stack - fixes #67,False
58795c960d8eed7649951755ed9245d6d96f9fdc,2016-06-13 22:06:59,Sebastian McKenzie,"Merge pull request #66 from facebook/alt-flatten-algo

Update existing flatten algorithm to handle edgecases",True
048eae6cf49ec281d2c042488b8e658a76580122,2016-06-13 22:00:25,Konstantin Raev,"Cleaned up, fixed lints and test descriptions",False
81208482aae38c45c1b2add2389d48c99b81c575,2016-06-12 19:52:36,Sebastian McKenzie,Merge branch 'alt-flatten-algo' of github.com:facebook/fbkpm into alt-flatten-algo,True
e8f38223cba485e56432eec356b6f8196defb50e,2016-06-12 19:52:28,Sebastian McKenzie,"Update flattening algorithm to handle invalid attempts to hoist to top level, also handle hoisting of transitive dependencies when we hoist a single dependency",False
adc56d89254d4bf9595f2c36a9e978af0d34d452,2016-06-12 19:19:47,Sebastian McKenzie,install npm 3 on travis builds,False
dcff016db22e4341097a1123d74e9dac6809cc16,2016-06-12 19:13:06,Sebastian McKenzie,"Update flattening algorithm to handle invalid attempts to hoist to top level, also handle hoisting of transitive dependencies when we hoist a single dependency",False
349d46ee0ad2edc7c765a4e8838e9133b292be49,2016-06-12 18:57:10,Sebastian McKenzie,update ava,False
f505f4537acd9ea9e14f2b5fda8e139cebe7ba38,2016-06-12 18:57:07,Sebastian McKenzie,random code style nits,False
d68210f99210941ddffb0022356b1071d1699ceb,2016-06-10 06:17:24,Sebastian McKenzie,"Merge pull request #64 from bestander/issue-62-react-native

Fixed flattening algorithm",True
2a3afd490aeee2f25a4e1a71a4caca5a641d5f95,2016-06-09 19:38:34,Konstantin Raev,"Fixed flattening algorithm

When package resolution looks like this
```
  A@2.0.1 -> B@2.0.0
  B@1.0.0
```
B@1.0.0 should be at top level and B@2.0.0 should be in node_modules of A.

Fixes #62.",False
1e7a1818b3ebf7825a2213770eb340e60ce30288,2016-06-07 03:25:32,Konstantin Raev,"Merge pull request #60 from bestander/npm-offline-mirror-support

Npm offline mirror support",True
72c4b4301e4ce2e579d73aa79b05d67206c73235,2016-06-07 00:17:16,Konstantin Raev,Enabled save to mirror in tarball downloader,False
90aa0e79c2c2941bbccfc89a2451817d5351fe47,2016-05-18 23:09:16,Shayne Sweeney,"Change fbkpm -> fb-kpm for final tar.gz, to match internal naming conventions",False
4daee567020430f500d7780d1bd5af881463345e,2016-05-17 22:51:02,Shayne Sweeney,Fix spaces issue in Makefile,False
6ec4cdea7ecc705f037d530c9b399fbc3c6add62,2016-05-17 22:45:42,Shayne Sweeney,Update build-dist to reference fbfkpm instead of kit,False
ae15b65a8c91e731e1ffbc2f2386d029d88a1552,2016-05-07 01:04:17,Shayne Sweeney,Removing node_modules and broken symlink from test/commands/,False
031da73377e48cde186dfb6710f4ca51c441e86a,2016-04-14 01:03:23,Sebastian McKenzie,"clean up dist make task, rename fbkpm bin to kpm",False
796a58970a473401f7b2ff06131d1d9bfc007e56,2016-04-14 00:35:30,Sebastian McKenzie,"Merge pull request #58 from facebook/fix-import

Fix import. s/update/upgrade",True
85104f59527202bdfc51da576600d35f128855bd,2016-04-14 00:27:24,James Kyle,Fix import. s/update/upgrade,False
17d81bc12b7283cdb8fb31f0ac9e6f5345c069e8,2016-04-05 00:37:39,Sebastian McKenzie,"Merge branch 'master' of github.com:facebook/kpm

# Conflicts:
#	README.md",True
ce25a9631a558cd919f3bd46adcb43b34a97f418,2016-04-05 00:34:56,Sebastian McKenzie,clean up,False
8878ee000741b03309e3db7d895ce94eb77a51cf,2016-03-16 04:02:05,Sebastian McKenzie,"Merge pull request #56 from gaearon/patch-1

Minor grammar fixes",True
c041491db5f5f816064ff3fa00cdb4795e16a7b3,2016-03-16 03:47:43,Dan Abramov,Minor grammar fixes,False
b0c5597c3b6a97aea01aa613be99069f96d1a672,2016-03-10 18:37:11,Sebastian McKenzie,add -y flag to install commands,False
1ac9eca3ab135d2ab259d018d4cc60cbaa58da07,2016-03-10 18:36:50,Sebastian McKenzie,"Revert ""remove linux git update""

This reverts commit e0b1809c93b3e0509a806490951fd652e7a365d0.",False
b26696b888c29765640169f178f46cd9920b0c5f,2016-03-10 18:04:46,Sebastian McKenzie,remove BailError,False
e0b1809c93b3e0509a806490951fd652e7a365d0,2016-03-10 17:35:52,Sebastian McKenzie,remove linux git update,False
ab446692345df97786dcf71160b19419b36b9200,2016-03-10 17:22:37,Sebastian McKenzie,pipe yes to linux git update,False
b0e302c5bbf24a644665b53ff2f23acd3c5c6d4c,2016-03-10 17:12:10,Sebastian McKenzie,add complete git linux update,False
136b2833cecae8bb501b585a2f3718cfcbab6ee5,2016-03-10 17:04:06,Sebastian McKenzie,set travis sudo to true,False
ec88f085956bfa91a82c066496c0784f59935dc8,2016-03-10 17:01:41,Sebastian McKenzie,update to latest git,False
b6868aca2f59d2020a911ad269e6abc696909321,2016-03-10 16:41:10,Sebastian McKenzie,add git version to travis,False
746428dd60045cfce2e073713861fa9b706400d4,2016-03-10 15:42:36,Sebastian McKenzie,use buffer reporter,False
0f9fbb727557302a2b963355f759dd400d7f658f,2016-03-10 15:37:39,Sebastian McKenzie,remove travis 0.10,False
72ad4803e95512a360a3f89bfb2452fe7e3a4088,2016-03-10 15:37:10,Sebastian McKenzie,use error buffer when we encounter a bail error,False
04c2e0b5586f77067c73d6d3dfe27322fb61a9fc,2016-03-10 15:20:13,Sebastian McKenzie,fix tests?,False
b00817b111026099538b2f916dca17c6837368ff,2016-03-10 14:59:56,Sebastian McKenzie,add temp references to suppress lint,False
2fbaa3ab548fbe6f3f71e1139397705719bfed56,2016-03-10 14:59:20,Sebastian McKenzie,hopefully fix tests for good,False
8c2b7aa4ed349df57874d48c8af07ffdfbc401c8,2016-03-10 13:54:12,Sebastian McKenzie,remove bluebird global assignment,False
4dbe1b1707b050ef171a8a5133489c54452aa5b1,2016-03-10 13:50:46,Sebastian McKenzie,fix nyc references,False
b796bfbec1b8e92b965b3dbda2e3ea3133b36408,2016-03-10 13:42:20,Sebastian McKenzie,reference nyc from node_modules/.bin,False
236ff41e6465dd4bbd1a4f8c01594035a23c9aa4,2016-03-10 13:36:30,Sebastian McKenzie,"remove node 0.8 testing, let -> var in gulpfile, fix references to kreporters in tests",False
6332ac7dfae667aa30d8556eba9e0e178b0f275b,2016-03-10 12:57:16,Sebastian McKenzie,fix lint and typecheck,False
5782c6b6fd1852b749eb96a651c85c6df73695d9,2016-03-08 07:49:27,Sebastian McKenzie,change missing kpm -> fbkpm,False
e2b041a1b9e07ec5ce976fb4343707808d05c716,2016-03-08 02:25:21,Sebastian McKenzie,rename references to kpm to fbkpm in README,False
d71798169e2d1434634d873b4c80f941d59852ed,2016-03-08 01:47:51,Sebastian McKenzie,misc cleanup,False
476b439b1ef1585f07d0e6b5e95de82f7528b323,2016-03-08 01:47:37,Sebastian McKenzie,add support for numbers to lockfile format,False
9ace758f0d9a69cd972e9285c172bdec7039846f,2016-03-08 01:47:21,Sebastian McKenzie,use kreporters,False
b984a2e3f88f68e05da55c105cbd3287503c6e79,2016-03-08 01:46:44,Sebastian McKenzie,move analysers to ext directories,False
21a581ce4a7fadfa7807c9d7a5b8eb2086a9d278,2016-02-21 23:51:11,Sebastian McKenzie,update wording in readme,False
af2453bdd6a56b8eea4a7771ba111f87b2af77e1,2016-02-21 23:49:50,Sebastian McKenzie,"fix lint/flow errors, make PackageReference#request an array",False
44beea3144d6d5fd2ab10ea12c7ac7b5bd00e66d,2016-02-21 22:22:18,Sebastian McKenzie,add support for peerDependencies,False
9074e6c50a46ab9d8a0ca5493409dacc1b0a0187,2016-02-21 22:22:06,Sebastian McKenzie,generalise reporter behaviour,False
c699afd2f290f3b3fa8b6822f545c51b09be1d04,2016-02-21 22:21:51,Sebastian McKenzie,turn registry filename into filenames to allow for kpm.json rather than package.json,False
ead28dce3e91fe5cc07721883c62db6bcc24631f,2016-02-21 22:21:10,Sebastian McKenzie,remove _seen property in favor of Maps,False
4de25909eae01cd9e4afa89bbf85afacaffe2802,2016-02-21 22:20:29,Sebastian McKenzie,upgrade ava,False
ce508e632704a891561e423e1e13b5f26f6516c2,2016-02-17 12:29:47,Sebastian McKenzie,more tests,False
5a34960dfa47aa9abf61c0d4abe2cccf7ece9061,2016-02-15 20:18:44,Sebastian McKenzie,"fix normalise-manifest tests, clean up reporter mock",False
916998d377ac7b13e40330957a9c8465e3c6ac6c,2016-02-15 19:12:03,Sebastian McKenzie,"fix lint/typecheck, rename package info to manifest - closes #49",False
e775c7df66212f7bff0e53f11616a997b897d559,2016-02-15 18:51:04,Sebastian McKenzie,more tests,False
d2b68a19b77cb140783b0dd4812965e73980ae8c,2016-02-15 13:02:43,Sebastian McKenzie,fix lint errors,False
8da76f489ffe2b76dbf7a100979c0e008a311c4b,2016-02-15 12:51:18,Sebastian McKenzie,"fix some lint errors, switch to klint, more tests, cleanup",False
e189f5a0db3e524e1b942a7b52bb8af20322392c,2016-02-15 12:50:27,Sebastian McKenzie,add normalise-package-info tests,False
f07c542759988dff660c9567e23deee83a51b5bf,2016-02-14 08:54:44,Sebastian McKenzie,add custom progres sbar,False
1e8e26cffcf618021512575c8e4d20afcd192cb6,2016-02-13 06:53:05,Sebastian McKenzie,link up top level bins,False
605e367395f5459b4e50107167495e179b4e8e0e,2016-02-13 06:12:14,Sebastian McKenzie,"add missing licenses, clean up util.fs, move some methods to Config",False
e089d576a1373f9ab4f9106f80c1b10ea6569ffb,2016-02-12 15:23:31,Sebastian McKenzie,revert back to ava 0.11,False
77735cdf8f51bd66d88dc60451411ee33fad4558,2016-02-12 15:23:16,Sebastian McKenzie,increase column width for contributing.md,False
5faf8eabfd32a7b4d7f9d8f092cdac75d327ad43,2016-02-12 15:16:43,Sebastian McKenzie,"fix typo in normalise package info, infer from README too if LICENSE doesn't work, ignore errors when clearing the directory on package fetcher errors",False
6d0833e15278bf41753b626ca8f581592064ee38,2016-02-12 15:16:07,Sebastian McKenzie,"add license field, use github ava",False
75908f78e51cdb02d2ce4ec337d3311c8e0b2fab,2016-02-12 15:15:58,Sebastian McKenzie,remove dead readme sections,False
bfe929bc341c0e8171b795fe8ab2202f1a4f66ef,2016-02-12 13:35:51,Sebastian McKenzie,more readme nits,False
58edae54b56e014b09adfb831c1a4b7bcf7d37ef,2016-02-12 13:35:45,Sebastian McKenzie,warm cache of known dependencies when fetching - fixes #45,False
9d184c92d1fe35edf4793cddf793f0e1b4939d41,2016-02-12 13:35:20,Sebastian McKenzie,fix eslint version,False
49c5fef9c0c37fee3a0b9b8c2696b0cca3ef2198,2016-02-12 12:30:07,Sebastian McKenzie,nits,False
731a1a32530f60fa9f5d5367fdb9c8065c71c5f3,2016-02-12 12:28:34,Sebastian McKenzie,clarify stance in readme,False
146b3a62b4373e8ff8f9444dd6b8958a35284344,2016-02-11 07:35:08,Sebastian McKenzie,fix lint/typecheck,False
7211ebf5acf02dcfeec723ad28cc2454307c64a2,2016-02-11 04:30:56,Sebastian McKenzie,"add PATENTS, CODE_OF_CONDUCT, LICENSE files",False
ce58162dbd04275dba532e4d76db9718acc417d7,2016-02-11 01:51:14,Sebastian McKenzie,punt on resolver relay as it's not very useful when you force a lockfile,False
361a13121b2f09fdfbe0a30ab3188d6855adb36a,2016-02-11 01:50:49,Sebastian McKenzie,flesh out analysis more,False
fa8ce817add51f3f2cef4f477ffee5ff60fdcd07,2016-02-10 02:32:48,Sebastian McKenzie,"more comments, split up install command",False
36a3db20fbc68883437d5b8525fcb8969c747e1a,2016-02-09 23:35:13,Sebastian McKenzie,"make require sources more absolute, combine package resolution and fetching",False
a43dccc6cb8907c367120b9f7abb13e710d867c5,2016-02-09 23:34:36,Sebastian McKenzie,"don't cache requests with a process hook, use keep-alive for perf, cache succssful domains for offline try",False
a9d5242e28d4e2be88b5e708a633ee84b26acda9,2016-02-09 23:34:03,Sebastian McKenzie,flesh out analysis,False
2cf6f830ea7e193462f80092cfce4d7ea511c959,2016-02-09 23:33:50,Sebastian McKenzie,update dependencies,False
d88f8513ec14c7a157617a7d928dd5595b493fda,2016-02-09 23:33:43,Sebastian McKenzie,remove inaccurate README statements,False
9f539d39c15921134c8520f3520a95ad61a16e22,2016-02-04 05:24:44,Sebastian McKenzie,update repo in usage,False
4ac189ad57847884ca4d4008038e8bdc2cd5ebcc,2016-02-04 05:04:33,Sebastian McKenzie,remove engineDependencies,False
1d2d557d6dbfb366758de4a620bf7871b581e7e1,2016-02-04 05:04:26,Sebastian McKenzie,update to cat emojis...,False
c40e5494d46988c4c60671a4518b22a767ff8a46,2016-02-04 03:53:35,Sebastian McKenzie,clean up readme features,False
d40235645b989adcbdd8f24c492ee68c32ef9ffd,2016-02-04 03:53:28,Sebastian McKenzie,start fleshing out analysers,False
3ab27529fcb76e3771bc4badb5a36bfa838bb23d,2016-02-04 03:53:22,Sebastian McKenzie,fix various nits,False
678e6fecd892598365cd395005e8dbb7a25f143f,2016-02-04 03:53:06,Sebastian McKenzie,add peak memory value to console reporter,False
c9ed0832154192dd4c087bdbfde0bb0ade8bca76,2016-02-03 22:40:56,Sebastian McKenzie,add dummy relay index.js file,False
334f9517140950d16515ba8fc9bbb7c845439c25,2016-02-03 22:40:48,Sebastian McKenzie,add skeleton FAQ,False
2a45a56074196f81b2a398877d60ecba3d137960,2016-02-03 22:40:31,Sebastian McKenzie,update flow-bin and babel-eslint,False
fb311d9f2ac81d16b87cb738bc9046945569154f,2016-02-03 22:40:18,Sebastian McKenzie,update git fetcher init method name,False
2cf205e587e27e7cce3abe581a2c6fc788a418a9,2016-02-03 22:40:09,Sebastian McKenzie,fix registry folder name reference,False
68a39e94acc268a88ac504754859a56630afb4b0,2016-02-03 22:40:00,Sebastian McKenzie,add use of HTTP APIs in HostedGitResolver,False
2ebb4f25b0a3a0609b0a10e03b998f0a624fba0f,2016-02-03 22:39:32,Sebastian McKenzie,fixed version tuple index lookup,False
cdbf39988338f63af4b1f2b9ed2c8e9d71aa9ac0,2016-02-03 22:39:20,Sebastian McKenzie,more registry config options,False
35a542c6d5c0dacec0e16f82b94c8cbbea388801,2016-02-03 22:38:59,Sebastian McKenzie,move up packagesRoot config init method,False
09dbf445081973ec274dd15c915ce515cb714ce7,2016-02-03 22:38:47,Sebastian McKenzie,remove Reporter arg from internal classes in favor of fetching it from Config,False
769e349fe5877b8382ed4fe9294dca141d2eb72a,2016-02-02 07:28:48,Sebastian McKenzie,finish missing npm normalise package info fields,False
1225a8070bea0e0fa2daf954b8a70f2e74acc55d,2016-02-02 07:28:36,Sebastian McKenzie,"abstract out registries out cleanly so we can have proper config fetching, abstract hosted git",False
b33328b143a212a5b781adfc86fc4a31565dba8e,2016-02-01 17:29:00,Sebastian McKenzie,fix tests,False
110bf19edf3b88cf6958c31e769ff07752eb7cd5,2016-02-01 16:49:45,Sebastian McKenzie,enable more eslint rules,False
5807e4ac76ea30efcb20049f2f264686d9f623dc,2016-02-01 16:06:37,Sebastian McKenzie,"fix flow, lint, clean up some flow types, switch to util map",False
d36d6b175f9bf39e83f6cb18a07f7290c5a8a9c5,2016-02-01 04:31:00,Sebastian McKenzie,move long type params to separate lines,False
c711a20cb2a095b2c046e2acca9571647083b2e9,2016-02-01 04:30:43,Sebastian McKenzie,"aliase iojs engine to node, ignore npm engines",False
b1c2e60b6fc3f945bb641cd385f542012cc66ec8,2016-02-01 04:30:29,Sebastian McKenzie,start on Reporter#question,False
b802f614966e70fab22e97ad21a4badf1d42cdae,2016-02-01 04:30:00,Sebastian McKenzie,make request manager more generic,False
54aa72140b01fb5aaf454a621f28e2b75c1017bd,2016-02-01 04:29:07,Sebastian McKenzie,remove dead bluebird assignment,False
ceba539c42d50c5f9360e2ac2c11996bbeb41e33,2016-02-01 04:28:55,Sebastian McKenzie,check for booleans in lockfile.stringify,False
f8205cbd8f7336de5bd468515b6f57b24a46ac5e,2016-02-01 04:28:39,Sebastian McKenzie,add tests for lockfile,False
ce731c215e328e7e733aa500f5bfa5138b1f0a6b,2016-02-01 04:28:33,Sebastian McKenzie,add map util,False
b332c1e17ea19b8ce4729d688d3e2aa00097cde2,2016-02-01 04:28:08,Sebastian McKenzie,remove use of lodash in install command,False
f47ca415221440a473dfb6e624ddd210aad3ab8c,2016-02-01 04:27:59,Sebastian McKenzie,upgrade ava,False
176c9f4c3fad1daf6716ef126b1f04a79cf8dcd9,2016-01-26 20:59:58,Sebastian McKenzie,"add test coverage, remove a bunch of flow suppressions",False
051f64dac10a7b41a851cb1e524bef9bfec1f349,2016-01-26 20:59:34,Sebastian McKenzie,add engineDependencies - fixes #31,False
f63ae5ead4fe9c5913253772c635f11575725dd9,2016-01-24 16:41:30,Sebastian McKenzie,more emojis,False
26ecd74d650c810be3af1a46145546510c933e5e,2016-01-24 16:29:05,Sebastian McKenzie,switch around performance and security,False
5b46f854890ed3665b052661c3859a359478605c,2016-01-24 16:26:38,Sebastian McKenzie,fix link to logo in readme,False
1532cf704521387fe09b3c781768c63ea9467ba7,2016-01-24 16:25:50,Sebastian McKenzie,add more whitespace,False
12b6ecdb99fb88c1b7874012787135539e12cf55,2016-01-24 16:22:39,Sebastian McKenzie,fix logo url,False
16336731c50e61da7a058dba318b93407b8115b9,2016-01-24 16:21:17,Sebastian McKenzie,add exports,False
771de6d6c91509e10da308369da6d29655b95345,2016-01-24 16:20:56,Sebastian McKenzie,add logo,False
c3670f99de523b84a0d896fb9c6b4e45ee6831a7,2016-01-24 14:31:24,Sebastian McKenzie,elaborate on screenshot,False
cf1668fbe6e2defb64870cb1399ae0c2308ae168,2016-01-24 14:28:57,Sebastian McKenzie,add newline to lockfile,False
ccc4743953e3a2f9223e0490c90edc65cb9c2e3d,2016-01-24 14:28:50,Sebastian McKenzie,reorder readme,False
acd1e085da4c1e1860d65a23896e4a55ff047696,2016-01-24 14:26:13,Sebastian McKenzie,"prioritise certain lockfile fields, add pointers to duplicated lockfile patterns",False
ddf5d592f2d4efb144bd6a850d9a192908b51942,2016-01-24 14:04:31,Sebastian McKenzie,"add custom lockfile format, rename shrinkwrap to lockfile, remove directory lock feature",False
274a3deb27945fbbb87ef29139b4e6c86af25ae6,2016-01-24 07:00:20,Sebastian McKenzie,remove test.js,False
1e6ef9f18296f647d316462727f81cbf373e0dd5,2016-01-24 06:52:53,Sebastian McKenzie,add legacy pre node 5 support!,False
4d030dd8308722e17fd6baff12754de9f441402e,2016-01-24 06:15:13,Sebastian McKenzie,ensure semicolons,False
085af3274f32579205f291d70c0555594ec6db1e,2016-01-24 06:04:50,Sebastian McKenzie,clean up readme,False
f611a580ceba397cedef33315c27b42568cfe6b4,2016-01-24 05:56:16,Sebastian McKenzie,abstract out constraint resolver - fixes #28,False
086c2ecceb280b15cbece9337c1b588899a4a08c,2016-01-23 15:36:17,Sebastian McKenzie,first commit,False
